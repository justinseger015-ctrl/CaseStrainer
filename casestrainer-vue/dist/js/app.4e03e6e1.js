(()=>{"use strict";var t={721:(t,e,n)=>{n.d(e,{A:()=>q});var a=n(641),i=n(33),r=n(3751),o={class:"multitool-confirmed"},s={class:"card"},l={class:"card-body"},c={key:0,class:"text-center py-4"},u={key:1,class:"alert alert-danger"},d={key:2,class:"alert alert-info"},f={key:3},p={class:"mb-3"},v={class:"table-responsive"},m={class:"table table-striped table-hover"},g={key:0},h={key:1},k={class:"progress"},b=["aria-valuenow"],C=["href"],y=["href"],L=["onClick"],_={class:"modal fade",id:"contextModal",tabindex:"-1","aria-labelledby":"contextModalLabel","aria-hidden":"true"},x={class:"modal-dialog modal-lg"},w={class:"modal-content"},A={class:"modal-body"},E={key:0},S={key:0,class:"citation-details mb-3"},T={class:"row"},I={key:0,class:"col-md-4"},R={key:1,class:"col-md-4"},N={key:2,class:"col-md-4"},O={class:"row mt-2"},F={key:0,class:"col-md-6"},X={key:1,class:"col-md-6"},P={class:"context-text"},D={key:1,class:"mt-3"},M=["href"];function U(t,e,n,U,z,W){return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",s,[e[11]||(e[11]=(0,a.Lk)("div",{class:"card-header bg-info text-white"},[(0,a.Lk)("h5",null,"Citations Confirmed with Multi-tool"),(0,a.Lk)("p",{class:"mb-0"},"These citations were verified using multiple sources but not found in CourtListener")],-1)),(0,a.Lk)("div",l,[z.loading?((0,a.uX)(),(0,a.CE)("div",c,e[1]||(e[1]=[(0,a.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,a.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,a.Lk)("p",{class:"mt-2"},"Loading citations...",-1)]))):z.error?((0,a.uX)(),(0,a.CE)("div",u,[e[2]||(e[2]=(0,a.Lk)("h5",null,"Error",-1)),(0,a.Lk)("p",null,(0,i.v_)(z.error),1)])):0===z.citations.length?((0,a.uX)(),(0,a.CE)("div",d,e[3]||(e[3]=[(0,a.Lk)("p",null,"No citations verified with multi-tool found.",-1)]))):((0,a.uX)(),(0,a.CE)("div",f,[(0,a.Lk)("div",p,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control",placeholder:"Search citations...","onUpdate:modelValue":e[0]||(e[0]=function(t){return z.searchQuery=t})},null,512),[[r.Jo,z.searchQuery]])]),(0,a.Lk)("div",v,[(0,a.Lk)("table",m,[e[10]||(e[10]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Citation"),(0,a.Lk)("th",null,"Case Name"),(0,a.Lk)("th",null,"Source"),(0,a.Lk)("th",null,"Details"),(0,a.Lk)("th",null,"Confidence"),(0,a.Lk)("th",null,"Actions")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(W.filteredCitations,(function(t,n){return(0,a.uX)(),(0,a.CE)("tr",{key:n},[(0,a.Lk)("td",null,(0,i.v_)(t.citation_text),1),(0,a.Lk)("td",null,(0,i.v_)(t.case_name||"Unknown"),1),(0,a.Lk)("td",null,(0,i.v_)(t.source),1),(0,a.Lk)("td",null,[t.volume||t.reporter||t.page?((0,a.uX)(),(0,a.CE)("span",g,[e[4]||(e[4]=(0,a.Lk)("strong",null,"Vol:",-1)),(0,a.eW)(" "+(0,i.v_)(t.volume||"N/A")+" ",1),e[5]||(e[5]=(0,a.Lk)("strong",null,"Rep:",-1)),(0,a.eW)(" "+(0,i.v_)(t.reporter||"N/A")+" ",1),e[6]||(e[6]=(0,a.Lk)("strong",null,"Pg:",-1)),(0,a.eW)(" "+(0,i.v_)(t.page||"N/A")+" ",1),e[7]||(e[7]=(0,a.Lk)("br",null,null,-1))])):(0,a.Q3)("",!0),t.court||t.year?((0,a.uX)(),(0,a.CE)("span",h,[e[8]||(e[8]=(0,a.Lk)("strong",null,"Court:",-1)),(0,a.eW)(" "+(0,i.v_)(t.court||"N/A")+" ",1),e[9]||(e[9]=(0,a.Lk)("strong",null,"Year:",-1)),(0,a.eW)(" "+(0,i.v_)(t.year||"N/A"),1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("td",null,[(0,a.Lk)("div",k,[(0,a.Lk)("div",{class:(0,i.C4)(["progress-bar",W.getConfidenceClass(t.confidence)]),role:"progressbar",style:(0,i.Tr)({width:100*t.confidence+"%"}),"aria-valuenow":100*t.confidence,"aria-valuemin":"0","aria-valuemax":"100"},(0,i.v_)(Math.round(100*t.confidence))+"% ",15,b)])]),(0,a.Lk)("td",null,[t.url?((0,a.uX)(),(0,a.CE)("a",{key:0,href:t.url,target:"_blank",class:"btn btn-sm btn-outline-primary"}," View Source ",8,C)):(0,a.Q3)("",!0),t.file_link?((0,a.uX)(),(0,a.CE)("a",{key:1,href:t.file_link,target:"_blank",class:"btn btn-sm btn-outline-secondary ms-1"}," Source File ",8,y)):(0,a.Q3)("",!0),t.context?((0,a.uX)(),(0,a.CE)("button",{key:2,class:"btn btn-sm btn-outline-info ms-1",onClick:function(e){return W.showContext(t)}}," View Context ",8,L)):(0,a.Q3)("",!0)])])})),128))])])])]))])]),(0,a.Lk)("div",_,[(0,a.Lk)("div",x,[(0,a.Lk)("div",w,[e[20]||(e[20]=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h5",{class:"modal-title",id:"contextModalLabel"},"Citation Context"),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,a.Lk)("div",A,[z.selectedCitation?((0,a.uX)(),(0,a.CE)("div",E,[(0,a.Lk)("h6",null,"Citation: "+(0,i.v_)(z.selectedCitation.citation_text),1),z.selectedCitation.volume||z.selectedCitation.reporter||z.selectedCitation.page||z.selectedCitation.court||z.selectedCitation.year?((0,a.uX)(),(0,a.CE)("div",S,[e[17]||(e[17]=(0,a.Lk)("h6",null,"Citation Details:",-1)),(0,a.Lk)("div",T,[z.selectedCitation.volume?((0,a.uX)(),(0,a.CE)("div",I,[e[12]||(e[12]=(0,a.Lk)("strong",null,"Volume:",-1)),(0,a.eW)(" "+(0,i.v_)(z.selectedCitation.volume),1)])):(0,a.Q3)("",!0),z.selectedCitation.reporter?((0,a.uX)(),(0,a.CE)("div",R,[e[13]||(e[13]=(0,a.Lk)("strong",null,"Reporter:",-1)),(0,a.eW)(" "+(0,i.v_)(z.selectedCitation.reporter),1)])):(0,a.Q3)("",!0),z.selectedCitation.page?((0,a.uX)(),(0,a.CE)("div",N,[e[14]||(e[14]=(0,a.Lk)("strong",null,"Page:",-1)),(0,a.eW)(" "+(0,i.v_)(z.selectedCitation.page),1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",O,[z.selectedCitation.court?((0,a.uX)(),(0,a.CE)("div",F,[e[15]||(e[15]=(0,a.Lk)("strong",null,"Court:",-1)),(0,a.eW)(" "+(0,i.v_)(z.selectedCitation.court),1)])):(0,a.Q3)("",!0),z.selectedCitation.year?((0,a.uX)(),(0,a.CE)("div",X,[e[16]||(e[16]=(0,a.Lk)("strong",null,"Year:",-1)),(0,a.eW)(" "+(0,i.v_)(z.selectedCitation.year),1)])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),e[19]||(e[19]=(0,a.Lk)("h6",null,"Citation Context:",-1)),(0,a.Lk)("p",P,(0,i.v_)(z.selectedCitation.context),1),z.selectedCitation.file_link?((0,a.uX)(),(0,a.CE)("div",D,[(0,a.Lk)("a",{href:z.selectedCitation.file_link,target:"_blank",class:"btn btn-outline-primary"},e[18]||(e[18]=[(0,a.Lk)("i",{class:"bi bi-file-earmark-text"},null,-1),(0,a.eW)(" View Source Document ")]),8,M)])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)]),e[21]||(e[21]=(0,a.Lk)("div",{class:"modal-footer"},[(0,a.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])])])}var z=n(4048),W=n(388),Q=(n(2008),n(4423),n(2062),n(8111),n(2489),n(1701),n(6099),n(1699),n(2505)),V=n.n(Q),B=n(454);const j={name:"MultitoolConfirmed",data:function(){return{citations:[],loading:!0,error:null,searchQuery:"",selectedCitation:null,contextModal:null}},computed:{filteredCitations:function(){if(!this.searchQuery)return this.citations;var t=this.searchQuery.toLowerCase();return this.citations.filter((function(e){return e.citation_text.toLowerCase().includes(t)||e.case_name&&e.case_name.toLowerCase().includes(t)}))}},methods:{fetchCitations:function(){var t=this;return(0,W.A)((0,z.A)().mark((function e(){var n,a,i;return(0,z.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,t.error=null,e.prev=2,e.prev=3,e.next=6,V().get("/citation_verification_results.json");case 6:if(n=e.sent,!(n.data&&n.data.newly_confirmed&&n.data.newly_confirmed.length>0)){e.next=12;break}return t.citations=n.data.newly_confirmed.map((function(t){return{citation_text:t.citation_text,case_name:t.case_name||"Unknown",confidence:t.confidence||.8,source:t.source||"Multi-source Verification",url:t.url||"",explanation:t.explanation||"No explanation available",document:t.document||""}})),console.log("Loaded",t.citations.length,"citations from JSON file"),t.loading=!1,e.abrupt("return");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),console.warn("Error loading from JSON file directly:",e.t0);case 17:return e.prev=17,e.next=20,V().get("/api/confirmed_with_multitool_data");case 20:a=e.sent,e.next=38;break;case 23:return e.prev=23,e.t1=e["catch"](17),console.warn("First endpoint attempt failed, trying alternate endpoint:",e.t1),e.prev=26,e.next=29,V().get("/api/confirmed-with-multitool-data");case 29:a=e.sent,e.next=38;break;case 32:return e.prev=32,e.t2=e["catch"](26),console.warn("Second endpoint attempt failed, trying with full path:",e.t2),e.next=37,V().get("/casestrainer/api/confirmed_with_multitool_data");case 37:a=e.sent;case 38:a.data&&a.data.citations&&(t.citations=a.data.citations),e.next=45;break;case 41:e.prev=41,e.t3=e["catch"](2),console.error("Error fetching multitool confirmed citations:",e.t3),t.error=(null===(i=e.t3.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.error)||"An error occurred while fetching citations";case 45:return e.prev=45,t.loading=!1,e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[2,41,45,48],[3,14],[17,23],[26,32]])})))()},getConfidenceClass:function(t){return t>=.8?"bg-success":t>=.6?"bg-info":t>=.4?"bg-warning":"bg-danger"},showContext:function(t){this.selectedCitation=t,this.contextModal.show()}},mounted:function(){this.fetchCitations(),this.contextModal=new B.Modal(document.getElementById("contextModal"))}};var G=n(6262);const J=(0,G.A)(j,[["render",U],["__scopeId","data-v-7641de98"]]),q=J},5023:(t,e,n)=>{n.d(e,{A:()=>f});var a=n(641),i=n(33),r={key:0,class:"mb-3"},o={class:"progress"},s={class:"progress-bar progress-bar-striped progress-bar-animated bg-info",role:"progressbar",style:{width:"100%"}};function l(t,e,n,l,c,u){return n.loading?((0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",o,[(0,a.Lk)("div",s,(0,i.v_)(n.message),1)])])):(0,a.Q3)("",!0)}const c={name:"ProgressBar",props:{loading:{type:Boolean,required:!0},message:{type:String,default:"Loading..."}}};var u=n(6262);const d=(0,u.A)(c,[["render",l],["__scopeId","data-v-0296b6d4"]]),f=d},5703:(t,e,n)=>{n.d(e,{A:()=>lt});var a=n(641),i=n(33),r={key:0,class:"reusable-results"},o={key:0,class:"alert alert-warning"},s={class:"card mt-4"},l={class:"card-body"},c={class:"alert alert-success mb-3"},u={class:"mb-0"},d={class:"citation-stats mb-4"},f={class:"row g-3"},p={class:"col-md-4"},v={class:"card bg-light"},m={class:"card-body text-center"},g={class:"mb-0"},h={class:"col-md-4"},k={class:"card bg-light"},b={class:"card-body text-center"},C={class:"mb-0 text-success"},y={class:"col-md-4"},L={class:"card bg-light"},_={class:"card-body text-center"},x={class:"mb-0 text-danger"},w={class:"nav nav-tabs mt-4",role:"tablist"},A={class:"nav-item",role:"presentation"},E={class:"badge bg-secondary ms-1"},S={class:"nav-item",role:"presentation"},T={class:"badge bg-success ms-1"},I={class:"nav-item",role:"presentation"},R={class:"badge bg-primary ms-1"},N={class:"nav-item",role:"presentation"},O={class:"badge bg-warning text-dark ms-1"},F={key:0,class:"nav-item",role:"presentation"},X={class:"badge bg-danger ms-1"},P={class:"tab-content mt-3"},D={key:0},M={class:"table-responsive"},U={class:"table table-striped table-hover"},z={class:"badge bg-warning text-dark"},W={class:"mb-0"},Q={key:1,class:"alert alert-info"};function V(t,e,n,V,B,j){var G=(0,a.g2)("CitationTable");return n.results?((0,a.uX)(),(0,a.CE)("div",r,[n.hasTechnicalError?((0,a.uX)(),(0,a.CE)("div",o,e[5]||(e[5]=[(0,a.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1),(0,a.eW)(" Some citations could not be verified due to technical issues. Please try again later or contact support if the problem persists. ")]))):(0,a.Q3)("",!0),(0,a.Lk)("div",s,[e[21]||(e[21]=(0,a.Lk)("div",{class:"card-header bg-primary text-white"},[(0,a.Lk)("h5",{class:"mb-0"},"Citation Analysis Results")],-1)),(0,a.Lk)("div",l,[(0,a.Lk)("div",c,[e[6]||(e[6]=(0,a.Lk)("h5",null,[(0,a.Lk)("i",{class:"fas fa-check-circle me-2"}),(0,a.eW)("Analysis Complete")],-1)),(0,a.Lk)("p",u,"Found "+(0,i.v_)(j.totalCitations)+" citations in the document.",1)]),(0,a.Lk)("div",d,[(0,a.Lk)("div",f,[(0,a.Lk)("div",p,[(0,a.Lk)("div",v,[(0,a.Lk)("div",m,[e[7]||(e[7]=(0,a.Lk)("h6",{class:"card-subtitle mb-1 text-muted"},"Total Citations",-1)),(0,a.Lk)("h3",g,(0,i.v_)(j.totalCitations),1)])])]),(0,a.Lk)("div",h,[(0,a.Lk)("div",k,[(0,a.Lk)("div",b,[e[8]||(e[8]=(0,a.Lk)("h6",{class:"card-subtitle mb-1 text-muted"},"Verified",-1)),(0,a.Lk)("h3",C,(0,i.v_)(j.verifiedCount),1)])])]),(0,a.Lk)("div",y,[(0,a.Lk)("div",L,[(0,a.Lk)("div",_,[e[9]||(e[9]=(0,a.Lk)("h6",{class:"card-subtitle mb-1 text-muted"},"Unverified",-1)),(0,a.Lk)("h3",x,(0,i.v_)(j.unverifiedCount),1)])])])])]),(0,a.Lk)("ul",w,[(0,a.Lk)("li",A,[(0,a.Lk)("button",{class:(0,i.C4)(["nav-link",{active:"all"===B.activeTab}]),onClick:e[0]||(e[0]=function(t){return B.activeTab="all"}),type:"button"},[e[10]||(e[10]=(0,a.eW)(" All Citations ")),(0,a.Lk)("span",E,(0,i.v_)(j.totalCitations),1)],2)]),(0,a.Lk)("li",S,[(0,a.Lk)("button",{class:(0,i.C4)(["nav-link",{active:"courtlistener"===B.activeTab}]),onClick:e[1]||(e[1]=function(t){return B.activeTab="courtlistener"}),type:"button"},[e[11]||(e[11]=(0,a.Lk)("i",{class:"fas fa-check-circle text-success me-1"},null,-1)),e[12]||(e[12]=(0,a.eW)(" CourtListener ")),(0,a.Lk)("span",T,(0,i.v_)(j.courtListenerCount),1)],2)]),(0,a.Lk)("li",I,[(0,a.Lk)("button",{class:(0,i.C4)(["nav-link",{active:"verified"===B.activeTab}]),onClick:e[2]||(e[2]=function(t){return B.activeTab="verified"}),type:"button"},[e[13]||(e[13]=(0,a.Lk)("i",{class:"fas fa-check text-primary me-1"},null,-1)),e[14]||(e[14]=(0,a.eW)(" Other Verified ")),(0,a.Lk)("span",R,(0,i.v_)(j.otherVerifiedCount),1)],2)]),(0,a.Lk)("li",N,[(0,a.Lk)("button",{class:(0,i.C4)(["nav-link",{active:"unverified"===B.activeTab}]),onClick:e[3]||(e[3]=function(t){return B.activeTab="unverified"}),type:"button"},[e[15]||(e[15]=(0,a.Lk)("i",{class:"fas fa-exclamation-triangle text-warning me-1"},null,-1)),e[16]||(e[16]=(0,a.eW)(" Unverified ")),(0,a.Lk)("span",O,(0,i.v_)(j.unverifiedCount),1)],2)]),j.hasUnlikelyCitations?((0,a.uX)(),(0,a.CE)("li",F,[(0,a.Lk)("button",{class:(0,i.C4)(["nav-link",{active:"unlikely"===B.activeTab}]),onClick:e[4]||(e[4]=function(t){return B.activeTab="unlikely"}),type:"button"},[e[17]||(e[17]=(0,a.Lk)("i",{class:"fas fa-question-circle text-danger me-1"},null,-1)),e[18]||(e[18]=(0,a.eW)(" Questionable ")),(0,a.Lk)("span",X,(0,i.v_)(n.results.unlikely_citations.length),1)],2)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",P,[(0,a.Lk)("div",{class:(0,i.C4)(["tab-pane fade",{show:"all"===B.activeTab,active:"all"===B.activeTab}])},[(0,a.bF)(G,{citations:j.filteredCitations("all")},null,8,["citations"])],2),(0,a.Lk)("div",{class:(0,i.C4)(["tab-pane fade",{show:"courtlistener"===B.activeTab,active:"courtlistener"===B.activeTab}])},[(0,a.bF)(G,{citations:j.filteredCitations("courtlistener"),"empty-message":"No citations verified by CourtListener found."},null,8,["citations"])],2),(0,a.Lk)("div",{class:(0,i.C4)(["tab-pane fade",{show:"verified"===B.activeTab,active:"verified"===B.activeTab}])},[(0,a.bF)(G,{citations:j.filteredCitations("verified"),"empty-message":"No other verified citations found."},null,8,["citations"])],2),(0,a.Lk)("div",{class:(0,i.C4)(["tab-pane fade",{show:"unverified"===B.activeTab,active:"unverified"===B.activeTab}])},[(0,a.bF)(G,{citations:j.filteredCitations("unverified"),"empty-message":"No unverified citations found."},null,8,["citations"])],2),(0,a.Lk)("div",{class:(0,i.C4)(["tab-pane fade",{show:"unlikely"===B.activeTab,active:"unlikely"===B.activeTab}])},[n.results.unlikely_citations&&n.results.unlikely_citations.length?((0,a.uX)(),(0,a.CE)("div",D,[e[20]||(e[20]=(0,a.Lk)("h6",null,"Unlikely Citations (Artifacts or Invalid):",-1)),(0,a.Lk)("div",M,[(0,a.Lk)("table",U,[e[19]||(e[19]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Citation Text"),(0,a.Lk)("th",null,"Reason"),(0,a.Lk)("th",null,"Metadata")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.results.unlikely_citations,(function(t,e){return(0,a.uX)(),(0,a.CE)("tr",{key:"unlikely-"+e},[(0,a.Lk)("td",null,(0,i.v_)(t.citation_text),1),(0,a.Lk)("td",null,[(0,a.Lk)("span",z,(0,i.v_)(t.metadata&&t.metadata.invalid_reason?t.metadata.invalid_reason:"Unknown"),1)]),(0,a.Lk)("td",null,[(0,a.Lk)("pre",W,(0,i.v_)(t.metadata),1)])])})),128))])])])])):((0,a.uX)(),(0,a.CE)("div",Q,"No unlikely citations detected."))],2)])])])])):(0,a.Q3)("",!0)}var B=n(9201),j=(n(2008),n(2062),n(8111),n(2489),n(1701),n(9432),n(6099),{class:"citation-table"}),G={key:0,class:"table-responsive"},J={class:"table table-striped table-hover"},q={class:"citation-text"},H={key:0,class:"fas fa-check-circle text-success me-1"},K={key:1,class:"fas fa-exclamation-triangle text-warning me-1"},$={key:1},Y=["title"],Z={key:1},tt={key:1,class:"alert alert-info mb-0"};function et(t,e,n,r,o,s){return(0,a.uX)(),(0,a.CE)("div",j,[n.citations&&n.citations.length>0?((0,a.uX)(),(0,a.CE)("div",G,[(0,a.Lk)("table",J,[e[1]||(e[1]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Citation"),(0,a.Lk)("th",null,"Status"),(0,a.Lk)("th",null,"Validation Method"),(0,a.Lk)("th",null,"Case Name"),(0,a.Lk)("th",null,"Details")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.citations,(function(t,n){return(0,a.uX)(),(0,a.CE)("tr",{key:"citation-"+n},[(0,a.Lk)("td",q,[t.verified?((0,a.uX)(),(0,a.CE)("i",H)):((0,a.uX)(),(0,a.CE)("i",K)),(0,a.eW)(" "+(0,i.v_)(t.citation),1)]),(0,a.Lk)("td",null,[(0,a.Lk)("span",{class:(0,i.C4)(["badge",t.verified?"bg-success":"bg-warning text-dark"])},(0,i.v_)(t.verified?"Verified":"Unverified"),3)]),(0,a.Lk)("td",null,[t.validation_method?((0,a.uX)(),(0,a.CE)("span",{key:0,class:(0,i.C4)(["badge",s.getBadgeClass(t.validation_method)])},(0,i.v_)(t.validation_method),3)):((0,a.uX)(),(0,a.CE)("span",$,"-"))]),(0,a.Lk)("td",null,(0,i.v_)(t.case_name||"-"),1),(0,a.Lk)("td",null,[t.metadata&&t.metadata.explanation?((0,a.uX)(),(0,a.CE)("span",{key:0,class:"text-muted small",title:t.metadata.explanation},e[0]||(e[0]=[(0,a.Lk)("i",{class:"fas fa-info-circle"},null,-1),(0,a.eW)(" Info ")]),8,Y)):((0,a.uX)(),(0,a.CE)("span",Z,"-"))])])})),128))])])])):((0,a.uX)(),(0,a.CE)("div",tt,(0,i.v_)(n.emptyMessage||"No citations found."),1))])}const nt={name:"CitationTable",props:{citations:{type:Array,default:function(){return[]}},emptyMessage:{type:String,default:"No citations found."}},methods:{getBadgeClass:function(t){var e={CourtListener:"bg-success",Landmark:"bg-primary",Multitool:"bg-info",Manual:"bg-secondary",Other:"bg-secondary"};return e[t]||"bg-dark"}}};var at=n(6262);const it=(0,at.A)(nt,[["render",et],["__scopeId","data-v-48dc65de"]]),rt=it,ot={name:"ReusableResults",components:{CitationTable:rt},props:{results:{type:Object,required:!0},hasTechnicalError:{type:Boolean,default:!1}},data:function(){return{activeTab:"all"}},computed:{totalCitations:function(){var t;return(null===(t=this.results.validation_results)||void 0===t?void 0:t.length)||0},verifiedCount:function(){var t=this;return this.results.validation_results?this.results.validation_results.filter((function(e){var n=t.formatCitation(e);return!0===(null===n||void 0===n?void 0:n.verified)})).length:0},unverifiedCount:function(){var t=this;return this.results.validation_results?this.results.validation_results.filter((function(e){var n=t.formatCitation(e);return!0!==(null===n||void 0===n?void 0:n.verified)})).length:0},courtListenerCount:function(){return this.filteredCitations("courtlistener").length},otherVerifiedCount:function(){return this.filteredCitations("verified").length-this.courtListenerCount},hasUnlikelyCitations:function(){return this.results.unlikely_citations&&this.results.unlikely_citations.length>0}},methods:{formatCitation:function(t){try{var e,n,a,i,r=null!==(e=t)&&void 0!==e&&e.__v_raw?t.__v_raw:t;if("string"===typeof r)try{t=JSON.parse(r)}catch(p){return console.warn("Failed to parse citation as JSON:",r),null}else t=r;if(null!==(n=t)&&void 0!==n&&n.citation_text||null!==(a=t)&&void 0!==a&&a.text||null!==(i=t)&&void 0!==i&&null!==(i=i.citation)&&void 0!==i&&i.citation_text){var o,s,l,c,u=t.citation_text||t.text||(null===(o=t.citation)||void 0===o?void 0:o.citation_text),d=t.case_name||(null===(s=t.citation)||void 0===s?void 0:s.case_name)||(null===(l=t.metadata)||void 0===l?void 0:l.resolved_case_name)||"N/A",f=t.validation||(null===(c=t.citation)||void 0===c?void 0:c.validation)||{};return(0,B.A)((0,B.A)((0,B.A)({},t),t.citation),{},{citation:u,case_name:d,verified:f.verified||t.verified||!1,validation_method:f.validation_method||t.validation_method||(f.verified?"Other":null)})}return console.warn("Unexpected citation format:",t),null}catch(v){return console.error("Error formatting citation:",v,t),null}},filteredCitations:function(t){var e=this;if(!this.results.validation_results)return[];var n=this.results.validation_results.map((function(t){return e.formatCitation(t)})).filter((function(t){return null!==t}));switch(t){case"all":return n;case"courtlistener":return n.filter((function(t){return t.verified&&"CourtListener"===t.validation_method}));case"verified":return n.filter((function(t){return t.verified}));case"unverified":return n.filter((function(t){return!t.verified}));default:return n}},getBadgeClass:function(t){var e={CourtListener:"bg-success",Landmark:"bg-primary",Multitool:"bg-info",Manual:"bg-secondary",Other:"bg-secondary"};return e[t]||"bg-dark"}},mounted:function(){this.courtListenerCount>0?this.activeTab="courtlistener":this.verifiedCount>0?this.activeTab="verified":this.unverifiedCount>0?this.activeTab="unverified":this.hasUnlikelyCitations&&(this.activeTab="unlikely")}},st=(0,at.A)(ot,[["render",V],["__scopeId","data-v-856a17ec"]]),lt=st},6231:(t,e,n)=>{n.d(e,{A:()=>B});n(2010);var a=n(641),i=n(33),r={class:"enhanced-file-upload"},o={class:"card"},s={class:"card-body"},l={class:"mb-3"},c=["disabled"],u={key:0,class:"mb-3"},d={class:"alert alert-info d-flex align-items-center"},f={class:"d-flex align-items-center flex-wrap gap-2"},p=["disabled"],v={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},m={key:0,class:"ms-3 flex-grow-1"},g={class:"progress"},h=["aria-valuenow"],k={key:1,class:"alert alert-danger mt-3 mb-0"},b={key:0,class:"mt-4"};function C(t,e,n,C,y,L){var _=(0,a.g2)("CitationReport");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",o,[e[7]||(e[7]=(0,a.Lk)("div",{class:"bg-primary text-white p-3 rounded-top"},[(0,a.Lk)("h5",{class:"mb-0"},"Upload Document")],-1)),(0,a.Lk)("div",s,[(0,a.Lk)("div",l,[e[2]||(e[2]=(0,a.Lk)("label",{for:"enhancedFileUpload",class:"form-label"},"Select a file to analyze for citations",-1)),(0,a.Lk)("input",{class:"form-control",type:"file",id:"enhancedFileUpload",ref:"fileUpload",onChange:e[0]||(e[0]=function(){return L.handleFileChange&&L.handleFileChange.apply(L,arguments)}),accept:".pdf,.docx,.txt,.rtf,.doc,.html,.htm",disabled:y.isAnalyzing},null,40,c),e[3]||(e[3]=(0,a.Lk)("div",{class:"form-text"},"Supported formats: PDF, DOCX, TXT, RTF, DOC, HTML",-1))]),y.file?((0,a.uX)(),(0,a.CE)("div",u,[(0,a.Lk)("div",d,[e[5]||(e[5]=(0,a.Lk)("i",{class:"fas fa-file-alt me-2"},null,-1)),(0,a.Lk)("div",null,[e[4]||(e[4]=(0,a.Lk)("strong",null,"Selected file:",-1)),(0,a.eW)(" "+(0,i.v_)(y.file.name)+" ("+(0,i.v_)(L.formatFileSize(y.file.size))+") ",1)])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",f,[(0,a.Lk)("button",{class:"btn btn-primary me-2",onClick:e[1]||(e[1]=function(){return L.analyzeDocument&&L.analyzeDocument.apply(L,arguments)}),disabled:!y.file||y.isAnalyzing},[y.isAnalyzing?((0,a.uX)(),(0,a.CE)("span",v)):(0,a.Q3)("",!0),(0,a.eW)(" "+(0,i.v_)(y.isAnalyzing?"Analyzing...":"Analyze Citations"),1)],8,p),y.isAnalyzing?((0,a.uX)(),(0,a.CE)("div",m,[(0,a.Lk)("div",g,[(0,a.Lk)("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:(0,i.Tr)({width:y.progress+"%"}),"aria-valuenow":y.progress,"aria-valuemin":"0","aria-valuemax":"100"},(0,i.v_)(y.progress)+"% ",13,h)])])):(0,a.Q3)("",!0)]),y.error?((0,a.uX)(),(0,a.CE)("div",k,[e[6]||(e[6]=(0,a.Lk)("i",{class:"fas fa-exclamation-circle me-2"},null,-1)),(0,a.eW)(" "+(0,i.v_)(y.error),1)])):(0,a.Q3)("",!0)])]),y.documentAnalysisResult?((0,a.uX)(),(0,a.CE)("div",b,[(0,a.bF)(_,{"citation-data":y.documentAnalysisResult,"is-loading":y.isLoadingReport,error:y.reportError,onRefresh:L.refreshReport},null,8,["citation-data","is-loading","error","onRefresh"])])):(0,a.Q3)("",!0)])}var y=n(5492),L=n(4048),_=n(388),x=n(9201),w=(n(6918),n(8706),n(4423),n(4346),n(8598),n(2062),n(4782),n(1688),n(3288),n(8111),n(1701),n(9868),n(6099),n(8459),n(7495),n(8781),n(1699),n(7764),n(5440),n(375),n(2762),n(2953),n(3296),n(7208),n(8408),n(4603),n(7566),n(8721),n(2505)),A=n.n(w),E={class:"citation-report"},S={key:0,class:"text-center py-4"},T={key:1,class:"alert alert-warning"},I={key:2},R={key:0,class:"mb-4"},N={class:"d-flex justify-content-between align-items-center mb-3"},O=["disabled"],F={key:1,class:"alert alert-info mb-0"};function X(t,e,n,r,o,s){return(0,a.uX)(),(0,a.CE)("div",E,[n.isLoading?((0,a.uX)(),(0,a.CE)("div",S,e[2]||(e[2]=[(0,a.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,a.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,a.Lk)("p",{class:"mt-2 mb-0"},"Loading citation report...",-1)]))):n.error?((0,a.uX)(),(0,a.CE)("div",T,[e[3]||(e[3]=(0,a.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),(0,a.eW)(" "+(0,i.v_)(n.error),1)])):((0,a.uX)(),(0,a.CE)("div",I,[r.hasResults?((0,a.uX)(),(0,a.CE)("div",R,[(0,a.Lk)("div",N,[e[5]||(e[5]=(0,a.Lk)("h5",{class:"mb-0"},"Citation Analysis Results",-1)),(0,a.Lk)("div",null,[(0,a.Lk)("button",{class:"btn btn-sm btn-outline-secondary me-2",onClick:e[0]||(e[0]=function(){return r.exportToCSV&&r.exportToCSV.apply(r,arguments)}),title:"Export to CSV"},e[4]||(e[4]=[(0,a.Lk)("i",{class:"fas fa-download me-1"},null,-1),(0,a.eW)(" Export ")])),(0,a.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:e[1]||(e[1]=function(){return r.refresh&&r.refresh.apply(r,arguments)}),title:"Refresh Report",disabled:r.refreshing},[(0,a.Lk)("i",{class:(0,i.C4)(["fas fa-sync-alt",{"fa-spin":r.refreshing}])},null,2)],8,O)])]),e[6]||(e[6]=(0,a.Lk)("div",{id:"citation-report-container",class:"mt-3"},null,-1))])):((0,a.uX)(),(0,a.CE)("div",F,e[7]||(e[7]=[(0,a.Lk)("i",{class:"fas fa-info-circle me-2"},null,-1),(0,a.eW)(" No citations found in the document. ")])))]))])}n(6031);var P=n(953);n(6280);function D(t){return new Promise((function(e,n){var a=document.querySelector('script[src="'.concat(t,'"]'));if(a)e();else{var i=document.createElement("script");i.src=t,i.type="text/javascript",i.async=!0,i.onload=function(){console.log("Script loaded: ".concat(t)),e()},i.onerror=function(e){console.error("Error loading script: ".concat(t),e),document.head.removeChild(i),n(new Error("Failed to load script: ".concat(t)))},document.head.appendChild(i)}}))}const M={name:"CitationReport",props:{citationData:{type:Object,default:function(){return{}}},isLoading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["refresh"],setup:function(t,e){var n=e.emit,i=(0,P.KR)(!1),r=(0,P.KR)(!1),o=(0,P.KR)(""),s=function(){var t=window.location.pathname;o.value=t.includes("/casestrainer/")?"/casestrainer":"",l()},l=function(){var t=(0,_.A)((0,L.A)().mark((function t(){var e;return(0,L.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,window.citationReport){t.next=7;break}return e="".concat(o.value,"/static/js/citation-report.js"),console.log("Loading citation report script from: ".concat(e)),t.next=6,D(e);case 6:console.log("Citation report script loaded successfully");case 7:t.next=13;break;case 9:throw t.prev=9,t.t0=t["catch"](0),console.error("Failed to load citation report script:",t.t0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),c=function(t){try{var e=document.getElementById("citation-report-container");if(e)e.innerHTML="";else{e=document.createElement("div"),e.id="citation-report-container";var n=document.querySelector(".citation-report");if(!n)return void console.error("Could not find results container");n.appendChild(e)}if(window.citationReport&&window.citationReport.display){var a,r,o=(null===t||void 0===t||null===(a=t.citations)||void 0===a?void 0:a.length)>0||(null===t||void 0===t||null===(r=t.validation_results)||void 0===r?void 0:r.length)>0;i.value=o,o&&window.citationReport.display(t)}else console.error("Citation report functionality not available")}catch(s){console.error("Error displaying citation report:",s)}},u=function(){var e;if(null!==(e=t.citationData)&&void 0!==e&&null!==(e=e.citations)&&void 0!==e&&e.length)try{var n=t.citationData.citations,a=["Citation","Case Name","Status","Validation Method","Context"],i=n.map((function(t){return{Citation:t.citation_text||t.citation||"","Case Name":t.case_name||t.title||"",Status:t.verified?"Verified":"Not Verified","Validation Method":t.validation_method||t.source||"Unknown",Context:t.context?t.context.replace(/[\n\r]+/g," ").trim():""}})),r=[a.join(",")].concat((0,y.A)(i.map((function(t){return a.map((function(e){return'"'.concat(String(t[e]||"").replace(/"/g,'""'),'"')})).join(",")})))).join("\r\n"),o=new Blob(["\ufeff"+r],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(o),l=document.createElement("a");l.setAttribute("href",s),l.setAttribute("download","citations_".concat((new Date).toISOString().slice(0,10),".csv")),document.body.appendChild(l),l.click(),document.body.removeChild(l)}catch(c){console.error("Error exporting to CSV:",c)}else console.error("No citation data available to export")},d=function(){r.value=!0,n("refresh"),setTimeout((function(){r.value=!1}),1e3)};return(0,a.wB)((function(){return t.citationData}),(function(t){t&&c(t)}),{immediate:!0,deep:!0}),(0,a.sV)((function(){s()})),{hasResults:i,refreshing:r,exportToCSV:u,refresh:d}}};var U=n(6262);const z=(0,U.A)(M,[["render",X],["__scopeId","data-v-51321ca0"]]),W=z,Q={name:"EnhancedFileUpload",components:{CitationReport:W},data:function(){return{file:null,isAnalyzing:!1,documentAnalysisResult:null,error:null,progress:0,isLoadingReport:!1,reportError:null,hasResults:!1}},computed:{basePath:function(){var t=window.location.pathname;return t.includes("/casestrainer/")?"/casestrainer":""}},methods:{handleFileChange:function(t){this.file=t.target.files[0],this.documentAnalysisResult=null,this.error=null,this.reportError=null,this.hasResults=!1},refreshReport:function(){this.documentAnalysisResult&&this.displayCitationReport(this.documentAnalysisResult)},displayCitationReport:function(t){this.isLoadingReport=!0,this.reportError=null;try{var e,n;this.hasResults=(null===t||void 0===t||null===(e=t.citations)||void 0===e?void 0:e.length)>0||(null===t||void 0===t||null===(n=t.validation_results)||void 0===n?void 0:n.length)>0,this.documentAnalysisResult=(0,x.A)({},t)}catch(a){console.error("Error preparing citation report:",a),this.reportError="An error occurred while preparing the citation report"}finally{this.isLoadingReport=!1}},formatFileSize:function(t){if(0===t)return"0 Bytes";var e=1024,n=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,a)).toFixed(2))+" "+n[a]},analyzeDocument:function(){var t=this;return(0,_.A)((0,L.A)().mark((function e(){var n,a,i,r,o,s;return(0,L.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.file){e.next=3;break}return t.error="Please select a file to upload",e.abrupt("return");case 3:return t.isAnalyzing=!0,t.progress=0,t.documentAnalysisResult=null,t.error=null,t.reportError=null,t.hasResults=!1,e.prev=9,n=new FormData,n.append("file",t.file),a={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){t.progress=Math.round(100*e.loaded/e.total)}},e.next=15,A().post("/casestrainer/api/analyze",n,a);case 15:i=e.sent,r=i.data,o=t.formatResultsForCitationReport(r),t.displayCitationReport(o),e.next=26;break;case 21:e.prev=21,e.t0=e["catch"](9),console.error("Error analyzing document:",e.t0),t.error=(null===(s=e.t0.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.message)||e.t0.message||"An error occurred while analyzing the document",e.t0.response?(console.error("Error response:",e.t0.response.data),console.error("Status:",e.t0.response.status),console.error("Headers:",e.t0.response.headers)):e.t0.request?console.error("No response received:",e.t0.request):console.error("Error setting up request:",e.t0.message);case 26:return e.prev=26,t.isAnalyzing=!1,t.progress=100,e.finish(26);case 30:case"end":return e.stop()}}),e,null,[[9,21,26,30]])})))()},formatResultsForCitationReport:function(t){if(!t)return{citations:[]};if(t.citations&&Array.isArray(t.citations))return(0,x.A)((0,x.A)({},t),{},{citations:t.citations.map((function(t){return(0,x.A)((0,x.A)({},t),{},{id:t.id||Math.random().toString(36).substr(2,9),citation_text:t.citation_text||t.citation||t.text||"",case_name:t.case_name||t.title||"",verified:t.verified||!1,validation_method:t.validation_method||t.source||"Unknown",context:t.context||"",timestamp:t.timestamp||(new Date).toISOString(),metadata:(0,x.A)((0,x.A)({},t.metadata||{}),{},{confidence:t.confidence,jurisdiction:t.jurisdiction,citation_type:t.citation_type})})}))});if(t.validation_results&&Array.isArray(t.validation_results)){var e=t.validation_results.map((function(t){return{id:t.id||Math.random().toString(36).substr(2,9),citation_text:t.citation||t.text||"",case_name:t.case_name||t.title||"",verified:t.verified||!1,validation_method:t.validation_method||t.source||"Unknown",context:t.context||"",timestamp:t.timestamp||(new Date).toISOString(),metadata:(0,x.A)((0,x.A)({},t.metadata||{}),{},{confidence:t.confidence,jurisdiction:t.jurisdiction,citation_type:t.citation_type})}}));return(0,x.A)((0,x.A)({},t),{},{citations:e,message:t.message||"Citation analysis complete",timestamp:(new Date).toISOString(),document_metadata:t.document_metadata||{}})}if(t.results&&Array.isArray(t.results)){var n=t.results.map((function(t){return{id:t.id||Math.random().toString(36).substr(2,9),citation_text:t.citation||t.text||"",case_name:t.case_name||t.title||"",verified:t.verified||!1,validation_method:t.validation_method||t.source||"Unknown",context:t.context||"",timestamp:t.timestamp||(new Date).toISOString(),metadata:(0,x.A)((0,x.A)({},t.metadata||{}),{},{confidence:t.confidence,jurisdiction:t.jurisdiction,citation_type:t.citation_type})}}));return(0,x.A)((0,x.A)({},t),{},{citations:n,message:t.message||"Citation analysis complete",timestamp:(new Date).toISOString()})}return(0,x.A)((0,x.A)({},t),{},{citations:[],message:t.message||"No citation data available",timestamp:(new Date).toISOString()})},exportToCSV:function(){if(this.documentAnalysisResult&&this.documentAnalysisResult.citations)try{var t=["Citation","Case Name","Status","Validation Method","Context"],e=this.documentAnalysisResult.citations.map((function(t){return{Citation:t.citation_text,"Case Name":t.case_name||"",Status:t.verified?"Verified":"Not Verified","Validation Method":t.validation_method||"Unknown",Context:t.context?t.context.replace(/[\n\r]+/g," ").trim():""}})),n=[t.join(",")].concat((0,y.A)(e.map((function(e){return t.map((function(t){return'"'.concat(String(e[t]||"").replace(/"/g,'""'),'"')})).join(",")})))).join("\r\n"),a=new Blob(["\ufeff"+n],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(a),r=document.createElement("a");r.setAttribute("href",i),r.setAttribute("download","citations_".concat((new Date).toISOString().slice(0,10),".csv")),document.body.appendChild(r),r.click(),document.body.removeChild(r)}catch(o){console.error("Error exporting to CSV:",o),this.error="Failed to export citations to CSV"}else this.error="No citation data available to export"}}},V=(0,U.A)(Q,[["render",C],["__scopeId","data-v-16efe1a8"]]),B=V},6957:(t,e,n)=>{n(3792),n(3362),n(9085),n(9391);var a=n(3751),i=n(641),r=n(33),o={class:"app-container"},s={class:"navbar navbar-expand-lg navbar-dark bg-primary"},l={class:"container-fluid position-relative"},c={class:"collapse navbar-collapse",id:"navbarNav",ref:"navbarCollapse"},u={class:"navbar-nav"},d={class:"nav-item"},f={class:"nav-item"},p={class:"nav-item"},v={class:"nav-item"},m={class:"nav-item"},g={class:"nav-item"},h={class:"nav-item"},k={class:"version-badge position-absolute top-0 end-0 mt-2 me-3 bg-light text-primary px-2 py-1 rounded",style:{"font-size":"0.95rem","font-weight":"bold"}},b={class:"container mt-4"};function C(t,e,n,a,C,y){var L=(0,i.g2)("router-link"),_=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)("div",o,[(0,i.Lk)("nav",s,[(0,i.Lk)("div",l,[(0,i.bF)(L,{class:"navbar-brand",to:"/"},{default:(0,i.k6)((function(){return e[1]||(e[1]=[(0,i.eW)("CaseStrainer")])})),_:1}),(0,i.bF)(L,{class:"nav-link highlight-nav ms-2 d-inline-block",style:{"min-width":"170px"},to:"/enhanced-validator"},{default:(0,i.k6)((function(){return e[2]||(e[2]=[(0,i.eW)("Enhanced Validator")])})),_:1}),(0,i.Lk)("button",{class:"navbar-toggler",type:"button","aria-label":"Toggle navigation",onClick:e[0]||(e[0]=function(){return y.toggleNavbar&&y.toggleNavbar.apply(y,arguments)}),ref:"navbarToggler"},e[3]||(e[3]=[(0,i.Lk)("span",{class:"navbar-toggler-icon"},null,-1)]),512),(0,i.Lk)("div",c,[(0,i.Lk)("ul",u,[(0,i.Lk)("li",d,[(0,i.bF)(L,{class:"nav-link",to:"/"},{default:(0,i.k6)((function(){return e[4]||(e[4]=[(0,i.eW)("Home")])})),_:1})]),(0,i.Lk)("li",f,[(0,i.bF)(L,{class:"nav-link",to:"/unconfirmed-citations"},{default:(0,i.k6)((function(){return e[5]||(e[5]=[(0,i.eW)("Unconfirmed Citations")])})),_:1})]),(0,i.Lk)("li",p,[(0,i.bF)(L,{class:"nav-link",to:"/multitool-confirmed"},{default:(0,i.k6)((function(){return e[6]||(e[6]=[(0,i.eW)("Confirmed with Multitool")])})),_:1})]),(0,i.Lk)("li",v,[(0,i.bF)(L,{class:"nav-link",to:"/citation-network"},{default:(0,i.k6)((function(){return e[7]||(e[7]=[(0,i.eW)("Citation Network")])})),_:1})]),(0,i.Lk)("li",m,[(0,i.bF)(L,{class:"nav-link",to:"/ml-classifier"},{default:(0,i.k6)((function(){return e[8]||(e[8]=[(0,i.eW)("ML Classifier")])})),_:1})]),(0,i.Lk)("li",g,[(0,i.bF)(L,{class:"nav-link",to:"/citation-tester"},{default:(0,i.k6)((function(){return e[9]||(e[9]=[(0,i.eW)("Citation Tester")])})),_:1})]),(0,i.Lk)("li",h,[(0,i.bF)(L,{class:"nav-link",to:"/about"},{default:(0,i.k6)((function(){return e[10]||(e[10]=[(0,i.eW)("About")])})),_:1})])])],512)]),(0,i.Lk)("span",k," v"+(0,r.v_)(C.version||"?"),1)]),(0,i.Lk)("main",b,[(0,i.bF)(_)]),e[11]||(e[11]=(0,i.Lk)("footer",{class:"footer mt-5 py-3 bg-light"},[(0,i.Lk)("div",{class:"container text-center"},[(0,i.Lk)("span",{class:"text-muted"},"CaseStrainer Â© 2025 - University of Washington")])],-1))])}var y=n(4048),L=n(388),_=(n(4423),n(1699),n(2505)),x=n.n(_);function w(){return A.apply(this,arguments)}function A(){return A=(0,L.A)((0,y.A)().mark((function t(){var e,n;return(0,y.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=window.location.pathname.includes("/casestrainer")?"/casestrainer":"",t.next=4,x().get("".concat(e,"/api/version"));case 4:return n=t.sent,t.abrupt("return",n.data.version||"unknown");case 8:return t.prev=8,t.t0=t["catch"](0),t.abrupt("return","unknown");case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),A.apply(this,arguments)}const E={name:"App",data:function(){return{version:null}},mounted:function(){var t=this;w().then((function(e){t.version=e}))},methods:{toggleNavbar:function(){var t=this.$refs.navbarCollapse;t&&(t.classList.contains("show")?t.classList.remove("show"):t.classList.add("show"))}}};var S=n(6262);const T=(0,S.A)(E,[["render",C]]),I=T;n(6099),n(7764),n(2953);var R=n(5220);n(1629),n(8111),n(7588),n(3500),n(2010);var N={class:"file-upload"},O={class:"card"},F={class:"card-body"},X={class:"mb-3"},P={key:0,class:"mb-3"},D={class:"alert alert-info"},M=["disabled"],U={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},z={key:1,class:"mt-4 alert alert-danger"};function W(t,e,n,a,o,s){var l=(0,i.g2)("ProgressBar"),c=(0,i.g2)("ReusableResults");return(0,i.uX)(),(0,i.CE)("div",N,[(0,i.Lk)("div",O,[e[5]||(e[5]=(0,i.Lk)("div",{class:"card-header"},[(0,i.Lk)("h5",null,"Upload a Document")],-1)),(0,i.Lk)("div",F,[(0,i.Lk)("div",X,[e[2]||(e[2]=(0,i.Lk)("label",{for:"fileUpload",class:"form-label"},"Select a file to analyze for citations",-1)),(0,i.Lk)("input",{class:"form-control",type:"file",id:"fileUpload",onChange:e[0]||(e[0]=function(){return s.handleFileChange&&s.handleFileChange.apply(s,arguments)}),accept:".pdf,.docx,.txt,.rtf,.doc,.html,.htm"},null,32),e[3]||(e[3]=(0,i.Lk)("div",{class:"form-text"},"Supported formats: PDF, DOCX, TXT, RTF, DOC, HTML",-1))]),o.file?((0,i.uX)(),(0,i.CE)("div",P,[(0,i.Lk)("div",D,[e[4]||(e[4]=(0,i.Lk)("strong",null,"Selected file:",-1)),(0,i.eW)(" "+(0,r.v_)(o.file.name)+" ("+(0,r.v_)(s.formatFileSize(o.file.size))+") ",1)])])):(0,i.Q3)("",!0),(0,i.bF)(l,{loading:o.isUploading,message:"Uploading & Analyzing..."},null,8,["loading"]),(0,i.Lk)("button",{class:"btn btn-primary",onClick:e[1]||(e[1]=function(){return s.uploadFile&&s.uploadFile.apply(s,arguments)}),disabled:!o.file||o.isUploading},[o.isUploading?((0,i.uX)(),(0,i.CE)("span",U)):(0,i.Q3)("",!0),(0,i.eW)(" "+(0,r.v_)(o.isUploading?"Analyzing...":"Analyze Citations"),1)],8,M)])]),o.results?((0,i.uX)(),(0,i.Wv)(c,{key:0,results:o.results},null,8,["results"])):(0,i.Q3)("",!0),o.error?((0,i.uX)(),(0,i.CE)("div",z,[e[6]||(e[6]=(0,i.Lk)("h5",null,"Error",-1)),(0,i.Lk)("p",null,(0,r.v_)(o.error),1)])):(0,i.Q3)("",!0)])}n(2008),n(4114),n(739),n(2489),n(3110),n(8940);var Q=n(5023),V=n(5703);const B={name:"FileUpload",components:{ProgressBar:Q.A,ReusableResults:V.A},data:function(){return{file:null,isUploading:!1,results:null,error:null,debugInfo:""}},methods:{handleFileChange:function(t){this.file=t.target.files[0],this.error=null,this.results=null},formatFileSize:function(t){var e=["Bytes","KB","MB","GB"];if(0===t)return"0 Bytes";var n=parseInt(Math.floor(Math.log(t)/Math.log(1024)));return Math.round(t/Math.pow(1024,n),2)+" "+e[n]},uploadFile:function(){var t=this;return(0,L.A)((0,y.A)().mark((function e(){var n,a,i;return(0,y.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.file){e.next=3;break}return t.error="Please select a file to upload",e.abrupt("return");case 3:return t.isUploading=!0,t.error=null,t.debugInfo="Debug: Starting file analysis...\n",e.prev=6,n=new FormData,n.append("file",t.file),n.append("debug_info",t.debugInfo),t.debugInfo+="Request to /api/analyze: [File data]\n",e.next=13,x().post("/api/analyze",n,{headers:{"Content-Type":"multipart/form-data"}});case 13:a=e.sent,t.debugInfo+="Response received: Processing data...\n",t.debugInfo+="Success: ".concat(JSON.stringify(a.data,null,2),"\n"),t.results={totalCitations:a.data.citations.length,confirmedCount:a.data.citations.filter((function(t){return t.valid})).length,unconfirmedCount:a.data.citations.filter((function(t){return!t.valid})).length,multitoolCount:a.data.citations.filter((function(t){return t.valid&&"courtlistener_api"!==t.source})).length,analysisId:a.data.analysis_id,citations:a.data.citations},localStorage.setItem("lastAnalysisResults",JSON.stringify(t.results)),e.next=25;break;case 20:e.prev=20,e.t0=e["catch"](6),t.error=(null===(i=e.t0.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.error)||"An error occurred while analyzing the file",t.debugInfo+="Error: ".concat(e.t0.message,"\n"),e.t0.response&&(t.debugInfo+="Response status: ".concat(e.t0.response.status,"\n"),t.debugInfo+="Response data: ".concat(JSON.stringify(e.t0.response.data,null,2),"\n"));case 25:return e.prev=25,t.isUploading=!1,e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[6,20,25,28]])})))()},viewConfirmedCitations:function(){this.$router.push("/confirmed-citations")},viewUnconfirmedCitations:function(){this.$router.push("/unconfirmed-citations")},viewMultitoolCitations:function(){this.$router.push("/multitool-confirmed")}}},j=(0,S.A)(B,[["render",W],["__scopeId","data-v-2482f0a2"]]),G=j;var J={class:"text-paste"},q={class:"card"},H={class:"card-body"},K={class:"mb-3"},$=["disabled"],Y={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},Z={key:0,class:"mt-4"},tt={class:"card"},et={class:"card-body"},nt={class:"tab-content"},at={class:"tab-pane fade show active",id:"results-content",role:"tabpanel"},it={class:"alert alert-success"},rt={class:"mt-3"},ot={class:"list-group"},st={class:"list-group-item d-flex justify-content-between align-items-center"},lt={class:"badge bg-success rounded-pill"},ct={class:"list-group-item d-flex justify-content-between align-items-center"},ut={class:"badge bg-danger rounded-pill"},dt={class:"list-group-item d-flex justify-content-between align-items-center"},ft={class:"badge bg-info rounded-pill"},pt={class:"mt-3"},vt={key:1,class:"mt-4 alert alert-danger"};function mt(t,e,n,o,s,l){return(0,i.uX)(),(0,i.CE)("div",J,[(0,i.Lk)("div",q,[e[6]||(e[6]=(0,i.Lk)("div",{class:"card-header"},[(0,i.Lk)("h5",null,"Paste Text")],-1)),(0,i.Lk)("div",H,[(0,i.Lk)("div",K,[e[5]||(e[5]=(0,i.Lk)("label",{for:"textInput",class:"form-label"},"Paste text containing legal citations",-1)),(0,i.bo)((0,i.Lk)("textarea",{class:"form-control",id:"textInput",rows:"10","onUpdate:modelValue":e[0]||(e[0]=function(t){return s.text=t}),placeholder:"Paste text from a legal document containing citations..."},null,512),[[a.Jo,s.text]])]),(0,i.Lk)("button",{class:"btn btn-primary",onClick:e[1]||(e[1]=function(){return l.analyzeText&&l.analyzeText.apply(l,arguments)}),disabled:!s.text||s.isAnalyzing},[s.isAnalyzing?((0,i.uX)(),(0,i.CE)("span",Y)):(0,i.Q3)("",!0),(0,i.eW)(" "+(0,r.v_)(s.isAnalyzing?"Analyzing...":"Analyze Citations"),1)],8,$)])]),s.results?((0,i.uX)(),(0,i.CE)("div",Z,[(0,i.Lk)("div",tt,[e[12]||(e[12]=(0,i.Lk)("div",{class:"card-header"},[(0,i.Lk)("ul",{class:"nav nav-tabs card-header-tabs",id:"result-tabs"},[(0,i.Lk)("li",{class:"nav-item"},[(0,i.Lk)("a",{class:"nav-link active",id:"results-tab","data-bs-toggle":"tab",href:"#results-content",role:"tab"}," Analysis Results ")])])],-1)),(0,i.Lk)("div",et,[(0,i.Lk)("div",nt,[(0,i.Lk)("div",at,[(0,i.Lk)("div",it,[e[7]||(e[7]=(0,i.Lk)("h5",null,"Analysis complete!",-1)),(0,i.Lk)("p",null,"Found "+(0,r.v_)(s.results.totalCitations)+" citations in your text.",1)]),(0,i.Lk)("div",rt,[e[11]||(e[11]=(0,i.Lk)("h6",null,"Citation Summary:",-1)),(0,i.Lk)("ul",ot,[(0,i.Lk)("li",st,[e[8]||(e[8]=(0,i.eW)(" Confirmed Citations ")),(0,i.Lk)("span",lt,(0,r.v_)(s.results.confirmedCount),1)]),(0,i.Lk)("li",ct,[e[9]||(e[9]=(0,i.eW)(" Unconfirmed Citations ")),(0,i.Lk)("span",ut,(0,r.v_)(s.results.unconfirmedCount),1)]),(0,i.Lk)("li",dt,[e[10]||(e[10]=(0,i.eW)(" Verified with Multi-tool ")),(0,i.Lk)("span",ft,(0,r.v_)(s.results.multitoolCount),1)])])]),(0,i.Lk)("div",pt,[(0,i.Lk)("button",{class:"btn btn-outline-primary me-2",onClick:e[2]||(e[2]=function(){return l.viewConfirmedCitations&&l.viewConfirmedCitations.apply(l,arguments)})}," View Confirmed Citations "),(0,i.Lk)("button",{class:"btn btn-outline-danger me-2",onClick:e[3]||(e[3]=function(){return l.viewUnconfirmedCitations&&l.viewUnconfirmedCitations.apply(l,arguments)})}," View Unconfirmed Citations "),(0,i.Lk)("button",{class:"btn btn-outline-info",onClick:e[4]||(e[4]=function(){return l.viewMultitoolCitations&&l.viewMultitoolCitations.apply(l,arguments)})}," View Multi-tool Verified ")])])])])])])):(0,i.Q3)("",!0),s.error?((0,i.uX)(),(0,i.CE)("div",vt,[e[13]||(e[13]=(0,i.Lk)("h5",null,"Error",-1)),(0,i.Lk)("p",null,(0,r.v_)(s.error),1)])):(0,i.Q3)("",!0)])}const gt={name:"TextPaste",components:{ProgressBar:Q.A,ReusableResults:V.A},data:function(){return{text:"",isAnalyzing:!1,results:null,error:null,debugInfo:""}},methods:{analyzeText:function(){var t=this;return(0,L.A)((0,y.A)().mark((function e(){var n,a;return(0,y.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.text){e.next=3;break}return t.error="Please enter some text to analyze",e.abrupt("return");case 3:return t.isAnalyzing=!0,t.error=null,t.debugInfo="Debug: Starting text analysis...\n",e.prev=6,t.debugInfo+="Request to /api/analyze: [Text data]\n",e.next=10,x().post("/api/analyze",{text:t.text,debugInfo:t.debugInfo});case 10:n=e.sent,t.debugInfo+="Response received: Processing data...\n",t.debugInfo+="Success: ".concat(JSON.stringify(n.data,null,2),"\n"),t.results={totalCitations:n.data.citations.length,confirmedCount:n.data.citations.filter((function(t){return t.valid})).length,unconfirmedCount:n.data.citations.filter((function(t){return!t.valid})).length,multitoolCount:n.data.citations.filter((function(t){return t.valid&&"courtlistener_api"!==t.source})).length,analysisId:n.data.analysis_id,citations:n.data.citations},localStorage.setItem("lastAnalysisResults",JSON.stringify(t.results)),e.next=23;break;case 17:e.prev=17,e.t0=e["catch"](6),console.error("Error analyzing text:",e.t0),t.error=(null===(a=e.t0.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.error)||"An error occurred while analyzing the text",t.debugInfo+="Error: ".concat(e.t0.message,"\n"),e.t0.response&&(t.debugInfo+="Response status: ".concat(e.t0.response.status,"\n"),t.debugInfo+="Response data: ".concat(JSON.stringify(e.t0.response.data,null,2),"\n"));case 23:return e.prev=23,t.isAnalyzing=!1,e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[6,17,23,26]])})))()},viewConfirmedCitations:function(){this.$router.push("/confirmed-citations")},viewUnconfirmedCitations:function(){this.$router.push("/unconfirmed-citations")},viewMultitoolCitations:function(){this.$router.push("/multitool-confirmed")}}},ht=(0,S.A)(gt,[["render",mt],["__scopeId","data-v-2ddf4c1f"]]),kt=ht;var bt=n(6231),Ct=n(8591),yt=n(721),Lt=n(6999);bt.A,Ct.A,yt.A,Lt.A;var _t=[{path:"/",name:"EnhancedValidator",component:function(){return n.e(536).then(n.bind(n,5536))}},{path:"/unconfirmed-citations",name:"UnconfirmedCitations",component:function(){return n.e(342).then(n.bind(n,4342))}},{path:"/multitool-confirmed",name:"MultitoolConfirmed",component:function(){return n.e(114).then(n.bind(n,3114))}},{path:"/citation-network",name:"CitationNetwork",component:function(){return n.e(198).then(n.bind(n,8198))}},{path:"/ml-classifier",name:"MLClassifier",component:function(){return n.e(762).then(n.bind(n,5762))}},{path:"/citation-tester",name:"CitationTester",component:function(){return n.e(765).then(n.bind(n,8765))}},{path:"/enhanced-validator",name:"EnhancedValidator",component:function(){return n.e(536).then(n.bind(n,5536))}},{path:"/about",name:"About",component:function(){return n.e(335).then(n.bind(n,7335))}}],xt=(0,R.aE)({history:(0,R.LA)("/casestrainer/"),routes:_t});const wt=xt;var At=n(6278),Et=n(5492),St=(n(4782),n(8430));const Tt={namespaced:!0,state:{citations:[],filteredCitations:[],currentPage:1,itemsPerPage:10,totalItems:0,filters:{confidence:null,source:null,searchTerm:""},statistics:{total:0,highConfidence:0,mediumConfidence:0,lowConfidence:0}},mutations:{SET_CITATIONS:function(t,e){t.citations=e,t.totalItems=e.length},SET_FILTERED_CITATIONS:function(t,e){t.filteredCitations=e},SET_CURRENT_PAGE:function(t,e){t.currentPage=e},SET_FILTER:function(t,e){var n=e.type,a=e.value;t.filters[n]=a},SET_STATISTICS:function(t,e){t.statistics=e}},actions:{fetchCitations:function(t){return(0,L.A)((0,y.A)().mark((function e(){var n,a,i;return(0,y.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,a=t.dispatch,e.prev=1,n("SET_LOADING",!0,{root:!0}),e.next=5,St.A.getUnconfirmedCitations();case 5:i=e.sent,n("SET_CITATIONS",i.data),a("calculateStatistics"),a("applyFilters"),n("SET_LOADING",!1,{root:!0}),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](1),n("SET_ERROR",e.t0.message,{root:!0}),n("SET_LOADING",!1,{root:!0});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))()},applyFilters:function(t){var e=t.commit,n=t.state,a=n.filters,i=a.confidence,r=a.source,o=a.searchTerm,s=(0,Et.A)(n.citations);i&&(s=s.filter((function(t){return"high"===i?t.confidence>=.7:"medium"===i?t.confidence>=.4&&t.confidence<.7:"low"!==i||t.confidence<.4}))),r&&(s=s.filter((function(t){return t.source&&t.source.toLowerCase().includes(r.toLowerCase())}))),o&&(s=s.filter((function(t){return t.citation_text&&t.citation_text.toLowerCase().includes(o.toLowerCase())||t.case_name&&t.case_name.toLowerCase().includes(o.toLowerCase())}))),e("SET_FILTERED_CITATIONS",s)},calculateStatistics:function(t){var e=t.commit,n=t.state,a={total:n.citations.length,highConfidence:n.citations.filter((function(t){return t.confidence>=.7})).length,mediumConfidence:n.citations.filter((function(t){return t.confidence>=.4&&t.confidence<.7})).length,lowConfidence:n.citations.filter((function(t){return t.confidence<.4})).length};e("SET_STATISTICS",a)},setFilter:function(t,e){var n=t.commit,a=t.dispatch,i=e.type,r=e.value;n("SET_FILTER",{type:i,value:r}),a("applyFilters")},setCurrentPage:function(t,e){var n=t.commit;n("SET_CURRENT_PAGE",e)}},getters:{paginatedCitations:function(t){var e=(t.currentPage-1)*t.itemsPerPage,n=e+t.itemsPerPage;return t.filteredCitations.slice(e,n)},totalPages:function(t){return Math.ceil(t.filteredCitations.length/t.itemsPerPage)}}};n(3418),n(1415),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);const It={namespaced:!0,state:{citations:[],filteredCitations:[],currentPage:1,itemsPerPage:10,totalItems:0,filters:{verificationSource:null,confidence:null,searchTerm:""},statistics:{total:0,bySource:{}}},mutations:{SET_CITATIONS:function(t,e){t.citations=e,t.totalItems=e.length},SET_FILTERED_CITATIONS:function(t,e){t.filteredCitations=e},SET_CURRENT_PAGE:function(t,e){t.currentPage=e},SET_FILTER:function(t,e){var n=e.type,a=e.value;t.filters[n]=a},SET_STATISTICS:function(t,e){t.statistics=e}},actions:{fetchCitations:function(t){return(0,L.A)((0,y.A)().mark((function e(){var n,a,i;return(0,y.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,a=t.dispatch,e.prev=1,n("SET_LOADING",!0,{root:!0}),e.next=5,St.A.getMultitoolConfirmedCitations();case 5:i=e.sent,n("SET_CITATIONS",i.data.citations),a("calculateStatistics"),a("applyFilters"),n("SET_LOADING",!1,{root:!0}),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](1),n("SET_ERROR",e.t0.message,{root:!0}),n("SET_LOADING",!1,{root:!0});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))()},applyFilters:function(t){var e=t.commit,n=t.state,a=n.filters,i=a.verificationSource,r=a.confidence,o=a.searchTerm,s=(0,Et.A)(n.citations);i&&(s=s.filter((function(t){return t.verification_source&&t.verification_source.toLowerCase().includes(i.toLowerCase())}))),r&&(s=s.filter((function(t){var e=t.verification_confidence||0;return"high"===r?e>=.9:"medium"===r?e>=.8&&e<.9:"low"!==r||e<.8}))),o&&(s=s.filter((function(t){return t.citation_text&&t.citation_text.toLowerCase().includes(o.toLowerCase())||t.context&&t.context.toLowerCase().includes(o.toLowerCase())}))),e("SET_FILTERED_CITATIONS",s)},calculateStatistics:function(t){var e=t.commit,n=t.state,a={};n.citations.forEach((function(t){var e=t.verification_source||"Unknown";a[e]=(a[e]||0)+1}));var i={total:n.citations.length,bySource:a};e("SET_STATISTICS",i)},setFilter:function(t,e){var n=t.commit,a=t.dispatch,i=e.type,r=e.value;n("SET_FILTER",{type:i,value:r}),a("applyFilters")},setCurrentPage:function(t,e){var n=t.commit;n("SET_CURRENT_PAGE",e)}},getters:{paginatedCitations:function(t){var e=(t.currentPage-1)*t.itemsPerPage,n=e+t.itemsPerPage;return t.filteredCitations.slice(e,n)},totalPages:function(t){return Math.ceil(t.filteredCitations.length/t.itemsPerPage)},verificationSources:function(t){var e=new Set;return t.citations.forEach((function(t){t.verification_source&&e.add(t.verification_source)})),Array.from(e)}}},Rt={namespaced:!0,state:{networkData:null,visualizationType:"force",filter:"all",depth:1,statistics:{nodes:0,edges:0,confirmedNodes:0,unconfirmedNodes:0,sourceDocuments:0}},mutations:{SET_NETWORK_DATA:function(t,e){t.networkData=e},SET_VISUALIZATION_TYPE:function(t,e){t.visualizationType=e},SET_FILTER:function(t,e){t.filter=e},SET_DEPTH:function(t,e){t.depth=e},SET_STATISTICS:function(t,e){t.statistics=e}},actions:{fetchNetworkData:function(t){return(0,L.A)((0,y.A)().mark((function e(){var n,a,i,r;return(0,y.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,a=t.dispatch,i=t.state,e.prev=1,n("SET_LOADING",!0,{root:!0}),e.next=5,St.A.getCitationNetworkData(i.filter,i.depth);case 5:return r=e.sent,n("SET_NETWORK_DATA",r.data),a("calculateStatistics"),n("SET_LOADING",!1,{root:!0}),e.abrupt("return",r.data);case 12:throw e.prev=12,e.t0=e["catch"](1),n("SET_ERROR",e.t0.message,{root:!0}),n("SET_LOADING",!1,{root:!0}),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,12]])})))()},setVisualizationType:function(t,e){var n=t.commit;n("SET_VISUALIZATION_TYPE",e)},setFilter:function(t,e){var n=t.commit;n("SET_FILTER",e)},setDepth:function(t,e){var n=t.commit;n("SET_DEPTH",e)},calculateStatistics:function(t){var e=t.commit,n=t.state;if(n.networkData){var a=n.networkData.nodes||[],i=n.networkData.links||[],r=a.filter((function(t){return"confirmed"===t.status})).length,o=a.filter((function(t){return"unconfirmed"===t.status})).length,s=a.filter((function(t){return"source_document"===t.type})).length,l={nodes:a.length,edges:i.length,confirmedNodes:r,unconfirmedNodes:o,sourceDocuments:s};e("SET_STATISTICS",l)}}},getters:{nodesByType:function(t){return function(e){return t.networkData&&t.networkData.nodes?t.networkData.nodes.filter((function(t){return t.type===e})):[]}},nodesByStatus:function(t){return function(e){return t.networkData&&t.networkData.nodes?t.networkData.nodes.filter((function(t){return t.status===e})):[]}}}};var Nt=n(9201);n(2712),n(1688),n(3288),n(8237),n(6031);const Ot={namespaced:!0,state:{classificationResult:null,batchResults:[],modelInfo:{accuracy:.95,precision:.92,recall:.93,lastTrained:null,trainingDataSize:650},citationInput:{text:"",caseName:""}},mutations:{SET_CLASSIFICATION_RESULT:function(t,e){t.classificationResult=e},SET_BATCH_RESULTS:function(t,e){t.batchResults=e},SET_CITATION_INPUT:function(t,e){var n=e.text,a=e.caseName;t.citationInput.text=n,t.citationInput.caseName=a||""},UPDATE_MODEL_INFO:function(t,e){t.modelInfo=(0,Nt.A)((0,Nt.A)({},t.modelInfo),e)},CLEAR_CLASSIFICATION_RESULT:function(t){t.classificationResult=null},CLEAR_BATCH_RESULTS:function(t){t.batchResults=[]}},actions:{classifyCitation:function(t){return(0,L.A)((0,y.A)().mark((function e(){var n,a,i;return(0,y.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,a=t.state,e.prev=1,n("SET_LOADING",!0,{root:!0}),e.next=5,St.A.classifyCitation(a.citationInput.text,a.citationInput.caseName||null);case 5:return i=e.sent,n("SET_CLASSIFICATION_RESULT",i.data),n("SET_LOADING",!1,{root:!0}),e.abrupt("return",i.data);case 11:throw e.prev=11,e.t0=e["catch"](1),n("SET_ERROR",e.t0.message,{root:!0}),n("SET_LOADING",!1,{root:!0}),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,11]])})))()},trainModel:function(t){return(0,L.A)((0,y.A)().mark((function e(){var n,a;return(0,y.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.prev=1,n("SET_LOADING",!0,{root:!0}),e.next=5,St.A.trainMLClassifier();case 5:return a=e.sent,n("UPDATE_MODEL_INFO",(0,Nt.A)({lastTrained:(new Date).toISOString()},a.data.model_info)),n("SET_LOADING",!1,{root:!0}),e.abrupt("return",a.data);case 11:throw e.prev=11,e.t0=e["catch"](1),n("SET_ERROR",e.t0.message,{root:!0}),n("SET_LOADING",!1,{root:!0}),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,11]])})))()},processBatch:function(t,e){return(0,L.A)((0,y.A)().mark((function e(){var n;return(0,y.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,e.prev=1,n("SET_LOADING",!0,{root:!0}),setTimeout((function(){var t=[{citation:"347 U.S. 483",case_name:"Brown v. Board of Education",confidence:.98},{citation:"410 U.S. 113",case_name:"Roe v. Wade",confidence:.97},{citation:"384 U.S. 436",case_name:"Miranda v. Arizona",confidence:.95},{citation:"123 F.4d 456",case_name:"Smith v. Jones",confidence:.45},{citation:"789 P.3d 123",case_name:"Washington v. Oregon",confidence:.72}];n("SET_BATCH_RESULTS",t),n("SET_LOADING",!1,{root:!0})}),2e3),e.next=11;break;case 6:throw e.prev=6,e.t0=e["catch"](1),n("SET_ERROR",e.t0.message,{root:!0}),n("SET_LOADING",!1,{root:!0}),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,6]])})))()},setCitationInput:function(t,e){var n=t.commit,a=e.text,i=e.caseName;n("SET_CITATION_INPUT",{text:a,caseName:i})},clearClassificationResult:function(t){var e=t.commit;e("CLEAR_CLASSIFICATION_RESULT")},clearBatchResults:function(t){var e=t.commit;e("CLEAR_BATCH_RESULTS")}},getters:{confidenceBadgeClass:function(t){if(!t.classificationResult)return"";var e=t.classificationResult.confidence||0;return e>=.9?"bg-success":e>=.7?"bg-warning text-dark":"bg-danger"},predictionText:function(t){if(!t.classificationResult)return"";var e=t.classificationResult.confidence||0;return e>=.9?"Likely Real Citation":e>=.7?"Possibly Real Citation":"Likely Hallucinated Citation"},batchResultsSummary:function(t){var e=t.batchResults;if(!e.length)return null;var n=e.filter((function(t){return t.confidence>=.9})).length,a=e.filter((function(t){return t.confidence>=.7&&t.confidence<.9})).length,i=e.filter((function(t){return t.confidence<.7})).length;return{total:e.length,highConfidence:n,mediumConfidence:a,lowConfidence:i,avgConfidence:e.reduce((function(t,e){return t+e.confidence}),0)/e.length}}}},Ft=(0,At.y$)({state:{loading:!1,error:null},mutations:{SET_LOADING:function(t,e){t.loading=e},SET_ERROR:function(t,e){t.error=e}},actions:{setLoading:function(t,e){var n=t.commit;n("SET_LOADING",e)},setError:function(t,e){var n=t.commit;n("SET_ERROR",e)}},modules:{unconfirmedCitations:Tt,multitoolConfirmed:It,citationNetwork:Rt,mlClassifier:Ot}});n(8736);(0,a.Ef)(I).use(Ft).use(wt).mount("#app")},6999:(t,e,n)=>{n.d(e,{A:()=>yt});var a=n(641),i=n(33),r=n(3751),o={class:"unconfirmed-citations"},s={class:"card"},l={class:"card-body"},c={key:0,class:"text-center py-4"},u={key:1,class:"alert alert-danger"},d={key:2,class:"alert alert-info"},f={key:3},p={class:"mb-3"},v={class:"table-responsive"},m={class:"table table-striped table-hover"},g={key:0},h={key:1},k={class:"progress"},b=["aria-valuenow"],C={class:"text-truncate d-inline-block",style:{"max-width":"200px"}},y=["onClick","disabled"],L={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},_=["href"],x=["onClick"],w=["onClick"],A={class:"modal fade",id:"contextModal",tabindex:"-1","aria-labelledby":"contextModalLabel","aria-hidden":"true"},E={class:"modal-dialog modal-lg"},S={class:"modal-content"},T={class:"modal-body"},I={key:0},R={key:0,class:"citation-details mb-3"},N={class:"row"},O={key:0,class:"col-md-4"},F={key:1,class:"col-md-4"},X={key:2,class:"col-md-4"},P={class:"row mt-2"},D={key:0,class:"col-md-6"},M={key:1,class:"col-md-6"},U={class:"context-text"},z={key:1,class:"mt-3"},W=["href"],Q={class:"modal fade",id:"suggestionsModal",tabindex:"-1","aria-labelledby":"suggestionsModalLabel","aria-hidden":"true"},V={class:"modal-dialog modal-lg"},B={class:"modal-content"},j={class:"modal-body"},G={key:0,class:"text-center py-4"},J={key:1,class:"alert alert-danger"},q={key:2,class:"alert alert-info"},H={key:3},K={class:"list-group mt-3"},$=["onClick"],Y={class:"d-flex w-100 justify-content-between"},Z={class:"mb-1"},tt={class:"text-success"},et={class:"mb-1"},nt={key:0},at=["href"];function it(t,e,n,it,rt,ot){var st,lt=(0,a.g2)("NotCitationFeedback");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",s,[e[12]||(e[12]=(0,a.Lk)("div",{class:"card-header bg-danger text-white"},[(0,a.Lk)("h5",null,"Unconfirmed Citations"),(0,a.Lk)("p",{class:"mb-0"},"These citations could not be verified in any of our sources")],-1)),(0,a.Lk)("div",l,[rt.loading?((0,a.uX)(),(0,a.CE)("div",c,e[1]||(e[1]=[(0,a.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,a.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,a.Lk)("p",{class:"mt-2"},"Loading citations...",-1)]))):rt.error?((0,a.uX)(),(0,a.CE)("div",u,[e[2]||(e[2]=(0,a.Lk)("h5",null,"Error",-1)),(0,a.Lk)("p",null,(0,i.v_)(rt.error),1)])):0===rt.citations.length?((0,a.uX)(),(0,a.CE)("div",d,e[3]||(e[3]=[(0,a.Lk)("p",null,"No unconfirmed citations found.",-1)]))):((0,a.uX)(),(0,a.CE)("div",f,[(0,a.Lk)("div",p,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control",placeholder:"Search citations...","onUpdate:modelValue":e[0]||(e[0]=function(t){return rt.searchQuery=t})},null,512),[[r.Jo,rt.searchQuery]])]),(0,a.Lk)("div",v,[(0,a.Lk)("table",m,[e[11]||(e[11]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Citation"),(0,a.Lk)("th",null,"Possible Case Name"),(0,a.Lk)("th",null,"Details"),(0,a.Lk)("th",null,"Confidence"),(0,a.Lk)("th",null,"Explanation"),(0,a.Lk)("th",null,"Actions")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(ot.filteredCitations,(function(t,n){return(0,a.uX)(),(0,a.CE)("tr",{key:n},[(0,a.Lk)("td",null,(0,i.v_)(t.citation_text),1),(0,a.Lk)("td",null,(0,i.v_)(t.case_name||"Unknown"),1),(0,a.Lk)("td",null,[t.volume||t.reporter||t.page?((0,a.uX)(),(0,a.CE)("span",g,[e[4]||(e[4]=(0,a.Lk)("strong",null,"Vol:",-1)),(0,a.eW)(" "+(0,i.v_)(t.volume||"N/A")+" ",1),e[5]||(e[5]=(0,a.Lk)("strong",null,"Rep:",-1)),(0,a.eW)(" "+(0,i.v_)(t.reporter||"N/A")+" ",1),e[6]||(e[6]=(0,a.Lk)("strong",null,"Pg:",-1)),(0,a.eW)(" "+(0,i.v_)(t.page||"N/A")+" ",1),e[7]||(e[7]=(0,a.Lk)("br",null,null,-1))])):(0,a.Q3)("",!0),t.court||t.year?((0,a.uX)(),(0,a.CE)("span",h,[e[8]||(e[8]=(0,a.Lk)("strong",null,"Court:",-1)),(0,a.eW)(" "+(0,i.v_)(t.court||"N/A")+" ",1),e[9]||(e[9]=(0,a.Lk)("strong",null,"Year:",-1)),(0,a.eW)(" "+(0,i.v_)(t.year||"N/A"),1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("td",null,[(0,a.Lk)("div",k,[(0,a.Lk)("div",{class:"progress-bar bg-danger",role:"progressbar",style:(0,i.Tr)({width:100*t.confidence+"%"}),"aria-valuenow":100*t.confidence,"aria-valuemin":"0","aria-valuemax":"100"},(0,i.v_)(Math.round(100*t.confidence))+"% ",13,b)])]),(0,a.Lk)("td",null,[(0,a.Lk)("span",C,(0,i.v_)(t.explanation||"No explanation available"),1)]),(0,a.Lk)("td",null,[(0,a.bF)(lt,{citation:t.citation_text},null,8,["citation"])]),(0,a.Lk)("td",null,[(0,a.Lk)("button",{class:"btn btn-sm btn-outline-primary",onClick:function(e){return ot.reprocessCitation(t)},disabled:rt.reprocessing===t.citation_text},[rt.reprocessing===t.citation_text?((0,a.uX)(),(0,a.CE)("span",L)):(0,a.Q3)("",!0),e[10]||(e[10]=(0,a.eW)(" Reprocess "))],8,y),t.file_link?((0,a.uX)(),(0,a.CE)("a",{key:0,href:t.file_link,target:"_blank",class:"btn btn-sm btn-outline-secondary ms-1"}," Source File ",8,_)):(0,a.Q3)("",!0),t.context?((0,a.uX)(),(0,a.CE)("button",{key:1,class:"btn btn-sm btn-outline-info ms-1",onClick:function(e){return ot.showContext(t)}}," Context ",8,x)):(0,a.Q3)("",!0),(0,a.Lk)("button",{class:"btn btn-sm btn-outline-success ms-1",onClick:function(e){return ot.showSuggestions(t)}}," Suggestions ",8,w)])])})),128))])])])]))])]),(0,a.Lk)("div",A,[(0,a.Lk)("div",E,[(0,a.Lk)("div",S,[e[21]||(e[21]=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h5",{class:"modal-title",id:"contextModalLabel"},"Citation Context"),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,a.Lk)("div",T,[rt.selectedCitation?((0,a.uX)(),(0,a.CE)("div",I,[(0,a.Lk)("h6",null,"Citation: "+(0,i.v_)(rt.selectedCitation.citation_text),1),rt.selectedCitation.volume||rt.selectedCitation.reporter||rt.selectedCitation.page||rt.selectedCitation.court||rt.selectedCitation.year?((0,a.uX)(),(0,a.CE)("div",R,[e[18]||(e[18]=(0,a.Lk)("h6",null,"Citation Details:",-1)),(0,a.Lk)("div",N,[rt.selectedCitation.volume?((0,a.uX)(),(0,a.CE)("div",O,[e[13]||(e[13]=(0,a.Lk)("strong",null,"Volume:",-1)),(0,a.eW)(" "+(0,i.v_)(rt.selectedCitation.volume),1)])):(0,a.Q3)("",!0),rt.selectedCitation.reporter?((0,a.uX)(),(0,a.CE)("div",F,[e[14]||(e[14]=(0,a.Lk)("strong",null,"Reporter:",-1)),(0,a.eW)(" "+(0,i.v_)(rt.selectedCitation.reporter),1)])):(0,a.Q3)("",!0),rt.selectedCitation.page?((0,a.uX)(),(0,a.CE)("div",X,[e[15]||(e[15]=(0,a.Lk)("strong",null,"Page:",-1)),(0,a.eW)(" "+(0,i.v_)(rt.selectedCitation.page),1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",P,[rt.selectedCitation.court?((0,a.uX)(),(0,a.CE)("div",D,[e[16]||(e[16]=(0,a.Lk)("strong",null,"Court:",-1)),(0,a.eW)(" "+(0,i.v_)(rt.selectedCitation.court),1)])):(0,a.Q3)("",!0),rt.selectedCitation.year?((0,a.uX)(),(0,a.CE)("div",M,[e[17]||(e[17]=(0,a.Lk)("strong",null,"Year:",-1)),(0,a.eW)(" "+(0,i.v_)(rt.selectedCitation.year),1)])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),e[20]||(e[20]=(0,a.Lk)("h6",null,"Citation Context:",-1)),(0,a.Lk)("p",U,(0,i.v_)(rt.selectedCitation.context),1),rt.selectedCitation.file_link?((0,a.uX)(),(0,a.CE)("div",z,[(0,a.Lk)("a",{href:rt.selectedCitation.file_link,target:"_blank",class:"btn btn-outline-primary"},e[19]||(e[19]=[(0,a.Lk)("i",{class:"bi bi-file-earmark-text"},null,-1),(0,a.eW)(" View Source Document ")]),8,W)])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)]),e[22]||(e[22]=(0,a.Lk)("div",{class:"modal-footer"},[(0,a.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])]),(0,a.Lk)("div",Q,[(0,a.Lk)("div",V,[(0,a.Lk)("div",B,[e[26]||(e[26]=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h5",{class:"modal-title",id:"suggestionsModalLabel"},"Citation Correction Suggestions"),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,a.Lk)("div",j,[rt.loadingSuggestions?((0,a.uX)(),(0,a.CE)("div",G,e[23]||(e[23]=[(0,a.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,a.Lk)("span",{class:"visually-hidden"},"Loading...")],-1),(0,a.Lk)("p",{class:"mt-2"},"Loading suggestions...",-1)]))):rt.suggestionError?((0,a.uX)(),(0,a.CE)("div",J,[e[24]||(e[24]=(0,a.Lk)("h5",null,"Error",-1)),(0,a.Lk)("p",null,(0,i.v_)(rt.suggestionError),1)])):0===rt.suggestions.length?((0,a.uX)(),(0,a.CE)("div",q,e[25]||(e[25]=[(0,a.Lk)("p",null,"No correction suggestions available for this citation.",-1)]))):((0,a.uX)(),(0,a.CE)("div",H,[(0,a.Lk)("h6",null,"Original Citation: "+(0,i.v_)(null===(st=rt.selectedCitation)||void 0===st?void 0:st.citation_text),1),(0,a.Lk)("div",K,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(rt.suggestions,(function(t,e){return(0,a.uX)(),(0,a.CE)("a",{key:e,href:"#",class:"list-group-item list-group-item-action",onClick:(0,r.D$)((function(e){return ot.applySuggestion(t)}),["prevent"])},[(0,a.Lk)("div",Y,[(0,a.Lk)("h6",Z,(0,i.v_)(t.corrected_citation),1),(0,a.Lk)("small",tt,(0,i.v_)(Math.round(100*t.confidence))+"% match",1)]),(0,a.Lk)("p",et,(0,i.v_)(t.explanation),1),t.source_url?((0,a.uX)(),(0,a.CE)("small",nt,[(0,a.Lk)("a",{href:t.source_url,target:"_blank"},"View Source",8,at)])):(0,a.Q3)("",!0)],8,$)})),128))])]))]),e[27]||(e[27]=(0,a.Lk)("div",{class:"modal-footer"},[(0,a.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])])])}var rt=n(9201),ot=n(4048),st=n(388),lt=(n(2008),n(113),n(8980),n(4423),n(4346),n(2062),n(4554),n(8111),n(2489),n(116),n(1701),n(6099),n(1699),n(2505)),ct=n.n(lt),ut=n(454),dt={class:"not-citation-feedback"},ft={key:1,class:"text-success"},pt={key:2,class:"mt-2"};function vt(t,e,n,i,o,s){return(0,a.uX)(),(0,a.CE)("div",dt,[o.isFlagged?((0,a.uX)(),(0,a.CE)("span",ft,"Flagged as not a citation")):((0,a.uX)(),(0,a.CE)("button",{key:0,class:"btn btn-outline-danger btn-sm",onClick:e[0]||(e[0]=function(){return s.flagNotCitation&&s.flagNotCitation.apply(s,arguments)})}," Not a citation ")),o.showPatternInput?((0,a.uX)(),(0,a.CE)("div",pt,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return o.pattern=t}),placeholder:"Enter regex pattern (optional)",class:"form-control form-control-sm"},null,512),[[r.Jo,o.pattern]]),(0,a.Lk)("button",{class:"btn btn-primary btn-sm mt-1",onClick:e[2]||(e[2]=function(){return s.submitPattern&&s.submitPattern.apply(s,arguments)})},"Submit Pattern"),(0,a.Lk)("button",{class:"btn btn-secondary btn-sm mt-1 ms-2",onClick:e[3]||(e[3]=function(){return s.cancelPattern&&s.cancelPattern.apply(s,arguments)})},"Cancel")])):(0,a.Q3)("",!0)])}const mt={name:"NotCitationFeedback",props:{citation:{type:String,required:!0}},data:function(){return{isFlagged:!1,showPatternInput:!1,pattern:""}},methods:{flagNotCitation:function(){this.showPatternInput=!0,this.pattern=this.citation},submitPattern:function(){var t=this;return(0,st.A)((0,ot.A)().mark((function e(){var n;return(0,ot.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.pattern!==t.citation,e.prev=1,e.next=4,ct().post("/casestrainer/api/not_citations",{pattern:t.pattern,is_regex:n});case 4:t.isFlagged=!0,t.showPatternInput=!1,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),alert("Failed to submit pattern: "+e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},cancelPattern:function(){this.showPatternInput=!1}}};var gt=n(6262);const ht=(0,gt.A)(mt,[["render",vt],["__scopeId","data-v-eb2299a0"]]),kt=ht,bt={name:"UnconfirmedCitations",data:function(){return{citations:[],loading:!0,error:null,searchQuery:"",selectedCitation:null,contextModal:null,suggestionsModal:null,suggestions:[],loadingSuggestions:!1,suggestionError:null,reprocessing:null}},computed:{filteredCitations:function(){if(!this.searchQuery)return this.citations;var t=this.searchQuery.toLowerCase();return this.citations.filter((function(e){return e.citation_text.toLowerCase().includes(t)||e.case_name&&e.case_name.toLowerCase().includes(t)}))}},components:{NotCitationFeedback:kt},methods:{fetchCitations:function(){var t=this;return(0,st.A)((0,ot.A)().mark((function e(){var n,a,i;return(0,ot.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,t.error=null,e.prev=2,e.prev=3,e.next=6,ct().get("/citation_verification_results.json");case 6:if(n=e.sent,!(n.data&&n.data.still_unconfirmed&&n.data.still_unconfirmed.length>0)){e.next=12;break}return t.citations=n.data.still_unconfirmed.map((function(t){return{citation_text:t.citation_text,case_name:t.case_name||"Unknown",confidence:t.confidence||.3,explanation:t.explanation||"No explanation available",document:t.document||"",summaries:t.summaries||[]}})),console.log("Loaded",t.citations.length,"unconfirmed citations from JSON file"),t.loading=!1,e.abrupt("return");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),console.warn("Error loading from JSON file directly:",e.t0);case 17:return e.prev=17,e.next=20,ct().get("/api/unconfirmed_citations_data");case 20:a=e.sent,e.next=38;break;case 23:return e.prev=23,e.t1=e["catch"](17),console.warn("First endpoint attempt failed, trying alternate endpoint:",e.t1),e.prev=26,e.next=29,ct().get("/api/unconfirmed-citations-data");case 29:a=e.sent,e.next=38;break;case 32:return e.prev=32,e.t2=e["catch"](26),console.warn("Second endpoint attempt failed, trying with full path:",e.t2),e.next=37,ct().get("/casestrainer/api/unconfirmed_citations_data");case 37:a=e.sent;case 38:a.data&&a.data.citations&&(t.citations=a.data.citations),e.next=45;break;case 41:e.prev=41,e.t3=e["catch"](2),console.error("Error fetching unconfirmed citations:",e.t3),t.error=(null===(i=e.t3.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.error)||"An error occurred while fetching citations";case 45:return e.prev=45,t.loading=!1,e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[2,41,45,48],[3,14],[17,23],[26,32]])})))()},showContext:function(t){this.selectedCitation=t,this.contextModal.show()},showSuggestions:function(t){var e=this;return(0,st.A)((0,ot.A)().mark((function n(){var a,i;return(0,ot.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.selectedCitation=t,e.loadingSuggestions=!0,e.suggestionError=null,e.suggestions=[],e.suggestionsModal.show(),n.prev=5,n.next=8,ct().post("/api/correction-suggestions",{citation:t.citation_text});case 8:a=n.sent,e.suggestions=a.data.suggestions,n.next=16;break;case 12:n.prev=12,n.t0=n["catch"](5),console.error("Error fetching correction suggestions:",n.t0),e.suggestionError=(null===(i=n.t0.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.error)||"An error occurred while fetching suggestions";case 16:return n.prev=16,e.loadingSuggestions=!1,n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[5,12,16,19]])})))()},reprocessCitation:function(t){var e=this;return(0,st.A)((0,ot.A)().mark((function n(){var a,i,r,o,s;return(0,ot.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.reprocessing=t.citation_text,n.prev=1,n.next=4,ct().post("/api/reprocess-citations",{citations:[t.citation_text]});case 4:a=n.sent,i=e.citations.findIndex((function(e){return e.citation_text===t.citation_text})),-1!==i&&(r=Array.isArray(a.data.results)?a.data.results:[],o=r.find((function(e){return e.citation_text===t.citation_text})),o&&(o.found?e.citations.splice(i,1):e.citations[i]=(0,rt.A)((0,rt.A)({},e.citations[i]),o))),n.next=13;break;case 9:n.prev=9,n.t0=n["catch"](1),console.error("Error reprocessing citation:",n.t0),alert("Error reprocessing citation: "+((null===(s=n.t0.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.error)||"An unknown error occurred"));case 13:return n.prev=13,e.reprocessing=null,n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[1,9,13,16]])})))()},applySuggestion:function(t){this.selectedCitation&&(this.reprocessCitation((0,rt.A)((0,rt.A)({},this.selectedCitation),{},{citation_text:t.corrected_citation})),this.suggestionsModal.hide())}},mounted:function(){this.fetchCitations(),this.contextModal=new ut.Modal(document.getElementById("contextModal")),this.suggestionsModal=new ut.Modal(document.getElementById("suggestionsModal"))}},Ct=(0,gt.A)(bt,[["render",it],["__scopeId","data-v-2edb75e1"]]),yt=Ct},8430:(t,e,n)=>{n.d(e,{A:()=>o});n(8706);var a=n(2505),i=n.n(a),r="/casestrainer/api";const o={analyzeBriefText:function(t,e){return i().post("/casestrainer/api/analyze",{text:t,api_key:e})},analyzeFile:function(t){return i().post("/casestrainer/api/analyze",t,{headers:{"Content-Type":"multipart/form-data"}})},analyzeFilePath:function(t,e){return i().post("/casestrainer/api/analyze",{file_path:t,api_key:e})},getAnalysisStatus:function(t){return i().get("".concat(r,"/status?analysis_id=").concat(t))},getUnconfirmedCitations:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i().post("".concat(r,"/unconfirmed_citations_data"),t)},getMultitoolConfirmedCitations:function(){return i().get("".concat(r,"/confirmed_with_multitool_data"))},getCorrectionSuggestions:function(t){return i().post("".concat(r,"/correction_suggestions"),{citation:t})},getCitationNetworkData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return i().get("".concat(r,"/citation_network_data?filter=").concat(t,"&depth=").concat(e))},trainMLClassifier:function(){return i().post("".concat(r,"/train_ml_classifier"))},classifyCitation:function(t,e){return i().post("".concat(r,"/classify_citation"),{citation:t,case_name:e})},getTestCitations:function(t,e,n){return i().get("".concat(r,"/citation_tester_data"),{params:{count:t,include_confirmed:e,include_unconfirmed:n}})},exportCitations:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i().post("".concat(r,"/export_citations"),{format:t,filters:e})},verifyCitation:function(t,e){return i().post("".concat(r,"/verify_citation"),{citation:t,case_name:e})}}},8591:(t,e,n)=>{n.d(e,{A:()=>y});var a=n(641),i=n(3751),r=n(33),o={class:"enhanced-text-paste"},s={class:"card"},l={class:"card-body"},c={class:"mb-3"},u=["disabled"],d={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},f={key:0,class:"mt-4"};function p(t,e,n,p,v,m){var g=(0,a.g2)("ReusableResults");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",s,[e[3]||(e[3]=(0,a.Lk)("div",{class:"bg-primary text-white p-3 rounded-top"},[(0,a.Lk)("h5",{class:"mb-0"},"Paste Text")],-1)),(0,a.Lk)("div",l,[(0,a.Lk)("div",c,[e[2]||(e[2]=(0,a.Lk)("label",{for:"textInput",class:"form-label"},"Paste legal text to analyze for citations",-1)),(0,a.bo)((0,a.Lk)("textarea",{class:"form-control",id:"textInput","onUpdate:modelValue":e[0]||(e[0]=function(t){return v.pastedText=t}),rows:"10",placeholder:"Paste your legal document text here..."},null,512),[[i.Jo,v.pastedText]])]),(0,a.Lk)("button",{class:"btn btn-primary",onClick:e[1]||(e[1]=function(){return m.analyzeText&&m.analyzeText.apply(m,arguments)}),disabled:v.isAnalyzing||!v.pastedText},[v.isAnalyzing?((0,a.uX)(),(0,a.CE)("span",d)):(0,a.Q3)("",!0),(0,a.eW)(" "+(0,r.v_)(v.isAnalyzing?"Analyzing...":"Analyze Citations"),1)],8,u)])]),v.textAnalysisResult?((0,a.uX)(),(0,a.CE)("div",f,[(0,a.bF)(g,{results:v.textAnalysisResult},null,8,["results"])])):(0,a.Q3)("",!0)])}n(8706),n(2008),n(4423),n(4114),n(739),n(8111),n(2489),n(3110),n(6099),n(1699);var v=n(2505),m=n.n(v),g=n(5023),h=n(5703);const k={name:"EnhancedTextPaste",components:{ProgressBar:g.A,ReusableResults:h.A},data:function(){return{pastedText:"",isAnalyzing:!1,textAnalysisResult:null,error:null,debugInfo:""}},computed:{confirmedCount:function(){return this.textAnalysisResult&&this.textAnalysisResult.validation_results?this.textAnalysisResult.validation_results.filter((function(t){return t.verified})).length:0},unconfirmedCount:function(){return this.textAnalysisResult&&this.textAnalysisResult.validation_results?this.textAnalysisResult.validation_results.filter((function(t){return!t.verified})).length:0},basePath:function(){var t=window.location.pathname;return t.includes("/casestrainer/")?"/casestrainer":""}},methods:{analyzeText:function(){var t=this;this.pastedText?(this.isAnalyzing=!0,this.textAnalysisResult=null,this.debugInfo="Debug: Starting text analysis...\n",this.debugInfo+="Request to ".concat(this.basePath,"/api/analyze: [Text data]\n"),m().post("".concat(this.basePath,"/api/analyze"),{text:this.pastedText}).then((function(e){t.debugInfo+="Response received: Processing data...\n";var n=JSON.stringify(e.data,null,2);t.debugInfo+="Success: ".concat(n.substring(0,500)).concat(n.length>500?"... [truncated]":"","\n"),t.textAnalysisResult=e.data}))["catch"]((function(e){var n;alert("Error analyzing text: ".concat((null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||e.message||"Unknown error")),t.debugInfo+="Error: ".concat(e.message,"\n"),e.response&&(t.debugInfo+="Response status: ".concat(e.response.status,"\n"),t.debugInfo+="Response data: ".concat(JSON.stringify(e.response.data,null,2),"\n"))}))["finally"]((function(){t.isAnalyzing=!1}))):alert("Please paste some text to analyze")},getBadgeClass:function(t){switch(t){case"Landmark":return"bg-primary";case"CourtListener":return"bg-success";case"Multitool":return"bg-info";case"Other":return"bg-secondary";default:return"bg-dark"}},viewConfirmedCitations:function(){this.$router.push("/unconfirmed-citations?filter=confirmed")},viewUnconfirmedCitations:function(){this.$router.push("/unconfirmed-citations?filter=unconfirmed")}}};var b=n(6262);const C=(0,b.A)(k,[["render",p],["__scopeId","data-v-0c9cbeb2"]]),y=C}},e={};function n(a){var i=e[a];if(void 0!==i)return i.exports;var r=e[a]={exports:{}};return t[a].call(r.exports,r,r.exports,n),r.exports}n.m=t,(()=>{var t=[];n.O=(e,a,i,r)=>{if(!a){var o=1/0;for(u=0;u<t.length;u++){for(var[a,i,r]=t[u],s=!0,l=0;l<a.length;l++)(!1&r||o>=r)&&Object.keys(n.O).every((t=>n.O[t](a[l])))?a.splice(l--,1):(s=!1,r<o&&(o=r));if(s){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[a,i,r]}})(),(()=>{n.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return n.d(e,{a:e}),e}})(),(()=>{n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}})(),(()=>{n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,a)=>(n.f[a](t,e),e)),[]))})(),(()=>{n.u=t=>"js/"+t+"."+{114:"af11e92b",198:"954fb006",335:"327b7116",342:"d1b872d4",536:"7262281a",762:"2bbbcdeb",765:"41851bf7"}[t]+".js"})(),(()=>{n.miniCssF=t=>"css/"+t+"."+{114:"f91a3a05",342:"9789d246",536:"a1aadbde"}[t]+".css"})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{var t={},e="casestrainer-vue:";n.l=(a,i,r,o)=>{if(t[a])t[a].push(i);else{var s,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==e+r){s=d;break}}s||(l=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",e+r),s.src=a),t[a]=[i];var f=(e,n)=>{s.onerror=s.onload=null,clearTimeout(p);var i=t[a];if(delete t[a],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((t=>t(n))),e)return e(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),(()=>{n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{n.p="/casestrainer/"})(),(()=>{if("undefined"!==typeof document){var t=(t,e,a,i,r)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",n.nc&&(o.nonce=n.nc);var s=n=>{if(o.onerror=o.onload=null,"load"===n.type)i();else{var a=n&&n.type,s=n&&n.target&&n.target.href||e,l=new Error("Loading CSS chunk "+t+" failed.\n("+a+": "+s+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=a,l.request=s,o.parentNode&&o.parentNode.removeChild(o),r(l)}};return o.onerror=o.onload=s,o.href=e,a?a.parentNode.insertBefore(o,a.nextSibling):document.head.appendChild(o),o},e=(t,e)=>{for(var n=document.getElementsByTagName("link"),a=0;a<n.length;a++){var i=n[a],r=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(r===t||r===e))return i}var o=document.getElementsByTagName("style");for(a=0;a<o.length;a++){i=o[a],r=i.getAttribute("data-href");if(r===t||r===e)return i}},a=a=>new Promise(((i,r)=>{var o=n.miniCssF(a),s=n.p+o;if(e(o,s))return i();t(a,s,null,i,r)})),i={524:0};n.f.miniCss=(t,e)=>{var n={114:1,342:1,536:1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=a(t).then((()=>{i[t]=0}),(e=>{throw delete i[t],e})))}}})(),(()=>{var t={524:0};n.f.j=(e,a)=>{var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)a.push(i[2]);else{var r=new Promise(((n,a)=>i=t[e]=[n,a]));a.push(i[2]=r);var o=n.p+n.u(e),s=new Error,l=a=>{if(n.o(t,e)&&(i=t[e],0!==i&&(t[e]=void 0),i)){var r=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;s.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",s.name="ChunkLoadError",s.type=r,s.request=o,i[1](s)}};n.l(o,l,"chunk-"+e,e)}},n.O.j=e=>0===t[e];var e=(e,a)=>{var i,r,[o,s,l]=a,c=0;if(o.some((e=>0!==t[e]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)var u=l(n)}for(e&&e(a);c<o.length;c++)r=o[c],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(u)},a=self["webpackChunkcasestrainer_vue"]=self["webpackChunkcasestrainer_vue"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))})();var a=n.O(void 0,[504],(()=>n(6957)));a=n.O(a)})();
//# sourceMappingURL=app.4e03e6e1.js.map