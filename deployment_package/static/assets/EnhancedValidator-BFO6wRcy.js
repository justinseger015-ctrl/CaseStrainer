const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/api-B_2aFGKK.js","assets/index-D5v2aCTm.js","assets/vendor-CMnRMYmA.js","assets/index-C4JXUA0b.css"])))=>i.map(i=>d[i]);
import{r as e,z as a,c as l,o as t,b as s,n as i,g as n,t as o,A as c,B as r,F as d,p as u,u as v,v as m,C as b,q as g,D as p,x as y,d as f,f as h,h as x,E as C,G as k,H as w,I as R,y as T}from"./vendor-CMnRMYmA.js";import{c as A,_ as S,a as V,u as _}from"./index-D5v2aCTm.js";function I(l,t={}){const{execute:s,...i}=function(l={}){const{loadingMessage:t="Loading...",showLoading:s=!0,onSuccess:i,onError:n,onFinally:o}=l,c=e(null),r=e(null),d=e(!1),u=e(null);let v=null,m=null;const b=`api_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return a((()=>{m&&m.abort(),v&&v.remove()})),{execute:async function(e,a={}){var g;const{message:p=t,showLoader:y=s,signal:f,...h}={...l,...a};r.value=null,u.value=null,c.value=null,y&&(v=A(b,{message:p})),d.value=!0,"undefined"!=typeof AbortController&&(m=new AbortController,h.signal=f||m.signal);try{const a=await e({...h,signal:h.signal});return c.value=a.data||a,u.value=a.status||200,i&&i(a),a}catch(x){throw r.value=x,u.value=(null==(g=x.response)?void 0:g.status)||0,n&&n(x),x}finally{d.value=!1,v&&(r.value?v.error(r.value):v.complete(),v=null),o&&o(),m=null}},cancel:function(){m&&(m.abort(),m=null),v&&(v.remove(),v=null),d.value=!1},data:c,error:r,isLoading:d,status:u}}(t);return{post:async function(e={},a={}){return s((t=>t.post(l,e,a)))},...i}}const N={class:"file-upload"},L={class:"card"},D={class:"card-body"},E={key:0,class:"alert alert-danger"},F={class:"mb-3"},U={key:1,class:"mb-3"},z={class:"alert alert-info"},M={key:2,class:"mb-3"},P={class:"progress"},O=["aria-valuenow"],j=["disabled"],B={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},q={key:3,class:"mt-4"},$={key:0},J={key:1},G={class:"list-group mt-2"},H={key:2,class:"mt-3"};const Y=S({name:"FileUpload",emits:["results","error"],setup(a,{emit:l}){const t=e(null),s=e(!1),i=e(0),n=e(null),o=e(null);return{file:t,isUploading:s,uploadProgress:i,error:n,results:o,handleFileChange:e=>{e.target.files.length>0&&(t.value=e.target.files[0],n.value=null,o.value=null)},uploadFile:async()=>{var e,a;if(!t.value)return void(n.value="Please select a file to upload");s.value=!0,i.value=0,n.value=null,o.value=null;const c=new FormData;c.append("file",t.value);try{const e=(await V((async()=>{const{default:e}=await import("./api-B_2aFGKK.js");return{default:e}}),__vite__mapDeps([0,1,2,3]))).default,a=await e.post("/analyze",c,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(e.total){const a=Math.round(100*e.loaded/e.total);i.value=Math.min(a,90)}}});i.value=100,o.value=a,l("results",o.value)}catch(r){n.value=(null==(a=null==(e=r.response)?void 0:e.data)?void 0:a.message)||"Failed to analyze document",l("error",n.value)}finally{s.value=!1}},formatFileSize:e=>{if(0===e)return"0 Bytes";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB"][a]},getAlertClass:e=>({"alert-success":!0===e,"alert-danger":!1===e,"alert-info":null==e})}}},[["render",function(e,a,v,m,b,g){return t(),l("div",N,[s("div",L,[a[9]||(a[9]=s("div",{class:"card-header bg-primary text-white"},[s("h5",{class:"mb-0"},"Upload Document")],-1)),s("div",D,[m.error?(t(),l("div",E,[a[2]||(a[2]=s("strong",null,"Error:",-1)),n(" "+o(m.error),1)])):i("",!0),s("div",F,[a[3]||(a[3]=s("label",{for:"fileUpload",class:"form-label"},"Select a file to analyze for citations",-1)),s("input",{type:"file",id:"fileUpload",class:"form-control",onChange:a[0]||(a[0]=(...e)=>m.handleFileChange&&m.handleFileChange(...e)),accept:".pdf,.docx,.txt,.rtf,.doc,.html,.htm"},null,32),a[4]||(a[4]=s("div",{class:"form-text"},"Supported formats: PDF, DOCX, TXT, RTF, DOC, HTML",-1))]),m.file?(t(),l("div",U,[s("div",z,[a[5]||(a[5]=s("strong",null,"Selected file:",-1)),n(" "+o(m.file.name)+" ("+o(m.formatFileSize(m.file.size))+") ",1)])])):i("",!0),m.uploadProgress>0&&m.uploadProgress<100?(t(),l("div",M,[s("div",P,[s("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:c({width:m.uploadProgress+"%"}),"aria-valuenow":m.uploadProgress,"aria-valuemin":"0","aria-valuemax":"100"},o(m.uploadProgress)+"% ",13,O)])])):i("",!0),s("button",{class:"btn btn-primary",onClick:a[1]||(a[1]=(...e)=>m.uploadFile&&m.uploadFile(...e)),disabled:!m.file||m.isUploading},[m.isUploading?(t(),l("span",B)):i("",!0),n(" "+o(m.isUploading?"Analyzing...":"Analyze Document"),1)],8,j),m.results?(t(),l("div",q,[a[8]||(a[8]=s("h5",null,"Analysis Results",-1)),s("div",{class:r(["alert",m.getAlertClass(m.results.valid)])},[s("p",null,[a[6]||(a[6]=s("strong",null,"Status:",-1)),n(" "+o(m.results.valid?"Valid":"Invalid"),1)]),m.results.message?(t(),l("p",$,o(m.results.message),1)):i("",!0),m.results.citations&&m.results.citations.length>0?(t(),l("div",J,[s("h6",null,"Found "+o(m.results.citations.length)+" citations:",1),s("ul",G,[(t(!0),l(d,null,u(m.results.citations,((e,a)=>(t(),l("li",{key:a,class:"list-group-item d-flex justify-content-between align-items-center"},[n(o(e.text)+" ",1),s("span",{class:r(["badge rounded-pill",e.valid?"bg-success":"bg-danger"])},o(e.valid?"Valid":"Invalid"),3)])))),128))])])):i("",!0),m.results.metadata?(t(),l("div",H,[a[7]||(a[7]=s("h6",null,"Document Metadata:",-1)),s("pre",null,o(JSON.stringify(m.results.metadata,null,2)),1)])):i("",!0)],2)])):i("",!0)])])])}],["__scopeId","data-v-9cd73b41"]]),K={class:"text-paste"},W={class:"card"},X={class:"card-body"},Z={key:0,class:"alert alert-danger"},Q={class:"mb-3"},ee=["disabled"],ae={class:"form-check form-switch mb-3"},le=["disabled"],te={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},se={key:1,class:"mt-4"},ie={key:0},ne={key:1},oe={class:"table-responsive"},ce={class:"table table-striped table-hover mt-2"},re={key:0},de={key:0,class:"text-muted small"},ue={key:0},ve={key:0,class:"context-preview"},me={key:1,class:"text-muted small"},be={key:2,class:"alert alert-info"},ge={key:3,class:"mt-3"},pe={class:"list-group"},ye={class:"list-group-item d-flex justify-content-between align-items-center"},fe={class:"badge bg-primary rounded-pill"},he={class:"list-group-item d-flex justify-content-between align-items-center"},xe={class:"badge bg-success rounded-pill"},Ce={class:"list-group-item d-flex justify-content-between align-items-center"},ke={class:"badge bg-danger rounded-pill"};const we=S({name:"TextPaste",emits:["results","error"],setup(a,{emit:l}){const t=e(""),s=e(!1),i=e(null),n=e(null),o=e(!0);return{pastedText:t,isAnalyzing:s,error:i,results:n,includeContext:o,analyzeText:async()=>{var e,a;if(t.value.trim()){s.value=!0,i.value=null,n.value=null;try{const e=(await V((async()=>{const{default:e}=await import("./api-B_2aFGKK.js");return{default:e}}),__vite__mapDeps([0,1,2,3]))).default,a=await e.post("/analyze-text",{text:t.value,includeContext:o.value});n.value=a,l("results",n.value)}catch(c){i.value=(null==(a=null==(e=c.response)?void 0:e.data)?void 0:a.message)||"Failed to analyze text",l("error",i.value)}finally{s.value=!1}}else i.value="Please enter some text to analyze"},getAlertClass:e=>({"alert-success":!0===e,"alert-danger":!1===e,"alert-info":null==e})}}},[["render",function(e,a,c,g,p,y){return t(),l("div",K,[s("div",W,[a[14]||(a[14]=s("div",{class:"card-header bg-primary text-white"},[s("h5",{class:"mb-0"},"Paste Text")],-1)),s("div",X,[g.error?(t(),l("div",Z,[a[3]||(a[3]=s("strong",null,"Error:",-1)),n(" "+o(g.error),1)])):i("",!0),s("div",Q,[a[4]||(a[4]=s("label",{for:"textInput",class:"form-label"},"Paste your legal text to analyze for citations",-1)),v(s("textarea",{id:"textInput",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=e=>g.pastedText=e),rows:"10",placeholder:"Paste your legal document text here...",disabled:g.isAnalyzing},null,8,ee),[[m,g.pastedText]])]),s("div",ae,[v(s("input",{class:"form-check-input",type:"checkbox",id:"includeContext","onUpdate:modelValue":a[1]||(a[1]=e=>g.includeContext=e)},null,512),[[b,g.includeContext]]),a[5]||(a[5]=s("label",{class:"form-check-label",for:"includeContext"},"Include context around citations",-1))]),s("button",{class:"btn btn-primary",onClick:a[2]||(a[2]=(...e)=>g.analyzeText&&g.analyzeText(...e)),disabled:!g.pastedText||g.isAnalyzing},[g.isAnalyzing?(t(),l("span",te)):i("",!0),n(" "+o(g.isAnalyzing?"Analyzing...":"Analyze Text"),1)],8,le),g.results?(t(),l("div",se,[a[13]||(a[13]=s("h5",null,"Analysis Results",-1)),s("div",{class:r(["alert",g.getAlertClass(g.results.valid)])},[s("p",null,[a[6]||(a[6]=s("strong",null,"Status:",-1)),n(" "+o(g.results.valid?"Valid":"Invalid"),1)]),g.results.message?(t(),l("p",ie,o(g.results.message),1)):i("",!0),g.results.citations&&g.results.citations.length>0?(t(),l("div",ne,[s("h6",null,"Found "+o(g.results.citations.length)+" citations:",1),s("div",oe,[s("table",ce,[s("thead",null,[s("tr",null,[a[7]||(a[7]=s("th",null,"Citation",-1)),a[8]||(a[8]=s("th",null,"Status",-1)),g.includeContext?(t(),l("th",re,"Context")):i("",!0)])]),s("tbody",null,[(t(!0),l(d,null,u(g.results.citations,((e,a)=>(t(),l("tr",{key:a},[s("td",null,[s("strong",null,o(e.text),1),e.correction?(t(),l("div",de," Suggested: "+o(e.correction),1)):i("",!0)]),s("td",null,[s("span",{class:r(["badge",e.valid?"bg-success":"bg-danger"])},o(e.valid?"Valid":"Invalid"),3)]),g.includeContext?(t(),l("td",ue,[e.context?(t(),l("div",ve,o(e.context),1)):(t(),l("div",me,"No context available"))])):i("",!0)])))),128))])])])])):(t(),l("div",be," No citations found in the provided text. ")),g.results.summary?(t(),l("div",ge,[a[12]||(a[12]=s("h6",null,"Summary:",-1)),s("ul",pe,[s("li",ye,[a[9]||(a[9]=n(" Total Citations ")),s("span",fe,o(g.results.summary.total||0),1)]),s("li",he,[a[10]||(a[10]=n(" Valid Citations ")),s("span",xe,o(g.results.summary.valid||0),1)]),s("li",Ce,[a[11]||(a[11]=n(" Invalid Citations ")),s("span",ke,o(g.results.summary.invalid||0),1)])])])):i("",!0)],2)])):i("",!0)])])])}],["__scopeId","data-v-6a219150"]]),Re={name:"CitationResults",props:{results:{type:Object,default:()=>({citations:[],metadata:{}})},loading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["new-analysis","apply-correction"],setup(a,{emit:l}){const t=e(null),s=g((()=>a.results.citations?a.results.citations.filter((e=>e.valid)).length:0)),i=g((()=>a.results.citations?a.results.citations.filter((e=>!e.valid)).length:0));return{expandedDetails:t,validCount:s,invalidCount:i,getStatusText:e=>e.valid?"Valid":e.correction?"Needs Correction":"Invalid",getStatusBadgeClass:e=>e.valid?"bg-success":e.correction?"bg-warning text-dark":"bg-danger",toggleDetails:e=>{t.value=t.value===e?null:e},startNewAnalysis:()=>{l("new-analysis")},applyCorrection:e=>{l("apply-correction",e)},downloadResults:e=>{},copyToClipboard:()=>{}}}},Te={class:"citation-results"},Ae={key:0,class:"text-center my-4"},Se={key:1,class:"alert alert-danger"},Ve={class:"mb-0"},_e={key:2,class:"results-container"},Ie={class:"d-flex justify-content-between align-items-center mb-3"},Ne={class:"badge bg-primary me-2"},Le={class:"badge bg-success me-2"},De={class:"badge bg-danger"},Ee={class:"table-responsive"},Fe={class:"table table-hover"},Ue={class:"d-flex align-items-center"},ze={class:"citation-text"},Me=["onClick"],Pe={key:0,class:"text-muted small mt-1"},Oe={class:"badge bg-info"},je=["onClick"],Be={class:"card-header"},qe={class:"mb-0"},$e={class:"card-body"},Je={class:"row"},Ge={class:"col-md-6"},He={class:"row"},Ye={class:"col-sm-8"},Ke={class:"col-sm-8"},We={class:"col-sm-8"},Xe={class:"col-sm-8"},Ze={class:"col-md-6"},Qe={class:"row"},ea={class:"col-sm-8"},aa={class:"col-sm-8"},la={class:"progress",style:{height:"20px"}},ta=["aria-valuenow"],sa={class:"col-sm-8"},ia=["href"],na={key:1},oa={key:1},ca={key:0,class:"mt-3"},ra={class:"context-box"},da={key:1,class:"mt-3"},ua={class:"bg-light p-2 rounded"},va={class:"d-flex justify-content-between align-items-center mt-4"},ma={key:3,class:"text-center py-5"};const ba={class:"enhanced-validator container-fluid py-3"},ga={class:"row g-3"},pa={class:"col-12"},ya={class:"card shadow-sm"},fa={class:"card-header bg-primary text-white py-3"},ha={class:"d-flex flex-column"},xa={class:"d-flex flex-wrap gap-2"},Ca={class:"card-body p-3"},ka={key:0,class:"alert alert-danger d-flex align-items-center py-2 mb-3",role:"alert"},wa={class:"small"},Ra={key:1},Ta={class:"mb-4"},Aa={class:"input-group"},Sa=["disabled"],Va=["disabled"],_a={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},Ia={key:1,class:"position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"},Na={class:"row g-3 mb-4"},La={class:"col-md-4"},Da={class:"form-check form-switch"},Ea=["disabled"],Fa={class:"col-md-4"},Ua={class:"form-check form-switch"},za=["disabled"],Ma={class:"col-md-4"},Pa={class:"form-check form-switch"},Oa=["disabled"],ja={key:0,class:"mt-3"},Ba={class:"nav nav-tabs nav-fill",id:"resultsTabs",role:"tablist"},qa={class:"nav-item",role:"presentation"},$a={class:"nav-item",role:"presentation"},Ja={key:0,class:"nav-item",role:"presentation"},Ga={class:"badge bg-primary ms-1"},Ha={class:"border border-top-0 p-3 bg-white"},Ya={key:0,class:"small"},Ka={class:"d-flex align-items-center mb-3"},Wa={class:"mb-0"},Xa={class:"text-muted"},Za={class:"row g-2 small"},Qa={class:"col-6"},el={class:"col-6"},al={class:"col-6"},ll={class:"col-6"},tl={class:"col-6"},sl={class:"col-6"},il={key:1,class:"small"},nl={class:"mb-3"},ol={class:"d-flex justify-content-between mb-1"},cl={class:"text-capitalize"},rl={class:"fw-medium"},dl={class:"progress",style:{height:"6px"}},ul=["aria-valuenow"],vl={key:0},ml={class:"mb-0"},bl={key:2,class:"small"},gl={class:"list-group list-group-flush"},pl={class:"d-flex justify-content-between align-items-start"},yl={class:"mb-1"},fl={class:"mb-1"},hl={class:"text-muted"},xl=["onClick"],Cl={key:3,class:"text-muted text-center py-4"},kl={key:1,class:"mt-3"},wl={class:"card border-0 shadow-sm"},Rl={class:"card-header bg-light py-2"},Tl={class:"mb-0"},Al={class:"card-body p-0"},Sl={key:2},Vl={key:3},_l={key:0,class:"col-md-4 mt-4 mt-md-0"},Il={key:0,class:"row mt-4"},Nl={class:"col-12"},Ll={class:"card border-0 shadow-sm"},Dl={class:"card-header bg-light d-flex justify-content-between align-items-center"},El={class:"mb-0"},Fl={class:"btn-group"},Ul={class:"card-body p-0"};const zl=S({name:"EnhancedValidator",components:{FileUpload:Y,TextPaste:we,CitationResults:S(Re,[["render",function(e,a,m,b,g,y){return t(),l("div",Te,[m.loading?(t(),l("div",Ae,a[4]||(a[4]=[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1),s("p",{class:"mt-2"},"Analyzing citations...",-1)]))):m.error?(t(),l("div",Se,[a[5]||(a[5]=s("h5",{class:"alert-heading"},"Error",-1)),s("p",Ve,o(m.error),1)])):m.results&&m.results.citations&&m.results.citations.length>0?(t(),l("div",_e,[s("div",Ie,[a[6]||(a[6]=s("h4",{class:"mb-0"},"Citation Analysis Results",-1)),s("div",null,[s("span",Ne," Total: "+o(m.results.citations.length),1),s("span",Le," Valid: "+o(b.validCount),1),s("span",De," Invalid: "+o(b.invalidCount),1)])]),s("div",Ee,[s("table",Fe,[a[9]||(a[9]=s("thead",null,[s("tr",null,[s("th",null,"Citation"),s("th",null,"Status"),s("th",null,"Type"),s("th",null,"Details")])],-1)),s("tbody",null,[(t(!0),l(d,null,u(m.results.citations,((e,c)=>(t(),l("tr",{key:c,class:"align-middle"},[s("td",null,[s("div",Ue,[s("span",ze,o(e.text),1),e.correction?(t(),l("button",{key:0,class:"btn btn-sm btn-outline-secondary ms-2",onClick:a=>b.applyCorrection(e),title:"Apply correction"},a[7]||(a[7]=[s("i",{class:"bi bi-arrow-clockwise"},null,-1)]),8,Me)):i("",!0)]),e.correction?(t(),l("div",Pe,[a[8]||(a[8]=s("i",{class:"bi bi-lightbulb"},null,-1)),n(" Suggested: "+o(e.correction),1)])):i("",!0)]),s("td",null,[s("span",{class:r(["badge",b.getStatusBadgeClass(e)])},o(b.getStatusText(e)),3)]),s("td",null,[s("span",Oe,o(e.type||"Unknown"),1)]),s("td",null,[s("button",{class:"btn btn-sm btn-outline-primary",onClick:e=>b.toggleDetails(c)},o(b.expandedDetails===c?"Hide":"View")+" Details ",9,je)])])))),128))])])]),(t(!0),l(d,null,u(m.results.citations,((e,u)=>v((t(),l("div",{key:"detail-"+u,class:"card mb-3"},[s("div",Be,[s("h5",qe,"Citation Details: "+o(e.text),1)]),s("div",$e,[s("div",Je,[s("div",Ge,[a[14]||(a[14]=s("h6",null,"Basic Information",-1)),s("dl",He,[a[10]||(a[10]=s("dt",{class:"col-sm-4"},"Status",-1)),s("dd",Ye,[s("span",{class:r(["badge",b.getStatusBadgeClass(e)])},o(b.getStatusText(e)),3)]),a[11]||(a[11]=s("dt",{class:"col-sm-4"},"Type",-1)),s("dd",Ke,o(e.type||"N/A"),1),a[12]||(a[12]=s("dt",{class:"col-sm-4"},"Court",-1)),s("dd",We,o(e.court||"N/A"),1),a[13]||(a[13]=s("dt",{class:"col-sm-4"},"Year",-1)),s("dd",Xe,o(e.year||"N/A"),1)])]),s("div",Ze,[a[18]||(a[18]=s("h6",null,"Verification",-1)),s("dl",Qe,[a[15]||(a[15]=s("dt",{class:"col-sm-4"},"Verified",-1)),s("dd",ea,[s("i",{class:r(["bi",e.valid?"bi-check-circle-fill text-success":"bi-x-circle-fill text-danger"])},null,2),n(" "+o(e.valid?"Yes":"No"),1)]),a[16]||(a[16]=s("dt",{class:"col-sm-4"},"Confidence",-1)),s("dd",aa,[s("div",la,[s("div",{class:"progress-bar",role:"progressbar",style:c({width:100*e.confidence+"%"}),"aria-valuenow":100*e.confidence,"aria-valuemin":"0","aria-valuemax":"100"},o(Math.round(100*e.confidence))+"% ",13,ta)])]),a[17]||(a[17]=s("dt",{class:"col-sm-4"},"Source",-1)),s("dd",sa,[e.source?(t(),l(d,{key:0},[e.sourceUrl?(t(),l("a",{key:0,href:e.sourceUrl,target:"_blank"},o(e.source),9,ia)):(t(),l("span",na,o(e.source),1))],64)):(t(),l("span",oa,"N/A"))])])])]),e.context?(t(),l("div",ca,[a[19]||(a[19]=s("h6",null,"Context",-1)),s("div",ra,o(e.context),1)])):i("",!0),e.metadata?(t(),l("div",da,[a[20]||(a[20]=s("h6",null,"Additional Metadata",-1)),s("pre",ua,o(JSON.stringify(e.metadata,null,2)),1)])):i("",!0)])])),[[p,b.expandedDetails===u]]))),128)),s("div",va,[s("div",null,[s("button",{class:"btn btn-outline-secondary me-2",onClick:a[0]||(a[0]=e=>b.downloadResults("json"))},a[21]||(a[21]=[s("i",{class:"bi bi-download me-1"},null,-1),n(" Download JSON ")])),s("button",{class:"btn btn-outline-secondary me-2",onClick:a[1]||(a[1]=e=>b.downloadResults("csv"))},a[22]||(a[22]=[s("i",{class:"bi bi-file-earmark-spreadsheet me-1"},null,-1),n(" Download CSV ")])),s("button",{class:"btn btn-outline-secondary",onClick:a[2]||(a[2]=(...e)=>b.copyToClipboard&&b.copyToClipboard(...e))},a[23]||(a[23]=[s("i",{class:"bi bi-clipboard me-1"},null,-1),n(" Copy to Clipboard ")]))]),s("div",null,[s("button",{class:"btn btn-primary",onClick:a[3]||(a[3]=(...e)=>b.startNewAnalysis&&b.startNewAnalysis(...e))},a[24]||(a[24]=[s("i",{class:"bi bi-arrow-repeat me-1"},null,-1),n(" New Analysis ")]))])])])):(t(),l("div",ma,a[25]||(a[25]=[s("div",{class:"text-muted"},[s("i",{class:"bi bi-search",style:{"font-size":"3rem"}}),s("h4",{class:"mt-3"},"No citations found"),s("p",{class:"mb-0"},"Try analyzing some legal text to see citation results here.")],-1)])))])}],["__scopeId","data-v-aa02e6cf"]])},setup(){const l=R();T();const t=e("single"),s=e("validation"),i=e(!0),n=e(!0),o=e(!0),c=e(""),r=e(null),d=e(null),u=e(null),v=e(!0),m=e(!0),b=e(!0),{execute:p,isLoading:y,error:f,cancel:h}=I("/casestrainer/api/verify_citation",{loadingMessage:"Validating citation..."}),x=async e=>{try{const a=await p({data:e,headers:{"Content-Type":"application/json"}});return function(e){(e=>{var a,l;const t=e.data||e;r.value=null,d.value=null,u.value=null,t.validation&&(r.value={valid:t.validation.is_valid,message:t.validation.message,details:t.validation.details||{}});t.ml_analysis&&(d.value={prediction:t.ml_analysis.prediction,confidence:t.ml_analysis.confidence,is_valid:t.ml_analysis.is_valid,details:t.ml_analysis.explanation});(null==(l=null==(a=t.corrections)?void 0:a.suggestions)?void 0:l.length)&&(u.value={suggestions:t.corrections.suggestions.map(((e,a)=>({id:`suggestion-${a}`,corrected_text:e.corrected_text,explanation:e.explanation||"No explanation provided",confidence:e.confidence||0})))})})(e),U(c.value.trim(),e.data.validation.is_valid),A.value=!1}(a),a}catch(a){throw function(e){f.value=e.message||"Failed to validate citation. Please try again.",A.value=!1}(a),a}},A=e(!1);a((()=>{A.value&&h()}));const{isLoading:S}=_(),V=g((()=>y.value||S.value)),N=e(null),L=e(null),D=e([]),E=()=>{if(l.query.tab){["single","document","text","url"].includes(l.query.tab)&&(t.value=l.query.tab)}l.query.citation&&(c.value=l.query.citation,t.value="single",c.value.trim()&&F())};C((()=>l.query),((e,a)=>{JSON.stringify(e)!==JSON.stringify(a)&&E()})),k((()=>{(()=>{try{const e=localStorage.getItem("recentValidations");if(e){const a=JSON.parse(e);Array.isArray(a)&&(D.value=a.filter((e=>e&&e.citation&&"boolean"==typeof e.isValid)).slice(0,10),D.value.length!==a.length&&localStorage.setItem("recentValidations",JSON.stringify(D.value)))}}catch(e){try{localStorage.removeItem("recentValidations")}catch(a){}D.value=[]}})(),w(E)}));const F=async()=>{if(c.value.trim()&&!A.value){f.value=null,r.value=null,d.value=null,u.value=null,i.value=!0,n.value=!0,o.value=!0,A.value=!0;try{await x({citation:c.value.trim(),enhanced:v.value,use_ml:m.value,suggest_corrections:b.value})}catch(e){}}},U=(e,a)=>{var l;if(e&&(null==(l=D.value[0])?void 0:l.citation)!==e){D.value.unshift({id:Date.now(),citation:e,isValid:a,timestamp:(new Date).toISOString()}),D.value.length>10&&(D.value=D.value.slice(0,10));try{localStorage.setItem("recentValidations",JSON.stringify(D.value))}catch(t){}}};return{activeTab:t,activeResultTab:s,showBasicValidation:i,showMLAnalysis:n,showCorrections:o,citationText:c,validationResult:r,mlResult:d,correctionResult:u,useEnhanced:v,useML:m,useCorrection:b,documentAnalysisResult:N,textAnalysisResult:L,recentValidations:D,error:f,showLoading:V,hasActiveRequest:A,validateCitation:F,applyCorrection:e=>{e&&(c.value=e,F())},applyCorrectionFromResults:e=>{e&&(c.value=e,t.value="single",setTimeout(F,100))},copyResults:()=>{var e,a;const l=[];r.value&&(l.push("=== VALIDATION ==="),l.push("Status: "+(r.value.valid?"Valid":"Invalid")),r.value.message&&l.push(`Message: ${r.value.message}`)),d.value&&(l.push("\n=== ML ANALYSIS ==="),l.push(`Prediction: ${d.value.prediction||"N/A"}`),l.push(`Confidence: ${(100*d.value.confidence).toFixed(2)}%`),d.value.details&&l.push(`Details: ${d.value.details}`)),(null==(a=null==(e=u.value)?void 0:e.suggestions)?void 0:a.length)&&(l.push("\n=== SUGGESTED CORRECTIONS ==="),u.value.suggestions.forEach(((e,a)=>{l.push(`\nSuggestion ${a+1}: ${e.corrected_text}`),l.push(`   ${e.explanation}`)})));const t=l.join("\n");navigator.clipboard.writeText(t).then((()=>{})).catch((e=>{}))},getAlertClass:e=>null==e?"alert-info":e?"alert-success":"alert-danger",getConfidenceClass:e=>e>=.8?"bg-success":e>=.5?"bg-warning":"bg-danger",getProgressBarClass:e=>e>=.8?"bg-success":e>=.5?"bg-info":e>=.3?"bg-warning":"bg-danger",formatCitation:e=>e||"",addToRecentValidations:U,clearRecentValidations:()=>{D.value=[],"undefined"!=typeof localStorage&&localStorage.removeItem("recentValidations")},removeRecentValidation:e=>{if(D.value&&D.value[e]){D.value.splice(e,1);try{localStorage.setItem("recentValidations",JSON.stringify(D.value))}catch(a){}}},getValidationIcon:e=>e?"bi-check-circle-fill":"bi-exclamation-triangle-fill",getValidationColor:e=>e?"success":"danger",getValidationLabel:e=>e?"Valid":"Invalid",getCorrectionIcon:e=>e?e.suggested_correction?"bi-lightbulb":"bi-check":"",getCorrectionColor:e=>e?e.suggested_correction?"warning":"success":"secondary",getCorrectionLabel:e=>e?e.suggested_correction?"Suggested":"Correct":"No correction",getMLLabel:e=>e?e.prediction||"Unknown":"N/A",getMLColor:e=>e?e.confidence>.7?"success":"warning":"secondary",getMLIcon:e=>e?e.confidence>.7?"bi-check-circle":"bi-exclamation-circle":"bi-question-circle"}}},[["render",function(e,a,g,p,C,k){var w,R,T,A,S,V,_;const I=h("CitationResults"),N=h("FileUpload"),L=h("TextPaste");return t(),l("div",ba,[s("div",ga,[s("div",pa,[s("div",ya,[s("div",fa,[s("div",ha,[a[17]||(a[17]=s("h5",{class:"mb-3"},[s("i",{class:"bi bi-search me-2"}),n("Citation Validator ")],-1)),s("div",xa,[s("button",{class:r(["btn d-flex align-items-center","single"===p.activeTab?"btn-light":"btn-outline-light"]),onClick:a[0]||(a[0]=e=>p.activeTab="single")},a[14]||(a[14]=[s("i",{class:"bi bi-quote me-1"},null,-1),s("span",null,"Single Citation",-1)]),2),s("button",{class:r(["btn d-flex align-items-center","document"===p.activeTab?"btn-light":"btn-outline-light"]),onClick:a[1]||(a[1]=e=>p.activeTab="document")},a[15]||(a[15]=[s("i",{class:"bi bi-upload me-1"},null,-1),s("span",null,"Upload Document",-1)]),2),s("button",{class:r(["btn d-flex align-items-center","text"===p.activeTab?"btn-light":"btn-outline-light"]),onClick:a[2]||(a[2]=e=>p.activeTab="text")},a[16]||(a[16]=[s("i",{class:"bi bi-text-paragraph me-1"},null,-1),s("span",null,"Paste Text",-1)]),2)])])]),s("div",Ca,[p.error?(t(),l("div",ka,[a[18]||(a[18]=s("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),s("div",wa,o(p.error),1)])):i("",!0),"single"===p.activeTab?(t(),l("div",Ra,[s("div",Ta,[a[20]||(a[20]=s("label",{for:"citationInput",class:"form-label fw-semibold"},"Enter a legal citation to validate",-1)),s("div",Aa,[v(s("input",{type:"text",id:"citationInput",class:"form-control form-control-lg","onUpdate:modelValue":a[3]||(a[3]=e=>p.citationText=e),placeholder:"e.g., 123 U.S. 456 (2023)",onKeyup:a[4]||(a[4]=y(((...e)=>p.validateCitation&&p.validateCitation(...e)),["enter"])),disabled:e.isLoading},null,40,Sa),[[m,p.citationText]]),s("button",{class:"btn btn-primary position-relative",type:"button",onClick:a[5]||(a[5]=(...e)=>p.validateCitation&&p.validateCitation(...e)),disabled:!p.citationText||p.showLoading||p.hasActiveRequest},[p.showLoading?(t(),l("span",_a)):i("",!0),n(" "+o(p.showLoading?"Validating...":"Validate")+" ",1),p.hasActiveRequest?(t(),l("span",Ia,a[19]||(a[19]=[s("span",{class:"visually-hidden"},"Active request",-1)]))):i("",!0)],8,Va)]),a[21]||(a[21]=s("div",{class:"form-text text-muted mt-1"}," Example formats: 123 U.S. 456 (2023), 456 F.3d 123, 123 S. Ct. 456 ",-1))]),s("div",Na,[s("div",La,[s("div",Da,[v(s("input",{class:"form-check-input",type:"checkbox",id:"useEnhanced","onUpdate:modelValue":a[6]||(a[6]=e=>p.useEnhanced=e),disabled:e.isLoading},null,8,Ea),[[b,p.useEnhanced]]),a[22]||(a[22]=s("label",{class:"form-check-label",for:"useEnhanced"},[s("i",{class:"bi bi-shield-check me-1"}),n("Enhanced Validation ")],-1))])]),s("div",Fa,[s("div",Ua,[v(s("input",{class:"form-check-input",type:"checkbox",id:"useML","onUpdate:modelValue":a[7]||(a[7]=e=>p.useML=e),disabled:e.isLoading},null,8,za),[[b,p.useML]]),a[23]||(a[23]=s("label",{class:"form-check-label",for:"useML"},[s("i",{class:"bi bi-robot me-1"}),n("ML Analysis ")],-1))])]),s("div",Ma,[s("div",Pa,[v(s("input",{class:"form-check-input",type:"checkbox",id:"useCorrection","onUpdate:modelValue":a[8]||(a[8]=e=>p.useCorrection=e),disabled:e.isLoading},null,8,Oa),[[b,p.useCorrection]]),a[24]||(a[24]=s("label",{class:"form-check-label",for:"useCorrection"},[s("i",{class:"bi bi-lightbulb me-1"}),n("Suggest Corrections ")],-1))])])]),p.validationResult||p.mlResult||p.correctionResult?(t(),l("div",ja,[s("ul",Ba,[s("li",qa,[s("button",{class:r(["nav-link py-1 px-2",{active:"validation"===p.activeResultTab}]),onClick:a[9]||(a[9]=e=>p.activeResultTab="validation")},a[25]||(a[25]=[s("i",{class:"bi bi-check2-circle me-1"},null,-1),n(" Validation ")]),2)]),s("li",$a,[s("button",{class:r(["nav-link py-1 px-2",{active:"analysis"===p.activeResultTab}]),onClick:a[10]||(a[10]=e=>p.activeResultTab="analysis")},a[26]||(a[26]=[s("i",{class:"bi bi-graph-up me-1"},null,-1),n(" Analysis ")]),2)]),p.correctionResult&&p.correctionResult.suggestions&&p.correctionResult.suggestions.length>0?(t(),l("li",Ja,[s("button",{class:r(["nav-link py-1 px-2",{active:"suggestions"===p.activeResultTab}]),onClick:a[11]||(a[11]=e=>p.activeResultTab="suggestions")},[a[27]||(a[27]=s("i",{class:"bi bi-lightbulb me-1"},null,-1)),a[28]||(a[28]=n(" Suggestions ")),s("span",Ga,o(p.correctionResult.suggestions.length),1)],2)])):i("",!0)]),s("div",Ha,["validation"===p.activeResultTab&&p.validationResult?(t(),l("div",Ya,[s("div",Ka,[s("i",{class:r(["bi","me-2",p.validationResult.valid?"bi-check-circle-fill text-success":"bi-exclamation-triangle-fill text-danger"])},null,2),s("div",null,[s("h6",Wa,o(p.validationResult.valid?"Valid Citation":"Invalid Citation"),1),s("small",Xa,o(p.validationResult.message||"Citation validation results"),1)])]),s("div",Za,[s("div",Qa,[a[29]||(a[29]=s("div",{class:"text-muted"},"Type",-1)),s("div",null,o((null==(w=p.validationResult.details)?void 0:w.type)||"N/A"),1)]),s("div",el,[a[30]||(a[30]=s("div",{class:"text-muted"},"Reporter",-1)),s("div",null,o((null==(R=p.validationResult.details)?void 0:R.reporter)||"N/A"),1)]),s("div",al,[a[31]||(a[31]=s("div",{class:"text-muted"},"Volume",-1)),s("div",null,o((null==(T=p.validationResult.details)?void 0:T.volume)||"N/A"),1)]),s("div",ll,[a[32]||(a[32]=s("div",{class:"text-muted"},"Page",-1)),s("div",null,o((null==(A=p.validationResult.details)?void 0:A.page)||"N/A"),1)]),s("div",tl,[a[33]||(a[33]=s("div",{class:"text-muted"},"Year",-1)),s("div",null,o((null==(S=p.validationResult.details)?void 0:S.year)||"N/A"),1)]),s("div",sl,[a[34]||(a[34]=s("div",{class:"text-muted"},"Court",-1)),s("div",null,o((null==(V=p.validationResult.details)?void 0:V.court)||"N/A"),1)])])])):"analysis"===p.activeResultTab&&p.mlResult?(t(),l("div",il,[s("div",nl,[a[35]||(a[35]=s("h6",{class:"mb-2"},"Confidence Scores",-1)),(t(!0),l(d,null,u(p.mlResult.confidenceScores,((e,a)=>(t(),l("div",{key:a,class:"mb-2"},[s("div",ol,[s("span",cl,o(a.replace(/([A-Z])/g," $1").trim()),1),s("span",rl,o(Math.round(100*e))+"%",1)]),s("div",dl,[s("div",{class:r(["progress-bar",p.getProgressBarClass(e)]),role:"progressbar",style:c({width:100*e+"%"}),"aria-valuenow":100*e,"aria-valuemin":"0","aria-valuemax":"100"},null,14,ul)])])))),128))]),p.mlResult.explanation?(t(),l("div",vl,[a[36]||(a[36]=s("h6",{class:"mb-2"},"Explanation",-1)),s("p",ml,o(p.mlResult.explanation),1)])):i("",!0)])):"suggestions"===p.activeResultTab&&(null==(_=p.correctionResult)?void 0:_.suggestions)?(t(),l("div",bl,[s("div",gl,[(t(!0),l(d,null,u(p.correctionResult.suggestions,((a,i)=>(t(),l("div",{key:i,class:"list-group-item border-0 px-0 py-2"},[s("div",pl,[s("div",null,[s("h6",yl,"Suggestion "+o(i+1),1),s("p",fl,o(a.text),1),s("small",hl,"Confidence: "+o(Math.round(100*a.confidence))+"%",1)]),s("button",{class:"btn btn-sm btn-outline-primary",onClick:l=>e.applySuggestion(a)}," Apply ",8,xl)])])))),128))])])):(t(),l("div",Cl,a[37]||(a[37]=[s("i",{class:"bi bi-info-circle fs-4 d-block mb-2"},null,-1),n(" No results available for the selected tab. ")])))])])):i("",!0),"document"!==p.activeTab&&"text"!==p.activeTab||!p.documentAnalysisResult&&!p.textAnalysisResult?i("",!0):(t(),l("div",kl,[s("div",wl,[s("div",Rl,[s("h6",Tl,[a[38]||(a[38]=s("i",{class:"bi bi-clipboard2-data me-2"},null,-1)),n(" "+o("document"===p.activeTab?"Document":"Text")+" Analysis Results ",1)])]),s("div",Al,[f(I,{results:"document"===p.activeTab?p.documentAnalysisResult:p.textAnalysisResult,loading:e.isAnalyzing,onCitationClick:e.handleCitationClick},null,8,["results","loading","onCitationClick"])])])]))])):"document"===p.activeTab?(t(),l("div",Sl,[f(N,{onResults:e.handleDocumentResults,onError:e.handleDocumentError,"api-base-url":e.apiBaseUrl},null,8,["onResults","onError","api-base-url"])])):"text"===p.activeTab?(t(),l("div",Vl,[f(L,{onResults:e.handleTextResults,onError:e.handleTextError,"api-base-url":e.apiBaseUrl},null,8,["onResults","onError","api-base-url"])])):i("",!0)])])]),"document"!==p.activeTab&&"text"!==p.activeTab?(t(),l("div",_l,a[39]||(a[39]=[x('<div class="card border-0 shadow-sm h-100" data-v-a5ff8ecd><div class="card-header bg-light" data-v-a5ff8ecd><h5 class="mb-0" data-v-a5ff8ecd><i class="bi bi-info-circle me-2" data-v-a5ff8ecd></i>About Citation Validation</h5></div><div class="card-body" data-v-a5ff8ecd><h6 class="fw-semibold" data-v-a5ff8ecd>What can I validate?</h6><p class="small" data-v-a5ff8ecd> Our validator supports various legal citation formats including: </p><ul class="small" data-v-a5ff8ecd><li data-v-a5ff8ecd>U.S. Supreme Court (e.g., 123 U.S. 456)</li><li data-v-a5ff8ecd>Federal Courts (e.g., 456 F.3d 123)</li><li data-v-a5ff8ecd>State Courts (e.g., 123 N.E.2d 456)</li><li data-v-a5ff8ecd>Law Review Articles (e.g., 123 Harv. L. Rev. 456)</li></ul><h6 class="fw-semibold mt-4" data-v-a5ff8ecd>Enhanced Validation</h6><p class="small" data-v-a5ff8ecd> When enabled, our system performs additional checks against legal databases to verify: </p><ul class="small" data-v-a5ff8ecd><li data-v-a5ff8ecd>Case existence and correct citation format</li><li data-v-a5ff8ecd>Parallel citations</li><li data-v-a5ff8ecd>Subsequent history and negative treatment</li><li data-v-a5ff8ecd>Statutory validity</li></ul><div class="alert alert-warning small mt-4" data-v-a5ff8ecd><i class="bi bi-exclamation-triangle-fill me-2" data-v-a5ff8ecd></i><strong data-v-a5ff8ecd>Note:</strong> This tool is for informational purposes only and should not be considered legal advice. </div></div></div>',1)]))):i("",!0)]),"document"!==p.activeTab&&"text"!==p.activeTab||!p.documentAnalysisResult&&!p.textAnalysisResult?i("",!0):(t(),l("div",Il,[s("div",Nl,[s("div",Ll,[s("div",Dl,[s("h5",El,[s("i",{class:r(["bi","document"===p.activeTab?"bi-file-earmark-text":"bi-text-paragraph","me-2"])},null,2),n(" "+o("document"===p.activeTab?"Document Analysis Results":"Text Analysis Results"),1)]),s("div",Fl,[s("button",{class:"btn btn-sm btn-outline-secondary",onClick:a[12]||(a[12]=(...a)=>e.copyAllResults&&e.copyAllResults(...a))},a[40]||(a[40]=[s("i",{class:"bi bi-clipboard me-1"},null,-1),n("Copy All ")])),s("button",{class:"btn btn-sm btn-outline-secondary",onClick:a[13]||(a[13]=(...a)=>e.downloadResults&&e.downloadResults(...a))},a[41]||(a[41]=[s("i",{class:"bi bi-download me-1"},null,-1),n("Download ")]))])]),s("div",Ul,[f(I,{results:"document"===p.activeTab?p.documentAnalysisResult:p.textAnalysisResult,onApplyCorrection:p.applyCorrectionFromResults,class:"border-0"},null,8,["results","onApplyCorrection"])])])])]))])}],["__scopeId","data-v-a5ff8ecd"]]);export{zl as default};
