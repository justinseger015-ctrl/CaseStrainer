"use strict";(self["webpackChunkcasestrainer_vue"]=self["webpackChunkcasestrainer_vue"]||[]).push([[187],{6187:function(t,e,a){a.r(e),a.d(e,{default:function(){return Q}});var i=a(641),s=a(33),n=a(3751);const o={class:"enhanced-validator"},r={class:"nav nav-tabs",id:"validationTabs",role:"tablist"},l={class:"nav-item",role:"presentation"},c={class:"nav-item",role:"presentation"},d={class:"nav-item",role:"presentation"},u={class:"nav-item",role:"presentation"},m={class:"tab-content",id:"validationTabsContent"},p={class:"card"},v={class:"card-body"},h={key:0,class:"alert alert-danger mt-4"},f={class:"form-group"},y=["disabled"],g={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},x={key:1},R={key:2},_={class:"card"},k={class:"card-body"},A={class:"form-group"},b={class:"input-group"},C={class:"input-group-append"},L=["disabled"],w={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},T={key:0,class:"validation-methods mt-3"},E={class:"form-check form-check-inline"},S={class:"form-check form-check-inline"},U={class:"form-check form-check-inline"},I={key:1,class:"validation-results mt-4"},O={key:0,class:"alert alert-info"},V={key:0,class:"alert alert-danger mt-4"},z={key:1,class:"alert alert-danger mt-4"};function D(t,e,a,D,P,j){const X=(0,i.g2)("ReusableResults"),$=(0,i.g2)("CitationResults"),F=(0,i.g2)("EnhancedFileUpload"),M=(0,i.g2)("EnhancedTextPaste");return(0,i.uX)(),(0,i.CE)("div",o,[e[27]||(e[27]=(0,i.Lk)("h2",null,"Enhanced Citation Validator",-1)),e[28]||(e[28]=(0,i.Lk)("p",{class:"lead"}," This advanced tool validates legal citations using multiple sources and provides detailed citation information, context, and correction suggestions. ",-1)),(0,i.Lk)("ul",r,[(0,i.Lk)("li",l,[(0,i.Lk)("button",{class:(0,s.C4)(["nav-link",{active:"single"===P.activeTab}]),onClick:e[0]||(e[0]=t=>P.activeTab="single"),type:"button"}," Single Citation ",2)]),(0,i.Lk)("li",c,[(0,i.Lk)("button",{class:(0,s.C4)(["nav-link",{active:"document"===P.activeTab}]),onClick:e[1]||(e[1]=t=>P.activeTab="document"),type:"button"}," Upload Document ",2)]),(0,i.Lk)("li",d,[(0,i.Lk)("button",{class:(0,s.C4)(["nav-link",{active:"text"===P.activeTab}]),onClick:e[2]||(e[2]=t=>P.activeTab="text"),type:"button"}," Paste Text ",2)]),(0,i.Lk)("li",u,[(0,i.Lk)("button",{class:(0,s.C4)(["nav-link",{active:"url"===P.activeTab}]),onClick:e[3]||(e[3]=t=>P.activeTab="url"),type:"button"}," URL Check ",2)])]),(0,i.Lk)("div",m,[(0,i.bo)((0,i.Lk)("div",null,[(0,i.Lk)("div",p,[e[17]||(e[17]=(0,i.Lk)("div",{class:"card-header bg-primary text-white"},[(0,i.Lk)("h5",{class:"mb-0"},"Check Citations from URL")],-1)),(0,i.Lk)("div",v,[P.urlAnalysisResult&&P.urlAnalysisResult.error?((0,i.uX)(),(0,i.CE)("div",h,[e[13]||(e[13]=(0,i.Lk)("strong",null,"Error:",-1)),(0,i.eW)(" "+(0,s.v_)(P.urlAnalysisResult.error),1)])):(0,i.Q3)("",!0),(0,i.Lk)("div",f,[e[14]||(e[14]=(0,i.Lk)("label",{for:"url-input"},"Paste a URL to a legal document:",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text",id:"url-input",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=t=>P.urlInput=t),placeholder:"https://example.com/legal-document",onKeyup:e[5]||(e[5]=(0,n.jR)(((...t)=>j.analyzeUrl&&j.analyzeUrl(...t)),["enter"]))},null,544),[[n.Jo,P.urlInput]])]),(0,i.Lk)("button",{class:"btn btn-primary mt-3",onClick:e[6]||(e[6]=(...t)=>j.analyzeUrl&&j.analyzeUrl(...t)),disabled:P.isAnalyzingUrl||!P.urlInput},[P.isAnalyzingUrl?((0,i.uX)(),(0,i.CE)("span",g)):(0,i.Q3)("",!0),e[15]||(e[15]=(0,i.eW)(" Analyze URL "))],8,y),P.urlAnalysisResult&&j.transformedUrlResults?((0,i.uX)(),(0,i.CE)("div",x,[(0,i.bF)(X,{results:j.transformedUrlResults},null,8,["results"])])):!P.urlAnalysisResult||j.transformedUrlResults&&Array.isArray(j.transformedUrlResults.citations)?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",R,e[16]||(e[16]=[(0,i.Lk)("div",{class:"alert alert-danger mt-4"}," Unable to display citation results. The server returned invalid or incomplete data. ",-1)])))])])],512),[[n.aG,"url"===P.activeTab]]),(0,i.bo)((0,i.Lk)("div",null,[(0,i.Lk)("div",_,[e[24]||(e[24]=(0,i.Lk)("div",{class:"card-header bg-primary text-white"},[(0,i.Lk)("h5",{class:"mb-0"},"Validate Citation")],-1)),(0,i.Lk)("div",k,[(0,i.Lk)("div",A,[e[19]||(e[19]=(0,i.Lk)("label",{for:"citation-input"},"Enter Citation:",-1)),(0,i.Lk)("div",b,[(0,i.bo)((0,i.Lk)("input",{type:"text",id:"citation-input",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=t=>P.citationText=t),placeholder:"e.g., 410 U.S. 113",onKeyup:e[8]||(e[8]=(0,n.jR)(((...t)=>j.validateCitation&&j.validateCitation(...t)),["enter"]))},null,544),[[n.Jo,P.citationText]]),(0,i.Lk)("div",C,[(0,i.Lk)("button",{class:"btn btn-primary",onClick:e[9]||(e[9]=(...t)=>j.validateCitation&&j.validateCitation(...t)),disabled:P.isValidating},[P.isValidating?((0,i.uX)(),(0,i.CE)("span",w)):(0,i.Q3)("",!0),e[18]||(e[18]=(0,i.eW)(" Validate "))],8,L)])])]),P.isValidating?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",T,[(0,i.Lk)("div",E,[(0,i.bo)((0,i.Lk)("input",{class:"form-check-input",type:"checkbox",id:"use-enhanced","onUpdate:modelValue":e[10]||(e[10]=t=>P.useEnhanced=t),checked:""},null,512),[[n.lH,P.useEnhanced]]),e[20]||(e[20]=(0,i.Lk)("label",{class:"form-check-label",for:"use-enhanced"},"Enhanced Validation",-1))]),(0,i.Lk)("div",S,[(0,i.bo)((0,i.Lk)("input",{class:"form-check-input",type:"checkbox",id:"use-ml","onUpdate:modelValue":e[11]||(e[11]=t=>P.useML=t),checked:""},null,512),[[n.lH,P.useML]]),e[21]||(e[21]=(0,i.Lk)("label",{class:"form-check-label",for:"use-ml"},"ML Classifier",-1))]),(0,i.Lk)("div",U,[(0,i.bo)((0,i.Lk)("input",{class:"form-check-input",type:"checkbox",id:"use-correction","onUpdate:modelValue":e[12]||(e[12]=t=>P.useCorrection=t),checked:""},null,512),[[n.lH,P.useCorrection]]),e[22]||(e[22]=(0,i.Lk)("label",{class:"form-check-label",for:"use-correction"},"Suggest Corrections",-1))])])),P.validationResult?((0,i.uX)(),(0,i.CE)("div",I,[j.transformedValidationResult?((0,i.uX)(),(0,i.Wv)($,{results:j.transformedValidationResult,key:"citation-results-"+(P.validationResult.citation||"none")},null,8,["results"])):((0,i.uX)(),(0,i.CE)("div",O,e[23]||(e[23]=[(0,i.Lk)("i",{class:"fas fa-spinner fa-spin me-2"},null,-1),(0,i.eW)(" Processing results... ")])))])):(0,i.Q3)("",!0)])])],512),[[n.aG,"single"===P.activeTab]]),P.documentAnalysisResult&&P.documentAnalysisResult.error?((0,i.uX)(),(0,i.CE)("div",V,[e[25]||(e[25]=(0,i.Lk)("strong",null,"Error:",-1)),(0,i.eW)(" "+(0,s.v_)(P.documentAnalysisResult.error),1)])):(0,i.Q3)("",!0),(0,i.bo)((0,i.bF)(F,null,null,512),[[n.aG,"document"===P.activeTab]]),P.textAnalysisResult&&P.textAnalysisResult.error?((0,i.uX)(),(0,i.CE)("div",z,[e[26]||(e[26]=(0,i.Lk)("strong",null,"Error:",-1)),(0,i.eW)(" "+(0,s.v_)(P.textAnalysisResult.error),1)])):(0,i.Q3)("",!0),(0,i.bo)((0,i.bF)(M,null,null,512),[[n.aG,"text"===P.activeTab]])])])}a(4114),a(8111),a(2489),a(7588),a(1701);var P=a(2505),j=a.n(P),X=a(5016),$=a(331),F=a(6753),M=a(6118);const N=(0,i.nI)()?.appContext?.app;var W={name:"EnhancedValidator",components:{CitationResults:F.A,EnhancedFileUpload:X.A,EnhancedTextPaste:$.A,ReusableResults:M.A},data(){return{activeTab:"single",citationText:"",isValidating:!1,validationResult:null,mlResult:null,correctionResult:null,citationContext:"",fileLink:"",useEnhanced:!0,useML:!0,useCorrection:!0,contextResult:null,isAnalyzing:!1,documentAnalysisResult:null,pastedText:"",textAnalysisResult:null,urlInput:"",isAnalyzingUrl:!1,urlAnalysisResult:{citations:[],metadata:{},error:null}}},computed:{formattedContext(){if(!this.contextResult||!this.contextResult.context)return"";const t=this.contextResult.context.split("\n\n");return t.map((t=>this.citationText&&t.includes(this.citationText)?t.replace(new RegExp(this.citationText,"g"),`<mark>${this.citationText}</mark>`):t)).join("<br><br>")},basePath(){return"/casestrainer/api"},transformedValidationResult(){if(!this.validationResult)return this.getEmptyResultsObject();try{console.log("[EnhancedValidator] Starting transformation of validation result");const t=this.validationResult||{},e="courtlistener"===t.source||String(t.verified_by||"").toLowerCase().includes("courtlistener"),a=t.citation||this.citationText||"Unknown",i={id:`citation-${Date.now()}`,citation:a,citation_text:t.citation_text||a,case_name:t.case_name||a,verified:!!t.verified,status:t.verified?"verified":"unverified",validation_method:t.validation_method||(e?"CourtListener":"Local Validation"),confidence:parseFloat(t.confidence)||0,source:t.source||"unknown",verified_by:t.verified_by||(e?"CourtListener":"Local"),contexts:Array.isArray(t.contexts)?t.contexts:[],context:Array.isArray(t.contexts)&&t.contexts[0]?.text?t.contexts[0].text:"",details:t.details||{},metadata:{...t.metadata||{},url:t.details?.url||t.url||"",source:t.source||"unknown",verified:!!t.verified,timestamp:t.timestamp||(new Date).toISOString()},url:t.details?.url||t.url||"",error:t.error||null,verification_steps:Array.isArray(t.verification_steps)?t.verification_steps:[],sources:t.sources||{}},s=i.verified?1:0,n=i.verified?0:1,o={validation_results:[{...i,status:i.verified?"verified":"unverified",source:i.source||"unknown",verified:!!i.verified,metadata:{...i.metadata||{},url:i.url||"",source:i.source||"unknown",verified:!!i.verified,timestamp:i.timestamp||(new Date).toISOString()}}],citations:[{...i,status:i.verified?"verified":"unverified",source:i.source||"unknown",verified:!!i.verified,metadata:{...i.metadata||{},url:i.url||"",source:i.source||"unknown",verified:!!i.verified,timestamp:i.timestamp||(new Date).toISOString()}}],total_citations:1,verified_count:s,unverified_count:n,status:"completed",execution_time:0,metadata:{...i.metadata||{},timestamp:i.timestamp||(new Date).toISOString()}};return console.log("[EnhancedValidator] Transformed validation result:",o),o}catch(t){return console.error("[EnhancedValidator] Error transforming validation result:",t),this.getEmptyResultsObject()}},transformedDocumentResults(){if(!this.documentAnalysisResult)return this.getEmptyResultsObject();try{console.log("[EnhancedValidator] Transforming document analysis results");const t=this.documentAnalysisResult||{},e=Array.isArray(t.citations)?t.citations:[];return{...this.getEmptyResultsObject(),validation_results:e,citations:e,metadata:t.metadata||{},status:t.status||"completed",execution_time:t.execution_time||0,verified_count:t.verified_count||0,unverified_count:t.unverified_count||0}}catch(t){return console.error("[EnhancedValidator] Error transforming document results:",t),this.getEmptyResultsObject()}},transformedTextResults(){if(!this.textAnalysisResult)return{citations:[],validation_results:[],confirmedCount:0,totalCitations:0,confirmed_count:0,citations_count:0,metadata:{}};const t=(this.textAnalysisResult.citations||[]).filter((t=>t&&"object"===typeof t)).map((t=>({...t,id:t.id||`text-${Date.now()}-${Math.random().toString(36).substr(2,6)}`,citation:t.citation||t.citation_text||"Unknown",case_name:t.case_name||t.citation||"Unknown Case",verified:!!t.verified,validation_method:t.validation_method||"Text Analysis",confidence:t.confidence||0,contexts:Array.isArray(t.contexts)?t.contexts:[],details:t.details||{},error:t.error||null}))),e=t.filter((t=>t.verified)).length,a=t.length;return{citations:t,validation_results:t,confirmedCount:e,totalCitations:a,confirmed_count:e,citations_count:a,metadata:this.textAnalysisResult.metadata||{},error:this.textAnalysisResult.error||null}},transformedUrlResults(){if(!this.urlAnalysisResult||"object"!==typeof this.urlAnalysisResult)return{citations:[],validation_results:[],confirmedCount:0,totalCitations:0,confirmed_count:0,citations_count:0,metadata:{},unverifiedCount:0,unconfirmed_count:0};console.log("Original URL analysis result:",JSON.parse(JSON.stringify(this.urlAnalysisResult)));const t=(Array.isArray(this.urlAnalysisResult.citations)?this.urlAnalysisResult.citations:[]).filter((t=>t&&"object"===typeof t)).map((t=>({...t,id:t.id||`url-${Date.now()}-${Math.random().toString(36).substr(2,6)}`,citation:t.citation||t.citation_text||"Unknown",case_name:t.case_name||t.citation||"Unknown Case",verified:!!t.verified,status:t.verified?"verified":"unverified",validation_method:t.validation_method||"URL Analysis",confidence:t.confidence||0,contexts:Array.isArray(t.contexts)?t.contexts:[],details:t.details||{},error:t.error||null,source:t.source||"URL Analysis",verified_by:t.verified_by||(t.verified?"URL Analysis":"Not Verified"),metadata:t.metadata||{}}))),e=t.filter((t=>t.verified)).length,a=t.length,i=a-e,s={citations:t,validation_results:t,confirmedCount:e,totalCitations:a,confirmed_count:e,citations_count:a,unverifiedCount:i,unconfirmed_count:i,metadata:this.urlAnalysisResult.metadata||{},error:this.urlAnalysisResult.error||null};return console.log("Transformed URL results:",JSON.parse(JSON.stringify(s))),s}},methods:{getEmptyResultsObject(){const t={validation_results:[],citations:[],total_citations:0,verified_count:0,unverified_count:0,status:"completed",execution_time:0,metadata:{timestamp:(new Date).toISOString(),source:"none",verified:!1}};return console.log("[EnhancedValidator] Returning empty results object:",t),t},transformApiResponse(t){try{if(console.log("[EnhancedValidator] Transforming API response for CitationResults"),!t||!t.validation_results)return console.warn("[EnhancedValidator] No validation_results in API response"),this.getEmptyResultsObject();const e={validation_results:[],total_citations:0,verified_count:0,unverified_count:0,metadata:{}};return t.validation_results.forEach(((t,a)=>{const i=t.validation||t,s="courtlistener"===i.source||String(i.verified_by||"").toLowerCase().includes("courtlistener"),n=i.citation||this.citationText||"Unknown",o={id:`citation-${Date.now()}-${a}`,citation:n,citation_text:i.citation_text||n,case_name:i.case_name||i.details?.case_name||i.metadata?.case_name||(i.details?.title?i.details.title.replace(/<[^>]+>/g,""):null)||(i.contexts?.[0]?.case_name?i.contexts[0].case_name:null)||"Unknown Case",verified:!!i.verified,status:i.verified?"verified":"unverified",validation_method:i.validation_method||(s?"CourtListener":"Local Validation"),confidence:parseFloat(i.confidence)||0,source:i.source||"unknown",verified_by:i.verified_by||(s?"CourtListener":"Local"),contexts:Array.isArray(i.contexts)?i.contexts:[],context:Array.isArray(i.contexts)&&i.contexts[0]?.text?i.contexts[0].text:"",details:i.details||{},metadata:{...i.metadata||{},url:i.details?.url||i.url||"",source:i.source||"unknown",verified:!!i.verified,timestamp:i.timestamp||(new Date).toISOString()},url:i.details?.url||i.url||"",error:i.error||null,verification_steps:Array.isArray(i.verification_steps)?i.verification_steps:[],sources:i.sources||{}};o.case_name&&(o.case_name=o.case_name.replace(/<[^>]+>/g,"").replace(/\s+/g," ").trim(),/^\d+\s+[A-Za-z0-9.]+\s+\d+$/.test(o.case_name)&&(o.case_name="Unknown Case")),o.verified?e.verified_count++:e.unverified_count++,e.validation_results.push(o)})),e.total_citations=e.validation_results.length,console.log("[EnhancedValidator] Transformed results:",e),e}catch(e){return console.error("[EnhancedValidator] Error transforming API response:",e),this.getEmptyResultsObject()}},async analyzeUrl(){if(this.urlInput){try{new URL(this.urlInput)}catch(t){return void(this.urlAnalysisResult={error:"Invalid URL",details:"Please enter a valid URL (e.g., https://example.com)",status:400,citations:[],metadata:{},eyecite_processed:!1})}this.isAnalyzingUrl=!0,this.urlAnalysisResult={citations:[],metadata:{},eyecite_processed:!1,error:null};try{const t=await j().post("/casestrainer/api/analyze",{url:this.urlInput},{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},timeout:3e5});if(!t||!t.data||"object"!==typeof t.data)throw new Error("Invalid response format from server");{const e=Array.isArray(t.data.citations)?t.data.citations.map((t=>({...t,id:t.id||`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,url:t?.url||this.urlInput,contexts:Array.isArray(t.contexts)?t.contexts:[],verified:t.verified||!1,verification_status:t.verification_status||(t.verified?"confirmed_by_courtlistener":"unverified"),validation_method:t.validation_method||"url_analysis"}))):[];this.urlAnalysisResult={...t.data,citations:e,validation_results:e,metadata:{...t.data.metadata||{},url:this.urlInput,processedAt:(new Date).toISOString(),citationCount:e.length},eyecite_processed:t.data.eyecite_processed||!1,error:t.data.error||null}}}catch(e){console.error("URL analysis error:",e);const t=e.response||{};this.urlAnalysisResult={error:t.data?.message||e.message||"Failed to analyze URL",details:t.data?.details||t.statusText||"An error occurred while analyzing the URL",status:t.status||500,code:e.code,citations:[],metadata:{url:this.urlInput,processedAt:(new Date).toISOString()},eyecite_processed:!1}}finally{this.isAnalyzingUrl=!1}}else this.urlAnalysisResult={error:"No URL provided",details:"Please enter a URL to analyze",status:400,citations:[],metadata:{},eyecite_processed:!1}},async validateCitation(){const t=this.citationText?.trim()||"";if(!t)return this.validationResult={error:"No citation provided",details:"Please enter a citation to validate",status:400,verified:!1,citation:""},void this.$toast.warning("Please enter a citation to validate");this.isValidating=!0,this.validationResult=null,this.mlResult=null,this.correctionResult=null,this.citationContext="",this.fileLink="";try{if(this.useEnhanced){console.log("[EnhancedValidator] Sending request to validate citation:",t);const e=await j().post("/casestrainer/api/analyze",{text:t},{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json"},timeout:3e5});if(e?.data)if(console.log("[EnhancedValidator] Received API response:",e.data),e.data.validation_results?.length>0){const t=this.transformApiResponse(e.data);console.log("[EnhancedValidator] Transformed results for CitationResults:",t),this.validationResult=t.validation_results[0],console.log("[EnhancedValidator] Processed validation result:",this.validationResult),this.validationResult.verified&&await this.getCitationContext()}else e.data.error?(console.error("[EnhancedValidator] API returned error:",e.data.error),this.validationResult={error:e.data.error,details:e.data.message||"Failed to validate citation",status:e.status||500,citation:t,verified:!1,source:"api_error",metadata:{error:e.data.error,status:e.status||500,timestamp:(new Date).toISOString()}},N.logger.error("API Error:",this.validationResult)):(this.validationResult={error:"No validation results",details:"The citation could not be validated. The response format was unexpected.",status:404,citation:t,verified:!1,source:"validation_error",metadata:{response_data:e.data,timestamp:(new Date).toISOString()}},N.logger.warn("Unexpected API response format:",e.data))}if(this.useML)try{const e=await j().post("/casestrainer/api/classify-citation",{citation:t},{headers:{"Content-Type":"application/json"},timeout:3e4});e?.data&&(this.mlResult={...e.data,processed_at:(new Date).toISOString()})}catch(e){console.warn("ML classification failed:",e)}if(this.useCorrection)try{const e=await j().post("/casestrainer/api/suggest-citation-corrections",{citation:t},{headers:{"Content-Type":"application/json"},timeout:3e4});e?.data&&(e.data.suggestions?.length>0||e.data.error?this.correctionResult={...e.data,processed_at:(new Date).toISOString()}:e.data.warning&&this.$toast.warning(e.data.warning,{position:"top-right",timeout:8e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}))}catch(a){console.warn("Correction suggestion failed:",a),this.$toast.error("Failed to get correction suggestions. "+(a.response?.data?.error||a.message||""),{position:"top-right",timeout:1e4,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}}catch(i){console.error("Citation validation error:",i);const e=i.response||{};this.validationResult={error:e.data?.message||i.message||"Failed to validate citation",details:e.data?.details||e.statusText||"An unexpected error occurred",status:e.status||500,code:i.code,citation:t,verified:!1,processed_at:(new Date).toISOString()}}finally{this.isValidating=!1}},async getCitationContext(){if(!this.validationResult?.verified)return void console.warn("Cannot get context for unverified citation");const t=this.citationText?.trim();if(!t)return void console.warn("No citation text available for context lookup");this.validationResult.case_name,this.validationResult.id,this.validationResult.source;const e={headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},timeout:3e4,validateStatus:t=>t>=200&&t<500};try{const i=["/casestrainer/api/citation-context","/api/citation-context",`${this.basePath}/citation-context`];let s=null;for(const n of i)try{const a=new URLSearchParams({citation:encodeURIComponent(t),case_name:encodeURIComponent(this.validationResult?.case_name||"")}),i=`${n}?${a.toString()}`,o=await j().get(i,e);if(200===o.status&&o.data){const t=o.data;return this.contextResult=t,this.citationContext=t.context||"",this.fileLink=t.file_link||"",void(this.validationResult&&(this.validationResult.context_available=!0,this.validationResult.context_retrieved_at=(new Date).toISOString(),this.validationResult.context_source=t.source||n))}if(404===o.status){s=new Error("Context endpoint not found");continue}s=new Error(o.data?.message||`HTTP ${o.status}`);continue}catch(a){s=a,console.warn(`Context lookup failed at ${n}:`,a)}console.error("All context endpoints failed:",s),this.contextResult={error:"Failed to retrieve citation context",details:s?.message||"All context endpoints failed",status:s?.response?.status||500,citation:t,timestamp:(new Date).toISOString()}}catch(a){console.error("Unexpected error in getCitationContext:",a),this.contextResult={error:"Unexpected error retrieving context",details:a.message||"An unexpected error occurred",status:a.response?.status||500,citation:t,timestamp:(new Date).toISOString()}}finally{this.validationResult&&(this.validationResult.context_retrieval_complete=!0)}},applySuggestion(t){this.citationText=t,this.validateCitation()},getBadgeClass(t){switch(t){case"Landmark":return"bg-primary";case"CourtListener":return"bg-success";case"Multitool":return"bg-info";case"Other":return"bg-secondary";default:return"bg-dark"}},async analyzeDocument(){const t=this.$refs.documentUpload;if(!t.files||0===t.files.length)return void(this.documentAnalysisResult={error:"No file selected",details:"Please select a file to upload",status:400});const e=t.files[0];this.isAnalyzing=!0,this.documentAnalysisResult=null;const a=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],i=10485760;if(!a.includes(e.type))return this.documentAnalysisResult={error:"Invalid file type",details:"Please upload a PDF or Word document",status:400},void(this.isAnalyzing=!1);if(e.size>i)return this.documentAnalysisResult={error:"File too large",details:"Maximum file size is 10MB",status:400},void(this.isAnalyzing=!1);const s=new FormData;s.append("file",e);try{const t=await j().post("/casestrainer/api/analyze",s,{headers:{"Content-Type":"multipart/form-data","X-Requested-With":"XMLHttpRequest"},timeout:3e5});this.documentAnalysisResult={...t.data,metadata:{...t.data.metadata,fileName:e.name,fileSize:e.size,fileType:e.type,processedAt:(new Date).toISOString()},error:t.data.error||null}}catch(n){const t=n.response||{};this.documentAnalysisResult={error:t.data?.message||n.message||"Failed to process document",details:t.data?.details||t.statusText,status:t.status||500,code:n.code,metadata:{fileName:e.name,fileSize:e.size,fileType:e.type}},console.error("Document analysis error:",n)}finally{this.isAnalyzing=!1}},async analyzeText(){if(this.pastedText)if(this.pastedText.length>1e4)this.textAnalysisResult={error:"Text too long",details:"Maximum text length is 10,000 characters",status:400};else{this.isAnalyzing=!0,this.textAnalysisResult=null;try{const t=await j().post("/casestrainer/api/analyze",{text:this.pastedText},{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},timeout:3e5});this.textAnalysisResult={...t.data,metadata:{...t.data.metadata,textLength:this.pastedText.length,processedAt:(new Date).toISOString(),citationCount:t.data.citations?.length||0},error:t.data.error||null}}catch(t){const e=t.response||{};this.textAnalysisResult={error:e.data?.message||t.message||"Failed to analyze text",details:e.data?.details||e.statusText,status:e.status||500,code:t.code,metadata:{textLength:this.pastedText.length,processedAt:(new Date).toISOString()}},console.error("Text analysis error:",t)}finally{this.isAnalyzing=!1}}else this.textAnalysisResult={error:"No text provided",details:"Please enter or paste some text to analyze",status:400}}}},q=a(6262);const H=(0,q.A)(W,[["render",D]]);var Q=H}}]);
//# sourceMappingURL=187.1de9053d.js.map