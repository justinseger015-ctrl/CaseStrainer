import{r as e,D as a,p as t,c as s,o as l,b as n,l as i,B as r,t as o,x as c,F as u,n as d,g as v,E as p,v as m,y as g,A as f,G as y,h,z as b,H as k,d as _,I as x,w,T as C,f as I,s as A,u as T,C as S,J as L}from"./vendor-DCBXmWkU.js";import{c as z,_ as R}from"./index-_MoI-wmh.js";import{b as N,a as P}from"./api-Do78aeUW.js";const M=e(!1),D=e("Loading...");const U={name:"ProcessingProgress",props:{elapsedTime:{type:Number,required:!0},remainingTime:{type:Number,required:!0},totalProgress:{type:Number,required:!0},currentStep:{type:String,default:""},currentStepProgress:{type:Number,default:0},processingSteps:{type:Array,default:()=>[]},actualTimes:{type:Object,default:()=>({})},citationInfo:{type:Object,default:null},rateLimitInfo:{type:Object,default:null},error:{type:String,default:""},canRetry:{type:Boolean,default:!1},timeout:{type:Number,default:null}},mounted(){},watch:{totalProgress(e){},remainingTime(e){}},computed:{currentStepElapsed(){const e=this.processingSteps.find(e=>e.step===this.currentStep);return e?Date.now()/1e3-e.start_time:0},currentStepRemaining(){const e=this.processingSteps.find(e=>e.step===this.currentStep);return e&&e.estimated_time?Math.max(0,e.estimated_time-this.currentStepElapsed):0},isTimeoutWarning(){if(!this.timeout)return!1;return this.timeout-this.elapsedTime<60}},methods:{formatTime(e){if(e<0)return"0s";const a=Math.floor(e/60),t=Math.round(e%60);return a>0?`${a}m ${t}s`:`${t}s`},getStepClass(e){return 100===e.progress?"completed":e.step===this.currentStep?"current":e.progress>0?"in-progress":"pending"},getStepStatus(e){return 100===e.progress?"Completed":e.step===this.currentStep?"In Progress":e.progress>0?`${e.progress}%`:"Pending"},formatProcessingRate(e){if(!e.processed||!this.elapsedTime)return"0/min";const a=e.processed/this.elapsedTime*60;return`${Math.round(a)}/min`}}},$={class:"processing-progress"},E={class:"progress-section"},F={class:"progress-bar"},q={class:"time-info"},O={key:0,class:"citation-section"},V={class:"citation-stats"},B={class:"stat"},j={class:"value"},H={class:"stat"},J={class:"value"},G={class:"stat"},W={class:"value"},X={key:0,class:"stat"},K={class:"value"},Q={key:0,class:"rate-limit-info"},Y={class:"stat"},Z={class:"value"},ee={key:0,class:"stat"},ae={class:"value"},te={key:1,class:"current-step"},se={class:"step-info"},le={class:"step-name"},ne={class:"progress-bar"},ie={class:"time-info"},re={class:"steps-section"},oe={class:"steps-list"},ce={class:"step-header"},ue={class:"step-name"},de={class:"step-status"},ve={key:0,class:"progress-bar"},pe={key:1,class:"time-info"},me={key:0},ge={key:2,class:"error-section"},fe={class:"error-message"};const ye=R(U,[["render",function(e,a,t,p,m,g){return l(),s("div",$,[n("div",E,[a[1]||(a[1]=n("h3",null,"Overall Progress",-1)),n("div",F,[n("div",{class:"progress-fill",style:r({width:`${t.totalProgress}%`})},null,4)]),n("div",q,[n("span",null,"Elapsed: "+o(g.formatTime(t.elapsedTime)),1),n("span",null,"Remaining: "+o(g.formatTime(t.remainingTime)),1),t.timeout?(l(),s("span",{key:0,class:c(["timeout-info",{warning:g.isTimeoutWarning}])}," Timeout: "+o(g.formatTime(t.timeout-t.elapsedTime)),3)):i("",!0)])]),t.citationInfo?(l(),s("div",O,[a[8]||(a[8]=n("h3",null,"Citation Processing",-1)),n("div",V,[n("div",B,[a[2]||(a[2]=n("span",{class:"label"},"Total Citations:",-1)),n("span",j,o(t.citationInfo.total),1)]),n("div",H,[a[3]||(a[3]=n("span",{class:"label"},"Unique Citations:",-1)),n("span",J,o(t.citationInfo.unique),1)]),n("div",G,[a[4]||(a[4]=n("span",{class:"label"},"Processed:",-1)),n("span",W,o(t.citationInfo.processed),1)]),t.citationInfo.unique?(l(),s("div",X,[a[5]||(a[5]=n("span",{class:"label"},"Processing Rate:",-1)),n("span",K,o(g.formatProcessingRate(t.citationInfo)),1)])):i("",!0)]),t.rateLimitInfo?(l(),s("div",Q,[n("div",Y,[a[6]||(a[6]=n("span",{class:"label"},"API Rate Limit:",-1)),n("span",Z,o(t.rateLimitInfo.remaining)+"/"+o(t.rateLimitInfo.limit),1)]),t.rateLimitInfo.resetTime?(l(),s("div",ee,[a[7]||(a[7]=n("span",{class:"label"},"Reset in:",-1)),n("span",ae,o(g.formatTime(t.rateLimitInfo.resetTime-Date.now()/1e3)),1)])):i("",!0)])):i("",!0)])):i("",!0),t.currentStep?(l(),s("div",te,[a[9]||(a[9]=n("h3",null,"Current Step",-1)),n("div",se,[n("span",le,o(t.currentStep),1),n("div",ne,[n("div",{class:"progress-fill",style:r({width:`${t.currentStepProgress}%`})},null,4)]),n("div",ie,[n("span",null,"Elapsed: "+o(g.formatTime(g.currentStepElapsed)),1),n("span",null,"Remaining: "+o(g.formatTime(g.currentStepRemaining)),1)])])])):i("",!0),n("div",re,[a[10]||(a[10]=n("h3",null,"Processing Steps",-1)),n("div",oe,[(l(!0),s(u,null,d(t.processingSteps,e=>(l(),s("div",{key:e.step,class:c(["step",g.getStepClass(e)])},[n("div",ce,[n("span",ue,o(e.step),1),n("span",de,o(g.getStepStatus(e)),1)]),void 0!==e.progress?(l(),s("div",ve,[n("div",{class:"progress-fill",style:r({width:`${e.progress}%`})},null,4)])):i("",!0),e.estimated_time?(l(),s("div",pe,[n("span",null,"Estimated: "+o(g.formatTime(e.estimated_time)),1),e.actual_time?(l(),s("span",me,"Actual: "+o(g.formatTime(e.actual_time)),1)):i("",!0)])):i("",!0)],2))),128))])]),t.error?(l(),s("div",ge,[n("div",fe,[a[11]||(a[11]=n("i",{class:"fas fa-exclamation-circle"},null,-1)),v(" "+o(t.error),1)]),t.canRetry?(l(),s("button",{key:0,onClick:a[0]||(a[0]=a=>e.$emit("retry")),class:"retry-button"}," Retry Processing ")):i("",!0)])):i("",!0)])}],["__scopeId","data-v-c1475ded"]]),he={class:"citation-results"},be={key:0,class:"prominent-citations-section"},ke={class:"citations-summary"},_e={class:"citations-grid"},xe={class:"citation-row",style:{color:"#dc3545","font-weight":"bold","font-size":"1.15rem"}},we=["onClick"],Ce={class:"citation-parallel-item"},Ie=["href"],Ae={key:1,class:"citation-text"},Te={key:0},Se={class:"citation-row citation-row-canonical flex-names-row"},Le={class:"names-flex-wrap"},ze={class:"canonical-name-block"},Re={key:1,class:"canonical-date missing"},Ne={key:1,class:"canonical-name missing"},Pe={key:0},Me={class:"citation-row citation-row-extracted flex-names-row"},De={class:"names-flex-wrap"},Ue={class:"extracted-name-block"},$e={key:1,class:"extracted-date missing"},Ee={key:1,class:"extracted-name missing"},Fe={key:0},qe={class:"citation-details"},Oe={class:"detail-row"},Ve={class:"detail-row"},Be={key:0,class:"detail-row"},je={key:1,class:"loading-state"},He={key:2,class:"error-state"},Je={key:3,class:"results-content"},Ge={class:"results-header"},We={class:"header-content"},Xe={class:"summary-stats"},Ke={class:"stat-item verified"},Qe={class:"stat-number"},Ye={class:"stat-item invalid"},Ze={class:"stat-number"},ea={class:"stat-item total"},aa={class:"stat-number"},ta={class:"action-buttons"},sa={class:"filter-section"},la={class:"filter-controls"},na=["onClick"],ia={class:"layout-controls"},ra={class:"search-box"},oa={class:"citations-list"},ca={key:0},ua={class:"cluster-header"},da={key:0},va={key:1},pa={key:2,class:"canonical-date"},ma={key:0,class:"extracted-info"},ga={class:"extracted-name"},fa={key:0,class:"extracted-date"},ya={class:"cluster-meta"},ha={class:"cluster-size"},ba={key:0},ka={key:0},_a=["href"],xa={class:"cluster-citations"},wa={class:"citation-row-content"},Ca={class:"citation-score"},Ia=["title"],Aa={class:"citation-details"},Ta={class:"citation-text-line"},Sa=["href"],La={key:1,class:"citation-text"},za={class:"citation-meta-line"},Ra={class:"source"},Na={key:1,class:"horizontal-clusters"},Pa={class:"horizontal-cluster-header"},Ma={class:"cluster-title-section"},Da={class:"cluster-title"},Ua={key:0},$a={key:1},Ea={key:2,class:"canonical-date"},Fa={key:0,class:"extracted-info"},qa={class:"extracted-name"},Oa={key:0,class:"extracted-date"},Va={class:"cluster-actions"},Ba={class:"cluster-size-badge"},ja={key:0},Ha=["href"],Ja={class:"horizontal-citations-grid"},Ga={class:"citation-card-header"},Wa=["title"],Xa={class:"citation-card-body"},Ka={class:"citation-text"},Qa=["href"],Ya={key:1},Za={class:"citation-source"},et={class:"source-value"},at={key:2,class:"canonical-only-clusters"},tt={class:"canonical-line"},st={key:1,class:"canonical-date missing"},lt={key:1,class:"canonical-name missing"},nt={class:"extracted-line"},it={key:1,class:"extracted-date missing"},rt={key:1,class:"extracted-name missing"},ot={class:"citations-line"},ct={class:"citations-list-inline"},ut=["href"],dt={key:1,class:"citation-text"},vt={key:2},pt={key:4,class:"results-content"},mt={class:"results-header"},gt={class:"header-content"},ft={class:"summary-stats"},yt={class:"stat-item verified"},ht={class:"stat-number"},bt={class:"stat-item invalid"},kt={class:"stat-number"},_t={class:"stat-item total"},xt={class:"stat-number"},wt={class:"action-buttons"},Ct={class:"filter-section"},It={class:"filter-controls"},At=["onClick"],Tt={class:"layout-controls"},St={class:"search-box"},Lt={class:"citations-list"},zt={class:"citation-row citation-row-citations"},Rt={class:"citation-text"},Nt={class:"citation-row citation-row-canonical flex-names-row"},Pt={key:0},Mt={key:1,class:"canonical-date missing"},Dt={key:1,class:"canonical-name missing"},Ut={class:"citation-row citation-row-extracted flex-names-row"},$t={key:0},Et={key:1,class:"extracted-date missing"},Ft={key:1,class:"extracted-name missing"},qt={key:5,class:"no-results-state"},Ot=R({__name:"CitationResults",props:{results:{type:Object,default:null},showLoading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["copy-results","download-results","toast"],setup(a,{emit:r}){const k=a,_=e("all"),x=e(""),w=e(1),C=e(new Set),I=e(0),A=e(null);e(!1);const T=e("full");p(()=>k.results,(e,a)=>{e&&"number"==typeof e.progress&&(I.value=e.progress,A.value=e.eta_seconds)},{immediate:!0,deep:!0});const S=t(()=>k.showLoading&&I.value>0&&I.value<100),L=t(()=>{var e,a;return(null==(e=k.results)?void 0:e.clusters)&&k.results.clusters.length>0?k.results.clusters.reduce((e,a)=>e+a.citations.filter(e=>"true"===e.verified||!0===e.verified).length,0):(null==(a=k.results)?void 0:a.citations)?k.results.citations.filter(e=>"true"===e.verified||!0===e.verified).length:0}),z=t(()=>{var e,a;return(null==(e=k.results)?void 0:e.clusters)&&k.results.clusters.length>0?k.results.clusters.reduce((e,a)=>e+a.citations.filter(e=>"false"===e.verified||!1===e.verified).length,0):(null==(a=k.results)?void 0:a.citations)?k.results.citations.filter(e=>"false"===e.verified||!1===e.verified).length:0}),R=t(()=>{var e;return(null==(e=k.results)?void 0:e.clusters)&&0!==k.results.clusters.length?k.results.clusters.map(e=>{let a=e.citations.filter(e=>!M(e));if("verified"===_.value?a=a.filter(e=>"true"===e.verified||!0===e.verified):"invalid"===_.value&&(a=a.filter(e=>"false"===e.verified||!1===e.verified)),x.value.trim()){const e=x.value.toLowerCase();a=a.filter(a=>a.citation&&a.citation.toLowerCase().includes(e)||a.canonical_citation&&a.canonical_citation.toLowerCase().includes(e)||a.primary_citation&&a.primary_citation.toLowerCase().includes(e)||U(a)&&U(a).toLowerCase().includes(e))}return a.length>0?{...e,citations:a,size:a.length}:null}).filter(e=>null!==e):[]}),N=t(()=>{var e,a;return(null==(e=k.results)?void 0:e.clusters)&&k.results.clusters.length>0?k.results.clusters.flatMap(e=>e.citations):(null==(a=k.results)?void 0:a.citations)?k.results.citations.filter(e=>!M(e)):[]}),P=t(()=>{var e,a;if((null==(e=k.results)?void 0:e.clusters)&&k.results.clusters.length>0)return R.value.flatMap(e=>e.citations);if(!(null==(a=k.results)?void 0:a.citations))return[];let t=k.results.citations;if(t=t.filter(e=>!M(e)),"verified"===_.value?t=t.filter(e=>"true"===e.verified||!0===e.verified):"invalid"===_.value&&(t=t.filter(e=>"false"===e.verified||!1===e.verified)),x.value.trim()){const e=x.value.toLowerCase();t=t.filter(a=>a.citation&&a.citation.toLowerCase().includes(e)||a.canonical_citation&&a.canonical_citation.toLowerCase().includes(e)||a.primary_citation&&a.primary_citation.toLowerCase().includes(e)||U(a)&&U(a).toLowerCase().includes(e))}return t}),M=e=>{const a=(e.citation||e.canonical_citation||e.primary_citation||"").toUpperCase();return!!(a.includes("U.S.C.")||a.includes("USC")||a.includes("C.F.R.")||a.includes("CFR")||a.includes("UNITED STATES CODE")||a.includes("CODE OF FEDERAL REGULATIONS"))||(/\d+\s+U\.?\s*S\.?\s*C\.?\s*[¬ß]?\s*\d+/i.test(a)||/\d+\s+C\.?\s*F\.?\s*R\.?\s*[¬ß]?\s*\d+/i.test(a))},D=t(()=>[{value:"all",label:"All",count:P.value.length},{value:"verified",label:"Verified",count:L.value},{value:"invalid",label:"Invalid",count:z.value}]),U=e=>e.case_name||e.canonical_name||e.extracted_case_name||null,$=e=>e.case_name||e.canonical_name||null,E=e=>{const a=e.extracted_case_name;return a&&"N/A"!==a?a:null},F=e=>e.canonical_date||null,q=e=>{const a=e.extracted_date;return a&&"N/A"!==a?a:null},O=e=>e.citation||e.canonical_citation||e.primary_citation||"N/A",V=e=>e.url||null,B=e=>e.source||"Unknown",j=e=>e.confidence||e.likelihood_score||"N/A",H=e=>e.error||e.explanation||null,J=e=>"true"===e.verified||!0===e.verified?"verified":"true_by_parallel"===e.verified?"true_by_parallel":"unverified",G=e=>{const a=J(e);return"verified"===a||"true_by_parallel"===a},W=e=>((e,a)=>{if(!e||!a)return!1;if("N/A"===e||"N/A"===a)return!1;const t=e=>e.toLowerCase().replace(/[^\w\s]/g," ").replace(/\s+/g," ").trim(),s=t(e),l=t(a);if(s===l)return!0;const n=s.split(" "),i=l.split(" ");return n.filter(e=>i.includes(e)&&e.length>2).length>=.6*Math.min(n.length,i.length)})($(e),E(e))?"name-similar":"name-different",X=e=>((e,a)=>{if(!e||!a)return!1;const t=e=>{const a=e.match(/\d{4}/);return a?a[0]:null},s=t(e),l=t(a);return s&&l&&s===l})(F(e),q(e))?"date-similar":"date-different",K=e=>{const a=j(e);return"number"==typeof a?a>=.8?"green":a>=.6?"yellow":a>=.4?"orange":"red":G(e)?"green":"red"},Q=e=>{const a=j(e);return"number"==typeof a?Math.round(100*a)+"%":G(e)?"‚úì":"‚úó"},Y=e=>{if(!e)return null;const a=e.match(/\d{4}/);return a?a[0]:e},Z=e=>{(e=>{C.value.has(e)?C.value.delete(e):C.value.add(e)})(e)},ee=()=>{w.value=1};function ae(e,a,t){const s=new Set,l=[];for(const n of e){const e=a(n),i=t(n);if(!e&&!i)continue;const r=`${e||""}||${i||""}`;s.has(r)||(s.add(r),l.push({name:e,year:i,citation:n}))}return l}return p(_,ee),p(x,ee),(e,t)=>(l(),s("div",he,[a.results&&(a.results.clusters||a.results.citations)?(l(),s("div",be,[n("div",ke,[t[23]||(t[23]=n("h3",null,"Citation Comparison",-1)),n("div",_e,[(l(!0),s(u,null,d(a.results.clusters||[{citations:N.value}],e=>(l(),s("div",{key:e.cluster_id||O(e.citations[0]),class:"citation-comparison-card"},[e.citations.every(e=>"unverified"===J(e))&&0===ae(e.citations,$,e=>Y(F(e))).length&&0===ae(e.citations,E,e=>Y(q(e))).length?(l(),s(u,{key:0},[n("div",xe,o(O(e.citations[0])),1),t[13]||(t[13]=m('<div class="citation-row flex-names-row" data-v-0f7abc8c><span class="row-label" data-v-0f7abc8c>Verified:</span><span style="color:#dc3545;font-weight:bold;" data-v-0f7abc8c>N/A, N/A</span></div><div class="citation-row flex-names-row" data-v-0f7abc8c><span class="row-label" data-v-0f7abc8c>From Document:</span><span style="color:#dc3545;font-weight:bold;" data-v-0f7abc8c>N/A, N/A</span></div>',2))],64)):(l(),s(u,{key:1},[n("div",{class:"citation-row citation-row-citations",onClick:a=>Z(O(e.citations[0]))},[(l(!0),s(u,null,d(e.citations,(a,r)=>(l(),s(u,null,[n("span",Ce,["verified"===J(a)&&V(a)?(l(),s("a",{key:0,href:V(a),target:"_blank",class:"citation-link-verified",onClick:t[0]||(t[0]=f(()=>{},["stop"]))},o(O(a)),9,Ie)):(l(),s("span",Ae,o(O(a)),1)),n("span",{class:c(["verification-badge",J(a)])},["true_by_parallel"===J(a)?(l(),s(u,{key:0},[v("PARALLEL CITATION VERIFIED")],64)):(l(),s(u,{key:1},[v(o(J(a).replace("_"," ")),1)],64))],2)]),r<e.citations.length-1?(l(),s("span",Te,", ")):i("",!0)],64))),256)),n("div",{class:c(["expand-icon",{expanded:C.value.has(O(e.citations[0]))}])},"‚ñº",2)],8,we),n("div",Se,[t[14]||(t[14]=n("span",{class:"row-label"},"Verified:",-1)),n("div",Le,[(l(!0),s(u,null,d(ae(e.citations,$,e=>Y(F(e))),(a,t)=>(l(),s(u,null,[n("span",ze,[a.name&&"N/A"!==a.name?(l(),s("span",{key:0,class:c(["canonical-name",W(a.citation)])},[v(o(a.name)+" ",1),a.year?(l(),s("span",{key:0,class:c(["canonical-date",X(a.citation)])}," ("+o(a.year)+")",3)):(l(),s("span",Re,"(no date)"))],2)):(l(),s("span",Ne,"No canonical name"))]),t<ae(e.citations,$,e=>Y(F(e))).length-1?(l(),s("span",Pe,", ")):i("",!0)],64))),256))])]),t[22]||(t[22]=n("div",{style:{height:"0.5em"}},null,-1)),n("div",Me,[t[15]||(t[15]=n("span",{class:"row-label"},"From Document:",-1)),n("div",De,[(l(!0),s(u,null,d(ae(e.citations,E,e=>Y(q(e))),(a,t)=>(l(),s(u,null,[n("span",Ue,[a.name&&"N/A"!==a.name?(l(),s("span",{key:0,class:c(["extracted-name",W(a.citation)])},[v(o(a.name)+" ",1),a.year?(l(),s("span",{key:0,class:c(["extracted-date",X(a.citation)])}," ("+o(a.year)+")",3)):(l(),s("span",$e,"(no date)"))],2)):(l(),s("span",Ee,"No extracted name"))]),t<ae(e.citations,E,e=>Y(q(e))).length-1?(l(),s("span",Fe,", ")):i("",!0)],64))),256))])]),g(n("div",qe,[(l(!0),s(u,null,d(e.citations,(e,a)=>(l(),s("div",{key:O(e)+"-details"},[n("div",Oe,[t[16]||(t[16]=n("span",{class:"detail-label"},"Source:",-1)),t[17]||(t[17]=v()),n("span",null,o(B(e)),1)]),n("div",Ve,[t[18]||(t[18]=n("span",{class:"detail-label"},"Verification:",-1)),t[19]||(t[19]=v()),n("span",null,o(J(e)),1)]),H(e)?(l(),s("div",Be,[t[20]||(t[20]=n("span",{class:"detail-label"},"Error:",-1)),t[21]||(t[21]=v()),n("span",null,o(H(e)),1)])):i("",!0)]))),128))],512),[[y,C.value.has(O(e.citations[0]))]])],64))]))),128))])])])):i("",!0),a.showLoading?(l(),s("div",je,[t[24]||(t[24]=n("div",{class:"loading-spinner"},null,-1)),t[25]||(t[25]=n("p",null,"Processing citations...",-1)),S.value?(l(),h(ye,{key:0,"elapsed-time":0,"remaining-time":A.value||0,"total-progress":I.value,"current-step":"Processing Citations","current-step-progress":I.value,"processing-steps":[],"citation-info":null,"rate-limit-info":null,error:"","can-retry":!1,timeout:null},null,8,["remaining-time","total-progress","current-step-progress"])):i("",!0)])):a.error?(l(),s("div",He,[t[26]||(t[26]=n("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),t[27]||(t[27]=n("h3",null,"Error Processing Citations",-1)),n("p",null,o(a.error),1)])):a.results&&a.results.clusters&&a.results.clusters.length>0?(l(),s("div",Je,[n("div",Ge,[n("div",We,[t[31]||(t[31]=n("h2",null,"Citation Verification Results (Clustered)",-1)),n("div",Xe,[n("div",Ke,[n("span",Qe,o(L.value),1),t[28]||(t[28]=n("span",{class:"stat-label"},"Verified",-1))]),n("div",Ye,[n("span",Ze,o(z.value),1),t[29]||(t[29]=n("span",{class:"stat-label"},"Invalid",-1))]),n("div",ea,[n("span",aa,o(R.value.length),1),t[30]||(t[30]=n("span",{class:"stat-label"},"Clusters",-1))])])]),n("div",ta,[n("button",{class:"action-btn copy-btn",onClick:t[1]||(t[1]=a=>e.$emit("copy-results"))}," Copy Results "),n("button",{class:"action-btn download-btn",onClick:t[2]||(t[2]=a=>e.$emit("download-results"))}," Download ")])]),n("div",sa,[n("div",la,[(l(!0),s(u,null,d(D.value,e=>(l(),s("button",{key:e.value,class:c(["filter-btn",{active:_.value===e.value}]),onClick:a=>_.value=e.value},o(e.label)+" ("+o(e.count)+") ",11,na))),128))]),n("div",ia,[n("button",{class:c(["layout-btn",{active:"full"===T.value}]),onClick:t[3]||(t[3]=e=>T.value="full"),title:"Full Display with All Details"},t[32]||(t[32]=[n("span",null,"üìã",-1),v(" Citation on Top ")]),2),n("button",{class:c(["layout-btn",{active:"horizontal"===T.value}]),onClick:t[4]||(t[4]=e=>T.value="horizontal"),title:"Horizontal Layout"},t[33]||(t[33]=[n("span",null,"üìÑ",-1),v(" Horizontal ")]),2),n("button",{class:c(["layout-btn",{active:"canonical-only"===T.value}]),onClick:t[5]||(t[5]=e=>T.value="canonical-only"),title:"Name/Date on Top"},t[34]||(t[34]=[n("span",null,"üìù",-1),v(" Name/Date on Top ")]),2)]),n("div",ra,[g(n("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>x.value=e),type:"text",placeholder:"Search citations...",class:"search-input"},null,512),[[b,x.value]])])]),n("div",oa,["full"===T.value?(l(),s("div",ca,[(l(!0),s(u,null,d(R.value,e=>(l(),s("div",{key:e.cluster_id,class:"cluster-item"},[n("div",ua,[n("h3",null,[e.canonical_name&&"N/A"!==e.canonical_name?(l(),s("span",da,o(e.canonical_name),1)):(l(),s("span",va,"Unverified Cluster")),e.canonical_date?(l(),s("span",pa," ("+o(Y(e.canonical_date))+") ",1)):i("",!0)]),e.extracted_case_name&&"N/A"!==e.extracted_case_name?(l(),s("div",ma,[t[35]||(t[35]=n("span",{class:"extracted-label"},"Extracted from document:",-1)),n("span",ga,o(e.extracted_case_name),1),e.extracted_date?(l(),s("span",fa," ("+o(Y(e.extracted_date))+") ",1)):i("",!0)])):i("",!0),n("div",ya,[n("span",ha,[v(o(e.size)+" citation",1),e.size>1?(l(),s("span",ba,"s")):i("",!0)]),e.url?(l(),s("span",ka,[n("a",{href:e.url,target:"_blank"},"View on CourtListener",8,_a)])):i("",!0)])]),n("div",xa,[(l(!0),s(u,null,d(e.citations,(a,t)=>(l(),s("div",{key:`${e.cluster_id}-${t}`,class:"citation-row"},[n("div",wa,[n("div",Ca,[n("span",{class:c(["score-badge",K(a)]),title:"Confidence: "+j(a)},o(Q(a)),11,Ia)]),n("div",Aa,[n("div",Ta,[V(a)?(l(),s("a",{key:0,href:V(a),target:"_blank",class:"citation-link"},o(O(a)),9,Sa)):(l(),s("span",La,o(O(a)),1))]),n("div",za,[n("span",Ra,o(B(a)),1),n("span",{class:c(["verification-status",J(a)])},o(J(a).replace("_"," ")),3)])])])]))),128))])]))),128))])):"horizontal"===T.value?(l(),s("div",Na,[(l(!0),s(u,null,d(R.value,e=>(l(),s("div",{key:e.cluster_id,class:"horizontal-cluster-card"},[n("div",Pa,[n("div",Ma,[n("h3",Da,[e.canonical_name&&"N/A"!==e.canonical_name?(l(),s("span",Ua,o(e.canonical_name),1)):(l(),s("span",$a,"Unverified Cluster")),e.canonical_date?(l(),s("span",Ea," ("+o(Y(e.canonical_date))+") ",1)):i("",!0)]),e.extracted_case_name&&"N/A"!==e.extracted_case_name?(l(),s("div",Fa,[t[36]||(t[36]=n("span",{class:"extracted-label"},"Extracted:",-1)),n("span",qa,o(e.extracted_case_name),1),e.extracted_date?(l(),s("span",Oa," ("+o(Y(e.extracted_date))+") ",1)):i("",!0)])):i("",!0)]),n("div",Va,[n("span",Ba,[v(o(e.size)+" citation",1),e.size>1?(l(),s("span",ja,"s")):i("",!0)]),e.url?(l(),s("a",{key:0,href:e.url,target:"_blank",class:"courtlistener-link"},t[37]||(t[37]=[n("span",null,"üîó",-1),v(" CourtListener ")]),8,Ha)):i("",!0)])]),n("div",Ja,[(l(!0),s(u,null,d(e.citations,(a,i)=>(l(),s("div",{key:`${e.cluster_id}-${i}`,class:"horizontal-citation-card"},[n("div",Ga,[n("span",{class:c(["score-badge",K(a)]),title:"Confidence: "+j(a)},o(Q(a)),11,Wa),n("span",{class:c(["verification-status",J(a)])},o(J(a).replace("_"," ")),3)]),n("div",Xa,[n("div",Ka,[V(a)?(l(),s("a",{key:0,href:V(a),target:"_blank",class:"citation-link"},o(O(a)),9,Qa)):(l(),s("span",Ya,o(O(a)),1))]),n("div",Za,[t[38]||(t[38]=n("span",{class:"source-label"},"Source:",-1)),n("span",et,o(B(a)),1)])])]))),128))])]))),128))])):"canonical-only"===T.value?(l(),s("div",at,[(l(!0),s(u,null,d(R.value,e=>(l(),s("div",{key:e.cluster_id,class:"canonical-only-card"},[n("div",tt,[t[39]||(t[39]=n("span",{class:"canonical-label"},"Canonical:",-1)),$(e.citations[0])&&"N/A"!==$(e.citations[0])?(l(),s("span",{key:0,class:c(["canonical-name",W(e.citations[0])])},[v(o($(e.citations[0]))+" ",1),F(e.citations[0])?(l(),s("span",{key:0,class:c(["canonical-date",X(e.citations[0])])}," ("+o(Y(F(e.citations[0])))+") ",3)):(l(),s("span",st,"(no date)"))],2)):(l(),s("span",lt,"No canonical name"))]),n("div",nt,[t[40]||(t[40]=n("span",{class:"extracted-label"},"Extracted:",-1)),E(e.citations[0])&&"N/A"!==E(e.citations[0])?(l(),s("span",{key:0,class:c(["extracted-name",W(e.citations[0])])},[v(o(E(e.citations[0]))+" ",1),q(e.citations[0])?(l(),s("span",{key:0,class:c(["extracted-date",X(e.citations[0])])}," ("+o(Y(q(e.citations[0])))+") ",3)):(l(),s("span",it,"(no date)"))],2)):(l(),s("span",rt,"No extracted name"))]),n("div",ot,[t[41]||(t[41]=n("span",{class:"citations-label"},"Citations:",-1)),n("div",ct,[(l(!0),s(u,null,d(e.citations,(a,t)=>(l(),s(u,null,["verified"===J(a)&&V(a)?(l(),s("a",{key:0,href:V(a),target:"_blank",class:"citation-link-verified"},o(O(a)),9,ut)):(l(),s("span",dt,o(O(a)),1)),t<e.citations.length-1?(l(),s("span",vt,", ")):i("",!0)],64))),256))])])]))),128))])):i("",!0)])])):a.results&&a.results.citations&&a.results.citations.length>0?(l(),s("div",pt,[n("div",mt,[n("div",gt,[t[45]||(t[45]=n("h2",null,"Citation Verification Results (Individual)",-1)),n("div",ft,[n("div",yt,[n("span",ht,o(L.value),1),t[42]||(t[42]=n("span",{class:"stat-label"},"Verified",-1))]),n("div",bt,[n("span",kt,o(z.value),1),t[43]||(t[43]=n("span",{class:"stat-label"},"Invalid",-1))]),n("div",_t,[n("span",xt,o(P.value.length),1),t[44]||(t[44]=n("span",{class:"stat-label"},"Total",-1))])])]),n("div",wt,[n("button",{class:"action-btn copy-btn",onClick:t[7]||(t[7]=a=>e.$emit("copy-results"))}," Copy Results "),n("button",{class:"action-btn download-btn",onClick:t[8]||(t[8]=a=>e.$emit("download-results"))}," Download ")])]),n("div",Ct,[n("div",It,[(l(!0),s(u,null,d(D.value,e=>(l(),s("button",{key:e.value,class:c(["filter-btn",{active:_.value===e.value}]),onClick:a=>_.value=e.value},o(e.label)+" ("+o(e.count)+") ",11,At))),128))]),n("div",Tt,[n("button",{class:c(["layout-btn",{active:"full"===T.value}]),onClick:t[9]||(t[9]=e=>T.value="full"),title:"Full Display with All Details"},t[46]||(t[46]=[n("span",null,"üìã",-1),v(" Citation on Top ")]),2),n("button",{class:c(["layout-btn",{active:"horizontal"===T.value}]),onClick:t[10]||(t[10]=e=>T.value="horizontal"),title:"Horizontal Layout"},t[47]||(t[47]=[n("span",null,"üìÑ",-1),v(" Horizontal ")]),2),n("button",{class:c(["layout-btn",{active:"canonical-only"===T.value}]),onClick:t[11]||(t[11]=e=>T.value="canonical-only"),title:"Name/Date on Top"},t[48]||(t[48]=[n("span",null,"üìù",-1),v(" Name/Date on Top ")]),2)]),n("div",St,[g(n("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>x.value=e),type:"text",placeholder:"Search citations...",class:"search-input"},null,512),[[b,x.value]])])]),n("div",Lt,[(l(!0),s(u,null,d(P.value,e=>(l(),s("div",{key:O(e),class:"citation-item individual"},[n("div",zt,[n("span",Rt,o(O(e)),1),n("span",{class:c(["verification-badge",J(e)])},o(J(e)),3)]),n("div",Nt,[t[49]||(t[49]=n("span",{class:"row-label"},"Verified:",-1)),n("span",null,[$(e)&&"N/A"!==$(e)?(l(),s("span",Pt,[v(o($(e))+" ",1),F(e)?(l(),s("span",{key:0,class:c(["canonical-date",X(e)])}," ("+o(Y(F(e)))+") ",3)):(l(),s("span",Mt,"(no date)"))])):(l(),s("span",Dt,"No canonical name"))])]),n("div",Ut,[t[50]||(t[50]=n("span",{class:"row-label"},"From Document:",-1)),n("span",null,[E(e)&&"N/A"!==E(e)?(l(),s("span",$t,[v(o(E(e))+" ",1),q(e)?(l(),s("span",{key:0,class:c(["extracted-date",X(e)])}," ("+o(Y(q(e)))+") ",3)):(l(),s("span",Et,"(no date)"))])):(l(),s("span",Ft,"No extracted name"))])])]))),128))])])):(l(),s("div",qt,t[51]||(t[51]=[n("p",null,"No citation results to display.",-1)])))]))}},[["__scopeId","data-v-0f7abc8c"]]),Vt=e([]),Bt=e(!1),jt=()=>{if(!Bt.value){try{const e=localStorage.getItem("casestrainer_recent_inputs");if(e){const a=JSON.parse(e);Vt.value=a.filter(e=>e&&e.tab&&e.timestamp).slice(0,10)}}catch(e){localStorage.removeItem("casestrainer_recent_inputs")}Bt.value=!0}},Ht=()=>{try{localStorage.setItem("casestrainer_recent_inputs",JSON.stringify(Vt.value))}catch(e){}},Jt=e=>{e&&e.tab&&e.timestamp&&(Vt.value=Vt.value.filter(a=>{if(a.tab!==e.tab)return!0;switch(e.tab){case"paste":return a.text!==e.text;case"url":return a.url!==e.url;case"file":return a.fileName!==e.fileName;default:return!0}}),Vt.value.unshift(e),Vt.value=Vt.value.slice(0,10),Ht())},Gt=e=>{e>=0&&e<Vt.value.length&&(Vt.value.splice(e,1),Ht())},Wt=()=>{Vt.value=[],Ht()},Xt=e=>Vt.value.filter(a=>a.tab===e),Kt=e=>{switch(e){case"paste":return"bi bi-clipboard-text";case"file":return"bi bi-file-earmark-text";case"url":return"bi bi-link-45deg";default:return"bi bi-question-circle"}},Qt=e=>{switch(e.tab){case"paste":return"Text Input";case"file":return`File: ${e.fileName||"Unknown"}`;case"url":return"URL Input";default:return"Unknown Input"}},Yt=e=>{switch(e.tab){case"paste":return e.text?e.text.substring(0,60)+(e.text.length>60?"...":""):"No text";case"file":return e.fileName||"Unknown file";case"url":return e.url||"No URL";default:return"Unknown input type"}},Zt=e=>{try{const a=new Date(e),t=new Date-a,s=Math.floor(t/6e4),l=Math.floor(t/36e5),n=Math.floor(t/864e5);return s<1?"Just now":s<60?`${s}m ago`:l<24?`${l}h ago`:n<7?`${n}d ago`:a.toLocaleDateString()}catch{return"Unknown time"}},es=t(()=>Vt.value.length>0),as=t(()=>Vt.value.length);const ts={key:0,class:"recent-inputs-sidebar"},ss={class:"sidebar-header"},ls={class:"sidebar-title"},ns={class:"badge bg-secondary ms-2"},is={class:"sidebar-content"},rs={class:"recent-inputs-list"},os=["onClick"],cs={class:"input-card-header"},us={class:"input-type-badge"},ds={class:"input-time"},vs={class:"input-card-content"},ps={class:"input-title"},ms={class:"input-preview"},gs={key:0,class:"file-warning"},fs={class:"input-card-actions"},ys=["onClick"],hs={key:0,class:"empty-state"},bs=R({__name:"RecentInputs",props:{filterTab:{type:String,default:null},maxItems:{type:Number,default:10}},emits:["load-input"],setup(e,{emit:a}){const r=e,p=a,{recentInputs:m,hasRecentInputs:g,recentInputsCount:y,removeRecentInput:h,clearRecentInputs:b,getInputIcon:_,getInputTitle:x,getInputPreview:w,formatTimestamp:C}=(Bt.value||jt(),{recentInputs:t(()=>Vt.value),hasRecentInputs:es,recentInputsCount:as,addRecentInput:Jt,removeRecentInput:Gt,clearRecentInputs:Wt,getRecentInputsByTab:Xt,getInputIcon:Kt,getInputTitle:Qt,getInputPreview:Yt,formatTimestamp:Zt,initializeRecentInputs:jt}),I=t(()=>{let e=m.value;return r.filterTab&&(e=e.filter(e=>e.tab===r.filterTab)),e.slice(0,r.maxItems)}),A=e=>{switch(e){case"text":return"Text";case"file":return"File";case"url":return"URL";case"quick":return"Citation";default:return"Input"}},T=()=>{confirm("Are you sure you want to clear all recent inputs?")&&b()};return(e,a)=>k(g)?(l(),s("div",ts,[n("div",ss,[n("div",ls,[a[0]||(a[0]=n("i",{class:"bi bi-clock-history me-2"},null,-1)),a[1]||(a[1]=v(" Recent Inputs ")),n("span",ns,o(k(y)),1)]),n("button",{onClick:T,class:"btn btn-sm btn-outline-secondary",title:"Clear all recent inputs"},a[2]||(a[2]=[n("i",{class:"bi bi-trash"},null,-1)]))]),n("div",is,[n("div",rs,[(l(!0),s(u,null,d(k(m),(e,t)=>(l(),s("div",{key:`${e.tab}-${e.timestamp}-${t}`,class:"recent-input-card",onClick:a=>(e=>{("file"!==e.tab||confirm("This will restore the file name, but you'll need to re-upload the file. Continue?"))&&p("load-input",e)})(e)},[n("div",cs,[n("div",us,[n("i",{class:c(k(_)(e.tab))},null,2),v(" "+o(A(e.tab)),1)]),n("div",ds,o(k(C)(e.timestamp)),1)]),n("div",vs,[n("div",ps,o(k(x)(e)),1),n("div",ms,o(k(w)(e)),1),"file"===e.tab?(l(),s("div",gs,a[3]||(a[3]=[n("i",{class:"bi bi-exclamation-triangle text-warning me-1"},null,-1),n("small",null,"File will need to be re-uploaded",-1)]))):i("",!0)]),n("div",fs,[n("button",{onClick:f(e=>(e=>{const a=m.value.findIndex(a=>a.tab===I.value[e].tab&&a.timestamp===I.value[e].timestamp);-1!==a&&h(a)})(t),["stop"]),class:"btn btn-sm btn-remove-purple",title:"Remove from history"},a[4]||(a[4]=[n("i",{class:"bi bi-x"},null,-1),v(" Remove ")]),8,ys)])],8,os))),128))]),k(g)?i("",!0):(l(),s("div",hs,a[5]||(a[5]=[n("i",{class:"bi bi-clock-history text-muted"},null,-1),n("p",{class:"text-muted"},"No recent inputs",-1),n("small",{class:"text-muted"},"Your recent uploads and inputs will appear here",-1)])))])])):i("",!0)}},[["__scopeId","data-v-93c5765c"]]),ks={class:"unified-input"},_s={class:"input-methods-top"},xs={class:"method-icon"},ws={class:"method-content"},Cs={key:0,class:"active-indicator"},Is={class:"method-icon"},As={class:"method-content"},Ts={key:0,class:"active-indicator"},Ss={key:0,class:"input-area-top"},Ls={key:0,class:"file-input"},zs=["disabled"],Rs={key:0,class:"drop-zone-content"},Ns={key:1,class:"file-info"},Ps={class:"file-details"},Ms={key:0,class:"validation-errors"},Ds={key:1,class:"url-input"},Us={class:"url-input-container"},$s={class:"input-wrapper"},Es=["disabled"],Fs={key:0,class:"input-status valid"},qs={key:1,class:"input-status invalid"},Os={class:"input-footer"},Vs={key:0,class:"url-preview"},Bs={key:1,class:"url-error"},js={key:2,class:"url-hint"},Hs={key:0,class:"validation-errors"},Js={class:"input-methods-bottom"},Gs={class:"method-icon"},Ws={class:"method-content"},Xs={key:0,class:"active-indicator"},Ks={class:"method-icon"},Qs={class:"method-content"},Ys={key:0,class:"active-indicator"},Zs={class:"analyze-section"},el=["disabled"],al={key:0,class:"analyzing-spinner"},tl={key:1,class:"analyze-icon"},sl={key:0,class:"validation-summary"},ll={key:1,class:"input-area-bottom"},nl={key:0,class:"text-input"},il={class:"textarea-container"},rl=["disabled"],ol={key:0,class:"textarea-overlay"},cl={class:"input-footer"},ul={key:0,class:"min-length-hint"},dl={key:0,class:"validation-errors"},vl={key:1,class:"quick-citation-input-area"},pl={class:"quick-input-container"},ml={class:"input-wrapper"},gl=["disabled"],fl={key:0,class:"input-status valid"},yl={__name:"UnifiedInput",props:{isAnalyzing:{type:Boolean,default:!1}},emits:["analyze"],setup(a,{emit:r}){const p=a,y=r,h="Paste Text",k="URL",w="Upload File",C="Quick Citation",I="Paste legal text or citations directly",A="Analyze content from a web URL",T="Upload a document for analysis",S="Enter a single citation and analyze instantly",L="üìù",z="üîó",R="üìÅ",N="üîé",P={minLength:10,maxLength:5e4,minLengthMessage:"Text must be at least 10 characters long",maxLengthMessage:"Text is too long. Maximum 50,000 characters allowed."},M={maxLength:2048,maxLengthMessage:"URL is too long. Maximum 2,048 characters allowed."},D={maxSize:52428800,allowedTypes:[".pdf",".doc",".docx",".txt"],maxSizeMessage:"File is too large. Maximum 50MB allowed.",typeMessage:"Invalid file type. Please upload PDF, DOC, DOCX, or TXT files."},U=e("text"),$=e(""),E=e(""),F=e(null),q=e(!1),O=e(null),V=e(""),B=e({}),j=e({text:!1,url:!1,file:!1,quick:!1}),H=e(!1);function J(){const e={};"text"===U.value?e.text=function(e){const a=[],t=P;return e.trim()?e.length<t.minLength?a.push(t.minLengthMessage):e.length>t.maxLength&&a.push(t.maxLengthMessage):a.push("Text is required"),/[\x00-\x08\x0B\x0C\x0E-\x1F]/.test(e)&&a.push("Text contains invalid characters. Please remove any special characters."),a}($.value):"url"===U.value?e.url=function(e){const a=[],t=M;return e.trim()?e.length>t.maxLength?a.push(t.maxLengthMessage):/^https?:\/\//.test(e)?/\./.test(e)||a.push("URL must contain a dot"):a.push("URL must start with http:// or https://"):a.push("URL is required"),a}(E.value):"file"===U.value&&(e.file=function(e){const a=[],t=D;if(e){e.size>t.maxSize&&a.push(t.maxSizeMessage),0===e.size&&a.push("File is empty");const s="."+e.name.split(".").pop().toLowerCase();t.allowedTypes.includes(s)||a.push(t.typeMessage)}else a.push("Please select a file");return a}(F.value)),B.value=e}function G(){j.value[U.value]=!0,H.value=!1,J()}const W=t(()=>B.value[U.value]||[]),X=t(()=>W.value.length>0),K=t(()=>{let e=!1;return!p.isAnalyzing&&("text"===U.value?e=$.value.length>=P.minLength&&$.value.length<=P.maxLength:"url"===U.value?e=E.value.length>0:"file"===U.value?e=!!F.value:"quick"===U.value&&(e=V.value.trim().length>0),e)});function Q(e){e.preventDefault(),e.stopPropagation(),F.value=e.target.files[0]||null,q.value=!1,G()}function Y(e){e.preventDefault(),e.stopPropagation();const a=e.dataTransfer.files[0];a&&(F.value=a,G()),q.value=!1}function Z(){var e;p.isAnalyzing||null==(e=O.value)||e.click()}function ee(){F.value=null,O.value&&(O.value.value=""),G()}function ae(){if(K.value)if(H.value=!1,"text"===U.value)y("analyze",{text:$.value,type:"text"});else if("url"===U.value)y("analyze",{url:E.value,type:"url"});else if("file"===U.value){const e=new FormData;e.append("file",F.value),e.append("type","file"),y("analyze",e)}else"quick"===U.value&&(y("analyze",{text:V.value.trim(),type:"text",quick:!0}),V.value="");else H.value=!0}function te(e){switch(U.value=e.tab,e.tab){case"text":$.value=e.text||"";break;case"url":E.value=e.url||""}J()}function se(e){if(!e)return"0 Bytes";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB"][a]}function le(){B.value={},j.value={text:!1,url:!1,file:!1,quick:!1},H.value=!1,J()}return(e,t)=>(l(),s("div",ks,[n("div",_s,[n("div",{class:c(["input-method-card",{active:"file"===U.value,disabled:a.isAnalyzing}]),onClick:t[0]||(t[0]=e=>!a.isAnalyzing&&(U.value="file",le()))},[n("div",xs,o(R),1),n("div",ws,[n("h4",null,o(w),1),n("p",null,o(T),1)]),"file"===U.value?(l(),s("div",Cs,"‚úì")):i("",!0)],2),n("div",{class:c(["input-method-card",{active:"url"===U.value,disabled:a.isAnalyzing}]),onClick:t[1]||(t[1]=e=>!a.isAnalyzing&&(U.value="url",le()))},[n("div",Is,o(z),1),n("div",As,[n("h4",null,o(k),1),n("p",null,o(A),1)]),"url"===U.value?(l(),s("div",Ts,"‚úì")):i("",!0)],2)]),"file"===U.value||"url"===U.value?(l(),s("div",Ss,["file"===U.value?(l(),s("div",Ls,[t[13]||(t[13]=n("label",{class:"input-label"},[n("i",{class:"bi bi-file-earmark-arrow-up me-2"}),v(" Upload a document ")],-1)),n("div",{class:c(["file-drop-zone",{"has-file":F.value,dragover:q.value,error:X.value&&j.value.file}]),onDrop:Y,onDragover:t[2]||(t[2]=f(e=>q.value=!0,["prevent"])),onDragleave:t[3]||(t[3]=f(e=>q.value=!1,["prevent"])),onClick:Z},[n("input",{ref_key:"fileInput",ref:O,id:"fileInput",type:"file",onChange:Q,disabled:a.isAnalyzing,accept:".pdf,.doc,.docx,.txt",style:{display:"none"}},null,40,zs),F.value?(l(),s("div",Ns,[t[11]||(t[11]=n("div",{class:"file-icon"},"üìÑ",-1)),n("div",Ps,[n("strong",null,o(F.value.name),1),n("span",null,o(se(F.value.size)),1)]),a.isAnalyzing?i("",!0):(l(),s("button",{key:0,onClick:f(ee,["stop"]),class:"clear-file-btn",title:"Remove file"},t[10]||(t[10]=[n("i",{class:"bi bi-x-lg"},null,-1)])))])):(l(),s("div",Rs,t[9]||(t[9]=[m('<div class="upload-icon" data-v-7bd870d9>üìÅ</div><h5 class="drop-zone-title" data-v-7bd870d9>Click to browse or drag &amp; drop</h5><p class="file-types" data-v-7bd870d9>Supports: PDF, DOC, DOCX, TXT (max 50MB)</p><div class="drop-zone-hint" data-v-7bd870d9><i class="bi bi-arrow-up-circle" data-v-7bd870d9></i><span data-v-7bd870d9>Drop your file here</span></div>',4)])))],34),X.value&&j.value.file?(l(),s("div",Ms,[(l(!0),s(u,null,d(W.value,e=>(l(),s("div",{key:e,class:"error-message"},[t[12]||(t[12]=n("span",{class:"error-icon"},"‚ö†Ô∏è",-1)),v(" "+o(e),1)]))),128))])):i("",!0)])):"url"===U.value?(l(),s("div",Ds,[t[21]||(t[21]=n("label",{class:"input-label"},[n("i",{class:"bi bi-link-45deg me-2"}),v(" Enter URL to analyze ")],-1)),n("div",Us,[n("div",$s,[t[16]||(t[16]=n("div",{class:"input-icon"},[n("i",{class:"bi bi-globe"})],-1)),g(n("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>E.value=e),type:"url",placeholder:"https://example.com/document.pdf",disabled:a.isAnalyzing,onInput:G,class:c([{error:X.value&&j.value.url},"url-input-field"])},null,42,Es),[[b,E.value]]),E.value&&!X.value?(l(),s("div",Fs,t[14]||(t[14]=[n("i",{class:"bi bi-check-circle-fill"},null,-1)]))):E.value&&X.value?(l(),s("div",qs,t[15]||(t[15]=[n("i",{class:"bi bi-x-circle-fill"},null,-1)]))):i("",!0)])]),n("div",Os,[E.value&&!X.value?(l(),s("span",Vs,[t[17]||(t[17]=n("i",{class:"bi bi-eye me-1"},null,-1)),v(" Will analyze: "+o(E.value),1)])):E.value&&X.value?(l(),s("span",Bs,t[18]||(t[18]=[n("i",{class:"bi bi-exclamation-triangle me-1"},null,-1),v(" Invalid URL format ")]))):(l(),s("span",js,t[19]||(t[19]=[n("i",{class:"bi bi-info-circle me-1"},null,-1),v(" Enter a valid URL to analyze web content ")])))]),X.value&&j.value.url?(l(),s("div",Hs,[(l(!0),s(u,null,d(W.value,e=>(l(),s("div",{key:e,class:"error-message"},[t[20]||(t[20]=n("span",{class:"error-icon"},"‚ö†Ô∏è",-1)),v(" "+o(e),1)]))),128))])):i("",!0)])):i("",!0)])):i("",!0),n("div",Js,[n("div",{class:c(["input-method-card",{active:"quick"===U.value,disabled:a.isAnalyzing}]),onClick:t[5]||(t[5]=e=>!a.isAnalyzing&&(U.value="quick",le()))},[n("div",Gs,o(N),1),n("div",Ws,[n("h4",null,o(C),1),n("p",null,o(S),1)]),"quick"===U.value?(l(),s("div",Xs,"‚úì")):i("",!0)],2),n("div",{class:c(["input-method-card",{active:"text"===U.value,disabled:a.isAnalyzing}]),onClick:t[6]||(t[6]=e=>!a.isAnalyzing&&(U.value="text",le()))},[n("div",Ks,o(L),1),n("div",Qs,[n("h4",null,o(h),1),n("p",null,o(I),1)]),"text"===U.value?(l(),s("div",Ys,"‚úì")):i("",!0)],2)]),_(bs,{onLoadInput:te}),n("div",Zs,[n("button",{class:c(["analyze-btn",{disabled:!K.value||a.isAnalyzing}]),disabled:!K.value||a.isAnalyzing,onClick:ae},[a.isAnalyzing?(l(),s("span",al)):(l(),s("span",tl,"üîç")),v(" "+o(a.isAnalyzing?"Analyzing...":"Analyze Content"),1)],10,el),H.value&&X.value?(l(),s("div",sl,t[22]||(t[22]=[n("p",null,"Please fix the errors above before analyzing",-1)]))):i("",!0)]),"text"===U.value||"quick"===U.value?(l(),s("div",ll,["text"===U.value?(l(),s("div",nl,[t[27]||(t[27]=n("label",{class:"input-label"},[n("i",{class:"bi bi-text-paragraph me-2"}),v(" Paste your text here ")],-1)),n("div",il,[g(n("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>$.value=e),placeholder:"Paste legal text, citations, or document content here...",disabled:a.isAnalyzing,rows:"8",onInput:G,class:c([{error:X.value&&j.value.text},"text-input-field"])},null,42,rl),[[b,$.value]]),$.value?i("",!0):(l(),s("div",ol,t[23]||(t[23]=[n("i",{class:"bi bi-clipboard"},null,-1),n("span",null,"Paste your content here",-1)])))]),n("div",cl,[n("span",{class:c(["char-count",{error:$.value.length>P.maxLength}])},[t[24]||(t[24]=n("i",{class:"bi bi-type me-1"},null,-1)),v(" "+o($.value.length)+" / "+o(P.maxLength)+" characters ",1)],2),$.value.length<P.minLength&&j.value.text?(l(),s("span",ul,[t[25]||(t[25]=n("i",{class:"bi bi-exclamation-circle me-1"},null,-1)),v(" Minimum "+o(P.minLength)+" characters required ",1)])):i("",!0)]),X.value&&j.value.text?(l(),s("div",dl,[(l(!0),s(u,null,d(W.value,e=>(l(),s("div",{key:e,class:"error-message"},[t[26]||(t[26]=n("span",{class:"error-icon"},"‚ö†Ô∏è",-1)),v(" "+o(e),1)]))),128))])):i("",!0)])):"quick"===U.value?(l(),s("div",vl,[t[30]||(t[30]=n("label",{class:"input-label"},[n("i",{class:"bi bi-lightning me-2"}),v(" Enter a single citation ")],-1)),n("div",pl,[n("div",ml,[t[29]||(t[29]=n("div",{class:"input-icon"},[n("i",{class:"bi bi-quote"})],-1)),g(n("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>V.value=e),type:"text",placeholder:"e.g., 410 U.S. 113 (1973) or Roe v. Wade",disabled:a.isAnalyzing,onKeyup:x(ae,["enter"]),class:"quick-citation-input"},null,40,gl),[[b,V.value]]),V.value?(l(),s("div",fl,t[28]||(t[28]=[n("i",{class:"bi bi-check-circle-fill"},null,-1)]))):i("",!0)])]),t[31]||(t[31]=n("div",{class:"input-footer"},[n("span",{class:"citation-hint"},[n("i",{class:"bi bi-info-circle me-1"}),v(" Enter a legal citation to verify quickly ")])],-1))])):i("",!0)])):i("",!0)]))}},hl={class:"toast-icon"},bl={class:"toast-message"},kl={class:"enhanced-validator"},_l={class:"header text-center mb-4"},xl={key:1,class:"loading-container"},wl={class:"loading-content"},Cl={key:0,class:"progress-section"},Il={class:"progress-info mb-3"},Al={class:"progress-stats"},Tl={class:"stat"},Sl={class:"stat"},Ll={class:"progress-container"},zl={class:"progress",style:{height:"1.5rem","border-radius":"0.75rem"}},Rl=["aria-valuenow"],Nl={class:"progress-text"},Pl={key:2,class:"error-container"},Ml={class:"error-content"},Dl={key:0,class:"mt-4"},Ul={class:"card"},$l={class:"card-body"},El={key:3,class:"main-content-wrapper"},Fl={class:"main-content-area"},ql={key:0,class:"results-container"},Ol={key:1,class:"input-container"},Vl={key:2,class:"no-results-container"},Bl={class:"recent-inputs-sidebar-container"};const jl=R({name:"EnhancedValidator",components:{CitationResults:Ot,UnifiedInput:R(yl,[["__scopeId","data-v-7bd870d9"]]),Toast:R({__name:"Toast",props:{message:String,type:{type:String,default:"info"},duration:{type:Number,default:3500}},emits:["close"],setup(a,{emit:r}){const u=a,d=r,v=e(!0),m=t(()=>"success"===u.type?"‚úÖ":"error"===u.type?"‚ùå":"‚ÑπÔ∏è");function g(){v.value=!1,d("close")}return p(()=>u.message,e=>{e&&(v.value=!0,setTimeout(g,u.duration))}),(e,t)=>(l(),h(C,{name:"toast-fade"},{default:w(()=>[v.value?(l(),s("div",{key:0,class:c(["toast",a.type])},[n("span",hl,o(m.value),1),n("span",bl,o(a.message),1),n("button",{class:"toast-close",onClick:g},"√ó")],2)):i("",!0)]),_:1}))}},[["__scopeId","data-v-a1e0936f"]]),SkeletonLoader:R({__name:"SkeletonLoader",props:{lines:{type:Number,default:3},height:{type:String,default:"auto"},width:{type:String,default:"100%"}},setup:e=>(a,t)=>(l(),s("div",{class:"skeleton-loader",style:r({height:e.height,width:e.width})},[(l(!0),s(u,null,d(e.lines,e=>(l(),s("div",{key:e,class:"skeleton-line"}))),128))],4))},[["__scopeId","data-v-1c57e4a2"]]),RecentInputs:bs},setup(){const s=T(),l=S(),n=e(null),i=e(null),{isLoading:r,cancel:o}=function(t={}){const{loadingMessage:s="Loading...",showLoading:l=!0,onSuccess:n,onError:i,onFinally:r}=t,o=e(null),c=e(null),u=e(!1),d=e(null);let v=null,p=null;const m=`api_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return a(()=>{p&&p.abort(),v&&v.remove()}),{execute:async function(e,a={}){var g;const{message:f=s,showLoader:y=l,signal:h,...b}={...t,...a};c.value=null,d.value=null,o.value=null,y&&(v=z(m,{message:f})),u.value=!0,"undefined"!=typeof AbortController&&(p=new AbortController,b.signal=h||p.signal);try{const a=await e({...b,signal:b.signal});return o.value=a.data||a,d.value=a.status||200,n&&n(a),a}catch(k){throw c.value=k,d.value=(null==(g=k.response)?void 0:g.status)||0,i&&i(k),k}finally{u.value=!1,v&&(c.value?v.error(c.value):v.complete(),v=null),r&&r(),p=null}},cancel:function(){p&&(p.abort(),p=null),v&&(v.remove(),v=null),u.value=!1},data:o,error:c,isLoading:u,status:d}}({loadingMessage:"Validating citation...",showLoading:!0}),c=e(!1),{isLoading:u}=function(){const e=(e,a="Loading...")=>{M.value=e,a&&(D.value=a)};return{isLoading:t(()=>M.value),loadingMessage:t(()=>D.value),setLoading:e,showLoading:a=>{e(!0,a)},hideLoading:()=>{e(!1)},toggleLoading:a=>{e(!M.value,a)}}}(),d=t(()=>r.value||u.value||c.value),{elapsedTime:v,remainingTime:m,totalProgress:g,currentStep:f,currentStepProgress:y,processingSteps:h,actualTimes:b,citationInfo:k,rateLimitInfo:_,timeout:x,processingError:w,canRetry:C,startProcessing:I,stopProcessing:R,updateProgress:U,setSteps:$,resetProcessing:E,setProcessingError:F}=function(){const a=e(null),s=e(0),l=e(""),n=e(0),i=e([]),r=e({}),o=e(null),c=e(null),u=e(null),d=e(null),v=e(!1),p=t(()=>a.value?(Date.now()-a.value)/1e3:0),m=t(()=>s.value?Math.max(0,s.value-p.value):0),g=t(()=>s.value?Math.min(100,p.value/s.value*100):0),f=t(()=>{if(!i.value.length)return 0;const e=i.value.findIndex(e=>e.step===l.value);if(-1===e)return 0;const a=i.value[e],t=p.value-(a.startTime||0);return Math.min(100,t/a.estimated_time*100)}),y=(e,a)=>{const t=i.value.findIndex(a=>a.step===e);-1!==t&&(0!==t&&100!==i.value[t-1].progress||(l.value=e,i.value[t].startTime||(i.value[t].startTime=Date.now())),i.value[t].progress=a,n.value=a)};return{startTime:a,estimatedTotalTime:s,currentStep:l,stepProgress:n,processingSteps:i,actualTimes:r,citationInfo:o,rateLimitInfo:c,timeout:u,processingError:d,canRetry:v,elapsedTime:p,remainingTime:m,totalProgress:g,currentStepProgress:f,startProcessing:e=>{var t;a.value=Date.now(),"object"==typeof e&&null!==e&&Array.isArray(e.steps)?(s.value=e.estimated_total_time,i.value=e.steps.map(e=>({step:e[0],estimated_time:e[1],startTime:null,progress:0})),l.value=(null==(t=i.value[0])?void 0:t.step)||""):"number"==typeof e?(s.value=e,i.value=[],l.value=""):(s.value=0,i.value=[],l.value=""),n.value=0},stopProcessing:()=>{a.value=null,s.value=0,l.value="",n.value=0},updateProgress:e=>{"object"==typeof e&&e.step?y(e.step,e.progress||0):"number"==typeof e&&(n.value=e)},setSteps:e=>{Array.isArray(e)&&(i.value=e.map(e=>({step:"string"==typeof e?e:e.step,estimated_time:"object"==typeof e?e.estimated_time:10,startTime:null,progress:0})))},resetProcessing:()=>{a.value=null,s.value=0,l.value="",n.value=0,i.value=[],r.value={},o.value=null,c.value=null,u.value=null,d.value=null,v.value=!1},setProcessingError:e=>{d.value=e,v.value=!0},updateStep:y,completeStep:e=>{y(e,100);const a=i.value.findIndex(a=>a.step===e)+1;a<i.value.length&&(l.value=i.value[a].step,i.value[a].startTime=Date.now())},updateActualTimes:e=>{r.value=e},reset:()=>{a.value=null,s.value=0,l.value="",n.value=0,i.value=[],r.value={},o.value=null,c.value=null,u.value=null,d.value=null,v.value=!1},formatTime:e=>e<60?`${Math.round(e)}s`:`${Math.floor(e/60)}m ${Math.round(e%60)}s`}}(),q=e(0),O=e(null),V=e(null),B=e(null);let j=e(null);const H=e(""),J=e("info"),G=(e,a="info")=>{H.value=e,J.value=a},W=e(null),X=12e4,K=e(""),Q=t(()=>!0),Y=e(0),Z=t(()=>k.value&&k.value.total?k.value.total:0),ee=t(()=>Z.value?Math.min(100,Math.round(Y.value/Z.value*100)):0),ae=t(()=>ee.value>=80?"bg-success":ee.value>=50?"bg-info":ee.value>=30?"bg-warning":"bg-danger");let te=null;const se=e(!1),{normalizeCitations:le}=function(){const e=e=>{let a=0,t="text-muted";if(e.canonical_name&&"N/A"!==e.canonical_name&&(a+=2),e.extracted_case_name&&"N/A"!==e.extracted_case_name&&e.canonical_name&&"N/A"!==e.canonical_name){const t=e.canonical_name.toLowerCase().split(/\s+/).filter(e=>e.length>2),s=e.extracted_case_name.toLowerCase().split(/\s+/).filter(e=>e.length>2);t.filter(e=>s.includes(e)).length/Math.max(t.length,s.length)>=.5&&(a+=1)}return e.canonical_date&&"N/A"!==e.canonical_date&&(a+=1),e.url&&""!==e.url&&(a+=1),t=a>=4?"text-success":a>=2?"text-warning":"text-danger",{score:a,scoreColor:t,normalized:{canonical_name:e.canonical_name||"N/A",extracted_case_name:e.extracted_case_name||"N/A",canonical_date:e.canonical_date||"N/A",extracted_date:e.extracted_date||"N/A",url:e.url||"",verified:e.verified||!1}}};return{normalizeCitation:e,normalizeCitations:a=>Array.isArray(a)?a.map(a=>{const t=e(a);return{...a,score:t.score,scoreColor:t.scoreColor}}):[],calculateCitationScore:a=>e(a).score,calculateSimilarity:e=>{if(e.canonical_name&&"N/A"!==e.canonical_name)return 1;if(e.extracted_case_name&&"N/A"!==e.extracted_case_name&&e.canonical_name&&"N/A"!==e.canonical_name){const a=e.canonical_name.toLowerCase().split(/\s+/).filter(e=>e.length>2),t=e.extracted_case_name.toLowerCase().split(/\s+/).filter(e=>e.length>2);return a.filter(e=>t.includes(e)).length/Math.max(a.length,t.length)}return 0}}}();function ne(e){const a=new Map;return e.forEach(e=>{const t=e.canonical_citation||e.citation||e.primary_citation;a.has(t)||a.set(t,{cluster_id:`cluster_${t.replace(/[^a-zA-Z0-9]/g,"_")}`,canonical_name:e.canonical_name||e.case_name||"N/A",canonical_date:e.canonical_date||null,extracted_case_name:e.extracted_case_name||"N/A",extracted_date:e.extracted_date||null,url:e.url||null,citations:[]});a.get(t).citations.push(e)}),Array.from(a.values()).map(e=>({...e,size:e.citations.length}))}function ie(){n.value=null,i.value=null,E()}async function re(e){if(e)try{const a=(await N.get(`/task_status/${e}`)).data;if("completed"===a.status){const e=Array.isArray(a.results)?a.results:a.citations||[];if(n.value={citations:le(e),clusters:a.clusters||ne(e),metadata:a.metadata||{},total_citations:e.length,verified_count:e.filter(e=>{var a,t;return e.verified||e.valid||(null==(a=e.data)?void 0:a.valid)||(null==(t=e.data)?void 0:t.found)}).length,unverified_count:e.filter(e=>{var a,t;return!(e.verified||e.valid||(null==(a=e.data)?void 0:a.valid)||(null==(t=e.data)?void 0:t.found))}).length},c.value=!1,R(),r.value=!1,void 0!==u&&void 0!==u.value&&(u.value=!1),G("Citation analysis completed successfully!","success"),B.value&&(clearInterval(B.value),B.value=null),0===e.length){let e="No citations found in the provided text or document.";a.status_message&&a.status_message.toLowerCase().includes("rate limit")&&(e+=" (Possible cause: search engine rate limiting)"),a.error&&(e+=` (Backend error: ${a.error})`),i.value=e}window&&window.localStorage&&"true"===window.localStorage.getItem("debugMode")&&(i.value+="\n[DEBUG] Raw backend response: "+JSON.stringify(a,null,2))}else"failed"===a.status?(i.value=a.error||"Processing failed",c.value=!1,F(a.error||"Processing failed"),G(`Processing failed: ${a.error||"Unknown error"}`,"error"),B.value&&(clearInterval(B.value),B.value=null)):(c.value=!0,a.estimated_total_time&&a.steps?j.value!==e&&(I({estimated_total_time:a.estimated_total_time,steps:a.steps}),j.value=e):a.estimated_total_time&&j.value!==e&&(I(a.estimated_total_time),j.value=e),a.current_step&&U({step:a.current_step,progress:a.progress||0}),void 0!==a.total_citations&&(k.value={total:a.total_citations,processed:a.processed_citations||0,unique:a.unique_citations||0}),n.value={citations:[],clusters:[],metadata:a.metadata||{},progress:a.progress||0,eta_seconds:a.eta_seconds||null,current_chunk:a.current_chunk||0,total_chunks:a.total_chunks||1,total_citations:a.total_citations||0,verified_count:0,unverified_count:0},B.value||(B.value=setInterval(()=>re(e),2e3)));me()}catch(a){i.value="Failed to check processing status",c.value=!1,F(a.message||"Failed to check processing status"),B.value&&(clearInterval(B.value),B.value=null)}}const oe=async(e,a)=>{try{"file"===a?await ve(e):"url"===a?await pe({url:e}):"text"===a&&await de({text:e})}catch(t){w.value=`Failed to analyze input: ${t.message}`,C.value=!0}},ce=e=>{try{let a=[];Array.isArray(e.citations)&&e.citations.length>0?a=e.citations:Array.isArray(e.validation_results)&&e.validation_results.length>0&&(a=e.validation_results),n.value={...e,citations:le(a),clusters:e.clusters||ne(a),timestamp:(new Date).toISOString()},r.value=!1,i.value=null,c.value=!1,V.value=null,void 0!==u&&void 0!==u.value&&(u.value=!1),L(()=>{const e=document.querySelector(".results-container");e&&e.scrollIntoView({behavior:"smooth"})})}catch(a){i.value="Failed to process results",r.value=!1}},ue=e=>{i.value=e.message||"An error occurred during analysis",r.value=!1,c.value=!1,V.value=null,w.value=e.message||"Analysis failed",C.value=!0,G(i.value,"error")},de=async({text:e,options:a})=>{if(!c.value){r.value=!0,i.value=null,n.value=null;try{const a=await P({text:e,type:"text"});ce(a),r.value=!1}catch(t){ue(t)}}},ve=async e=>{if(!c.value){r.value=!0,i.value=null,n.value=null;try{let a;e instanceof FormData?a=e:(a=new FormData,a.append("file",e.file),a.append("type","file"));const t=await P(a);ce(t),r.value=!1}catch(a){ue(a)}}},pe=async({url:e})=>{if(!c.value){r.value=!0,i.value=null,n.value=null;try{const a=await P({url:e,type:"url"});ce(a),r.value=!1}catch(a){ue(a)}}};function me(){W.value&&(clearTimeout(W.value),W.value=null)}A(()=>{let e={...s.query};if(l.currentRoute.value.state&&l.currentRoute.value.state.results){const e=l.currentRoute.value.state.results;let a=[];return Array.isArray(e.citations)&&e.citations.length>0?a=e.citations:Array.isArray(e.validation_results)&&e.validation_results.length>0&&(a=e.validation_results),void(a.length>0?(n.value={...e,citations:le(a),clusters:e.clusters||ne(a),total_citations:a.length,verified_count:a.filter(e=>{var a,t;return e.verified||e.valid||(null==(a=e.data)?void 0:a.valid)||(null==(t=e.data)?void 0:t.found)}).length,unverified_count:a.filter(e=>{var a,t;return!(e.verified||e.valid||(null==(a=e.data)?void 0:a.valid)||(null==(t=e.data)?void 0:t.found))}).length},G("Citation analysis completed successfully!","success")):i.value="No citations found in the provided text or document.")}if(e.task_id)return V.value=e.task_id,c.value=!0,void re(e.task_id);if(!e.text&&!e.url&&!e.fileName&&localStorage.getItem("lastCitationInput"))try{const a=JSON.parse(localStorage.getItem("lastCitationInput"));a.fileName?(delete a.fileName,0===Object.keys(a).length?localStorage.removeItem("lastCitationInput"):localStorage.setItem("lastCitationInput",JSON.stringify(a)),e={}):e=a}catch(a){e={}}e.text||e.url||e.fileName?(ie(),e.text?de({text:e.text}):e.url?pe({url:e.url}):e.fileName&&(i.value=`File "${e.fileName}" was previously uploaded but cannot be restored from history. Please upload the file again to analyze it.`,se.value=!0)):n.value=null,Q.value&&Z.value>20&&(Y.value=0,te&&clearInterval(te),te=setInterval(()=>{Y.value<Z.value&&Y.value++},2e3)),setTimeout(()=>{const e=document.querySelectorAll(".fas.fa-cog.fa-spin"),a=document.querySelectorAll(".bi.bi-gear-fill.spinning");e.forEach((e,t)=>{-1===getComputedStyle(e).fontFamily.indexOf("FontAwesome")&&(e.style.display="none",a[t]&&(a[t].style.display="inline-block"))})},100)}),a(()=>{c.value&&o(),B.value&&(clearInterval(B.value),B.value=null),me(),te&&clearInterval(te)}),p(()=>n.value,e=>{e&&te&&(Y.value=Z.value,clearInterval(te))});return{results:n,error:i,isLoading:d,showLoading:d,hasActiveRequest:c,clearResults:ie,handleUnifiedAnalyze:function(e){c.value?G("A request is already in progress. Please wait for it to complete.","warning"):(E(),$([{step:"Preparing analysis",estimated_time:5},{step:"Processing content",estimated_time:30},{step:"Verifying citations",estimated_time:60}]),I(),c.value=!0,i.value=null,n.value=null,e.file?ve(e):e.url?pe(e):e.text&&(e.quick,de({text:e.text,options:{}})),K.value="",me(),W.value=setTimeout(()=>{K.value="Processing timed out. No response from server.",F(K.value),c.value=!1,G(K.value,"error")},X))},retryProcessing:async()=>{if(V.value)try{w.value=null,C.value=!1,E(),await N.cancelRequest(V.value);const e=N.getRequestStatus(V.value);if(e){const{type:a,input:t}=e;await oe(t,a)}}catch(e){w.value=`Failed to retry: ${e.message}`,C.value=!0}},cancelValidation:o,copyResults:function(){},downloadResults:function(){},elapsedTime:v,remainingTime:m,totalProgress:g,currentStep:f,currentStepProgress:y,processingSteps:h,actualTimes:b,formatTime:function(e){if(!e||e<0)return"0s";const a=Math.floor(e/3600),t=Math.floor(e%3600/60),s=Math.floor(e%60);return a>0?`${a}:${t.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`:`${t}:${s.toString().padStart(2,"0")}`},citationInfo:k,queuePosition:q,estimatedQueueTime:O,rateLimitInfo:_,timeout:x,processingError:w,canRetry:C,getProgressBarClass:function(e){return e>=.8?"bg-success":e>=.5?"bg-info":e>=.3?"bg-warning":"bg-danger"},applyCorrection:()=>{},toastMessage:H,toastType:J,clearToast:()=>{H.value=""},fallbackError:K,showTimer:Q,progressCurrent:Y,progressTotal:Z,progressPercent:ee,progressBarClass:ae,loadRecentInput:e=>{l.push({path:"/",query:{tab:e.tab,..."paste"===e.tab&&e.text?{text:e.text}:{},..."url"===e.tab&&e.url?{url:e.url}:{}}})},showFileUpload:se}}},[["render",function(e,a,t,u,d,p){const m=I("Toast"),g=I("UnifiedInput"),f=I("CitationResults"),y=I("RecentInputs");return l(),s("div",kl,[u.toastMessage?(l(),h(m,{key:0,message:u.toastMessage,type:u.toastType,onClose:u.clearToast},null,8,["message","type","onClose"])):i("",!0),n("div",_l,[n("button",{class:"btn btn-link back-btn",onClick:a[0]||(a[0]=(...a)=>e.goHome&&e.goHome(...a))},a[1]||(a[1]=[n("i",{class:"bi bi-arrow-left"},null,-1),v(" Back to Home ")])),a[2]||(a[2]=n("h1",{class:"results-title"},"Citation Verification Results",-1))]),u.showLoading&&!u.results?(l(),s("div",xl,[n("div",wl,[a[5]||(a[5]=n("div",{class:"spinner-container"},[n("div",{class:"spinner-border text-primary",role:"status"},[n("span",{class:"visually-hidden"},"Processing...")])],-1)),a[6]||(a[6]=n("h3",null,"Processing Citations",-1)),a[7]||(a[7]=n("p",{class:"text-muted"},"Extracting and analyzing citations from your document...",-1)),u.showTimer?(l(),s("div",Cl,[n("div",Il,[n("div",Al,[n("span",Tl,[a[3]||(a[3]=n("i",{class:"bi bi-list-ol text-primary"},null,-1)),v(" "+o(u.progressCurrent)+" of "+o(u.progressTotal)+" citations ",1)]),n("span",Sl,[a[4]||(a[4]=n("i",{class:"bi bi-clock text-primary"},null,-1)),v(" "+o(u.formatTime(u.elapsedTime))+" elapsed ",1)])])]),n("div",Ll,[n("div",zl,[n("div",{class:c(["progress-bar progress-bar-striped progress-bar-animated",u.progressBarClass]),role:"progressbar",style:r({width:u.progressPercent+"%"}),"aria-valuenow":u.progressPercent,"aria-valuemin":"0","aria-valuemax":"100"},[n("span",Nl,o(u.progressPercent)+"%",1)],14,Rl)])])])):i("",!0)])])):u.error&&!u.showLoading?(l(),s("div",Pl,[n("div",Ml,[a[10]||(a[10]=n("div",{class:"error-icon"},[n("i",{class:"bi bi-exclamation-triangle"})],-1)),a[11]||(a[11]=n("h3",null,"Analysis Failed",-1)),n("p",null,o(u.error),1),u.showFileUpload?(l(),s("div",Dl,[n("div",Ul,[a[9]||(a[9]=n("div",{class:"card-header bg-primary text-white"},[n("h5",{class:"mb-0"},[n("i",{class:"bi bi-file-earmark-arrow-up me-2"}),v(" Re-upload File ")])],-1)),n("div",$l,[a[8]||(a[8]=n("p",{class:"text-muted mb-3"}," To analyze your file, please upload it again using the form below. ",-1)),_(g,{onAnalyze:e.handleAnalyze,"is-analyzing":u.showLoading},null,8,["onAnalyze","is-analyzing"])])])])):i("",!0)])])):(l(),s("div",El,[n("div",Fl,[u.results?(l(),s("div",ql,[_(f,{results:u.results,"processing-time":u.elapsedTime,"show-details":!0,onApplyCorrection:u.applyCorrection,onCopyResults:u.copyResults,onDownloadResults:u.downloadResults,onToast:e.showToast},null,8,["results","processing-time","onApplyCorrection","onCopyResults","onDownloadResults","onToast"])])):u.showFileUpload?(l(),s("div",Ol,[_(g,{onAnalyze:e.handleAnalyze,"is-analyzing":u.showLoading},null,8,["onAnalyze","is-analyzing"])])):(l(),s("div",Vl,a[12]||(a[12]=[n("div",{class:"no-results-content"},[n("div",{class:"no-results-icon"},[n("i",{class:"bi bi-search"})]),n("h3",null,"No Analysis Results"),n("p",{class:"lead"},[v("No results to display."),n("br"),v("Please return to the home page to start a new analysis.")])],-1)])))]),n("div",Bl,[_(y,{onLoadInput:u.loadRecentInput},null,8,["onLoadInput"])])]))])}],["__scopeId","data-v-836d98bc"]]);export{jl as default};
