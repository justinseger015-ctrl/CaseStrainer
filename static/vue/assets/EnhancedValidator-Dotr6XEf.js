import{r as e,z as t,n as a,p as s,c as l,o as i,b as n,l as r,A as o,t as c,B as d,F as u,m,f as v,u as g,v as p,C as f,x as y,D as b,E as h,d as C,e as x,h as k,G as w,H as _,I as T,J as N,y as S}from"./vendor-6S-JWqyr.js";import{c as E,_ as R,a as P}from"./index-CQUDo5_9.js";const A=e(!1),U=e("Loading...");const L=s.create({baseURL:"/casestrainer/api",timeout:12e4});L.interceptors.request.use((e=>("/analyze"===e.url&&e.data&&"url"===e.data.type?(e.timeout=3e5,e.retryCount=0,e.maxRetries=3):(e.timeout=12e4,e.retryCount=0,e.maxRetries=1),e))),L.interceptors.response.use((e=>e),(async e=>{const t=e.config;if(!t||!t.retryCount||t.retryCount>=t.maxRetries||"ECONNABORTED"!==e.code&&!e.message.includes("timeout")&&!e.message.includes("Network Error"))return Promise.reject(e);t.retryCount+=1;const a=Math.min(1e3*Math.pow(2,t.retryCount),3e4);return console.log(`Retrying request to ${t.url} (attempt ${t.retryCount}/${t.maxRetries}) after ${a}ms delay`),await new Promise((e=>setTimeout(e,a))),L(t)})),L.interceptors.request.use((e=>(e.headers["X-API-Key"]="443a87912e4f444fb818fca454364d71e4aa9f91",e.data instanceof FormData||(e.headers["Content-Type"]="application/json"),e)),(e=>(console.error("API Request Error:",e),Promise.reject(e)))),L.interceptors.response.use((e=>e),(e=>{var t,a;return e.response?console.error("API Error Response:",{status:e.response.status,url:null==(t=e.config)?void 0:t.url,data:e.response.data,headers:e.response.headers}):e.request?console.error("API Request Error (No Response):",{url:null==(a=e.config)?void 0:a.url,message:e.message}):console.error("API Error:",e.message),Promise.reject(e)})),L.interceptors.response.use((e=>e),(e=>{if(e.config&&"/analyze"===e.config.url&&e.config.data&&"url"===e.config.data.type)if(e.response)switch(e.response.status){case 400:e.message="Invalid URL or content type not supported";break;case 404:e.message="URL not found or content not accessible";break;case 429:e.message="Too many requests. Please try again in a few minutes";break;case 502:e.message="Failed to fetch URL content. The server may be temporarily unavailable";break;case 504:e.message="Request timed out while fetching URL content";break;default:e.message=`Error fetching URL: ${e.response.status} ${e.response.statusText}`}else"ECONNABORTED"===e.code?e.message="Request timed out while fetching URL content":"ECONNREFUSED"===e.code?e.message="Could not connect to the server":"ENOTFOUND"===e.code&&(e.message="URL not found or domain does not exist");return Promise.reject(e)}));const I=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"})),V={validateCitation:e=>L.post("/analyze",{text:e,options:{batch_process:!1,return_debug:!1}}),pollTaskResults:e=>L.get(`/task_status/${e}`),getCitationMetadata:e=>L.get(`/metadata?citation=${encodeURIComponent(e)}`),getCitationNetwork:(e,t=1)=>L.get(`/network?citation=${encodeURIComponent(e)}&depth=${t}`),classifyCitation:e=>L.post("/classify",{citation:e}),getCitationFeedback:e=>L.get(`/feedback?citation=${encodeURIComponent(e)}`),submitFeedback:e=>L.post("/feedback",e)};const D={name:"ProcessingProgress",props:{elapsedTime:{type:Number,required:!0},remainingTime:{type:Number,required:!0},totalProgress:{type:Number,required:!0},currentStep:{type:String,default:""},currentStepProgress:{type:Number,default:0},processingSteps:{type:Array,default:()=>[]},actualTimes:{type:Object,default:()=>({})},citationInfo:{type:Object,default:null},rateLimitInfo:{type:Object,default:null},error:{type:String,default:""},canRetry:{type:Boolean,default:!1},timeout:{type:Number,default:null}},computed:{currentStepElapsed(){const e=this.processingSteps.find((e=>e.step===this.currentStep));return e?Date.now()/1e3-e.start_time:0},currentStepRemaining(){const e=this.processingSteps.find((e=>e.step===this.currentStep));return e&&e.estimated_time?Math.max(0,e.estimated_time-this.currentStepElapsed):0},isTimeoutWarning(){if(!this.timeout)return!1;return this.timeout-this.elapsedTime<60}},methods:{formatTime(e){if(e<0)return"0s";const t=Math.floor(e/60),a=Math.round(e%60);return t>0?`${t}m ${a}s`:`${a}s`},getStepClass(e){return 100===e.progress?"completed":e.step===this.currentStep?"current":e.progress>0?"in-progress":"pending"},getStepStatus(e){return 100===e.progress?"Completed":e.step===this.currentStep?"In Progress":e.progress>0?`${e.progress}%`:"Pending"},formatProcessingRate(e){if(!e.processed||!this.elapsedTime)return"0/min";const t=e.processed/this.elapsedTime*60;return`${Math.round(t)}/min`}}},M={class:"processing-progress"},$={class:"progress-section"},O={class:"progress-bar"},F={class:"time-info"},z={key:0,class:"citation-section"},q={class:"citation-stats"},B={class:"stat"},j={class:"value"},X={class:"stat"},H={class:"value"},W={class:"stat"},G={class:"value"},Z={key:0,class:"stat"},J={class:"value"},Y={key:0,class:"rate-limit-info"},K={class:"stat"},Q={class:"value"},ee={key:0,class:"stat"},te={class:"value"},ae={key:1,class:"current-step"},se={class:"step-info"},le={class:"step-name"},ie={class:"progress-bar"},ne={class:"time-info"},re={class:"steps-section"},oe={class:"steps-list"},ce={class:"step-header"},de={class:"step-name"},ue={class:"step-status"},me={key:0,class:"progress-bar"},ve={key:1,class:"time-info"},ge={key:0},pe={key:2,class:"error-section"},fe={class:"error-message"};const ye=R(D,[["render",function(e,t,a,s,g,p){return i(),l("div",M,[n("div",$,[t[1]||(t[1]=n("h3",null,"Overall Progress",-1)),n("div",O,[n("div",{class:"progress-fill",style:o({width:`${a.totalProgress}%`})},null,4)]),n("div",F,[n("span",null,"Elapsed: "+c(p.formatTime(a.elapsedTime)),1),n("span",null,"Remaining: "+c(p.formatTime(a.remainingTime)),1),a.timeout?(i(),l("span",{key:0,class:d(["timeout-info",{warning:p.isTimeoutWarning}])}," Timeout: "+c(p.formatTime(a.timeout-a.elapsedTime)),3)):r("",!0)])]),a.citationInfo?(i(),l("div",z,[t[8]||(t[8]=n("h3",null,"Citation Processing",-1)),n("div",q,[n("div",B,[t[2]||(t[2]=n("span",{class:"label"},"Total Citations:",-1)),n("span",j,c(a.citationInfo.total),1)]),n("div",X,[t[3]||(t[3]=n("span",{class:"label"},"Unique Citations:",-1)),n("span",H,c(a.citationInfo.unique),1)]),n("div",W,[t[4]||(t[4]=n("span",{class:"label"},"Processed:",-1)),n("span",G,c(a.citationInfo.processed),1)]),a.citationInfo.unique?(i(),l("div",Z,[t[5]||(t[5]=n("span",{class:"label"},"Processing Rate:",-1)),n("span",J,c(p.formatProcessingRate(a.citationInfo)),1)])):r("",!0)]),a.rateLimitInfo?(i(),l("div",Y,[n("div",K,[t[6]||(t[6]=n("span",{class:"label"},"API Rate Limit:",-1)),n("span",Q,c(a.rateLimitInfo.remaining)+"/"+c(a.rateLimitInfo.limit),1)]),a.rateLimitInfo.resetTime?(i(),l("div",ee,[t[7]||(t[7]=n("span",{class:"label"},"Reset in:",-1)),n("span",te,c(p.formatTime(a.rateLimitInfo.resetTime-Date.now()/1e3)),1)])):r("",!0)])):r("",!0)])):r("",!0),a.currentStep?(i(),l("div",ae,[t[9]||(t[9]=n("h3",null,"Current Step",-1)),n("div",se,[n("span",le,c(a.currentStep),1),n("div",ie,[n("div",{class:"progress-fill",style:o({width:`${a.currentStepProgress}%`})},null,4)]),n("div",ne,[n("span",null,"Elapsed: "+c(p.formatTime(p.currentStepElapsed)),1),n("span",null,"Remaining: "+c(p.formatTime(p.currentStepRemaining)),1)])])])):r("",!0),n("div",re,[t[10]||(t[10]=n("h3",null,"Processing Steps",-1)),n("div",oe,[(i(!0),l(u,null,m(a.processingSteps,(e=>(i(),l("div",{key:e.step,class:d(["step",p.getStepClass(e)])},[n("div",ce,[n("span",de,c(e.step),1),n("span",ue,c(p.getStepStatus(e)),1)]),void 0!==e.progress?(i(),l("div",me,[n("div",{class:"progress-fill",style:o({width:`${e.progress}%`})},null,4)])):r("",!0),e.estimated_time?(i(),l("div",ve,[n("span",null,"Estimated: "+c(p.formatTime(e.estimated_time)),1),e.actual_time?(i(),l("span",ge,"Actual: "+c(p.formatTime(e.actual_time)),1)):r("",!0)])):r("",!0)],2)))),128))])]),a.error?(i(),l("div",pe,[n("div",fe,[t[11]||(t[11]=n("i",{class:"fas fa-exclamation-circle"},null,-1)),v(" "+c(a.error),1)]),a.canRetry?(i(),l("button",{key:0,onClick:t[0]||(t[0]=t=>e.$emit("retry")),class:"retry-button"}," Retry Processing ")):r("",!0)])):r("",!0)])}],["__scopeId","data-v-7431ecf9"]]),be={MAX_TEXT_LENGTH:1e6,MIN_TEXT_LENGTH:10,MAX_URL_LENGTH:2048,PROCESSING_TIMEOUT:3e5,URL_FETCH_TIMEOUT:3e4,ALLOWED_PROTOCOLS:["http:","https:"],VALID_FILE_TYPES:{"application/pdf":[".pdf"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"text/plain":[".txt"],"text/rtf":[".rtf"]},MAX_FILE_SIZE:52428800,CONTENT_TYPES:{PDF:"application/pdf",HTML:"text/html",TEXT:"text/plain",DOCX:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",DOC:"application/msword",RTF:"text/rtf"},PDF_EXTENSIONS:[".pdf"]},he={validateText(e){if(!e||"string"!=typeof e)throw new Error("No text provided");if(e.length>be.MAX_TEXT_LENGTH)throw new Error(`Text is too long. Maximum length is ${be.MAX_TEXT_LENGTH} characters.`);if(e.length<be.MIN_TEXT_LENGTH)throw new Error(`Text is too short. Minimum length is ${be.MIN_TEXT_LENGTH} characters.`);if(/[\x00-\x08\x0B\x0C\x0E-\x1F]/.test(e))throw new Error("Text contains invalid characters. Please remove any special characters and try again.");return!0},validateUrl(e){if(!e||"string"!=typeof e)throw new Error("No URL provided");if(e.length>be.MAX_URL_LENGTH)throw new Error(`URL is too long. Maximum length is ${be.MAX_URL_LENGTH} characters.`);try{const t=new URL(e);if(!be.ALLOWED_PROTOCOLS.includes(t.protocol))throw new Error("Only HTTP and HTTPS URLs are supported.");return!0}catch(t){if(t instanceof TypeError)throw new Error("Invalid URL format. Please enter a valid URL.");throw t}},validateFile(e){if(!e)throw new Error("No file selected");if(e.size>be.MAX_FILE_SIZE)throw new Error(`File is too large. Maximum size is ${be.MAX_FILE_SIZE/1048576}MB.`);if(0===e.size)throw new Error("File is empty");const t=be.VALID_FILE_TYPES[e.type];if(!t)throw new Error("Invalid file type. Please upload a PDF, Word document, or text file.");const a="."+e.name.split(".").pop().toLowerCase();if(!t.includes(a))throw new Error(`Invalid file extension. Allowed extensions for ${e.type} are: ${t.join(", ")}`);return!0}},Ce={cleanText:e=>e.replace(/\r\n/g,"\n").replace(/\t/g,"    ").replace(/[ \t]+/g," ").replace(/\n{3,}/g,"\n\n").trim(),sanitizeFileName:e=>e.replace(/[^a-zA-Z0-9.-]/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"")},xe={createErrorObject(e){const t={message:"An error occurred during analysis",details:null,status:500,code:e.code};if("ECONNABORTED"===e.code)t.message="Request timed out. Please try again.";else if(e.response){if(t.status=e.response.status,e.response.data){switch(e.response.status){case 400:t.message=e.response.data.message||"Invalid input. Please check your input and try again.";break;case 401:t.message="Authentication required. Please log in and try again.";break;case 403:t.message="Access denied. The resource might be restricted.";break;case 404:t.message="Resource not found. Please check the input and try again.";break;case 429:t.message="Too many requests. Please try again later.";break;case 500:t.message="Server error. Please try again later.";break;default:t.message=e.response.data.message||"An error occurred while processing the request."}t.details=e.response.data}}else e.request?t.message="No response from server. Please check your connection and try again.":t.message=`Request error: ${e.message}`;return t}},ke={processCitations:e=>e},we=()=>{const t=e(null),a=e(null);return{analyzeContent:async(e,s,l={})=>{var i,n,r,o,c;const d=Date.now(),u=await(async()=>(t.value||(t.value=(await P((async()=>{const{default:e}=await Promise.resolve().then((()=>I));return{default:e}}),void 0)).default),t.value))();a.value=setTimeout((()=>{throw new Error("Processing timed out. The content might be too large or the server might be slow to respond.")}),be.PROCESSING_TIMEOUT);try{let t,r={extract_citations:!0,validate_citations:!0,...l};if("url"===s&&e.url){const t=e.url.toLowerCase();be.PDF_EXTENSIONS.some((e=>t.endsWith(e)))&&(r={...r,content_type:be.CONTENT_TYPES.PDF,pdf_options:{extract_metadata:!0,extract_images:!1,extract_tables:!1,preserve_formatting:!0}})}if(e instanceof File||e instanceof Blob){const a=new FormData;a.append("file",e),a.append("type",s),a.append("options",JSON.stringify(r)),t=await u.post("/analyze",a,{timeout:be.PROCESSING_TIMEOUT,headers:{}})}else e instanceof FormData?(e.append("type",s),e.append("options",JSON.stringify(r)),t=await u.post("/analyze",e,{timeout:be.PROCESSING_TIMEOUT,headers:{}})):t=await u.post("/analyze",{...e,type:s,options:r},{timeout:be.PROCESSING_TIMEOUT});a.value&&clearTimeout(a.value);const o=t.data||{};if(o.task_id&&("processing"===o.status||"queued"===o.status)){console.log("Task started, polling for results:",o.task_id);let t=0;const a=60;let n=null;for(;t<a;){await new Promise((e=>setTimeout(e,2e3)));const r=await u.get(`/task_status/${o.task_id}`);if(r.data&&"completed"===r.data.status){console.log("Task completed, returning results");const t=r.data,a=t.citations||[],l=a.some((e=>{var t,a;return(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)}))?"Valid":"Invalid";return{...t,citations:a,validation_results:a,status:l,taskProgress:{...t,progress:100,status:"completed"},metadata:{...t.metadata,processing_time:Date.now()-d,content_type:t.content_type||("url"===s&&(null==(i=e.url)?void 0:i.toLowerCase().endsWith(".pdf"))?be.CONTENT_TYPES.PDF:void 0),content_length:t.content_length}}}if(r.data&&"failed"===r.data.status)throw new Error(r.data.error||"Task failed");if(!r.data||"processing"!==r.data.status&&"queued"!==r.data.status)t++;else{const e=r.data.progress||0,s=r.data.status_message||"Processing...",i=r.data.current_step||"Processing",c=r.data.estimated_time_remaining;n={...r.data,task_id:o.task_id,attempts:t+1,max_attempts:a,progress:e,status_message:s,current_step:i,estimated_time_remaining:c},l.onProgress&&"function"==typeof l.onProgress&&l.onProgress(n),console.log(`Task ${o.task_id} progress: ${e}% - ${s}`),t++}}throw new Error("Task timed out")}const c=o.citations||o.validation_results||[],m=c.some((e=>{var t,a;return(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)}))?"Valid":"Invalid";return{...o,citations:c,validation_results:c,status:m,metadata:{...o.metadata,processing_time:Date.now()-d,content_type:o.content_type||("url"===s&&(null==(n=e.url)?void 0:n.toLowerCase().endsWith(".pdf"))?be.CONTENT_TYPES.PDF:void 0),content_length:o.content_length}}}catch(m){throw a.value&&clearTimeout(a.value),"url"===s&&(null==(r=e.url)?void 0:r.toLowerCase().endsWith(".pdf"))&&("ECONNABORTED"===m.code?m.message="PDF download timed out. The file might be too large or the server might be slow to respond.":404===(null==(o=m.response)?void 0:o.status)?m.message="PDF file not found. Please check if the URL is correct and the file is accessible.":403===(null==(c=m.response)?void 0:c.status)&&(m.message="Access to the PDF file is restricted. The file might require authentication.")),xe.createErrorObject(m)}},cleanup:()=>{a.value&&(clearTimeout(a.value),a.value=null)},CONSTANTS:be,validators:he,textUtils:Ce,errorUtils:xe,citationUtils:ke}},_e={class:"file-upload"},Te={class:"card"},Ne={class:"card-body"},Se={key:0,class:"alert alert-danger"},Ee={class:"mb-3"},Re={key:1,class:"mb-3"},Pe={class:"alert alert-info"},Ae={key:2,class:"mb-3"},Ue={class:"progress"},Le=["aria-valuenow"],Ie=["disabled"],Ve={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"};const De=R({name:"FileUpload",emits:["results","error","loading","progress"],setup(a,{emit:s}){const l=e(null),i=e(!1),n=e(null),r=e(null),o=e(0),c=e(null),{analyzeContent:d,cleanup:u,validators:m}=we();t((()=>{u()}));const v=e=>{const t=e.citation||e.text||e.citation_text||"Unknown Citation",a=[/^filed\s+\d+$/i,/^page\s+\d+$/i,/^docket\s+\d+$/i,/^\d+\s+filed\s+\d+$/i,/^\d+\s+page\s+\d+$/i,/^\d+\s+docket\s+\d+$/i];for(const l of a)if(l.test(t))return!1;const s=[/\d+\s+[A-Z]\.\s*\d+/i,/\d+\s+[A-Z]{2,}\.\s*\d+/i,/\d+\s+WL\s+\d+/i,/\d+\s+U\.S\.\s+\d+/i,/\d+\s+S\.\s*Ct\.\s+\d+/i,/\d+\s+[A-Z]\.\s*App\.\s*\d+/i];for(const l of s)if(l.test(t))return!0;return!1};return{file:l,isAnalyzing:i,error:n,results:r,uploadProgress:o,taskProgress:c,handleFileChange:e=>{const t=e.target.files[0];if(t)try{m.validateFile(t),l.value=t,n.value=null}catch(a){n.value=a.message,l.value=null,e.target.value=""}},uploadFile:async()=>{var e,t;if(l.value)try{m.validateFile(l.value),i.value=!0,n.value=null,r.value=null,o.value=0,s("loading",!0);try{const e=new FormData;e.append("file",l.value),e.append("type","file"),e.append("options",JSON.stringify({extract_citations:!0,validate_citations:!0,preserve_formatting:!0,extract_metadata:!0,source_name:l.value.name,source_type:"file"})),console.log("Starting file upload:",{fileName:l.value.name,fileSize:l.value.size,fileType:l.value.type});const t=await d(e,"file",{onUploadProgress:e=>{const t=Math.round(95*e.loaded/e.total);o.value=t,console.log("Upload progress:",t+"%")},onProgress:e=>{c.value=e,s("progress",e),console.log("Task progress:",e),e.progress>0&&(o.value=100)}});console.log("File upload completed:",{taskId:t.task_id,status:t.status,message:t.message}),o.value=100,r.value=t,s("results",t)}catch(a){console.error("File upload error:",{error:a,message:a.message,response:null==(e=a.response)?void 0:e.data}),a.response?413===a.response.status?n.value="File is too large. Please try a smaller file.":415===a.response.status?n.value="Unsupported file type. Please upload a PDF, Word document, or text file.":429===a.response.status?n.value="Too many requests. Please wait a moment before trying again.":n.value=(null==(t=a.response.data)?void 0:t.message)||`Upload failed: ${a.response.status} ${a.response.statusText}`:"ECONNABORTED"===a.code?n.value="Upload timed out. Please try again.":n.value=a.message||"An error occurred during file upload.",s("error",n.value)}}catch(a){n.value=a.message,s("error",{message:a.message,status:400})}finally{i.value=!1,s("loading",!1)}else n.value="Please select a file to analyze"},formatFileSize:e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},getAlertClass:e=>({"alert-success":!0===e,"alert-danger":!1===e,"alert-info":null==e}),getStatusBadgeClass:e=>{var t,a;return e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists?"bg-success":v(e)?"bg-warning text-dark":"bg-danger"},getStatusText:e=>{var t,a;return e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists?"Verified":v(e)?"Valid but Not Verified":"Invalid"},isValidCitationFormat:v}}},[["render",function(e,t,a,s,d,u){return i(),l("div",_e,[n("div",Te,[t[9]||(t[9]=n("div",{class:"card-header bg-primary text-white"},[n("h5",{class:"mb-0"},"Upload Document")],-1)),n("div",Ne,[s.error?(i(),l("div",Se,[t[2]||(t[2]=n("strong",null,"Error:",-1)),v(" "+c(s.error),1)])):r("",!0),n("div",Ee,[t[3]||(t[3]=n("label",{for:"fileUpload",class:"form-label"},"Select a file to analyze for citations",-1)),n("input",{type:"file",id:"fileUpload",class:"form-control",onChange:t[0]||(t[0]=(...e)=>s.handleFileChange&&s.handleFileChange(...e)),accept:".pdf,.docx,.txt,.rtf,.doc,.html,.htm"},null,32),t[4]||(t[4]=n("div",{class:"form-text"},"Supported formats: PDF, DOCX, TXT, RTF, DOC, HTML",-1))]),s.file?(i(),l("div",Re,[n("div",Pe,[t[5]||(t[5]=n("strong",null,"Selected file:",-1)),v(" "+c(s.file.name)+" ("+c(s.formatFileSize(s.file.size))+") ",1)])])):r("",!0),s.uploadProgress>0&&s.uploadProgress<100?(i(),l("div",Ae,[n("div",Ue,[n("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:o({width:s.uploadProgress+"%"}),"aria-valuenow":s.uploadProgress,"aria-valuemin":"0","aria-valuemax":"100"},c(s.uploadProgress)+"% ",13,Le)])])):r("",!0),n("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>s.uploadFile&&s.uploadFile(...e)),disabled:!s.file||s.isAnalyzing},[s.isAnalyzing?(i(),l("span",Ve)):r("",!0),v(" "+c(s.isAnalyzing?"Analyzing...":"Analyze Document"),1)],8,Ie),r("",!0)])])])}],["__scopeId","data-v-e0eb0466"]]),Me={class:"text-paste"},$e={class:"card"},Oe={class:"card-body"},Fe={key:0,class:"alert alert-danger"},ze={class:"mb-3"},qe=["disabled"],Be={class:"form-check form-switch mb-3"},je=["disabled"],Xe={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"};const He=R({name:"TextPaste",emits:["results","error","loading","progress"],setup(s,{emit:l}){const i=e(""),n=e(!1),r=e(null),o=e(null),c=e(!1),{analyzeContent:d,cleanup:u,validators:m,textUtils:v}=we(),g=async()=>{if(i.value)try{m.validateText(i.value);const t=v.cleanText(i.value);n.value=!0,r.value=null,o.value=null,l("loading",!0);try{const e=await d({text:t},"text",{preserve_formatting:!0,onProgress:e=>{l("progress",e)}});o.value=e,l("results",e)}catch(e){r.value=e.message,l("error",e)}}catch(e){r.value=e.message,l("error",{message:e.message,status:400})}finally{n.value=!1,l("loading",!1)}else r.value="Please enter text to analyze"};t((()=>{u()}));const p=a((()=>o.value&&o.value.citations?o.value.citations.filter((e=>"retry"===e.status)):[])),f=e=>{const t=e.citation||e.text||e.citation_text||"Unknown Citation",a=[/^filed\s+\d+$/i,/^page\s+\d+$/i,/^docket\s+\d+$/i,/^\d+\s+filed\s+\d+$/i,/^\d+\s+page\s+\d+$/i,/^\d+\s+docket\s+\d+$/i];for(const l of a)if(l.test(t))return!1;const s=[/\d+\s+[A-Z]\.\s*\d+/i,/\d+\s+[A-Z]{2,}\.\s*\d+/i,/\d+\s+WL\s+\d+/i,/\d+\s+U\.S\.\s+\d+/i,/\d+\s+S\.\s*Ct\.\s+\d+/i,/\d+\s+[A-Z]\.\s*App\.\s*\d+/i];for(const l of s)if(l.test(t))return!0;return!1};return{text:i,isAnalyzing:n,error:r,results:o,includeContext:c,analyzeText:g,getAlertClass:e=>({"alert-success":!0===e,"alert-danger":!1===e,"alert-info":null==e}),retryCitations:p,retryAllCitations:()=>{0!==p.value.length&&(i.value=p.value.map((e=>e.citation)).join("\n"),g())},retrySingleCitation:e=>{i.value=e.citation,g()},getStatusBadgeClass:e=>{var t,a;return e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists?"bg-success":f(e)?"bg-warning text-dark":"bg-danger"},getStatusText:e=>{var t,a;return e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists?"Verified":f(e)?"Valid but Not Verified":"Invalid"},isValidCitationFormat:f}}},[["render",function(e,t,a,s,o,d){return i(),l("div",Me,[n("div",$e,[t[13]||(t[13]=n("div",{class:"card-header bg-primary text-white"},[n("h5",{class:"mb-0"},"Paste Text")],-1)),n("div",Oe,[s.error?(i(),l("div",Fe,[t[4]||(t[4]=n("strong",null,"Error:",-1)),v(" "+c(s.error),1)])):r("",!0),n("div",ze,[t[5]||(t[5]=n("label",{for:"textInput",class:"form-label"},"Paste your legal text to analyze for citations",-1)),g(n("textarea",{id:"textInput",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>s.text=e),rows:"10",placeholder:"Paste your legal document text here...",disabled:s.isAnalyzing},null,8,qe),[[p,s.text]])]),n("div",Be,[g(n("input",{class:"form-check-input",type:"checkbox",id:"includeContext","onUpdate:modelValue":t[1]||(t[1]=e=>s.includeContext=e)},null,512),[[f,s.includeContext]]),t[6]||(t[6]=n("label",{class:"form-check-label",for:"includeContext"},"Include context around citations",-1))]),n("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>s.analyzeText&&s.analyzeText(...e)),disabled:!s.text||s.isAnalyzing},[s.isAnalyzing?(i(),l("span",Xe)):r("",!0),v(" "+c(s.isAnalyzing?"Analyzing...":"Analyze Text"),1)],8,je),r("",!0)])])])}],["__scopeId","data-v-9a7e467b"]]),We={class:"url-upload"},Ge={class:"card"},Ze={class:"card-body"},Je={key:0,class:"alert alert-danger"},Ye={class:"mb-3"},Ke={class:"input-group"},Qe=["disabled"],et=["disabled"],tt={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"};const at=R({name:"UrlUpload",emits:["results","error","loading","progress"],setup(s,{emit:l}){const i=e(""),n=e(!1),r=e(null),o=e(null),{analyzeContent:c,cleanup:d,validators:u}=we(),m=a((()=>{try{return u.validateUrl(i.value),!0}catch{return!1}}));t((()=>{d()}));const v=e=>{const t=e.citation||e.text||e.citation_text||"Unknown Citation",a=[/^filed\s+\d+$/i,/^page\s+\d+$/i,/^docket\s+\d+$/i,/^\d+\s+filed\s+\d+$/i,/^\d+\s+page\s+\d+$/i,/^\d+\s+docket\s+\d+$/i];for(const l of a)if(l.test(t))return!1;const s=[/\d+\s+[A-Z]\.\s*\d+/i,/\d+\s+[A-Z]{2,}\.\s*\d+/i,/\d+\s+WL\s+\d+/i,/\d+\s+U\.S\.\s+\d+/i,/\d+\s+S\.\s*Ct\.\s+\d+/i,/\d+\s+[A-Z]\.\s*App\.\s*\d+/i];for(const l of s)if(l.test(t))return!0;return!1};return{url:i,isAnalyzing:n,error:r,results:o,isValidUrl:m,analyzeUrl:async()=>{if(i.value)try{u.validateUrl(i.value),n.value=!0,r.value=null,o.value=null,l("loading",!0);try{const e=await c({url:i.value},"url",{follow_redirects:!0,timeout:3e4,onProgress:e=>{l("progress",e)}});o.value=e,l("results",e)}catch(e){r.value=e.message,l("error",e)}}catch(e){r.value=e.message,l("error",{message:e.message,status:400})}finally{n.value=!1,l("loading",!1)}else r.value="Please enter a URL to analyze"},getAlertClass:e=>({"alert-success":!0===e,"alert-danger":!1===e,"alert-info":null==e}),getStatusBadgeClass:e=>{var t,a;return e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists?"bg-success":v(e)?"bg-warning text-dark":"bg-danger"},getStatusText:e=>{var t,a;return e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists?"Verified":v(e)?"Valid but Not Verified":"Invalid"},isValidCitationFormat:v}}},[["render",function(e,t,a,s,o,d){return i(),l("div",We,[n("div",Ge,[t[11]||(t[11]=n("div",{class:"card-header bg-primary text-white"},[n("h5",{class:"mb-0"},"Analyze Web Content")],-1)),n("div",Ze,[s.error?(i(),l("div",Je,[t[3]||(t[3]=n("strong",null,"Error:",-1)),v(" "+c(s.error.message),1)])):r("",!0),n("div",Ye,[t[5]||(t[5]=n("label",{for:"urlInput",class:"form-label"},"Enter a URL to analyze for citations",-1)),n("div",Ke,[t[4]||(t[4]=n("span",{class:"input-group-text"},[n("i",{class:"bi bi-link-45deg"})],-1)),g(n("input",{type:"url",id:"urlInput",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>s.url=e),placeholder:"https://example.com/legal-document",disabled:s.isAnalyzing,onKeyup:t[1]||(t[1]=y(((...e)=>s.analyzeUrl&&s.analyzeUrl(...e)),["enter"]))},null,40,Qe),[[p,s.url]]),n("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>s.analyzeUrl&&s.analyzeUrl(...e)),disabled:!s.isValidUrl||s.isAnalyzing},[s.isAnalyzing?(i(),l("span",tt)):r("",!0),v(" "+c(s.isAnalyzing?"Analyzing...":"Analyze"),1)],8,et)]),t[6]||(t[6]=n("div",{class:"form-text"},"Enter a valid URL to a web page containing legal citations",-1))]),r("",!0)])])])}],["__scopeId","data-v-9f48ce98"]]),st={name:"CitationResults",props:{results:{type:Object,default:()=>({citations:[],metadata:{}})},loading:{type:Boolean,default:!1},error:{type:String,default:""},taskProgress:{type:Object,default:()=>({})}},emits:["new-analysis","apply-correction"],setup(t,{emit:s}){const l=e(null),i=e("all"),n=a((()=>{var e,a;return(null==(a=null==(e=t.results)?void 0:e.citations)?void 0:a.filter((e=>e.valid||e.verified||e.found||e.exists)).length)||0})),r=a((()=>{var e;return(null==(e=t.results)?void 0:e.citations)?t.results.citations.filter((e=>!(e.valid||e.verified||e.found||e.exists)&&C(e))):[]})),o=a((()=>r.value.length)),c=a((()=>{var e,a;return(null==(a=null==(e=t.results)?void 0:e.citations)?void 0:a.filter((e=>!(e.valid||e.verified||e.found||e.exists||C(e)))).length)||0})),d=a((()=>{var e,a;return(null==(a=null==(e=t.results)?void 0:e.citations)?void 0:a.filter((e=>(e.confidence??0)>=.4&&(e.confidence??0)<.7)).length)||0})),u=a((()=>{var e;return(null==(e=t.results)?void 0:e.citations)?t.results.citations.filter((e=>e.valid||e.verified||e.found||e.exists)):[]})),m=a((()=>{var e;return(null==(e=t.results)?void 0:e.citations)?t.results.citations.filter((e=>!(e.valid||e.verified||e.found||e.exists))):[]})),v=a((()=>y.value.filter((e=>w(e))))),g=a((()=>v.value.length)),p=a((()=>{switch(i.value){case"verified":return u.value;case"validButNotVerified":return r.value;case"caseNameMismatches":return v.value;case"invalid":return m.value;default:return y.value}})),f=a((()=>t.results&&t.results.citations&&t.results.citations.length>0)),y=a((()=>{var e;return(null==(e=t.results)?void 0:e.citations)?[...t.results.citations].sort(((e,t)=>{function a(e){return e.valid||e.verified||e.found||e.exists?2:C(e)?1:0}const s=a(e),l=a(t);if(s!==l)return s-l;const i=e.confidence??0;return(t.confidence??0)-i})):[]}));function b(e){return e.citation||e.text||e.citation_text||"Unknown Citation"}function h(e){var t,a,s,l;return(null==(l=null==(s=null==(a=null==(t=e.data)?void 0:t.details)?void 0:a[0])?void 0:s.clusters)?void 0:l[0])||null}function C(e){const t=b(e),a=[/^filed\s+\d+$/i,/^page\s+\d+$/i,/^docket\s+\d+$/i,/^\d+\s+filed\s+\d+$/i,/^\d+\s+page\s+\d+$/i,/^\d+\s+docket\s+\d+$/i];for(const l of a)if(l.test(t))return!1;const s=[/\d+\s+[A-Z]\.\s*\d+/i,/\d+\s+[A-Z]{2,}\.\s*\d+/i,/\d+\s+WL\s+\d+/i,/\d+\s+U\.S\.\s+\d+/i,/\d+\s+S\.\s*Ct\.\s+\d+/i,/\d+\s+[A-Z]\.\s*App\.\s*\d+/i];for(const l of s)if(l.test(t))return!0;return!1}function x(e){return e.case_name_extracted&&""!==e.case_name_extracted.trim()?e.case_name_extracted:"Not extracted"}function k(e){var t;return console.log("Inspecting citation object for verified case name:",JSON.parse(JSON.stringify(e))),(null==(t=e.data)?void 0:t.case_name)?e.data.case_name:e.verified_case_name?e.verified_case_name:e.case_name?e.case_name:"Not verified"}function w(e){const t=x(e),a=k(e);if("Not extracted"===t||"Not verified"===a)return!1;if(void 0!==e.case_name_similarity)return e.case_name_similarity<.3;const s=t.toLowerCase().split(/\s+/).filter((e=>e.length>2)),l=a.toLowerCase().split(/\s+/).filter((e=>e.length>2));return s.filter((e=>l.includes(e))).length/Math.max(s.length,l.length)<.3}return{expandedCitation:l,activeTab:i,validCount:n,validButNotVerifiedCitations:r,validButNotVerifiedCount:o,invalidCount:c,lowConfidenceCount:d,showResults:f,sortedCitations:y,verifiedCitations:u,invalidCitations:m,currentTabCitations:p,getCitationText:b,getCaseName:function(e){const t=h(e);return(null==t?void 0:t.case_name)||"N/A"},getExtractedCaseName:x,getVerifiedCaseName:k,isCaseNameMismatch:w,getCourtInfo:function(e){const t=h(e);return(null==t?void 0:t.court)||"N/A"},getDateFiled:function(e){const t=h(e);return(null==t?void 0:t.date_filed)||"N/A"},getPrecedentialStatus:function(e){const t=h(e);return(null==t?void 0:t.precedential_status)||"N/A"},getCitationUrl:function(e){const t=h(e);return(null==t?void 0:t.absolute_url)?t.absolute_url.startsWith("http")?t.absolute_url:`https://www.courtlistener.com${t.absolute_url}`:(null==t?void 0:t.resource_uri)?t.resource_uri.startsWith("http")?t.resource_uri:`https://www.courtlistener.com${t.resource_uri}`:e.url?e.url:null},getStatusBadgeClass:function(e){return e.valid||e.verified||e.found||e.exists?"bg-success":C(e)?"bg-warning text-dark":"bg-danger"},getStatusText:function(e){return e.valid||e.verified||e.found||e.exists?"Verified":C(e)?"Valid but Not Verified":"Invalid"},toggleDetails:e=>{l.value=l.value===e?null:e},startNewAnalysis:()=>{s("new-analysis")},applyCorrection:e=>{s("apply-correction",e)},downloadResults:e=>{console.log(`Downloading results as ${e}`)},copyToClipboard:()=>{console.log("Copying results to clipboard")},formatTimeRemaining:e=>{if(!e||e<=0)return"Complete";if(e<60)return`${e}s`;return`${Math.floor(e/60)}m ${e%60}s`},formatTimestamp:e=>{if(!e)return"Unknown";try{return new Date(e).toLocaleTimeString()}catch{return"Invalid"}},caseNameMismatches:v,caseNameMismatchCount:g}}},lt={class:"citation-results"},it={key:0,class:"text-center my-4"},nt={key:1,class:"progress-container my-4"},rt={class:"card"},ot={class:"card-body"},ct={class:"d-flex justify-content-between align-items-center mb-2"},dt={class:"badge bg-primary"},ut={class:"progress mb-3",style:{height:"20px"}},mt=["aria-valuenow"],vt={class:"d-flex justify-content-between align-items-center"},gt={class:"mb-1 text-muted"},pt={class:"mb-0 small text-muted"},ft={key:0,class:"text-end"},yt={class:"mb-0 small text-muted"},bt={class:"mt-3 pt-3 border-top"},ht={class:"row text-center"},Ct={class:"col-4"},xt={class:"font-monospace small"},kt={class:"col-4"},wt={class:"small"},_t={class:"col-4"},Tt={class:"small"},Nt={key:2,class:"alert alert-danger"},St={class:"mb-0"},Et={key:3,class:"results-card"},Rt={class:"d-flex justify-content-between align-items-center mb-3"},Pt={key:0,class:"card mb-3"},At={class:"card-body p-2"},Ut={class:"list-group list-group-flush"},Lt={class:"list-group-item d-flex justify-content-between align-items-center"},It={class:"badge bg-secondary"},Vt={class:"list-group-item d-flex justify-content-between align-items-center"},Dt={class:"badge bg-secondary"},Mt={class:"list-group-item d-flex justify-content-between align-items-center"},$t={class:"badge bg-info"},Ot={class:"list-group-item d-flex justify-content-between align-items-center"},Ft={class:"badge bg-success"},zt={class:"list-group-item d-flex justify-content-between align-items-center"},qt={class:"badge bg-primary"},Bt={class:"list-group-item d-flex justify-content-between align-items-center"},jt={class:"badge bg-warning text-dark"},Xt={class:"list-group-item d-flex justify-content-between align-items-center"},Ht={class:"badge bg-dark"},Wt={class:"list-group-item d-flex justify-content-between align-items-center"},Gt={class:"badge bg-danger"},Zt={class:"tab-navigation mb-3"},Jt={class:"d-md-none"},Yt={value:"all"},Kt={value:"verified"},Qt={value:"validButNotVerified"},ea={value:"caseNameMismatches"},ta={value:"invalid"},aa={class:"nav nav-tabs d-none d-md-flex",id:"citationTabs",role:"tablist"},sa={class:"nav-item",role:"presentation"},la={class:"nav-item",role:"presentation"},ia={class:"nav-item",role:"presentation"},na={class:"nav-item",role:"presentation"},ra={class:"nav-item",role:"presentation"},oa={class:"tab-content"},ca={class:"d-md-none"},da={class:"card-body"},ua={class:"d-flex justify-content-between align-items-end mt-2"},ma=["onClick"],va={class:"d-flex justify-content-between align-items-start mb-2"},ga={class:"flex-grow-1"},pa={class:"d-flex align-items-center mb-1"},fa=["href"],ya={key:1,class:"citation-text"},ba=["onClick"],ha={key:0,class:"text-muted small"},Ca={class:"row g-2 mb-2"},xa={class:"col-6"},ka=["href"],wa={key:1,class:"text-muted"},_a={class:"col-6"},Ta=["href"],Na={key:2,class:"text-warning small"},Sa={key:0,class:"alert alert-warning py-2 mb-2"},Ea={class:"table-responsive d-none d-md-block"},Ra={class:"table table-hover"},Pa={class:"d-flex align-items-center"},Aa=["href"],Ua={key:1,class:"citation-text"},La=["onClick"],Ia={key:0,class:"text-muted small mt-1"},Va=["href"],Da={key:1,class:"text-muted"},Ma=["href"],$a={key:2,class:"text-warning small"},Oa=["onClick"],Fa={class:"table-responsive"},za={class:"table table-hover"},qa={class:"d-flex align-items-center"},Ba=["href"],ja={key:1,class:"citation-text"},Xa=["onClick"],Ha={key:0,class:"text-muted small mt-1"},Wa=["href"],Ga={key:1,class:"text-muted"},Za=["href"],Ja={key:2,class:"text-warning small"},Ya=["onClick"],Ka={class:"table-responsive"},Qa={class:"table table-hover"},es={class:"d-flex align-items-center"},ts=["href"],as={key:1,class:"citation-text"},ss=["onClick"],ls={key:0,class:"text-muted small mt-1"},is=["href"],ns={key:1,class:"text-muted"},rs=["href"],os={key:2,class:"text-warning small"},cs=["onClick"],ds={class:"table-responsive"},us={class:"table table-hover"},ms={class:"d-flex align-items-center"},vs=["href"],gs={key:1,class:"citation-text"},ps=["onClick"],fs={key:0,class:"text-muted small mt-1"},ys=["href"],bs={key:1,class:"text-muted"},hs=["href"],Cs={key:2,class:"text-warning small"},xs=["onClick"],ks={class:"table-responsive"},ws={class:"table table-hover"},_s={class:"d-flex align-items-center"},Ts=["href"],Ns={key:1,class:"citation-text"},Ss=["onClick"],Es={key:0,class:"text-muted small mt-1"},Rs=["href"],Ps={key:1,class:"text-muted"},As=["href"],Us={key:2,class:"text-warning small"},Ls=["onClick"],Is={class:"card-header"},Vs={class:"mb-0"},Ds={class:"card-body"},Ms={class:"row"},$s={class:"col-md-6"},Os={class:"row"},Fs={class:"col-sm-8"},zs={key:0,class:"ms-2 badge bg-warning text-dark"},qs={class:"col-sm-8"},Bs={class:"text-capitalize"},js=["href"],Xs={class:"col-sm-8"},Hs={key:0},Ws={class:"text-muted"},Gs={key:1},Zs={key:2},Js={key:3},Ys={class:"col-sm-8"},Ks={class:"progress",style:{height:"20px"}},Qs=["aria-valuenow"],el={class:"col-md-6"},tl={class:"row"},al={class:"col-sm-8"},sl={key:0,class:"alert alert-warning mt-3"},ll={key:1,class:"mt-3"},il={class:"bg-light p-2 rounded"},nl={class:"d-flex justify-content-between align-items-center mt-4"},rl={key:4,class:"text-center py-5"};const ol={class:"enhanced-validator container-fluid py-3"},cl={class:"row"},dl={class:"col-12"},ul={class:"nav nav-tabs mb-4",role:"tablist"},ml=["onClick","aria-selected"],vl={class:"tab-content p-3 border border-top-0 rounded-bottom"},gl={key:0,class:"tab-pane fade show active"},pl={class:"mb-3"},fl={class:"input-group"},yl=["disabled"],bl={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},hl={key:1,class:"tab-pane fade show active"},Cl={key:2,class:"tab-pane fade show active"},xl={key:3,class:"tab-pane fade show active"},kl={key:0},wl={key:1,class:"alert alert-info mt-4"},_l={key:1},Tl={key:1,class:"alert alert-info mt-4"},Nl={key:2},Sl={key:1,class:"alert alert-info mt-4"},El={key:3},Rl={key:1,class:"alert alert-info mt-4"},Pl={key:5,class:"processing-overlay"};const Al=R({name:"EnhancedValidator",components:{FileUpload:De,TextPaste:He,UrlUpload:at,CitationResults:R(st,[["render",function(e,t,a,s,p,f){var y,C,x;return i(),l("div",lt,[a.loading?(i(),l("div",it,t[11]||(t[11]=[n("div",{class:"spinner-border text-primary",role:"status"},[n("span",{class:"visually-hidden"},"Loading...")],-1),n("p",{class:"mt-2"},"Analyzing citations...",-1)]))):a.taskProgress&&"queued"===a.taskProgress.status?(i(),l("div",nt,[n("div",rt,[n("div",ot,[n("div",ct,[t[12]||(t[12]=n("h6",{class:"mb-0"},"Processing Document",-1)),n("span",dt,c(a.taskProgress.progress||0)+"%",1)]),n("div",ut,[n("div",{class:"progress-bar progress-bar-striped progress-bar-animated",style:o({width:(a.taskProgress.progress||0)+"%"}),role:"progressbar","aria-valuenow":a.taskProgress.progress||0,"aria-valuemin":"0","aria-valuemax":"100"},c(a.taskProgress.progress||0)+"% ",13,mt)]),n("div",vt,[n("div",null,[n("p",gt,[t[13]||(t[13]=n("i",{class:"bi bi-info-circle me-1"},null,-1)),v(" "+c(a.taskProgress.status_message||"Processing..."),1)]),n("p",pt,[t[14]||(t[14]=n("i",{class:"bi bi-gear me-1"},null,-1)),v(" "+c(a.taskProgress.current_step||"Unknown step"),1)])]),a.taskProgress.estimated_time_remaining?(i(),l("div",ft,[n("p",yt,[t[15]||(t[15]=n("i",{class:"bi bi-clock me-1"},null,-1)),v(" Est. "+c(s.formatTimeRemaining(a.taskProgress.estimated_time_remaining)),1)])])):r("",!0)]),n("div",bt,[n("div",ht,[n("div",Ct,[t[16]||(t[16]=n("div",{class:"small text-muted"},"Task ID",-1)),n("div",xt,c(null==(y=a.taskProgress.task_id)?void 0:y.substring(0,8))+"...",1)]),n("div",kt,[t[17]||(t[17]=n("div",{class:"small text-muted"},"Type",-1)),n("div",wt,c((null==(C=a.taskProgress.metadata)?void 0:C.source_type)||"Unknown"),1)]),n("div",_t,[t[18]||(t[18]=n("div",{class:"small text-muted"},"Started",-1)),n("div",Tt,c(s.formatTimestamp(null==(x=a.taskProgress.metadata)?void 0:x.timestamp)),1)])])])])])])):a.error?(i(),l("div",Nt,[t[19]||(t[19]=n("h5",{class:"alert-heading"},"Error",-1)),n("p",St,c(a.error),1)])):a.results&&a.results.citations&&a.results.citations.length>0?(i(),l("div",Et,[n("div",Rt,[t[20]||(t[20]=n("h4",{class:"mb-0"},"Citation Analysis Results",-1)),r("",!0)]),a.results.stats?(i(),l("div",Pt,[t[29]||(t[29]=n("div",{class:"card-header bg-light"},[n("strong",null,"Citation Processing Breakdown")],-1)),n("div",At,[n("ul",Ut,[n("li",Lt,[t[21]||(t[21]=n("span",null,"Total Extracted",-1)),n("span",It,c(a.results.stats.total_extracted),1)]),n("li",Vt,[t[22]||(t[22]=n("span",null,"Deduplicated",-1)),n("span",Dt,c(a.results.stats.deduplicated),1)]),n("li",Mt,[t[23]||(t[23]=n("span",null,"Verified in Cache",-1)),n("span",$t,c(a.results.stats.verified_in_cache),1)]),n("li",Ot,[t[24]||(t[24]=n("span",null,"Verified in JSON Array",-1)),n("span",Ft,c(a.results.stats.verified_in_json_array),1)]),n("li",zt,[t[25]||(t[25]=n("span",null,"Verified in Text Blob",-1)),n("span",qt,c(a.results.stats.verified_in_text_blob),1)]),n("li",Bt,[t[26]||(t[26]=n("span",null,"Verified in Single Lookup",-1)),n("span",jt,c(a.results.stats.verified_in_single),1)]),n("li",Xt,[t[27]||(t[27]=n("span",null,"Verified in LangSearch",-1)),n("span",Ht,c(a.results.stats.verified_in_langsearch),1)]),n("li",Wt,[t[28]||(t[28]=n("span",null,"Not Verified",-1)),n("span",Gt,c(a.results.stats.not_verified),1)])])])])):r("",!0),n("div",Zt,[n("div",Jt,[g(n("select",{class:"form-select","onUpdate:modelValue":t[0]||(t[0]=e=>s.activeTab=e),onChange:t[1]||(t[1]=e=>s.activeTab=e.target.value)},[n("option",Yt,"All Citations ("+c(a.results.citations.length)+")",1),n("option",Kt,"Verified ("+c(s.validCount)+")",1),n("option",Qt,"Valid but Not Verified ("+c(s.validButNotVerifiedCount)+")",1),n("option",ea,"Case Name Mismatches ("+c(s.caseNameMismatchCount)+")",1),n("option",ta,"Invalid ("+c(s.invalidCount)+")",1)],544),[[b,s.activeTab]])]),n("ul",aa,[n("li",sa,[n("button",{class:d(["nav-link",{active:"all"===s.activeTab}]),onClick:t[2]||(t[2]=e=>s.activeTab="all"),type:"button",role:"tab"}," All Citations ("+c(a.results.citations.length)+") ",3)]),n("li",la,[n("button",{class:d(["nav-link",{active:"verified"===s.activeTab}]),onClick:t[3]||(t[3]=e=>s.activeTab="verified"),type:"button",role:"tab"}," Verified ("+c(s.validCount)+") ",3)]),n("li",ia,[n("button",{class:d(["nav-link",{active:"validButNotVerified"===s.activeTab}]),onClick:t[4]||(t[4]=e=>s.activeTab="validButNotVerified"),type:"button",role:"tab"}," Valid but Not Verified ("+c(s.validButNotVerifiedCount)+") ",3)]),n("li",na,[n("button",{class:d(["nav-link",{active:"caseNameMismatches"===s.activeTab}]),onClick:t[5]||(t[5]=e=>s.activeTab="caseNameMismatches"),type:"button",role:"tab"}," Case Name Mismatches ("+c(s.caseNameMismatchCount)+") ",3)]),n("li",ra,[n("button",{class:d(["nav-link",{active:"invalid"===s.activeTab}]),onClick:t[6]||(t[6]=e=>s.activeTab="invalid"),type:"button",role:"tab"}," Invalid ("+c(s.invalidCount)+") ",3)])])]),n("div",oa,[n("div",{class:d(["tab-pane fade",{"show active":"all"===s.activeTab}])},[n("div",ca,[(i(!0),l(u,null,m(s.sortedCitations,((e,a)=>(i(),l("div",{key:a,class:"card mb-3"},[n("div",da,[n("div",ua,[n("button",{class:"btn btn-sm btn-outline-primary",onClick:e=>s.toggleDetails(a)},c(s.expandedCitation===a?"Hide":"View")+" Details ",9,ma),n("span",{class:d(["badge",s.getStatusBadgeClass(e)])},c(s.getStatusText(e)),3)]),n("div",va,[n("div",ga,[n("div",pa,[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener",class:"citation-text"},c(s.getCitationText(e)),9,fa)):(i(),l("span",ya,c(s.getCitationText(e)),1)),e.correction?(i(),l("button",{key:2,class:"btn btn-sm btn-outline-secondary ms-2",onClick:t=>s.applyCorrection(e),title:"Apply correction"},t[30]||(t[30]=[n("i",{class:"bi bi-arrow-clockwise"},null,-1)]),8,ba)):r("",!0)]),e.correction?(i(),l("div",ha,[t[31]||(t[31]=n("i",{class:"bi bi-lightbulb"},null,-1)),v(" Suggested: "+c(e.correction),1)])):r("",!0)])]),n("div",Ca,[n("div",xa,[t[32]||(t[32]=n("small",{class:"text-muted d-block"},"Extracted Case Name:",-1)),n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},[s.getExtractedCaseName(e)&&""!==s.getExtractedCaseName(e).trim()&&"Not extracted"!==s.getExtractedCaseName(e)&&"westlaw citation"!==s.getExtractedCaseName(e).toLowerCase()?(i(),l(u,{key:0},[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener"},c(s.getExtractedCaseName(e)),9,ka)):(i(),l(u,{key:1},[v(c(s.getExtractedCaseName(e)),1)],64))],64)):(i(),l("span",wa,"Not extracted"))],2)]),n("div",_a,[t[34]||(t[34]=n("small",{class:"text-muted d-block"},"Verified Case Name:",-1)),n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},[s.getVerifiedCaseName(e)&&"Not verified"!==s.getVerifiedCaseName(e)&&s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener"},c(s.getVerifiedCaseName(e)),9,Ta)):(i(),l(u,{key:1},[v(c(s.getVerifiedCaseName(e)),1)],64)),s.isCaseNameMismatch(e)?(i(),l("div",Na,t[33]||(t[33]=[n("i",{class:"bi bi-exclamation-triangle"},null,-1),v(" Low similarity ")]))):r("",!0)],2)])]),s.isCaseNameMismatch(e)?(i(),l("div",Sa,t[35]||(t[35]=[n("i",{class:"bi bi-exclamation-triangle"},null,-1),v(" Low similarity ")]))):r("",!0)])])))),128))]),n("div",Ea,[n("table",Ra,[t[39]||(t[39]=n("thead",null,[n("tr",null,[n("th",null,"Citation"),n("th",null,"Extracted Case Name"),n("th",null,"Verified Case Name"),n("th",null,"Details"),n("th",null,"Status")])],-1)),n("tbody",null,[(i(!0),l(u,null,m(s.sortedCitations,((e,a)=>(i(),l("tr",{key:a,class:"align-middle"},[n("td",null,[n("div",Pa,[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener",class:"citation-text"},c(s.getCitationText(e)),9,Aa)):(i(),l("span",Ua,c(s.getCitationText(e)),1)),e.correction?(i(),l("button",{key:2,class:"btn btn-sm btn-outline-secondary ms-2",onClick:t=>s.applyCorrection(e),title:"Apply correction"},t[36]||(t[36]=[n("i",{class:"bi bi-arrow-clockwise"},null,-1)]),8,La)):r("",!0)]),e.correction?(i(),l("div",Ia,[t[37]||(t[37]=n("i",{class:"bi bi-lightbulb"},null,-1)),v(" Suggested: "+c(e.correction),1)])):r("",!0)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},[s.getExtractedCaseName(e)&&""!==s.getExtractedCaseName(e).trim()&&"Not extracted"!==s.getExtractedCaseName(e)&&"westlaw citation"!==s.getExtractedCaseName(e).toLowerCase()?(i(),l(u,{key:0},[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener"},c(s.getExtractedCaseName(e)),9,Va)):(i(),l(u,{key:1},[v(c(s.getExtractedCaseName(e)),1)],64))],64)):(i(),l("span",Da,"Not extracted"))],2)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},[s.getVerifiedCaseName(e)&&"Not verified"!==s.getVerifiedCaseName(e)&&s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener"},c(s.getVerifiedCaseName(e)),9,Ma)):(i(),l(u,{key:1},[v(c(s.getVerifiedCaseName(e)),1)],64)),s.isCaseNameMismatch(e)?(i(),l("div",$a,t[38]||(t[38]=[n("i",{class:"bi bi-exclamation-triangle"},null,-1),v(" Low similarity ")]))):r("",!0)],2)]),n("td",null,[n("button",{class:"btn btn-sm btn-outline-primary",onClick:e=>s.toggleDetails(a)},c(s.expandedCitation===a?"Hide":"View")+" Details ",9,Oa)]),n("td",null,[n("span",{class:d(["badge",s.getStatusBadgeClass(e)])},c(s.getStatusText(e)),3)])])))),128))])])])],2),n("div",{class:d(["tab-pane fade",{"show active":"verified"===s.activeTab}])},[n("div",Fa,[n("table",za,[t[43]||(t[43]=n("thead",null,[n("tr",null,[n("th",null,"Citation"),n("th",null,"Status"),n("th",null,"Extracted Case Name"),n("th",null,"Verified Case Name"),n("th",null,"Details")])],-1)),n("tbody",null,[(i(!0),l(u,null,m(s.verifiedCitations,((e,a)=>(i(),l("tr",{key:"verified-"+a,class:"align-middle"},[n("td",null,[n("div",qa,[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener",class:"citation-text"},c(s.getCitationText(e)),9,Ba)):(i(),l("span",ja,c(s.getCitationText(e)),1)),e.correction?(i(),l("button",{key:2,class:"btn btn-sm btn-outline-secondary ms-2",onClick:t=>s.applyCorrection(e),title:"Apply correction"},t[40]||(t[40]=[n("i",{class:"bi bi-arrow-clockwise"},null,-1)]),8,Xa)):r("",!0)]),e.correction?(i(),l("div",Ha,[t[41]||(t[41]=n("i",{class:"bi bi-lightbulb"},null,-1)),v(" Suggested: "+c(e.correction),1)])):r("",!0)]),n("td",null,[n("span",{class:d(["badge",s.getStatusBadgeClass(e)])},c(s.getStatusText(e)),3)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},[s.getExtractedCaseName(e)&&""!==s.getExtractedCaseName(e).trim()&&"Not extracted"!==s.getExtractedCaseName(e)&&"westlaw citation"!==s.getExtractedCaseName(e).toLowerCase()?(i(),l(u,{key:0},[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener"},c(s.getExtractedCaseName(e)),9,Wa)):(i(),l(u,{key:1},[v(c(s.getExtractedCaseName(e)),1)],64))],64)):(i(),l("span",Ga,"Not extracted"))],2)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},[s.getVerifiedCaseName(e)&&"Not verified"!==s.getVerifiedCaseName(e)&&s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener"},c(s.getVerifiedCaseName(e)),9,Za)):(i(),l(u,{key:1},[v(c(s.getVerifiedCaseName(e)),1)],64)),s.isCaseNameMismatch(e)?(i(),l("div",Ja,t[42]||(t[42]=[n("i",{class:"bi bi-exclamation-triangle"},null,-1),v(" Low similarity ")]))):r("",!0)],2)]),n("td",null,[n("button",{class:"btn btn-sm btn-outline-primary",onClick:e=>s.toggleDetails("verified-"+a)},c(s.expandedCitation==="verified-"+a?"Hide":"View")+" Details ",9,Ya)])])))),128))])])])],2),n("div",{class:d(["tab-pane fade",{"show active":"validButNotVerified"===s.activeTab}])},[n("div",Ka,[n("table",Qa,[t[47]||(t[47]=n("thead",null,[n("tr",null,[n("th",null,"Citation"),n("th",null,"Status"),n("th",null,"Extracted Case Name"),n("th",null,"Verified Case Name"),n("th",null,"Details")])],-1)),n("tbody",null,[(i(!0),l(u,null,m(s.validButNotVerifiedCitations,((e,a)=>(i(),l("tr",{key:"validButNotVerified-"+a,class:"align-middle"},[n("td",null,[n("div",es,[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener",class:"citation-text"},c(s.getCitationText(e)),9,ts)):(i(),l("span",as,c(s.getCitationText(e)),1)),e.correction?(i(),l("button",{key:2,class:"btn btn-sm btn-outline-secondary ms-2",onClick:t=>s.applyCorrection(e),title:"Apply correction"},t[44]||(t[44]=[n("i",{class:"bi bi-arrow-clockwise"},null,-1)]),8,ss)):r("",!0)]),e.correction?(i(),l("div",ls,[t[45]||(t[45]=n("i",{class:"bi bi-lightbulb"},null,-1)),v(" Suggested: "+c(e.correction),1)])):r("",!0)]),n("td",null,[n("span",{class:d(["badge",s.getStatusBadgeClass(e)])},c(s.getStatusText(e)),3)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},[s.getExtractedCaseName(e)&&""!==s.getExtractedCaseName(e).trim()&&"Not extracted"!==s.getExtractedCaseName(e)&&"westlaw citation"!==s.getExtractedCaseName(e).toLowerCase()?(i(),l(u,{key:0},[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener"},c(s.getExtractedCaseName(e)),9,is)):(i(),l(u,{key:1},[v(c(s.getExtractedCaseName(e)),1)],64))],64)):(i(),l("span",ns,"Not extracted"))],2)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},[s.getVerifiedCaseName(e)&&"Not verified"!==s.getVerifiedCaseName(e)&&s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener"},c(s.getVerifiedCaseName(e)),9,rs)):(i(),l(u,{key:1},[v(c(s.getVerifiedCaseName(e)),1)],64)),s.isCaseNameMismatch(e)?(i(),l("div",os,t[46]||(t[46]=[n("i",{class:"bi bi-exclamation-triangle"},null,-1),v(" Low similarity ")]))):r("",!0)],2)]),n("td",null,[n("button",{class:"btn btn-sm btn-outline-primary",onClick:e=>s.toggleDetails("validButNotVerified-"+a)},c(s.expandedCitation==="validButNotVerified-"+a?"Hide":"View")+" Details ",9,cs)])])))),128))])])])],2),n("div",{class:d(["tab-pane fade",{"show active":"caseNameMismatches"===s.activeTab}])},[n("div",ds,[n("table",us,[t[51]||(t[51]=n("thead",null,[n("tr",null,[n("th",null,"Citation"),n("th",null,"Status"),n("th",null,"Extracted Case Name"),n("th",null,"Verified Case Name"),n("th",null,"Details")])],-1)),n("tbody",null,[(i(!0),l(u,null,m(s.caseNameMismatches,((e,a)=>(i(),l("tr",{key:"caseNameMismatch-"+a,class:"align-middle"},[n("td",null,[n("div",ms,[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener",class:"citation-text"},c(s.getCitationText(e)),9,vs)):(i(),l("span",gs,c(s.getCitationText(e)),1)),e.correction?(i(),l("button",{key:2,class:"btn btn-sm btn-outline-secondary ms-2",onClick:t=>s.applyCorrection(e),title:"Apply correction"},t[48]||(t[48]=[n("i",{class:"bi bi-arrow-clockwise"},null,-1)]),8,ps)):r("",!0)]),e.correction?(i(),l("div",fs,[t[49]||(t[49]=n("i",{class:"bi bi-lightbulb"},null,-1)),v(" Suggested: "+c(e.correction),1)])):r("",!0)]),n("td",null,[n("span",{class:d(["badge",s.getStatusBadgeClass(e)])},c(s.getStatusText(e)),3)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},[s.getExtractedCaseName(e)&&""!==s.getExtractedCaseName(e).trim()&&"Not extracted"!==s.getExtractedCaseName(e)&&"westlaw citation"!==s.getExtractedCaseName(e).toLowerCase()?(i(),l(u,{key:0},[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener"},c(s.getExtractedCaseName(e)),9,ys)):(i(),l(u,{key:1},[v(c(s.getExtractedCaseName(e)),1)],64))],64)):(i(),l("span",bs,"Not extracted"))],2)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},[s.getVerifiedCaseName(e)&&"Not verified"!==s.getVerifiedCaseName(e)&&s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener"},c(s.getVerifiedCaseName(e)),9,hs)):(i(),l(u,{key:1},[v(c(s.getVerifiedCaseName(e)),1)],64)),s.isCaseNameMismatch(e)?(i(),l("div",Cs,t[50]||(t[50]=[n("i",{class:"bi bi-exclamation-triangle"},null,-1),v(" Low similarity ")]))):r("",!0)],2)]),n("td",null,[n("button",{class:"btn btn-sm btn-outline-primary",onClick:e=>s.toggleDetails("caseNameMismatch-"+a)},c(s.expandedCitation==="caseNameMismatch-"+a?"Hide":"View")+" Details ",9,xs)])])))),128))])])])],2),n("div",{class:d(["tab-pane fade",{"show active":"invalid"===s.activeTab}])},[n("div",ks,[n("table",ws,[t[55]||(t[55]=n("thead",null,[n("tr",null,[n("th",null,"Citation"),n("th",null,"Status"),n("th",null,"Extracted Case Name"),n("th",null,"Verified Case Name"),n("th",null,"Details")])],-1)),n("tbody",null,[(i(!0),l(u,null,m(s.invalidCitations,((e,a)=>(i(),l("tr",{key:"invalid-"+a,class:"align-middle"},[n("td",null,[n("div",_s,[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener",class:"citation-text"},c(s.getCitationText(e)),9,Ts)):(i(),l("span",Ns,c(s.getCitationText(e)),1)),e.correction?(i(),l("button",{key:2,class:"btn btn-sm btn-outline-secondary ms-2",onClick:t=>s.applyCorrection(e),title:"Apply correction"},t[52]||(t[52]=[n("i",{class:"bi bi-arrow-clockwise"},null,-1)]),8,Ss)):r("",!0)]),e.correction?(i(),l("div",Es,[t[53]||(t[53]=n("i",{class:"bi bi-lightbulb"},null,-1)),v(" Suggested: "+c(e.correction),1)])):r("",!0)]),n("td",null,[n("span",{class:d(["badge",s.getStatusBadgeClass(e)])},c(s.getStatusText(e)),3)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},[s.getExtractedCaseName(e)&&""!==s.getExtractedCaseName(e).trim()&&"Not extracted"!==s.getExtractedCaseName(e)&&"westlaw citation"!==s.getExtractedCaseName(e).toLowerCase()?(i(),l(u,{key:0},[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener"},c(s.getExtractedCaseName(e)),9,Rs)):(i(),l(u,{key:1},[v(c(s.getExtractedCaseName(e)),1)],64))],64)):(i(),l("span",Ps,"Not extracted"))],2)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},[s.getVerifiedCaseName(e)&&"Not verified"!==s.getVerifiedCaseName(e)&&s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener"},c(s.getVerifiedCaseName(e)),9,As)):(i(),l(u,{key:1},[v(c(s.getVerifiedCaseName(e)),1)],64)),s.isCaseNameMismatch(e)?(i(),l("div",Us,t[54]||(t[54]=[n("i",{class:"bi bi-exclamation-triangle"},null,-1),v(" Low similarity ")]))):r("",!0)],2)]),n("td",null,[n("button",{class:"btn btn-sm btn-outline-primary",onClick:e=>s.toggleDetails("invalid-"+a)},c(s.expandedCitation==="invalid-"+a?"Hide":"View")+" Details ",9,Ls)])])))),128))])])])],2)]),(i(!0),l(u,null,m(s.currentTabCitations,((e,a)=>{var u,m,p,f,y,b,C,x,k,w,_,T,N,S,E,R,P,A,U,L,I,V,D,M,$;return g((i(),l("div",{key:"detail-"+s.activeTab+"-"+a,class:"card mb-3"},[n("div",Is,[n("h5",Vs,"Citation Details: "+c(s.getCitationText(e)),1)]),n("div",Ds,[n("div",Ms,[n("div",$s,[t[64]||(t[64]=n("h6",null,"Basic Information",-1)),n("dl",Os,[t[60]||(t[60]=n("dt",{class:"col-sm-4"},"Status",-1)),n("dd",Fs,[n("span",{class:d(["badge",s.getStatusBadgeClass(e)])},c(s.getStatusText(e)),3),(null==(u=e.data)?void 0:u.confidence)<.7?(i(),l("span",zs," Low Confidence ("+c(Math.round(100*(null==(m=e.data)?void 0:m.confidence)))+"%) ",1)):r("",!0)]),t[61]||(t[61]=n("dt",{class:"col-sm-4"},"Source",-1)),n("dd",qs,[n("span",Bs,c((null==(p=e.data)?void 0:p.source)||"N/A"),1),s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",class:"ms-2"},t[56]||(t[56]=[n("i",{class:"bi bi-box-arrow-up-right"},null,-1)]),8,js)):r("",!0)]),t[62]||(t[62]=n("dt",{class:"col-sm-4"},"Case Name(s)",-1)),n("dd",Xs,[(null==(f=e.data)?void 0:f.case_name_verified)&&(null==(y=e.data)?void 0:y.case_name_extracted)&&(null==(b=e.data)?void 0:b.case_name_verified)!==(null==(C=e.data)?void 0:C.case_name_extracted)?(i(),l("span",Hs,[t[58]||(t[58]=n("strong",null,"Verified:",-1)),v(" "+c(null==(x=e.data)?void 0:x.case_name_verified),1),t[59]||(t[59]=n("br",null,null,-1)),n("span",Ws,[t[57]||(t[57]=n("strong",null,"Extracted:",-1)),v(" "+c(null==(k=e.data)?void 0:k.case_name_extracted),1)])])):(null==(w=e.data)?void 0:w.case_name_verified)?(i(),l("span",Gs,c(null==(_=e.data)?void 0:_.case_name_verified),1)):(null==(T=e.data)?void 0:T.case_name_extracted)?(i(),l("span",Zs,c(null==(N=e.data)?void 0:N.case_name_extracted),1)):(i(),l("span",Js,c(s.getCaseName(e)),1))]),t[63]||(t[63]=n("dt",{class:"col-sm-4"},"Confidence",-1)),n("dd",Ys,[n("div",Ks,[n("div",{class:d(["progress-bar",{"bg-success":(null==(S=e.data)?void 0:S.confidence)>=.7,"bg-warning":(null==(E=e.data)?void 0:E.confidence)>=.4&&(null==(R=e.data)?void 0:R.confidence)<.7,"bg-danger":(null==(P=e.data)?void 0:P.confidence)<.4}]),role:"progressbar",style:o({width:100*(null==(A=e.data)?void 0:A.confidence)+"%"}),"aria-valuenow":100*(null==(U=e.data)?void 0:U.confidence),"aria-valuemin":"0","aria-valuemax":"100"},c(Math.round(100*(null==(L=e.data)?void 0:L.confidence)))+"% ",15,Qs)])])])]),n("div",el,[t[66]||(t[66]=n("h6",null,"Additional Details",-1)),n("dl",tl,[t[65]||(t[65]=n("dt",{class:"col-sm-4"},"Validation Method",-1)),n("dd",al,c((null==(I=e.data)?void 0:I.method)||"N/A"),1)])])]),(null==(V=e.data)?void 0:V.error_message)?(i(),l("div",sl,[t[67]||(t[67]=n("i",{class:"bi bi-exclamation-triangle me-2"},null,-1)),v(" "+c(null==(D=e.data)?void 0:D.error_message),1)])):r("",!0),(null==(M=e.data)?void 0:M.metadata)?(i(),l("div",ll,[t[68]||(t[68]=n("h6",null,"Additional Metadata",-1)),n("pre",il,c(JSON.stringify(null==($=e.data)?void 0:$.metadata,null,2)),1)])):r("",!0)])])),[[h,s.expandedCitation===s.activeTab+"-"+a]])})),128)),n("div",nl,[n("div",null,[n("button",{class:"btn btn-outline-secondary me-2",onClick:t[7]||(t[7]=e=>s.downloadResults("json"))},t[69]||(t[69]=[n("i",{class:"bi bi-download me-1"},null,-1),v(" Download JSON ")])),n("button",{class:"btn btn-outline-secondary me-2",onClick:t[8]||(t[8]=e=>s.downloadResults("csv"))},t[70]||(t[70]=[n("i",{class:"bi bi-file-earmark-spreadsheet me-1"},null,-1),v(" Download CSV ")])),n("button",{class:"btn btn-outline-secondary",onClick:t[9]||(t[9]=(...e)=>s.copyToClipboard&&s.copyToClipboard(...e))},t[71]||(t[71]=[n("i",{class:"bi bi-clipboard me-1"},null,-1),v(" Copy to Clipboard ")]))]),n("div",null,[n("button",{class:"btn btn-primary",onClick:t[10]||(t[10]=(...e)=>s.startNewAnalysis&&s.startNewAnalysis(...e))},t[72]||(t[72]=[n("i",{class:"bi bi-arrow-repeat me-1"},null,-1),v(" New Analysis ")]))])])])):(i(),l("div",rl,t[73]||(t[73]=[n("div",{class:"text-muted"},[n("i",{class:"bi bi-search",style:{"font-size":"3rem"}}),n("h4",{class:"mt-3"},"No citations found"),n("p",{class:"mb-0"},"Try analyzing some legal text to see citation results here.")],-1)])))])}],["__scopeId","data-v-8632c76d"]]),ProcessingProgress:ye},setup(){const s=N();S();const l=[{id:"single",label:"Single Citation"},{id:"document",label:"Upload Document"},{id:"text",label:"Paste Text"},{id:"url",label:"URL Upload"}],i=e("single"),n=e("validation"),r=e(!0),o=e(!0),c=e(!0),d=e(!0),u=e(!0),m=e(!0),v=e(""),g=e(""),p=e(null),f=e(null),y=e(null),b=e(null),h=e(null),C=e(null),x=e([]),k=e([]),R=e(null),{isLoading:P,cancel:I}=function(a={}){const{loadingMessage:s="Loading...",showLoading:l=!0,onSuccess:i,onError:n,onFinally:r}=a,o=e(null),c=e(null),d=e(!1),u=e(null);let m=null,v=null;const g=`api_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return t((()=>{v&&v.abort(),m&&m.remove()})),{execute:async function(e,t={}){var p;const{message:f=s,showLoader:y=l,signal:b,...h}={...a,...t};c.value=null,u.value=null,o.value=null,y&&(m=E(g,{message:f})),d.value=!0,"undefined"!=typeof AbortController&&(v=new AbortController,h.signal=b||v.signal);try{const t=await e({...h,signal:h.signal});return o.value=t.data||t,u.value=t.status||200,i&&i(t),t}catch(C){throw c.value=C,u.value=(null==(p=C.response)?void 0:p.status)||0,n&&n(C),C}finally{d.value=!1,m&&(c.value?m.error(c.value):m.complete(),m=null),r&&r(),v=null}},cancel:function(){v&&(v.abort(),v=null),m&&(m.remove(),m=null),d.value=!1},data:o,error:c,isLoading:d,status:u}}({loadingMessage:"Validating citation...",showLoading:!0}),D=e(!1),{isLoading:M}=function(){const e=(e,t="Loading...")=>{A.value=e,t&&(U.value=t)};return{isLoading:a((()=>A.value)),loadingMessage:a((()=>U.value)),setLoading:e,showLoading:t=>{e(!0,t)},hideLoading:()=>{e(!1)},toggleLoading:t=>{e(!A.value,t)}}}(),$=a((()=>P.value||M.value||D.value)),O=e("/casestrainer/api"),{elapsedTime:F,remainingTime:z,totalProgress:q,currentStep:B,currentStepProgress:j,processingSteps:X,actualTimes:H,citationInfo:W,rateLimitInfo:G,timeout:Z,processingError:J,canRetry:Y,startProcessing:K,stopProcessing:Q,updateProgress:ee,setSteps:te,resetProcessing:ae}=function(){const t=e(null),s=e(0),l=e(""),i=e(0),n=e([]),r=e({}),o=a((()=>t.value?(Date.now()-t.value)/1e3:0)),c=a((()=>s.value?Math.max(0,s.value-o.value):0)),d=a((()=>s.value?Math.min(100,o.value/s.value*100):0)),u=a((()=>{if(!n.value.length)return 0;const e=n.value.findIndex((e=>e.step===l.value));if(-1===e)return 0;const t=n.value[e],a=o.value-(t.startTime||0);return Math.min(100,a/t.estimated_time*100)})),m=(e,t)=>{const a=n.value.findIndex((t=>t.step===e));-1!==a&&(0!==a&&100!==n.value[a-1].progress||(l.value=e,n.value[a].startTime||(n.value[a].startTime=Date.now())),n.value[a].progress=t,i.value=t)};return{startTime:t,estimatedTotalTime:s,currentStep:l,stepProgress:i,processingSteps:n,actualTimes:r,elapsedTime:o,remainingTime:c,totalProgress:d,currentStepProgress:u,startProcessing:e=>{var a;t.value=Date.now(),"object"==typeof e&&null!==e&&Array.isArray(e.steps)?(s.value=e.estimated_total_time,n.value=e.steps.map((e=>({step:e[0],estimated_time:e[1],startTime:null,progress:0}))),l.value=(null==(a=n.value[0])?void 0:a.step)||""):"number"==typeof e?(s.value=e,n.value=[],l.value=""):(s.value=0,n.value=[],l.value=""),i.value=0},updateStep:m,completeStep:e=>{m(e,100);const t=n.value.findIndex((t=>t.step===e))+1;t<n.value.length&&(l.value=n.value[t].step,n.value[t].startTime=Date.now())},updateActualTimes:e=>{r.value=e},reset:()=>{t.value=null,s.value=0,l.value="",i.value=0,n.value=[],r.value={}},formatTime:e=>e<60?`${Math.round(e)}s`:`${Math.floor(e/60)}m ${Math.round(e%60)}s`}}(),se=e(0),le=e(null),ie=e(null),ne=e(null);const re=async e=>{if(e&&!P.value){p.value=null,f.value=null,y.value=null,b.value=null,h.value=null,C.value=null,R.value=null,k.value=[],D.value=!1,ie.value=null,se.value=0,le.value=null,W.value=null,G.value=null,Z.value=null,J.value=null,Y.value=!1,ae(),te([{step:"Validating Citation",estimated_time:10}]),K();try{const t=await V.validateCitation(e);p.value=t.data,((e,t)=>{try{const a={id:Date.now(),citation:e.trim(),result:t,timestamp:(new Date).toISOString()};x.value.unshift(a),x.value.length>10&&(x.value=x.value.slice(0,10)),localStorage.setItem("recentValidations",JSON.stringify(x.value))}catch(a){console.error("Error adding recent validation:",a)}})(e,t.data)}catch(t){(e=>{console.error("Validation error:",e),e.value=e.message||"An error occurred during validation. Please try again.",p.value=null})(t)}finally{Q()}}},oe=e=>{var t,a,s;try{const l=Array.isArray(e.validation_results)&&e.validation_results.length>0?e.validation_results:e.citations||[];if(b.value={...e,citations:he(l),timestamp:(new Date).toISOString()},P.value=!1,R.value=null,me(b.value),T((()=>{const e=document.querySelector(".results-section");e&&e.scrollIntoView({behavior:"smooth"})})),updateStep("Document analysis",100),completeStep("Document analysis"),D.value=!1,ie.value=null,(null==(t=e.metadata)?void 0:t.time_estimate)&&K(e.metadata.time_estimate),null==(a=e.metadata)?void 0:a.processing_steps)for(const t of e.metadata.processing_steps)t.actual_time>0&&completeStep(t.step);(null==(s=e.metadata)?void 0:s.actual_times)&&updateActualTimes(e.metadata.actual_times)}catch(l){console.error("Error handling document results:",l),R.value="Failed to process document results",P.value=!1}},ce=e=>{var t,a,s;try{const l=Array.isArray(e.validation_results)&&e.validation_results.length>0?e.validation_results:e.citations||[];if(h.value={...e,citations:he(l),timestamp:(new Date).toISOString()},P.value=!1,R.value=null,me(h.value),T((()=>{const e=document.querySelector(".results-section");e&&e.scrollIntoView({behavior:"smooth"})})),updateStep("Text analysis",100),completeStep("Text analysis"),D.value=!1,ie.value=null,(null==(t=e.metadata)?void 0:t.time_estimate)&&K(e.metadata.time_estimate),null==(a=e.metadata)?void 0:a.processing_steps)for(const t of e.metadata.processing_steps)t.actual_time>0&&completeStep(t.step);(null==(s=e.metadata)?void 0:s.actual_times)&&updateActualTimes(e.metadata.actual_times)}catch(l){console.error("Error handling text results:",l),R.value="Failed to process text results",P.value=!1}},de=e=>{var t,a,s;try{console.log("URL analysis results:",e);const l=Array.isArray(e.validation_results)&&e.validation_results.length>0?e.validation_results:e.citations||[];if(C.value={...e,citations:he(l),timestamp:(new Date).toISOString()},P.value=!1,R.value=null,me(C.value),T((()=>{const e=document.querySelector(".results-section");e&&e.scrollIntoView({behavior:"smooth"})})),completeStep("URL analysis"),D.value=!1,ie.value=null,(null==(t=e.metadata)?void 0:t.time_estimate)&&K(e.metadata.time_estimate),null==(a=e.metadata)?void 0:a.processing_steps)for(const t of e.metadata.processing_steps)t.actual_time>0&&completeStep(t.step);(null==(s=e.metadata)?void 0:s.actual_times)&&updateActualTimes(e.metadata.actual_times)}catch(l){console.error("Error handling URL analysis results:",l),R.value="Failed to process URL analysis results.",P.value=!1}},ue=(e,t)=>{ne.value&&clearInterval(ne.value),ne.value=setInterval((async()=>{try{const a=await L.get(`/result/${e}`);"completed"===a.data.status?(clearInterval(ne.value),ne.value=null,Q(),t(a.data.result)):"failed"===a.data.status?(clearInterval(ne.value),ne.value=null,Q(),R.value=a.data.error||"Task failed",Y.value=!0):a.data.progress&&ee(a.data.progress)}catch(a){console.error("Polling error:",a),clearInterval(ne.value),ne.value=null,Q(),R.value="Failed to check task status",Y.value=!0}}),2e3)},me=(e,t)=>{},ve=e=>{if(!e)return"";let t="Validation Results\n";return t+=`Generated: ${(new Date).toLocaleString()}\n\n`,e.citation&&(t+=`Citation: ${e.citation}\n`),void 0!==e.valid&&(t+=`Valid: ${e.valid?"Yes":"No"}\n`),e.confidence&&(t+=`Confidence: ${(100*e.confidence).toFixed(1)}%\n`),e.suggestions&&e.suggestions.length>0&&(t+="\nSuggestions:\n",e.suggestions.forEach(((e,a)=>{t+=`${a+1}. ${e.text}\n`,e.reason&&(t+=`   Reason: ${e.reason}\n`),e.confidence&&(t+=`   Confidence: ${(100*e.confidence).toFixed(1)}%\n`),t+="\n"}))),t},ge=e=>{e&&("single"===i.value&&(v.value=e.corrected_text),k.value&&(k.value=k.value.map((t=>t.id===e.id?{...t,applied:!0}:t))),console.log("Correction applied:",e))},pe=()=>{const{tab:e}=s.query;e&&l.some((t=>t.id===e))&&(i.value=e);const{citation:t}=s.query;t&&"string"==typeof t&&(v.value=t,re(t))};w((()=>s.query),pe),_((()=>{xe(),T(pe)})),t((()=>{D.value&&I(),ne.value&&(clearInterval(ne.value),ne.value=null)})),w((()=>s.query),((e,t)=>{JSON.stringify(e)!==JSON.stringify(t)&&pe()}));const fe=a((()=>be().filter((e=>{var t,a;return e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists})).length)),ye=a((()=>be().filter((e=>{var t,a;return!(e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists)})).length));function be(){return"single"===i.value&&p.value&&p.value.citations?p.value.citations:"document"===i.value&&b.value&&b.value.citations?b.value.citations:"text"===i.value&&h.value&&h.value.citations?h.value.citations:"url"===i.value&&C.value&&C.value.citations?C.value.citations:[]}function he(e){return(e||[]).map((e=>{var t,a;const s=e.clusters&&e.clusters.length>0?e.clusters[0]:{},l=s.absolute_url?`https://www.courtlistener.com${s.absolute_url}`:void 0,i=(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists||"verified"===e.status||!0===e.verified;return{...e,metadata:{...s,url:l},details:{...s,url:l},valid:i,verified:i}}))}const Ce=async(e,t)=>{var a,s,l,i,n,r,o,c;try{D.value=!0,J.value=null,Y.value=!1,W.value=null,Z.value=null;const o=await L.analyze(e,t);if(ie.value=o.requestId,(null==(a=o.metadata)?void 0:a.citation_count)&&(W.value={total:o.metadata.citation_count,unique:o.metadata.unique_citations,processed:0}),"queued"===o.status&&(se.value=o.queuePosition,le.value=o.estimatedWaitTime),(null==(s=o.metadata)?void 0:s.rate_limit_info)&&(G.value=o.metadata.rate_limit_info),(null==(l=o.metadata)?void 0:l.timeout)&&(Z.value=o.metadata.timeout),(null==(i=o.metadata)?void 0:i.time_estimate)&&K(o.metadata.time_estimate),null==(n=o.metadata)?void 0:n.processing_steps)for(const e of o.metadata.processing_steps)if(e.actual_time>0&&(completeStep(e.step),e.step.includes("Verifying citations")&&W.value)){const t=e.step.match(/Verifying citations (\d+)-(\d+) of (\d+)/);if(t){const[,e,a]=t.map(Number);W.value.processed=Math.max(W.value.processed,a)}}(null==(r=o.metadata)?void 0:r.actual_times)&&updateActualTimes(o.metadata.actual_times),"completed"===o.status&&("url"===t?de(o):"text"===t?ce(o):"file"===t&&oe(o),W.value&&(W.value.processed=W.value.unique))}catch(d){504===(null==(o=d.response)?void 0:o.status)?J.value=`Request timed out after ${Z.value} seconds. The document contains ${(null==(c=W.value)?void 0:c.unique)||0} unique citations, which may take longer than expected to process.`:J.value=d.message||"An error occurred during processing",Y.value=!0,console.error("Analysis error:",d)}finally{D.value=!1,ie.value=null,se.value=0,le.value=null,Z.value=null,ae()}};t((()=>{ie.value&&L.cancelRequest(ie.value)}));const xe=()=>{try{const e=localStorage.getItem("recentValidations");x.value=e?JSON.parse(e):[]}catch(e){console.error("Error loading recent validations:",e),x.value=[]}};return{activeTab:i,activeResultTab:n,citationInput:v,citationText:g,validationResult:p,mlResult:f,correctionResult:y,documentAnalysisResult:b,textAnalysisResult:h,urlAnalysisResult:C,recentValidations:x,suggestions:k,error:R,isLoading:$,showLoading:$,hasActiveRequest:D,useEnhanced:d,useML:u,useCorrection:m,showBasicValidation:r,showMLAnalysis:o,showCorrections:c,apiBaseUrl:O,tabs:l,clearResults:function(){p.value=null,f.value=null,y.value=null,b.value=null,h.value=null,C.value=null,R.value=null,g.value=""},validateCitation:re,applyCorrection:ge,copyResults:async()=>{try{let e="";"document"===i.value&&b.value?e=ve(b.value):"text"===i.value&&h.value?e=ve(h.value):"url"===i.value&&C.value?e=ve(C.value):"single"===i.value&&p.value&&(e=ve(p.value)),e&&(await navigator.clipboard.writeText(e),console.log("Results copied to clipboard"))}catch(e){console.error("Failed to copy results:",e),R.value="Failed to copy results to clipboard"}},downloadResults:()=>{try{let e="",t="validation-results.txt";if("document"===i.value&&b.value?(e=ve(b.value),t="document-validation.txt"):"text"===i.value&&h.value?(e=ve(h.value),t="text-validation.txt"):"url"===i.value&&C.value?(e=ve(C.value),t="url-validation.txt"):"single"===i.value&&p.value&&(e=ve(p.value),t="citation-validation.txt"),e){const a=new Blob([e],{type:"text/plain"}),s=URL.createObjectURL(a),l=document.createElement("a");l.href=s,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s)}}catch(e){console.error("Failed to download results:",e),R.value="Failed to download results"}},handleDocumentResults:oe,handleTextResults:ce,handleUrlResults:de,handleDocumentError:e=>{console.error("Document analysis error:",e);const t="string"==typeof e?{message:e}:e;b.value={error:t.message||"An error occurred while analyzing the document",details:t.details||null,status:t.status||500,timestamp:(new Date).toISOString()},P.value=!1,e.value=b.value.error,D.value=!1,ie.value=null,J.value=t.message||"Document analysis failed",Y.value=!0,T((()=>{const e=document.querySelector(".results-section");e&&e.scrollIntoView({behavior:"smooth"})}))},handleTextError:e=>{console.error("Text analysis error:",e),h.value={error:e.message||"An error occurred while analyzing the text",timestamp:(new Date).toISOString()},P.value=!1,e.value="Failed to analyze text. Please try again.",D.value=!1,ie.value=null,J.value=e.message||"Text analysis failed",Y.value=!0},handleUrlError:e=>{console.error("URL analysis error:",e),C.value={error:e.message||"An error occurred while analyzing the URL",timestamp:(new Date).toISOString()},P.value=!1,e.value="Failed to analyze URL. Please check the URL and try again.",D.value=!1,ie.value=null,J.value=e.message||"URL analysis failed",Y.value=!0},handleDocumentProgress:e=>{e.task_id&&!ne.value?(te(e.steps),K(),ue(e.task_id,oe)):ee(e)},handleTextProgress:e=>{e.task_id&&!ne.value?(te(e.steps),K(),ue(e.task_id,ce)):ee(e)},handleUrlProgress:e=>{e.task_id&&!ne.value?(te(e.steps),K(),ue(e.task_id,de)):ee(e)},applyCorrectionFromResults:e=>{if(!e||!e.suggestions||0===e.suggestions.length)return!1;const t=e.suggestions.find((e=>e.confidence&&e.confidence>.7));return!!t&&(ge(t),!0)},loadRecentValidations:xe,clearRecentValidations:()=>{try{x.value=[],localStorage.removeItem("recentValidations")}catch(e){console.error("Error clearing recent validations:",e)}},removeRecentValidation:e=>{try{x.value=x.value.filter((t=>t.id!==e)),localStorage.setItem("recentValidations",JSON.stringify(x.value))}catch(t){console.error("Error removing recent validation:",t)}},copyToClipboard:async(e,t="Copied to clipboard!")=>{try{return await navigator.clipboard.writeText(e),t&&console.log(t),!0}catch(a){console.error("Failed to copy text:",a);try{const a=document.createElement("textarea");return a.value=e,a.style.position="fixed",document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),t&&console.log(t),!0}catch(s){return console.error("Fallback copy failed:",s),!1}}},formatDate:function(e){if(!e)return"";try{const t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).format(t)}catch(t){return console.error("Error formatting date:",t),e||""}},getAlertClass:function(e){return null==e?"alert-info":e?"alert-success":"alert-danger"},getConfidenceClass:function(e){return e>=.8?"bg-success":e>=.5?"bg-warning":"bg-danger"},getProgressBarClass:function(e){return e>=.8?"bg-success":e>=.5?"bg-info":e>=.3?"bg-warning":"bg-danger"},formatCitation:function(e){return e?e.replace(/\s+/g," ").trim():""},getValidationIcon:function(e){return null==e?"bi-question-circle":e?"bi-check-circle":"bi-x-circle"},getValidationColor:function(e){return null==e?"text-info":e?"text-success":"text-danger"},getValidationLabel:function(e){return null==e?"Unknown":e?"Valid":"Invalid"},getCorrectionIcon:function(e){return e?e.confidence>.7?"bi-lightbulb":"bi-lightbulb-off":"bi-question-circle"},getCorrectionColor:function(e){return e&&e.confidence>.7?"text-warning":"text-muted"},getCorrectionLabel:function(e){return e?e.confidence>.7?"Suggested":"Low confidence":"No suggestions"},getMLLabel:function(e){return e?e.prediction||"Unknown":"N/A"},getMLColor:function(e){return e?e.confidence>.7?"text-success":e.confidence>.4?"text-warning":"text-danger":"text-muted"},getMLIcon:function(e){return e?e.confidence>.7?"bi-check-circle":e.confidence>.4?"bi-exclamation-circle":"bi-x-circle":"bi-question-circle"},isCitationValid:function(e){return!!e&&("verified"===e.status||!0===e.verified)},validCount:fe,invalidCount:ye,elapsedTime:F,remainingTime:z,totalProgress:q,currentStep:B,currentStepProgress:j,processingSteps:X,actualTimes:H,formatTime:function(e){if(!e||e<0)return"--:--";const t=Math.floor(e/3600),a=Math.floor(e%3600/60),s=Math.floor(e%60);return t>0?`${t}:${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`:`${a}:${s.toString().padStart(2,"0")}`},citationInfo:W,queuePosition:se,estimatedQueueTime:le,rateLimitInfo:G,timeout:Z,processingError:J,canRetry:Y,retryProcessing:async()=>{if(ie.value)try{J.value=null,Y.value=!1,ae(),await L.cancelRequest(ie.value);const e=L.getRequestStatus(ie.value);if(e){const{type:t,input:a}=e;await Ce(a,t)}}catch(e){J.value=`Failed to retry: ${e.message}`,Y.value=!0}}}}},[["render",function(e,t,a,s,o,f){const b=x("FileUpload"),h=x("TextPaste"),w=x("UrlUpload"),_=x("CitationResults"),T=x("ProcessingProgress");return i(),l("div",ol,[n("div",cl,[n("div",dl,[t[11]||(t[11]=n("h2",{class:"mb-4"},"Citation Validator",-1)),n("ul",ul,[(i(!0),l(u,null,m(s.tabs,(e=>(i(),l("li",{key:e.id,class:"nav-item",role:"presentation"},[n("button",{class:d(["nav-link",{active:s.activeTab===e.id}]),onClick:t=>s.activeTab=e.id,type:"button",role:"tab","aria-selected":s.activeTab===e.id},c(e.label),11,ml)])))),128))]),n("div",vl,["single"===s.activeTab?(i(),l("div",gl,[n("div",pl,[t[7]||(t[7]=n("label",{for:"citationInput",class:"form-label"},"Enter Citation",-1)),n("div",fl,[g(n("input",{type:"text",class:"form-control",id:"citationInput","onUpdate:modelValue":t[0]||(t[0]=e=>s.citationInput=e),placeholder:"e.g., 410 U.S. 113 (1973)",onKeyup:t[1]||(t[1]=y((e=>s.validateCitation(s.citationInput)),["enter"]))},null,544),[[p,s.citationInput]]),n("button",{class:"btn btn-primary",type:"button",onClick:t[2]||(t[2]=e=>s.validateCitation(s.citationInput)),disabled:!s.citationInput.trim()||s.isLoading},[s.isLoading?(i(),l("span",bl)):r("",!0),v(" "+c(s.isLoading?"Validating...":"Validate"),1)],8,yl)])])])):"document"===s.activeTab?(i(),l("div",hl,[C(b,{onResults:s.handleDocumentResults,onError:s.handleDocumentError,onProgress:s.handleDocumentProgress,"is-loading":s.isLoading,onLoading:t[3]||(t[3]=e=>s.isLoading=e)},null,8,["onResults","onError","onProgress","is-loading"])])):"text"===s.activeTab?(i(),l("div",Cl,[C(h,{onResults:s.handleTextResults,onError:s.handleTextError,onProgress:s.handleTextProgress,"is-loading":s.isLoading,onLoading:t[4]||(t[4]=e=>s.isLoading=e)},null,8,["onResults","onError","onProgress","is-loading"])])):"url"===s.activeTab?(i(),l("div",xl,[C(w,{onResults:s.handleUrlResults,onError:s.handleUrlError,onProgress:s.handleUrlProgress,"is-loading":s.isLoading,onLoading:t[5]||(t[5]=e=>s.isLoading=e)},null,8,["onResults","onError","onProgress","is-loading"])])):r("",!0)]),"single"===s.activeTab?(i(),l("div",kl,[s.validationResult&&s.validationResult.citations&&s.validationResult.citations.length?(i(),k(_,{key:0,results:s.validationResult,"active-tab":s.activeTab,onApplyCorrection:s.applyCorrection,onCopyResults:s.copyResults,onDownloadResults:s.downloadResults},null,8,["results","active-tab","onApplyCorrection","onCopyResults","onDownloadResults"])):(i(),l("div",wl," No results to display. Please enter a citation and click Analyze. "))])):"document"===s.activeTab?(i(),l("div",_l,[s.documentAnalysisResult&&s.documentAnalysisResult.citations&&s.documentAnalysisResult.citations.length?(i(),k(_,{key:0,results:s.documentAnalysisResult,"active-tab":s.activeTab,onApplyCorrection:s.applyCorrection,onCopyResults:s.copyResults,onDownloadResults:s.downloadResults},null,8,["results","active-tab","onApplyCorrection","onCopyResults","onDownloadResults"])):(i(),l("div",Tl," No results to display. Please upload a document and wait for analysis. "))])):"text"===s.activeTab?(i(),l("div",Nl,[s.textAnalysisResult&&s.textAnalysisResult.citations&&s.textAnalysisResult.citations.length?(i(),k(_,{key:0,results:s.textAnalysisResult,"active-tab":s.activeTab,onApplyCorrection:s.applyCorrection,onCopyResults:s.copyResults,onDownloadResults:s.downloadResults},null,8,["results","active-tab","onApplyCorrection","onCopyResults","onDownloadResults"])):(i(),l("div",Sl," No results to display. Please paste text and wait for analysis. "))])):"url"===s.activeTab?(i(),l("div",El,[s.urlAnalysisResult&&s.urlAnalysisResult.citations&&s.urlAnalysisResult.citations.length?(i(),k(_,{key:0,results:s.urlAnalysisResult,"active-tab":s.activeTab,onApplyCorrection:s.applyCorrection,onCopyResults:s.copyResults,onDownloadResults:s.downloadResults},null,8,["results","active-tab","onApplyCorrection","onCopyResults","onDownloadResults"])):s.showLoading?r("",!0):(i(),l("div",Rl," No results to display. Please enter a URL and wait for analysis. "))])):r("",!0),r("",!0),s.showLoading?(i(),l("div",Pl,[s.showLoading?(i(),k(T,{key:0,"elapsed-time":s.elapsedTime,"remaining-time":s.remainingTime,"total-progress":s.totalProgress,"current-step":s.currentStep,"current-step-progress":s.currentStepProgress,"processing-steps":s.processingSteps,"actual-times":s.actualTimes,"citation-info":s.citationInfo,"rate-limit-info":s.rateLimitInfo,timeout:s.timeout,error:s.processingError,"can-retry":s.canRetry,onRetry:s.retryProcessing},null,8,["elapsed-time","remaining-time","total-progress","current-step","current-step-progress","processing-steps","actual-times","citation-info","rate-limit-info","timeout","error","can-retry","onRetry"])):r("",!0)])):r("",!0)])])])}],["__scopeId","data-v-ce9c7372"]]);export{Al as default};
