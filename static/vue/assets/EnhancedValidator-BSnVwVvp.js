import{r as e,z as t,n as a,p as s,c as l,o as i,b as n,l as r,A as o,t as u,B as d,F as c,m as v,f as m,u as g,v as p,C as f,x as b,D as y,d as h,e as C,h as x,E as k,G as w,H as _,I as T,y as S}from"./vendor-D6oR8GeS.js";import{c as R,_ as N,a as P}from"./index-B5A5TN54.js";const A=e(!1),E=e("Loading...");const L=s.create({baseURL:"/casestrainer/api",timeout:12e4});L.interceptors.request.use((e=>("/analyze"===e.url&&e.data&&"url"===e.data.type?(e.timeout=3e5,e.retryCount=0,e.maxRetries=3):(e.timeout=12e4,e.retryCount=0,e.maxRetries=1),e))),L.interceptors.response.use((e=>e),(async e=>{const t=e.config;if(!t||!t.retryCount||t.retryCount>=t.maxRetries||"ECONNABORTED"!==e.code&&!e.message.includes("timeout")&&!e.message.includes("Network Error"))return Promise.reject(e);t.retryCount+=1;const a=Math.min(1e3*Math.pow(2,t.retryCount),3e4);return console.log(`Retrying request to ${t.url} (attempt ${t.retryCount}/${t.maxRetries}) after ${a}ms delay`),await new Promise((e=>setTimeout(e,a))),L(t)})),L.interceptors.request.use((e=>(e.headers["X-API-Key"]="443a87912e4f444fb818fca454364d71e4aa9f91",e.data instanceof FormData||(e.headers["Content-Type"]="application/json"),e)),(e=>(console.error("API Request Error:",e),Promise.reject(e)))),L.interceptors.response.use((e=>e),(e=>{var t,a;return e.response?console.error("API Error Response:",{status:e.response.status,url:null==(t=e.config)?void 0:t.url,data:e.response.data,headers:e.response.headers}):e.request?console.error("API Request Error (No Response):",{url:null==(a=e.config)?void 0:a.url,message:e.message}):console.error("API Error:",e.message),Promise.reject(e)})),L.interceptors.response.use((e=>e),(e=>{if(e.config&&"/analyze"===e.config.url&&e.config.data&&"url"===e.config.data.type)if(e.response)switch(e.response.status){case 400:e.message="Invalid URL or content type not supported";break;case 404:e.message="URL not found or content not accessible";break;case 429:e.message="Too many requests. Please try again in a few minutes";break;case 502:e.message="Failed to fetch URL content. The server may be temporarily unavailable";break;case 504:e.message="Request timed out while fetching URL content";break;default:e.message=`Error fetching URL: ${e.response.status} ${e.response.statusText}`}else"ECONNABORTED"===e.code?e.message="Request timed out while fetching URL content":"ECONNREFUSED"===e.code?e.message="Could not connect to the server":"ENOTFOUND"===e.code&&(e.message="URL not found or domain does not exist");return Promise.reject(e)}));const U=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"}));const I={name:"ProcessingProgress",props:{elapsedTime:{type:Number,required:!0},remainingTime:{type:Number,required:!0},totalProgress:{type:Number,required:!0},currentStep:{type:String,default:""},currentStepProgress:{type:Number,default:0},processingSteps:{type:Array,default:()=>[]},actualTimes:{type:Object,default:()=>({})},citationInfo:{type:Object,default:null},rateLimitInfo:{type:Object,default:null},error:{type:String,default:""},canRetry:{type:Boolean,default:!1},timeout:{type:Number,default:null}},computed:{currentStepElapsed(){const e=this.processingSteps.find((e=>e.step===this.currentStep));return e?Date.now()/1e3-e.start_time:0},currentStepRemaining(){const e=this.processingSteps.find((e=>e.step===this.currentStep));return e&&e.estimated_time?Math.max(0,e.estimated_time-this.currentStepElapsed):0},isTimeoutWarning(){if(!this.timeout)return!1;return this.timeout-this.elapsedTime<60}},methods:{formatTime(e){if(e<0)return"0s";const t=Math.floor(e/60),a=Math.round(e%60);return t>0?`${t}m ${a}s`:`${a}s`},getStepClass(e){return 100===e.progress?"completed":e.step===this.currentStep?"current":e.progress>0?"in-progress":"pending"},getStepStatus(e){return 100===e.progress?"Completed":e.step===this.currentStep?"In Progress":e.progress>0?`${e.progress}%`:"Pending"},formatProcessingRate(e){if(!e.processed||!this.elapsedTime)return"0/min";const t=e.processed/this.elapsedTime*60;return`${Math.round(t)}/min`}}},V={class:"processing-progress"},D={class:"progress-section"},M={class:"progress-bar"},$={class:"time-info"},F={key:0,class:"citation-section"},O={class:"citation-stats"},z={class:"stat"},q={class:"value"},B={class:"stat"},j={class:"value"},X={class:"stat"},H={class:"value"},G={key:0,class:"stat"},W={class:"value"},Z={key:0,class:"rate-limit-info"},J={class:"stat"},Y={class:"value"},K={key:0,class:"stat"},Q={class:"value"},ee={key:1,class:"current-step"},te={class:"step-info"},ae={class:"step-name"},se={class:"progress-bar"},le={class:"time-info"},ie={class:"steps-section"},ne={class:"steps-list"},re={class:"step-header"},oe={class:"step-name"},ue={class:"step-status"},de={key:0,class:"progress-bar"},ce={key:1,class:"time-info"},ve={key:0},me={key:2,class:"error-section"},ge={class:"error-message"};const pe=N(I,[["render",function(e,t,a,s,g,p){return i(),l("div",V,[n("div",D,[t[1]||(t[1]=n("h3",null,"Overall Progress",-1)),n("div",M,[n("div",{class:"progress-fill",style:o({width:`${a.totalProgress}%`})},null,4)]),n("div",$,[n("span",null,"Elapsed: "+u(p.formatTime(a.elapsedTime)),1),n("span",null,"Remaining: "+u(p.formatTime(a.remainingTime)),1),a.timeout?(i(),l("span",{key:0,class:d(["timeout-info",{warning:p.isTimeoutWarning}])}," Timeout: "+u(p.formatTime(a.timeout-a.elapsedTime)),3)):r("",!0)])]),a.citationInfo?(i(),l("div",F,[t[8]||(t[8]=n("h3",null,"Citation Processing",-1)),n("div",O,[n("div",z,[t[2]||(t[2]=n("span",{class:"label"},"Total Citations:",-1)),n("span",q,u(a.citationInfo.total),1)]),n("div",B,[t[3]||(t[3]=n("span",{class:"label"},"Unique Citations:",-1)),n("span",j,u(a.citationInfo.unique),1)]),n("div",X,[t[4]||(t[4]=n("span",{class:"label"},"Processed:",-1)),n("span",H,u(a.citationInfo.processed),1)]),a.citationInfo.unique?(i(),l("div",G,[t[5]||(t[5]=n("span",{class:"label"},"Processing Rate:",-1)),n("span",W,u(p.formatProcessingRate(a.citationInfo)),1)])):r("",!0)]),a.rateLimitInfo?(i(),l("div",Z,[n("div",J,[t[6]||(t[6]=n("span",{class:"label"},"API Rate Limit:",-1)),n("span",Y,u(a.rateLimitInfo.remaining)+"/"+u(a.rateLimitInfo.limit),1)]),a.rateLimitInfo.resetTime?(i(),l("div",K,[t[7]||(t[7]=n("span",{class:"label"},"Reset in:",-1)),n("span",Q,u(p.formatTime(a.rateLimitInfo.resetTime-Date.now()/1e3)),1)])):r("",!0)])):r("",!0)])):r("",!0),a.currentStep?(i(),l("div",ee,[t[9]||(t[9]=n("h3",null,"Current Step",-1)),n("div",te,[n("span",ae,u(a.currentStep),1),n("div",se,[n("div",{class:"progress-fill",style:o({width:`${a.currentStepProgress}%`})},null,4)]),n("div",le,[n("span",null,"Elapsed: "+u(p.formatTime(p.currentStepElapsed)),1),n("span",null,"Remaining: "+u(p.formatTime(p.currentStepRemaining)),1)])])])):r("",!0),n("div",ie,[t[10]||(t[10]=n("h3",null,"Processing Steps",-1)),n("div",ne,[(i(!0),l(c,null,v(a.processingSteps,(e=>(i(),l("div",{key:e.step,class:d(["step",p.getStepClass(e)])},[n("div",re,[n("span",oe,u(e.step),1),n("span",ue,u(p.getStepStatus(e)),1)]),void 0!==e.progress?(i(),l("div",de,[n("div",{class:"progress-fill",style:o({width:`${e.progress}%`})},null,4)])):r("",!0),e.estimated_time?(i(),l("div",ce,[n("span",null,"Estimated: "+u(p.formatTime(e.estimated_time)),1),e.actual_time?(i(),l("span",ve,"Actual: "+u(p.formatTime(e.actual_time)),1)):r("",!0)])):r("",!0)],2)))),128))])]),a.error?(i(),l("div",me,[n("div",ge,[t[11]||(t[11]=n("i",{class:"fas fa-exclamation-circle"},null,-1)),m(" "+u(a.error),1)]),a.canRetry?(i(),l("button",{key:0,onClick:t[0]||(t[0]=t=>e.$emit("retry")),class:"retry-button"}," Retry Processing ")):r("",!0)])):r("",!0)])}],["__scopeId","data-v-7431ecf9"]]),fe={MAX_TEXT_LENGTH:1e6,MIN_TEXT_LENGTH:10,MAX_URL_LENGTH:2048,PROCESSING_TIMEOUT:3e5,URL_FETCH_TIMEOUT:3e4,ALLOWED_PROTOCOLS:["http:","https:"],VALID_FILE_TYPES:{"application/pdf":[".pdf"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"text/plain":[".txt"],"text/rtf":[".rtf"]},MAX_FILE_SIZE:52428800,CONTENT_TYPES:{PDF:"application/pdf",HTML:"text/html",TEXT:"text/plain",DOCX:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",DOC:"application/msword",RTF:"text/rtf"},PDF_EXTENSIONS:[".pdf"]},be={validateText(e){if(!e||"string"!=typeof e)throw new Error("No text provided");if(e.length>fe.MAX_TEXT_LENGTH)throw new Error(`Text is too long. Maximum length is ${fe.MAX_TEXT_LENGTH} characters.`);if(e.length<fe.MIN_TEXT_LENGTH)throw new Error(`Text is too short. Minimum length is ${fe.MIN_TEXT_LENGTH} characters.`);if(/[\x00-\x08\x0B\x0C\x0E-\x1F]/.test(e))throw new Error("Text contains invalid characters. Please remove any special characters and try again.");return!0},validateUrl(e){if(!e||"string"!=typeof e)throw new Error("No URL provided");if(e.length>fe.MAX_URL_LENGTH)throw new Error(`URL is too long. Maximum length is ${fe.MAX_URL_LENGTH} characters.`);try{const t=new URL(e);if(!fe.ALLOWED_PROTOCOLS.includes(t.protocol))throw new Error("Only HTTP and HTTPS URLs are supported.");return!0}catch(t){if(t instanceof TypeError)throw new Error("Invalid URL format. Please enter a valid URL.");throw t}},validateFile(e){if(!e)throw new Error("No file selected");if(e.size>fe.MAX_FILE_SIZE)throw new Error(`File is too large. Maximum size is ${fe.MAX_FILE_SIZE/1048576}MB.`);if(0===e.size)throw new Error("File is empty");const t=fe.VALID_FILE_TYPES[e.type];if(!t)throw new Error("Invalid file type. Please upload a PDF, Word document, or text file.");const a="."+e.name.split(".").pop().toLowerCase();if(!t.includes(a))throw new Error(`Invalid file extension. Allowed extensions for ${e.type} are: ${t.join(", ")}`);return!0}},ye={cleanText:e=>e.replace(/\r\n/g,"\n").replace(/\t/g,"    ").replace(/[ \t]+/g," ").replace(/\n{3,}/g,"\n\n").trim(),sanitizeFileName:e=>e.replace(/[^a-zA-Z0-9.-]/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"")},he={createErrorObject(e){const t={message:"An error occurred during analysis",details:null,status:500,code:e.code};if("ECONNABORTED"===e.code)t.message="Request timed out. Please try again.";else if(e.response){if(t.status=e.response.status,e.response.data){switch(e.response.status){case 400:t.message=e.response.data.message||"Invalid input. Please check your input and try again.";break;case 401:t.message="Authentication required. Please log in and try again.";break;case 403:t.message="Access denied. The resource might be restricted.";break;case 404:t.message="Resource not found. Please check the input and try again.";break;case 429:t.message="Too many requests. Please try again later.";break;case 500:t.message="Server error. Please try again later.";break;default:t.message=e.response.data.message||"An error occurred while processing the request."}t.details=e.response.data}}else e.request?t.message="No response from server. Please check your connection and try again.":t.message=`Request error: ${e.message}`;return t}},Ce={processCitations:e=>e},xe=()=>{const t=e(null),a=e(null);return{analyzeContent:async(e,s,l={})=>{var i,n,r,o,u;const d=Date.now(),c=await(async()=>(t.value||(t.value=(await P((async()=>{const{default:e}=await Promise.resolve().then((()=>U));return{default:e}}),void 0)).default),t.value))();a.value=setTimeout((()=>{throw new Error("Processing timed out. The content might be too large or the server might be slow to respond.")}),fe.PROCESSING_TIMEOUT);try{let t,r={extract_citations:!0,validate_citations:!0,...l};if("url"===s&&e.url){const t=e.url.toLowerCase();fe.PDF_EXTENSIONS.some((e=>t.endsWith(e)))&&(r={...r,content_type:fe.CONTENT_TYPES.PDF,pdf_options:{extract_metadata:!0,extract_images:!1,extract_tables:!1,preserve_formatting:!0}})}if(e instanceof File||e instanceof Blob){const a=new FormData;a.append("file",e),a.append("type",s),a.append("options",JSON.stringify(r)),t=await c.post("/analyze",a,{timeout:fe.PROCESSING_TIMEOUT,headers:{}})}else e instanceof FormData?(e.append("type",s),e.append("options",JSON.stringify(r)),t=await c.post("/analyze",e,{timeout:fe.PROCESSING_TIMEOUT,headers:{}})):t=await c.post("/analyze",{...e,type:s,options:r},{timeout:fe.PROCESSING_TIMEOUT});a.value&&clearTimeout(a.value);const o=t.data||{};if(o.task_id&&("processing"===o.status||"queued"===o.status)){console.log("Task started, polling for results:",o.task_id);let t=0;const a=60;let n=null;for(;t<a;){await new Promise((e=>setTimeout(e,2e3)));const r=await c.get(`/task_status/${o.task_id}`);if(r.data&&"completed"===r.data.status){console.log("Task completed, returning results");const t=r.data,a=t.citations||[],l=a.some((e=>{var t,a;return(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)}))?"Valid":"Invalid";return{...t,citations:a,validation_results:a,status:l,taskProgress:{...t,progress:100,status:"completed"},metadata:{...t.metadata,processing_time:Date.now()-d,content_type:t.content_type||("url"===s&&(null==(i=e.url)?void 0:i.toLowerCase().endsWith(".pdf"))?fe.CONTENT_TYPES.PDF:void 0),content_length:t.content_length}}}if(r.data&&"failed"===r.data.status)throw new Error(r.data.error||"Task failed");if(!r.data||"processing"!==r.data.status&&"queued"!==r.data.status)t++;else{const e=r.data.progress||0,s=r.data.status_message||"Processing...",i=r.data.current_step||"Processing",u=r.data.estimated_time_remaining;n={...r.data,task_id:o.task_id,attempts:t+1,max_attempts:a,progress:e,status_message:s,current_step:i,estimated_time_remaining:u},l.onProgress&&"function"==typeof l.onProgress&&l.onProgress(n),console.log(`Task ${o.task_id} progress: ${e}% - ${s}`),t++}}throw new Error("Task timed out")}const u=o.citations||o.validation_results||[],v=u.some((e=>{var t,a;return(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)}))?"Valid":"Invalid";return{...o,citations:u,validation_results:u,status:v,metadata:{...o.metadata,processing_time:Date.now()-d,content_type:o.content_type||("url"===s&&(null==(n=e.url)?void 0:n.toLowerCase().endsWith(".pdf"))?fe.CONTENT_TYPES.PDF:void 0),content_length:o.content_length}}}catch(v){throw a.value&&clearTimeout(a.value),"url"===s&&(null==(r=e.url)?void 0:r.toLowerCase().endsWith(".pdf"))&&("ECONNABORTED"===v.code?v.message="PDF download timed out. The file might be too large or the server might be slow to respond.":404===(null==(o=v.response)?void 0:o.status)?v.message="PDF file not found. Please check if the URL is correct and the file is accessible.":403===(null==(u=v.response)?void 0:u.status)&&(v.message="Access to the PDF file is restricted. The file might require authentication.")),he.createErrorObject(v)}},cleanup:()=>{a.value&&(clearTimeout(a.value),a.value=null)},CONSTANTS:fe,validators:be,textUtils:ye,errorUtils:he,citationUtils:Ce}},ke={class:"file-upload"},we={class:"card"},_e={class:"card-body"},Te={key:0,class:"alert alert-danger"},Se={class:"mb-3"},Re={key:1,class:"mb-3"},Ne={class:"alert alert-info"},Pe={key:2,class:"mb-3"},Ae={class:"progress"},Ee=["aria-valuenow"],Le=["disabled"],Ue={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},Ie={key:3,class:"mt-4"},Ve={key:0},De={key:1},Me={class:"list-group mt-2"},$e={key:2,class:"mt-3"};const Fe=N({name:"FileUpload",emits:["results","error","loading","progress"],setup(a,{emit:s}){const l=e(null),i=e(!1),n=e(null),r=e(null),o=e(0),u=e(null),{analyzeContent:d,cleanup:c,validators:v}=xe();t((()=>{c()}));const m=e=>{const t=e.citation||e.text||e.citation_text||"Unknown Citation",a=[/^filed\s+\d+$/i,/^page\s+\d+$/i,/^docket\s+\d+$/i,/^\d+\s+filed\s+\d+$/i,/^\d+\s+page\s+\d+$/i,/^\d+\s+docket\s+\d+$/i];for(const l of a)if(l.test(t))return!1;const s=[/\d+\s+[A-Z]\.\s*\d+/i,/\d+\s+[A-Z]{2,}\.\s*\d+/i,/\d+\s+WL\s+\d+/i,/\d+\s+U\.S\.\s+\d+/i,/\d+\s+S\.\s*Ct\.\s+\d+/i,/\d+\s+[A-Z]\.\s*App\.\s*\d+/i];for(const l of s)if(l.test(t))return!0;return!1};return{file:l,isAnalyzing:i,error:n,results:r,uploadProgress:o,taskProgress:u,handleFileChange:e=>{const t=e.target.files[0];if(t)try{v.validateFile(t),l.value=t,n.value=null}catch(a){n.value=a.message,l.value=null,e.target.value=""}},uploadFile:async()=>{var e,t;if(l.value)try{v.validateFile(l.value),i.value=!0,n.value=null,r.value=null,o.value=0,s("loading",!0);try{const e=new FormData;e.append("file",l.value),e.append("type","file"),e.append("options",JSON.stringify({extract_citations:!0,validate_citations:!0,preserve_formatting:!0,extract_metadata:!0,source_name:l.value.name,source_type:"file"})),console.log("Starting file upload:",{fileName:l.value.name,fileSize:l.value.size,fileType:l.value.type});const t=await d(e,"file",{onUploadProgress:e=>{const t=Math.round(95*e.loaded/e.total);o.value=t,console.log("Upload progress:",t+"%")},onProgress:e=>{u.value=e,s("progress",e),console.log("Task progress:",e),e.progress>0&&(o.value=100)}});console.log("File upload completed:",{taskId:t.task_id,status:t.status,message:t.message}),o.value=100,r.value=t,s("results",t)}catch(a){console.error("File upload error:",{error:a,message:a.message,response:null==(e=a.response)?void 0:e.data}),a.response?413===a.response.status?n.value="File is too large. Please try a smaller file.":415===a.response.status?n.value="Unsupported file type. Please upload a PDF, Word document, or text file.":429===a.response.status?n.value="Too many requests. Please wait a moment before trying again.":n.value=(null==(t=a.response.data)?void 0:t.message)||`Upload failed: ${a.response.status} ${a.response.statusText}`:"ECONNABORTED"===a.code?n.value="Upload timed out. Please try again.":n.value=a.message||"An error occurred during file upload.",s("error",n.value)}}catch(a){n.value=a.message,s("error",{message:a.message,status:400})}finally{i.value=!1,s("loading",!1)}else n.value="Please select a file to analyze"},formatFileSize:e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},getAlertClass:e=>({"alert-success":!0===e,"alert-danger":!1===e,"alert-info":null==e}),getStatusBadgeClass:e=>{var t,a;return e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists?"bg-success":m(e)?"bg-warning text-dark":"bg-danger"},getStatusText:e=>{var t,a;return e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists?"Verified":m(e)?"Valid but Not Verified":"Invalid"},isValidCitationFormat:m}}},[["render",function(e,t,a,s,g,p){return i(),l("div",ke,[n("div",we,[t[9]||(t[9]=n("div",{class:"card-header bg-primary text-white"},[n("h5",{class:"mb-0"},"Upload Document")],-1)),n("div",_e,[s.error?(i(),l("div",Te,[t[2]||(t[2]=n("strong",null,"Error:",-1)),m(" "+u(s.error),1)])):r("",!0),n("div",Se,[t[3]||(t[3]=n("label",{for:"fileUpload",class:"form-label"},"Select a file to analyze for citations",-1)),n("input",{type:"file",id:"fileUpload",class:"form-control",onChange:t[0]||(t[0]=(...e)=>s.handleFileChange&&s.handleFileChange(...e)),accept:".pdf,.docx,.txt,.rtf,.doc,.html,.htm"},null,32),t[4]||(t[4]=n("div",{class:"form-text"},"Supported formats: PDF, DOCX, TXT, RTF, DOC, HTML",-1))]),s.file?(i(),l("div",Re,[n("div",Ne,[t[5]||(t[5]=n("strong",null,"Selected file:",-1)),m(" "+u(s.file.name)+" ("+u(s.formatFileSize(s.file.size))+") ",1)])])):r("",!0),s.uploadProgress>0&&s.uploadProgress<100?(i(),l("div",Pe,[n("div",Ae,[n("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:o({width:s.uploadProgress+"%"}),"aria-valuenow":s.uploadProgress,"aria-valuemin":"0","aria-valuemax":"100"},u(s.uploadProgress)+"% ",13,Ee)])])):r("",!0),n("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>s.uploadFile&&s.uploadFile(...e)),disabled:!s.file||s.isAnalyzing},[s.isAnalyzing?(i(),l("span",Ue)):r("",!0),m(" "+u(s.isAnalyzing?"Analyzing...":"Analyze Document"),1)],8,Le),s.results?(i(),l("div",Ie,[t[8]||(t[8]=n("h5",null,"Analysis Results",-1)),n("div",{class:d(["alert",s.getAlertClass(s.results.valid)])},[n("p",null,[t[6]||(t[6]=n("strong",null,"Status:",-1)),m(" "+u(s.results.valid?"Valid":"Invalid"),1)]),s.results.message?(i(),l("p",Ve,u(s.results.message),1)):r("",!0),s.results.citations&&s.results.citations.length>0?(i(),l("div",De,[n("h6",null,"Found "+u(s.results.citations.length)+" citations:",1),n("ul",Me,[(i(!0),l(c,null,v(s.results.citations,((e,t)=>(i(),l("li",{key:t,class:"list-group-item d-flex justify-content-between align-items-center"},[m(u(e.citation)+" ",1),n("span",{class:d(["badge rounded-pill",s.getStatusBadgeClass(e)])},u(s.getStatusText(e)),3)])))),128))])])):r("",!0),s.results.metadata?(i(),l("div",$e,[t[7]||(t[7]=n("h6",null,"Document Metadata:",-1)),n("pre",null,u(JSON.stringify(s.results.metadata,null,2)),1)])):r("",!0)],2)])):r("",!0)])])])}],["__scopeId","data-v-5c9ab65b"]]),Oe={class:"text-paste"},ze={class:"card"},qe={class:"card-body"},Be={key:0,class:"alert alert-danger"},je={class:"mb-3"},Xe=["disabled"],He={class:"form-check form-switch mb-3"},Ge=["disabled"],We={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},Ze={key:1,class:"mt-4"},Je={key:0},Ye={key:1},Ke=["disabled"],Qe={class:"table-responsive"},et={class:"table table-striped table-hover mt-2"},tt={key:0},at={key:0,class:"text-muted small"},st={key:0},lt={key:0,class:"context-preview"},it={key:1,class:"text-muted small"},nt=["onClick"],rt={key:2,class:"alert alert-info"},ot={key:3,class:"mt-3"},ut={class:"list-group"},dt={class:"list-group-item d-flex justify-content-between align-items-center"},ct={class:"badge bg-primary rounded-pill"},vt={class:"list-group-item d-flex justify-content-between align-items-center"},mt={class:"badge bg-success rounded-pill"},gt={class:"list-group-item d-flex justify-content-between align-items-center"},pt={class:"badge bg-danger rounded-pill"};const ft=N({name:"TextPaste",emits:["results","error","loading","progress"],setup(s,{emit:l}){const i=e(""),n=e(!1),r=e(null),o=e(null),u=e(!1),{analyzeContent:d,cleanup:c,validators:v,textUtils:m}=xe(),g=async()=>{if(i.value)try{v.validateText(i.value);const t=m.cleanText(i.value);n.value=!0,r.value=null,o.value=null,l("loading",!0);try{const e=await d({text:t},"text",{preserve_formatting:!0,onProgress:e=>{l("progress",e)}});o.value=e,l("results",e)}catch(e){r.value=e.message,l("error",e)}}catch(e){r.value=e.message,l("error",{message:e.message,status:400})}finally{n.value=!1,l("loading",!1)}else r.value="Please enter text to analyze"};t((()=>{c()}));const p=a((()=>o.value&&o.value.citations?o.value.citations.filter((e=>"retry"===e.status)):[])),f=e=>{const t=e.citation||e.text||e.citation_text||"Unknown Citation",a=[/^filed\s+\d+$/i,/^page\s+\d+$/i,/^docket\s+\d+$/i,/^\d+\s+filed\s+\d+$/i,/^\d+\s+page\s+\d+$/i,/^\d+\s+docket\s+\d+$/i];for(const l of a)if(l.test(t))return!1;const s=[/\d+\s+[A-Z]\.\s*\d+/i,/\d+\s+[A-Z]{2,}\.\s*\d+/i,/\d+\s+WL\s+\d+/i,/\d+\s+U\.S\.\s+\d+/i,/\d+\s+S\.\s*Ct\.\s+\d+/i,/\d+\s+[A-Z]\.\s*App\.\s*\d+/i];for(const l of s)if(l.test(t))return!0;return!1};return{text:i,isAnalyzing:n,error:r,results:o,includeContext:u,analyzeText:g,getAlertClass:e=>({"alert-success":!0===e,"alert-danger":!1===e,"alert-info":null==e}),retryCitations:p,retryAllCitations:()=>{0!==p.value.length&&(i.value=p.value.map((e=>e.citation)).join("\n"),g())},retrySingleCitation:e=>{i.value=e.citation,g()},getStatusBadgeClass:e=>{var t,a;return e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists?"bg-success":f(e)?"bg-warning text-dark":"bg-danger"},getStatusText:e=>{var t,a;return e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists?"Verified":f(e)?"Valid but Not Verified":"Invalid"},isValidCitationFormat:f}}},[["render",function(e,t,a,s,o,b){return i(),l("div",Oe,[n("div",ze,[t[16]||(t[16]=n("div",{class:"card-header bg-primary text-white"},[n("h5",{class:"mb-0"},"Paste Text")],-1)),n("div",qe,[s.error?(i(),l("div",Be,[t[4]||(t[4]=n("strong",null,"Error:",-1)),m(" "+u(s.error),1)])):r("",!0),n("div",je,[t[5]||(t[5]=n("label",{for:"textInput",class:"form-label"},"Paste your legal text to analyze for citations",-1)),g(n("textarea",{id:"textInput",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>s.text=e),rows:"10",placeholder:"Paste your legal document text here...",disabled:s.isAnalyzing},null,8,Xe),[[p,s.text]])]),n("div",He,[g(n("input",{class:"form-check-input",type:"checkbox",id:"includeContext","onUpdate:modelValue":t[1]||(t[1]=e=>s.includeContext=e)},null,512),[[f,s.includeContext]]),t[6]||(t[6]=n("label",{class:"form-check-label",for:"includeContext"},"Include context around citations",-1))]),n("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>s.analyzeText&&s.analyzeText(...e)),disabled:!s.text||s.isAnalyzing},[s.isAnalyzing?(i(),l("span",We)):r("",!0),m(" "+u(s.isAnalyzing?"Analyzing...":"Analyze Text"),1)],8,Ge),s.results?(i(),l("div",Ze,[n("pre",null,u(s.results),1),t[15]||(t[15]=n("h5",null,"Analysis Results",-1)),n("div",{class:d(["alert",s.getAlertClass(s.results.valid)])},[n("p",null,[t[7]||(t[7]=n("strong",null,"Status:",-1)),m(" "+u(s.results.valid?"Valid":"Invalid"),1)]),s.results.message?(i(),l("p",Je,u(s.results.message),1)):r("",!0),s.results.citations&&s.results.citations.length>0?(i(),l("div",Ye,[n("h6",null,"Found "+u(s.results.citations.length)+" citations:",1),s.retryCitations.length>0?(i(),l("button",{key:0,class:"btn btn-warning mb-2",onClick:t[3]||(t[3]=(...e)=>s.retryAllCitations&&s.retryAllCitations(...e)),disabled:s.isAnalyzing}," Retry All Failed ",8,Ke)):r("",!0),n("div",Qe,[n("table",et,[n("thead",null,[n("tr",null,[t[8]||(t[8]=n("th",null,"Citation",-1)),t[9]||(t[9]=n("th",null,"Status",-1)),s.includeContext?(i(),l("th",tt,"Context")):r("",!0),t[10]||(t[10]=n("th",null,"Actions",-1))])]),n("tbody",null,[(i(!0),l(c,null,v(s.results.citations,((e,t)=>(i(),l("tr",{key:t},[n("td",null,[n("strong",null,u(e.citation),1),e.correction?(i(),l("div",at," Suggested: "+u(e.correction),1)):r("",!0)]),n("td",null,[n("span",{class:d(["badge",s.getStatusBadgeClass(e)])},u(s.getStatusText(e)),3)]),s.includeContext?(i(),l("td",st,[e.context?(i(),l("div",lt,u(e.context),1)):(i(),l("div",it,"No context available"))])):r("",!0),n("td",null,["retry"===e.status?(i(),l("button",{key:0,class:"btn btn-sm btn-warning",onClick:t=>s.retrySingleCitation(e)}," Retry ",8,nt)):r("",!0)])])))),128))])])])])):(i(),l("div",rt," No citations found in the provided text. ")),s.results.summary?(i(),l("div",ot,[t[14]||(t[14]=n("h6",null,"Summary:",-1)),n("ul",ut,[n("li",dt,[t[11]||(t[11]=m(" Total Citations ")),n("span",ct,u(s.results.summary.total||0),1)]),n("li",vt,[t[12]||(t[12]=m(" Valid Citations ")),n("span",mt,u(s.results.summary.valid||0),1)]),n("li",gt,[t[13]||(t[13]=m(" Invalid Citations ")),n("span",pt,u(s.results.summary.invalid||0),1)])])])):r("",!0)],2)])):r("",!0)])])])}],["__scopeId","data-v-358abe76"]]),bt={class:"url-upload"},yt={class:"card"},ht={class:"card-body"},Ct={key:0,class:"alert alert-danger"},xt={class:"mb-3"},kt={class:"input-group"},wt=["disabled"],_t=["disabled"],Tt={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},St={key:1,class:"mt-4"},Rt={key:0},Nt={key:1},Pt={class:"table-responsive"},At={class:"table table-striped table-hover mt-2"},Et={key:0,class:"text-muted small"},Lt=["href"],Ut={key:1,class:"text-muted"},It={key:2,class:"alert alert-info"};const Vt=N({name:"UrlUpload",emits:["results","error","loading","progress"],setup(s,{emit:l}){const i=e(""),n=e(!1),r=e(null),o=e(null),{analyzeContent:u,cleanup:d,validators:c}=xe(),v=a((()=>{try{return c.validateUrl(i.value),!0}catch{return!1}}));t((()=>{d()}));const m=e=>{const t=e.citation||e.text||e.citation_text||"Unknown Citation",a=[/^filed\s+\d+$/i,/^page\s+\d+$/i,/^docket\s+\d+$/i,/^\d+\s+filed\s+\d+$/i,/^\d+\s+page\s+\d+$/i,/^\d+\s+docket\s+\d+$/i];for(const l of a)if(l.test(t))return!1;const s=[/\d+\s+[A-Z]\.\s*\d+/i,/\d+\s+[A-Z]{2,}\.\s*\d+/i,/\d+\s+WL\s+\d+/i,/\d+\s+U\.S\.\s+\d+/i,/\d+\s+S\.\s*Ct\.\s+\d+/i,/\d+\s+[A-Z]\.\s*App\.\s*\d+/i];for(const l of s)if(l.test(t))return!0;return!1};return{url:i,isAnalyzing:n,error:r,results:o,isValidUrl:v,analyzeUrl:async()=>{if(i.value)try{c.validateUrl(i.value),n.value=!0,r.value=null,o.value=null,l("loading",!0);try{const e=await u({url:i.value},"url",{follow_redirects:!0,timeout:3e4,onProgress:e=>{l("progress",e)}});o.value=e,l("results",e)}catch(e){r.value=e.message,l("error",e)}}catch(e){r.value=e.message,l("error",{message:e.message,status:400})}finally{n.value=!1,l("loading",!1)}else r.value="Please enter a URL to analyze"},getAlertClass:e=>({"alert-success":!0===e,"alert-danger":!1===e,"alert-info":null==e}),getStatusBadgeClass:e=>{var t,a;return e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists?"bg-success":m(e)?"bg-warning text-dark":"bg-danger"},getStatusText:e=>{var t,a;return e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists?"Verified":m(e)?"Valid but Not Verified":"Invalid"},isValidCitationFormat:m}}},[["render",function(e,t,a,s,o,f){return i(),l("div",bt,[n("div",yt,[t[11]||(t[11]=n("div",{class:"card-header bg-primary text-white"},[n("h5",{class:"mb-0"},"Analyze Web Content")],-1)),n("div",ht,[s.error?(i(),l("div",Ct,[t[3]||(t[3]=n("strong",null,"Error:",-1)),m(" "+u(s.error.message),1)])):r("",!0),n("div",xt,[t[5]||(t[5]=n("label",{for:"urlInput",class:"form-label"},"Enter a URL to analyze for citations",-1)),n("div",kt,[t[4]||(t[4]=n("span",{class:"input-group-text"},[n("i",{class:"bi bi-link-45deg"})],-1)),g(n("input",{type:"url",id:"urlInput",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>s.url=e),placeholder:"https://example.com/legal-document",disabled:s.isAnalyzing,onKeyup:t[1]||(t[1]=b(((...e)=>s.analyzeUrl&&s.analyzeUrl(...e)),["enter"]))},null,40,wt),[[p,s.url]]),n("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>s.analyzeUrl&&s.analyzeUrl(...e)),disabled:!s.isValidUrl||s.isAnalyzing},[s.isAnalyzing?(i(),l("span",Tt)):r("",!0),m(" "+u(s.isAnalyzing?"Analyzing...":"Analyze"),1)],8,_t)]),t[6]||(t[6]=n("div",{class:"form-text"},"Enter a valid URL to a web page containing legal citations",-1))]),s.results?(i(),l("div",St,[t[10]||(t[10]=n("h5",null,"Analysis Results",-1)),n("div",{class:d(["alert",s.getAlertClass(s.results.valid)])},[n("p",null,[t[7]||(t[7]=n("strong",null,"Status:",-1)),m(" "+u(s.results.valid?"Valid":"Invalid"),1)]),s.results.message?(i(),l("p",Rt,u(s.results.message),1)):r("",!0),s.results.citations&&s.results.citations.length>0?(i(),l("div",Nt,[n("h6",null,"Found "+u(s.results.citations.length)+" citations:",1),n("div",Pt,[n("table",At,[t[9]||(t[9]=n("thead",null,[n("tr",null,[n("th",null,"Citation"),n("th",null,"Status"),n("th",null,"Source")])],-1)),n("tbody",null,[(i(!0),l(c,null,v(s.results.citations,((e,a)=>(i(),l("tr",{key:a},[n("td",null,[n("strong",null,u(e.citation),1),e.correction?(i(),l("div",Et," Suggested: "+u(e.correction),1)):r("",!0)]),n("td",null,[n("span",{class:d(["badge",s.getStatusBadgeClass(e)])},u(s.getStatusText(e)),3)]),n("td",null,[e.url?(i(),l("a",{key:0,href:e.url,target:"_blank",class:"text-decoration-none"},t[8]||(t[8]=[n("i",{class:"bi bi-box-arrow-up-right me-1"},null,-1),m("View Source ")]),8,Lt)):(i(),l("span",Ut,"N/A"))])])))),128))])])])])):(i(),l("div",It," No citations found in the provided URL content. "))],2)])):r("",!0)])])])}],["__scopeId","data-v-a7a2eaf0"]]),Dt={name:"CitationResults",props:{results:{type:Object,default:()=>({citations:[],metadata:{}})},loading:{type:Boolean,default:!1},error:{type:String,default:""},taskProgress:{type:Object,default:()=>({})}},emits:["new-analysis","apply-correction"],setup(t,{emit:s}){const l=e(null),i=e("all"),n=a((()=>{var e,a;return(null==(a=null==(e=t.results)?void 0:e.citations)?void 0:a.filter((e=>{var t,a;return e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists})).length)||0})),r=a((()=>{var e;return(null==(e=t.results)?void 0:e.citations)?t.results.citations.filter((e=>{var t,a;return!(e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists)&&C(e)})):[]})),o=a((()=>r.value.length)),u=a((()=>{var e,a;return(null==(a=null==(e=t.results)?void 0:e.citations)?void 0:a.filter((e=>{var t,a;return!(e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists||C(e))})).length)||0})),d=a((()=>{var e,a;return(null==(a=null==(e=t.results)?void 0:e.citations)?void 0:a.filter((e=>{var t,a;return((null==(t=e.data)?void 0:t.confidence)??0)>=.4&&((null==(a=e.data)?void 0:a.confidence)??0)<.7})).length)||0})),c=a((()=>{var e;return(null==(e=t.results)?void 0:e.citations)?t.results.citations.filter((e=>{var t,a;return e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists})):[]})),v=a((()=>{var e;return(null==(e=t.results)?void 0:e.citations)?t.results.citations.filter((e=>{var t,a;return!(e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists)})):[]})),m=a((()=>b.value.filter((e=>w(e))))),g=a((()=>m.value.length)),p=a((()=>{switch(i.value){case"verified":return c.value;case"validButNotVerified":return r.value;case"caseNameMismatches":return m.value;case"invalid":return v.value;default:return b.value}})),f=a((()=>t.results&&t.results.citations&&t.results.citations.length>0)),b=a((()=>{var e;return(null==(e=t.results)?void 0:e.citations)?[...t.results.citations].sort(((e,t)=>{var a,s,l,i,n,r;const o=e.valid||e.verified||(null==(a=e.data)?void 0:a.valid)||(null==(s=e.data)?void 0:s.found)||e.exists;if(o!==(t.valid||t.verified||(null==(l=t.data)?void 0:l.valid)||(null==(i=t.data)?void 0:i.found)||t.exists))return o?-1:1;const u=C(e);if(u!==C(t))return u?-1:1;const d=(null==(n=e.data)?void 0:n.confidence)??0;return((null==(r=t.data)?void 0:r.confidence)??0)-d})):[]}));function y(e){return e.citation||e.text||e.citation_text||"Unknown Citation"}function h(e){var t,a,s,l;return(null==(l=null==(s=null==(a=null==(t=e.data)?void 0:t.details)?void 0:a[0])?void 0:s.clusters)?void 0:l[0])||null}function C(e){const t=y(e),a=[/^filed\s+\d+$/i,/^page\s+\d+$/i,/^docket\s+\d+$/i,/^\d+\s+filed\s+\d+$/i,/^\d+\s+page\s+\d+$/i,/^\d+\s+docket\s+\d+$/i];for(const l of a)if(l.test(t))return!1;const s=[/\d+\s+[A-Z]\.\s*\d+/i,/\d+\s+[A-Z]{2,}\.\s*\d+/i,/\d+\s+WL\s+\d+/i,/\d+\s+U\.S\.\s+\d+/i,/\d+\s+S\.\s*Ct\.\s+\d+/i,/\d+\s+[A-Z]\.\s*App\.\s*\d+/i];for(const l of s)if(l.test(t))return!0;return!1}function x(e){return e.extracted_case_name||e.case_name||"Not extracted"}function k(e){var t;return(null==(t=e.data)?void 0:t.case_name)?e.data.case_name:e.verified_case_name?e.verified_case_name:e.case_name?e.case_name:"Not verified"}function w(e){const t=x(e),a=k(e);if("Not extracted"===t||"Not verified"===a)return!1;if(void 0!==e.case_name_similarity)return e.case_name_similarity<.3;const s=t.toLowerCase().split(/\s+/).filter((e=>e.length>2)),l=a.toLowerCase().split(/\s+/).filter((e=>e.length>2));return s.filter((e=>l.includes(e))).length/Math.max(s.length,l.length)<.3}return{expandedCitation:l,activeTab:i,validCount:n,validButNotVerifiedCitations:r,validButNotVerifiedCount:o,invalidCount:u,lowConfidenceCount:d,showResults:f,sortedCitations:b,verifiedCitations:c,invalidCitations:v,currentTabCitations:p,getCitationText:y,getCaseName:function(e){const t=h(e);return(null==t?void 0:t.case_name)||"N/A"},getExtractedCaseName:x,getVerifiedCaseName:k,isCaseNameMismatch:w,getCourtInfo:function(e){const t=h(e);return(null==t?void 0:t.court)||"N/A"},getDateFiled:function(e){const t=h(e);return(null==t?void 0:t.date_filed)||"N/A"},getPrecedentialStatus:function(e){const t=h(e);return(null==t?void 0:t.precedential_status)||"N/A"},getCitationUrl:function(e){const t=h(e);return(null==t?void 0:t.absolute_url)?`https://www.courtlistener.com${t.absolute_url}`:null},getStatusBadgeClass:function(e){var t,a;return e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists?"bg-success":C(e)?"bg-warning text-dark":"bg-danger"},getStatusText:function(e){var t,a;return e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists?"Verified":C(e)?"Valid but Not Verified":"Invalid"},toggleDetails:e=>{l.value=l.value===e?null:e},startNewAnalysis:()=>{s("new-analysis")},applyCorrection:e=>{s("apply-correction",e)},downloadResults:e=>{console.log(`Downloading results as ${e}`)},copyToClipboard:()=>{console.log("Copying results to clipboard")},formatTimeRemaining:e=>{if(!e||e<=0)return"Complete";if(e<60)return`${e}s`;return`${Math.floor(e/60)}m ${e%60}s`},formatTimestamp:e=>{if(!e)return"Unknown";try{return new Date(e).toLocaleTimeString()}catch{return"Invalid"}},caseNameMismatches:m,caseNameMismatchCount:g}}},Mt={class:"citation-results"},$t={key:0,class:"text-center my-4"},Ft={key:1,class:"progress-container my-4"},Ot={class:"card"},zt={class:"card-body"},qt={class:"d-flex justify-content-between align-items-center mb-2"},Bt={class:"badge bg-primary"},jt={class:"progress mb-3",style:{height:"20px"}},Xt=["aria-valuenow"],Ht={class:"d-flex justify-content-between align-items-center"},Gt={class:"mb-1 text-muted"},Wt={class:"mb-0 small text-muted"},Zt={key:0,class:"text-end"},Jt={class:"mb-0 small text-muted"},Yt={class:"mt-3 pt-3 border-top"},Kt={class:"row text-center"},Qt={class:"col-4"},ea={class:"font-monospace small"},ta={class:"col-4"},aa={class:"small"},sa={class:"col-4"},la={class:"small"},ia={key:2,class:"alert alert-danger"},na={class:"mb-0"},ra={key:3,class:"results-container"},oa={class:"d-flex justify-content-between align-items-center mb-3"},ua={class:"badge bg-primary me-2"},da={class:"badge bg-success me-2"},ca={key:0,class:"badge bg-warning text-dark me-2"},va={class:"badge bg-danger"},ma={key:0,class:"card mb-3"},ga={class:"card-body p-2"},pa={class:"list-group list-group-flush"},fa={class:"list-group-item d-flex justify-content-between align-items-center"},ba={class:"badge bg-secondary"},ya={class:"list-group-item d-flex justify-content-between align-items-center"},ha={class:"badge bg-secondary"},Ca={class:"list-group-item d-flex justify-content-between align-items-center"},xa={class:"badge bg-info"},ka={class:"list-group-item d-flex justify-content-between align-items-center"},wa={class:"badge bg-success"},_a={class:"list-group-item d-flex justify-content-between align-items-center"},Ta={class:"badge bg-primary"},Sa={class:"list-group-item d-flex justify-content-between align-items-center"},Ra={class:"badge bg-warning text-dark"},Na={class:"list-group-item d-flex justify-content-between align-items-center"},Pa={class:"badge bg-dark"},Aa={class:"list-group-item d-flex justify-content-between align-items-center"},Ea={class:"badge bg-danger"},La={class:"nav nav-tabs mb-3",id:"citationTabs",role:"tablist"},Ua={class:"nav-item",role:"presentation"},Ia={class:"nav-item",role:"presentation"},Va={class:"nav-item",role:"presentation"},Da={class:"nav-item",role:"presentation"},Ma={class:"nav-item",role:"presentation"},$a={class:"tab-content"},Fa={class:"table-responsive"},Oa={class:"table table-hover"},za={class:"d-flex align-items-center"},qa=["href"],Ba={key:1,class:"citation-text"},ja=["onClick"],Xa={key:0,class:"text-muted small mt-1"},Ha=["href"],Ga={key:2,class:"text-warning small"},Wa=["onClick"],Za={class:"table-responsive"},Ja={class:"table table-hover"},Ya={class:"d-flex align-items-center"},Ka=["href"],Qa={key:1,class:"citation-text"},es=["onClick"],ts={key:0,class:"text-muted small mt-1"},as=["href"],ss={key:2,class:"text-warning small"},ls=["onClick"],is={class:"table-responsive"},ns={class:"table table-hover"},rs={class:"d-flex align-items-center"},os=["href"],us={key:1,class:"citation-text"},ds=["onClick"],cs={key:0,class:"text-muted small mt-1"},vs=["href"],ms={key:2,class:"text-warning small"},gs=["onClick"],ps={class:"table-responsive"},fs={class:"table table-hover"},bs={class:"d-flex align-items-center"},ys=["href"],hs={key:1,class:"citation-text"},Cs=["onClick"],xs={key:0,class:"text-muted small mt-1"},ks=["href"],ws={key:2,class:"text-warning small"},_s=["onClick"],Ts={class:"table-responsive"},Ss={class:"table table-hover"},Rs={class:"d-flex align-items-center"},Ns=["href"],Ps={key:1,class:"citation-text"},As=["onClick"],Es={key:0,class:"text-muted small mt-1"},Ls=["href"],Us={key:2,class:"text-warning small"},Is=["onClick"],Vs={class:"card-header"},Ds={class:"mb-0"},Ms={class:"card-body"},$s={class:"row"},Fs={class:"col-md-6"},Os={class:"row"},zs={class:"col-sm-8"},qs={key:0,class:"ms-2 badge bg-warning text-dark"},Bs={class:"col-sm-8"},js={class:"text-capitalize"},Xs=["href"],Hs={class:"col-sm-8"},Gs={key:0},Ws={class:"text-muted"},Zs={key:1},Js={key:2},Ys={key:3},Ks={class:"col-sm-8"},Qs={class:"progress",style:{height:"20px"}},el=["aria-valuenow"],tl={class:"col-md-6"},al={class:"row"},sl={class:"col-sm-8"},ll={key:0,class:"alert alert-warning mt-3"},il={key:1,class:"mt-3"},nl={class:"bg-light p-2 rounded"},rl={class:"d-flex justify-content-between align-items-center mt-4"},ol={key:4,class:"text-center py-5"};const ul={class:"enhanced-validator container-fluid py-3"},dl={class:"row"},cl={class:"col-12"},vl={class:"nav nav-tabs mb-4",role:"tablist"},ml=["onClick","aria-selected"],gl={class:"tab-content p-3 border border-top-0 rounded-bottom"},pl={key:0,class:"tab-pane fade show active"},fl={class:"mb-3"},bl={class:"input-group"},yl=["disabled"],hl={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Cl={key:1,class:"tab-pane fade show active"},xl={key:2,class:"tab-pane fade show active"},kl={key:3,class:"tab-pane fade show active"},wl={key:0},_l={key:1,class:"alert alert-info mt-4"},Tl={key:1},Sl={key:1,class:"alert alert-info mt-4"},Rl={key:2},Nl={key:1,class:"alert alert-info mt-4"},Pl={key:3},Al={key:1,class:"alert alert-info mt-4"},El={key:4,class:"mt-5"},Ll={class:"d-flex justify-content-between align-items-center mb-3"},Ul={class:"list-group"},Il={class:"fw-bold"},Vl=["onClick"],Dl=["onClick"],Ml={class:"badge bg-primary"},$l={class:"badge bg-success"},Fl={class:"badge bg-danger"},Ol={key:5,class:"processing-overlay"};const zl=N({name:"EnhancedValidator",components:{FileUpload:Fe,TextPaste:ft,UrlUpload:Vt,CitationResults:N(Dt,[["render",function(e,t,a,s,p,f){var b,h,C;return i(),l("div",Mt,[a.loading?(i(),l("div",$t,t[9]||(t[9]=[n("div",{class:"spinner-border text-primary",role:"status"},[n("span",{class:"visually-hidden"},"Loading...")],-1),n("p",{class:"mt-2"},"Analyzing citations...",-1)]))):a.taskProgress&&"queued"===a.taskProgress.status?(i(),l("div",Ft,[n("div",Ot,[n("div",zt,[n("div",qt,[t[10]||(t[10]=n("h6",{class:"mb-0"},"Processing Document",-1)),n("span",Bt,u(a.taskProgress.progress||0)+"%",1)]),n("div",jt,[n("div",{class:"progress-bar progress-bar-striped progress-bar-animated",style:o({width:(a.taskProgress.progress||0)+"%"}),role:"progressbar","aria-valuenow":a.taskProgress.progress||0,"aria-valuemin":"0","aria-valuemax":"100"},u(a.taskProgress.progress||0)+"% ",13,Xt)]),n("div",Ht,[n("div",null,[n("p",Gt,[t[11]||(t[11]=n("i",{class:"bi bi-info-circle me-1"},null,-1)),m(" "+u(a.taskProgress.status_message||"Processing..."),1)]),n("p",Wt,[t[12]||(t[12]=n("i",{class:"bi bi-gear me-1"},null,-1)),m(" "+u(a.taskProgress.current_step||"Unknown step"),1)])]),a.taskProgress.estimated_time_remaining?(i(),l("div",Zt,[n("p",Jt,[t[13]||(t[13]=n("i",{class:"bi bi-clock me-1"},null,-1)),m(" Est. "+u(s.formatTimeRemaining(a.taskProgress.estimated_time_remaining)),1)])])):r("",!0)]),n("div",Yt,[n("div",Kt,[n("div",Qt,[t[14]||(t[14]=n("div",{class:"small text-muted"},"Task ID",-1)),n("div",ea,u(null==(b=a.taskProgress.task_id)?void 0:b.substring(0,8))+"...",1)]),n("div",ta,[t[15]||(t[15]=n("div",{class:"small text-muted"},"Type",-1)),n("div",aa,u((null==(h=a.taskProgress.metadata)?void 0:h.source_type)||"Unknown"),1)]),n("div",sa,[t[16]||(t[16]=n("div",{class:"small text-muted"},"Started",-1)),n("div",la,u(s.formatTimestamp(null==(C=a.taskProgress.metadata)?void 0:C.timestamp)),1)])])])])])])):a.error?(i(),l("div",ia,[t[17]||(t[17]=n("h5",{class:"alert-heading"},"Error",-1)),n("p",na,u(a.error),1)])):a.results&&a.results.citations&&a.results.citations.length>0?(i(),l("div",ra,[n("div",oa,[t[18]||(t[18]=n("h4",{class:"mb-0"},"Citation Analysis Results",-1)),n("div",null,[n("span",ua," Total: "+u(a.results.citations.length),1),n("span",da," Verified: "+u(s.validCount),1),s.validButNotVerifiedCount>0?(i(),l("span",ca," Valid but Not Verified: "+u(s.validButNotVerifiedCount),1)):r("",!0),n("span",va," Invalid: "+u(s.invalidCount),1)])]),a.results.stats?(i(),l("div",ma,[t[27]||(t[27]=n("div",{class:"card-header bg-light"},[n("strong",null,"Citation Processing Breakdown")],-1)),n("div",ga,[n("ul",pa,[n("li",fa,[t[19]||(t[19]=n("span",null,"Total Extracted",-1)),n("span",ba,u(a.results.stats.total_extracted),1)]),n("li",ya,[t[20]||(t[20]=n("span",null,"Deduplicated",-1)),n("span",ha,u(a.results.stats.deduplicated),1)]),n("li",Ca,[t[21]||(t[21]=n("span",null,"Verified in Cache",-1)),n("span",xa,u(a.results.stats.verified_in_cache),1)]),n("li",ka,[t[22]||(t[22]=n("span",null,"Verified in JSON Array",-1)),n("span",wa,u(a.results.stats.verified_in_json_array),1)]),n("li",_a,[t[23]||(t[23]=n("span",null,"Verified in Text Blob",-1)),n("span",Ta,u(a.results.stats.verified_in_text_blob),1)]),n("li",Sa,[t[24]||(t[24]=n("span",null,"Verified in Single Lookup",-1)),n("span",Ra,u(a.results.stats.verified_in_single),1)]),n("li",Na,[t[25]||(t[25]=n("span",null,"Verified in LangSearch",-1)),n("span",Pa,u(a.results.stats.verified_in_langsearch),1)]),n("li",Aa,[t[26]||(t[26]=n("span",null,"Not Verified",-1)),n("span",Ea,u(a.results.stats.not_verified),1)])])])])):r("",!0),n("ul",La,[n("li",Ua,[n("button",{class:d(["nav-link",{active:"all"===s.activeTab}]),onClick:t[0]||(t[0]=e=>s.activeTab="all"),type:"button",role:"tab"}," All Citations ("+u(a.results.citations.length)+") ",3)]),n("li",Ia,[n("button",{class:d(["nav-link",{active:"verified"===s.activeTab}]),onClick:t[1]||(t[1]=e=>s.activeTab="verified"),type:"button",role:"tab"}," Verified ("+u(s.validCount)+") ",3)]),n("li",Va,[n("button",{class:d(["nav-link",{active:"validButNotVerified"===s.activeTab}]),onClick:t[2]||(t[2]=e=>s.activeTab="validButNotVerified"),type:"button",role:"tab"}," Valid but Not Verified ("+u(s.validButNotVerifiedCount)+") ",3)]),n("li",Da,[n("button",{class:d(["nav-link",{active:"caseNameMismatches"===s.activeTab}]),onClick:t[3]||(t[3]=e=>s.activeTab="caseNameMismatches"),type:"button",role:"tab"}," Case Name Mismatches ("+u(s.caseNameMismatchCount)+") ",3)]),n("li",Ma,[n("button",{class:d(["nav-link",{active:"invalid"===s.activeTab}]),onClick:t[4]||(t[4]=e=>s.activeTab="invalid"),type:"button",role:"tab"}," Invalid ("+u(s.invalidCount)+") ",3)])]),n("div",$a,[n("div",{class:d(["tab-pane fade",{"show active":"all"===s.activeTab}])},[n("div",Fa,[n("table",Oa,[t[31]||(t[31]=n("thead",null,[n("tr",null,[n("th",null,"Citation"),n("th",null,"Status"),n("th",null,"Extracted Case Name"),n("th",null,"Verified Case Name"),n("th",null,"Details")])],-1)),n("tbody",null,[(i(!0),l(c,null,v(s.sortedCitations,((e,a)=>(i(),l("tr",{key:a,class:"align-middle"},[n("td",null,[n("div",za,[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener",class:"citation-text"},u(s.getCitationText(e)),9,qa)):(i(),l("span",Ba,u(s.getCitationText(e)),1)),e.correction?(i(),l("button",{key:2,class:"btn btn-sm btn-outline-secondary ms-2",onClick:t=>s.applyCorrection(e),title:"Apply correction"},t[28]||(t[28]=[n("i",{class:"bi bi-arrow-clockwise"},null,-1)]),8,ja)):r("",!0)]),e.correction?(i(),l("div",Xa,[t[29]||(t[29]=n("i",{class:"bi bi-lightbulb"},null,-1)),m(" Suggested: "+u(e.correction),1)])):r("",!0)]),n("td",null,[n("span",{class:d(["badge",s.getStatusBadgeClass(e)])},u(s.getStatusText(e)),3)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},u(s.getExtractedCaseName(e)),3)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener"},u(s.getVerifiedCaseName(e)),9,Ha)):(i(),l(c,{key:1},[m(u(s.getVerifiedCaseName(e)),1)],64)),s.isCaseNameMismatch(e)?(i(),l("div",Ga,t[30]||(t[30]=[n("i",{class:"bi bi-exclamation-triangle"},null,-1),m(" Low similarity ")]))):r("",!0)],2)]),n("td",null,[n("button",{class:"btn btn-sm btn-outline-primary",onClick:e=>s.toggleDetails(a)},u(s.expandedCitation===a?"Hide":"View")+" Details ",9,Wa)])])))),128))])])])],2),n("div",{class:d(["tab-pane fade",{"show active":"verified"===s.activeTab}])},[n("div",Za,[n("table",Ja,[t[35]||(t[35]=n("thead",null,[n("tr",null,[n("th",null,"Citation"),n("th",null,"Status"),n("th",null,"Extracted Case Name"),n("th",null,"Verified Case Name"),n("th",null,"Details")])],-1)),n("tbody",null,[(i(!0),l(c,null,v(s.verifiedCitations,((e,a)=>(i(),l("tr",{key:"verified-"+a,class:"align-middle"},[n("td",null,[n("div",Ya,[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener",class:"citation-text"},u(s.getCitationText(e)),9,Ka)):(i(),l("span",Qa,u(s.getCitationText(e)),1)),e.correction?(i(),l("button",{key:2,class:"btn btn-sm btn-outline-secondary ms-2",onClick:t=>s.applyCorrection(e),title:"Apply correction"},t[32]||(t[32]=[n("i",{class:"bi bi-arrow-clockwise"},null,-1)]),8,es)):r("",!0)]),e.correction?(i(),l("div",ts,[t[33]||(t[33]=n("i",{class:"bi bi-lightbulb"},null,-1)),m(" Suggested: "+u(e.correction),1)])):r("",!0)]),n("td",null,[n("span",{class:d(["badge",s.getStatusBadgeClass(e)])},u(s.getStatusText(e)),3)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},u(s.getExtractedCaseName(e)),3)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener"},u(s.getVerifiedCaseName(e)),9,as)):(i(),l(c,{key:1},[m(u(s.getVerifiedCaseName(e)),1)],64)),s.isCaseNameMismatch(e)?(i(),l("div",ss,t[34]||(t[34]=[n("i",{class:"bi bi-exclamation-triangle"},null,-1),m(" Low similarity ")]))):r("",!0)],2)]),n("td",null,[n("button",{class:"btn btn-sm btn-outline-primary",onClick:e=>s.toggleDetails("verified-"+a)},u(s.expandedCitation==="verified-"+a?"Hide":"View")+" Details ",9,ls)])])))),128))])])])],2),n("div",{class:d(["tab-pane fade",{"show active":"validButNotVerified"===s.activeTab}])},[n("div",is,[n("table",ns,[t[39]||(t[39]=n("thead",null,[n("tr",null,[n("th",null,"Citation"),n("th",null,"Status"),n("th",null,"Extracted Case Name"),n("th",null,"Verified Case Name"),n("th",null,"Details")])],-1)),n("tbody",null,[(i(!0),l(c,null,v(s.validButNotVerifiedCitations,((e,a)=>(i(),l("tr",{key:"validButNotVerified-"+a,class:"align-middle"},[n("td",null,[n("div",rs,[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener",class:"citation-text"},u(s.getCitationText(e)),9,os)):(i(),l("span",us,u(s.getCitationText(e)),1)),e.correction?(i(),l("button",{key:2,class:"btn btn-sm btn-outline-secondary ms-2",onClick:t=>s.applyCorrection(e),title:"Apply correction"},t[36]||(t[36]=[n("i",{class:"bi bi-arrow-clockwise"},null,-1)]),8,ds)):r("",!0)]),e.correction?(i(),l("div",cs,[t[37]||(t[37]=n("i",{class:"bi bi-lightbulb"},null,-1)),m(" Suggested: "+u(e.correction),1)])):r("",!0)]),n("td",null,[n("span",{class:d(["badge",s.getStatusBadgeClass(e)])},u(s.getStatusText(e)),3)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},u(s.getExtractedCaseName(e)),3)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener"},u(s.getVerifiedCaseName(e)),9,vs)):(i(),l(c,{key:1},[m(u(s.getVerifiedCaseName(e)),1)],64)),s.isCaseNameMismatch(e)?(i(),l("div",ms,t[38]||(t[38]=[n("i",{class:"bi bi-exclamation-triangle"},null,-1),m(" Low similarity ")]))):r("",!0)],2)]),n("td",null,[n("button",{class:"btn btn-sm btn-outline-primary",onClick:e=>s.toggleDetails("validButNotVerified-"+a)},u(s.expandedCitation==="validButNotVerified-"+a?"Hide":"View")+" Details ",9,gs)])])))),128))])])])],2),n("div",{class:d(["tab-pane fade",{"show active":"caseNameMismatches"===s.activeTab}])},[n("div",ps,[n("table",fs,[t[43]||(t[43]=n("thead",null,[n("tr",null,[n("th",null,"Citation"),n("th",null,"Status"),n("th",null,"Extracted Case Name"),n("th",null,"Verified Case Name"),n("th",null,"Details")])],-1)),n("tbody",null,[(i(!0),l(c,null,v(s.caseNameMismatches,((e,a)=>(i(),l("tr",{key:"caseNameMismatch-"+a,class:"align-middle"},[n("td",null,[n("div",bs,[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener",class:"citation-text"},u(s.getCitationText(e)),9,ys)):(i(),l("span",hs,u(s.getCitationText(e)),1)),e.correction?(i(),l("button",{key:2,class:"btn btn-sm btn-outline-secondary ms-2",onClick:t=>s.applyCorrection(e),title:"Apply correction"},t[40]||(t[40]=[n("i",{class:"bi bi-arrow-clockwise"},null,-1)]),8,Cs)):r("",!0)]),e.correction?(i(),l("div",xs,[t[41]||(t[41]=n("i",{class:"bi bi-lightbulb"},null,-1)),m(" Suggested: "+u(e.correction),1)])):r("",!0)]),n("td",null,[n("span",{class:d(["badge",s.getStatusBadgeClass(e)])},u(s.getStatusText(e)),3)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},u(s.getExtractedCaseName(e)),3)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener"},u(s.getVerifiedCaseName(e)),9,ks)):(i(),l(c,{key:1},[m(u(s.getVerifiedCaseName(e)),1)],64)),s.isCaseNameMismatch(e)?(i(),l("div",ws,t[42]||(t[42]=[n("i",{class:"bi bi-exclamation-triangle"},null,-1),m(" Low similarity ")]))):r("",!0)],2)]),n("td",null,[n("button",{class:"btn btn-sm btn-outline-primary",onClick:e=>s.toggleDetails("caseNameMismatch-"+a)},u(s.expandedCitation==="caseNameMismatch-"+a?"Hide":"View")+" Details ",9,_s)])])))),128))])])])],2),n("div",{class:d(["tab-pane fade",{"show active":"invalid"===s.activeTab}])},[n("div",Ts,[n("table",Ss,[t[47]||(t[47]=n("thead",null,[n("tr",null,[n("th",null,"Citation"),n("th",null,"Status"),n("th",null,"Extracted Case Name"),n("th",null,"Verified Case Name"),n("th",null,"Details")])],-1)),n("tbody",null,[(i(!0),l(c,null,v(s.invalidCitations,((e,a)=>(i(),l("tr",{key:"invalid-"+a,class:"align-middle"},[n("td",null,[n("div",Rs,[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener",class:"citation-text"},u(s.getCitationText(e)),9,Ns)):(i(),l("span",Ps,u(s.getCitationText(e)),1)),e.correction?(i(),l("button",{key:2,class:"btn btn-sm btn-outline-secondary ms-2",onClick:t=>s.applyCorrection(e),title:"Apply correction"},t[44]||(t[44]=[n("i",{class:"bi bi-arrow-clockwise"},null,-1)]),8,As)):r("",!0)]),e.correction?(i(),l("div",Es,[t[45]||(t[45]=n("i",{class:"bi bi-lightbulb"},null,-1)),m(" Suggested: "+u(e.correction),1)])):r("",!0)]),n("td",null,[n("span",{class:d(["badge",s.getStatusBadgeClass(e)])},u(s.getStatusText(e)),3)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},u(s.getExtractedCaseName(e)),3)]),n("td",null,[n("div",{class:d(["case-name",{"case-name-mismatch":s.isCaseNameMismatch(e)}])},[s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",rel:"noopener"},u(s.getVerifiedCaseName(e)),9,Ls)):(i(),l(c,{key:1},[m(u(s.getVerifiedCaseName(e)),1)],64)),s.isCaseNameMismatch(e)?(i(),l("div",Us,t[46]||(t[46]=[n("i",{class:"bi bi-exclamation-triangle"},null,-1),m(" Low similarity ")]))):r("",!0)],2)]),n("td",null,[n("button",{class:"btn btn-sm btn-outline-primary",onClick:e=>s.toggleDetails("invalid-"+a)},u(s.expandedCitation==="invalid-"+a?"Hide":"View")+" Details ",9,Is)])])))),128))])])])],2)]),(i(!0),l(c,null,v(s.currentTabCitations,((e,a)=>{var c,v,p,f,b,h,C,x,k,w,_,T,S,R,N,P,A,E,L,U,I,V,D,M,$;return g((i(),l("div",{key:"detail-"+s.activeTab+"-"+a,class:"card mb-3"},[n("div",Vs,[n("h5",Ds,"Citation Details: "+u(s.getCitationText(e)),1)]),n("div",Ms,[n("div",$s,[n("div",Fs,[t[56]||(t[56]=n("h6",null,"Basic Information",-1)),n("dl",Os,[t[52]||(t[52]=n("dt",{class:"col-sm-4"},"Status",-1)),n("dd",zs,[n("span",{class:d(["badge",s.getStatusBadgeClass(e)])},u(s.getStatusText(e)),3),(null==(c=e.data)?void 0:c.confidence)<.7?(i(),l("span",qs," Low Confidence ("+u(Math.round(100*(null==(v=e.data)?void 0:v.confidence)))+"%) ",1)):r("",!0)]),t[53]||(t[53]=n("dt",{class:"col-sm-4"},"Source",-1)),n("dd",Bs,[n("span",js,u((null==(p=e.data)?void 0:p.source)||"N/A"),1),s.getCitationUrl(e)?(i(),l("a",{key:0,href:s.getCitationUrl(e),target:"_blank",class:"ms-2"},t[48]||(t[48]=[n("i",{class:"bi bi-box-arrow-up-right"},null,-1)]),8,Xs)):r("",!0)]),t[54]||(t[54]=n("dt",{class:"col-sm-4"},"Case Name(s)",-1)),n("dd",Hs,[(null==(f=e.data)?void 0:f.case_name_verified)&&(null==(b=e.data)?void 0:b.case_name_extracted)&&(null==(h=e.data)?void 0:h.case_name_verified)!==(null==(C=e.data)?void 0:C.case_name_extracted)?(i(),l("span",Gs,[t[50]||(t[50]=n("strong",null,"Verified:",-1)),m(" "+u(null==(x=e.data)?void 0:x.case_name_verified),1),t[51]||(t[51]=n("br",null,null,-1)),n("span",Ws,[t[49]||(t[49]=n("strong",null,"Extracted:",-1)),m(" "+u(null==(k=e.data)?void 0:k.case_name_extracted),1)])])):(null==(w=e.data)?void 0:w.case_name_verified)?(i(),l("span",Zs,u(null==(_=e.data)?void 0:_.case_name_verified),1)):(null==(T=e.data)?void 0:T.case_name_extracted)?(i(),l("span",Js,u(null==(S=e.data)?void 0:S.case_name_extracted),1)):(i(),l("span",Ys,u(s.getCaseName(e)),1))]),t[55]||(t[55]=n("dt",{class:"col-sm-4"},"Confidence",-1)),n("dd",Ks,[n("div",Qs,[n("div",{class:d(["progress-bar",{"bg-success":(null==(R=e.data)?void 0:R.confidence)>=.7,"bg-warning":(null==(N=e.data)?void 0:N.confidence)>=.4&&(null==(P=e.data)?void 0:P.confidence)<.7,"bg-danger":(null==(A=e.data)?void 0:A.confidence)<.4}]),role:"progressbar",style:o({width:100*(null==(E=e.data)?void 0:E.confidence)+"%"}),"aria-valuenow":100*(null==(L=e.data)?void 0:L.confidence),"aria-valuemin":"0","aria-valuemax":"100"},u(Math.round(100*(null==(U=e.data)?void 0:U.confidence)))+"% ",15,el)])])])]),n("div",tl,[t[58]||(t[58]=n("h6",null,"Additional Details",-1)),n("dl",al,[t[57]||(t[57]=n("dt",{class:"col-sm-4"},"Validation Method",-1)),n("dd",sl,u((null==(I=e.data)?void 0:I.method)||"N/A"),1)])])]),(null==(V=e.data)?void 0:V.error_message)?(i(),l("div",ll,[t[59]||(t[59]=n("i",{class:"bi bi-exclamation-triangle me-2"},null,-1)),m(" "+u(null==(D=e.data)?void 0:D.error_message),1)])):r("",!0),(null==(M=e.data)?void 0:M.metadata)?(i(),l("div",il,[t[60]||(t[60]=n("h6",null,"Additional Metadata",-1)),n("pre",nl,u(JSON.stringify(null==($=e.data)?void 0:$.metadata,null,2)),1)])):r("",!0)])])),[[y,s.expandedCitation===s.activeTab+"-"+a]])})),128)),n("div",rl,[n("div",null,[n("button",{class:"btn btn-outline-secondary me-2",onClick:t[5]||(t[5]=e=>s.downloadResults("json"))},t[61]||(t[61]=[n("i",{class:"bi bi-download me-1"},null,-1),m(" Download JSON ")])),n("button",{class:"btn btn-outline-secondary me-2",onClick:t[6]||(t[6]=e=>s.downloadResults("csv"))},t[62]||(t[62]=[n("i",{class:"bi bi-file-earmark-spreadsheet me-1"},null,-1),m(" Download CSV ")])),n("button",{class:"btn btn-outline-secondary",onClick:t[7]||(t[7]=(...e)=>s.copyToClipboard&&s.copyToClipboard(...e))},t[63]||(t[63]=[n("i",{class:"bi bi-clipboard me-1"},null,-1),m(" Copy to Clipboard ")]))]),n("div",null,[n("button",{class:"btn btn-primary",onClick:t[8]||(t[8]=(...e)=>s.startNewAnalysis&&s.startNewAnalysis(...e))},t[64]||(t[64]=[n("i",{class:"bi bi-arrow-repeat me-1"},null,-1),m(" New Analysis ")]))])])])):(i(),l("div",ol,t[65]||(t[65]=[n("div",{class:"text-muted"},[n("i",{class:"bi bi-search",style:{"font-size":"3rem"}}),n("h4",{class:"mt-3"},"No citations found"),n("p",{class:"mb-0"},"Try analyzing some legal text to see citation results here.")],-1)])))])}],["__scopeId","data-v-2fa4d8e7"]]),ProcessingProgress:pe},setup(){const s=T();S();const l=[{id:"single",label:"Single Citation"},{id:"document",label:"Upload Document"},{id:"text",label:"Paste Text"},{id:"url",label:"URL Upload"}],i=e("single"),n=e("validation"),r=e(!0),o=e(!0),u=e(!0),d=e(!0),c=e(!0),v=e(!0),m=e(""),g=e(""),p=e(null),f=e(null),b=e(null),y=e(null),h=e(null),C=e(null),x=e([]),N=e([]),P=e(null),{isLoading:U,cancel:I}=function(a={}){const{loadingMessage:s="Loading...",showLoading:l=!0,onSuccess:i,onError:n,onFinally:r}=a,o=e(null),u=e(null),d=e(!1),c=e(null);let v=null,m=null;const g=`api_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return t((()=>{m&&m.abort(),v&&v.remove()})),{execute:async function(e,t={}){var p;const{message:f=s,showLoader:b=l,signal:y,...h}={...a,...t};u.value=null,c.value=null,o.value=null,b&&(v=R(g,{message:f})),d.value=!0,"undefined"!=typeof AbortController&&(m=new AbortController,h.signal=y||m.signal);try{const t=await e({...h,signal:h.signal});return o.value=t.data||t,c.value=t.status||200,i&&i(t),t}catch(C){throw u.value=C,c.value=(null==(p=C.response)?void 0:p.status)||0,n&&n(C),C}finally{d.value=!1,v&&(u.value?v.error(u.value):v.complete(),v=null),r&&r(),m=null}},cancel:function(){m&&(m.abort(),m=null),v&&(v.remove(),v=null),d.value=!1},data:o,error:u,isLoading:d,status:c}}({loadingMessage:"Validating citation...",showLoading:!0}),V=e(!1),{isLoading:D}=function(){const e=(e,t="Loading...")=>{A.value=e,t&&(E.value=t)};return{isLoading:a((()=>A.value)),loadingMessage:a((()=>E.value)),setLoading:e,showLoading:t=>{e(!0,t)},hideLoading:()=>{e(!1)},toggleLoading:t=>{e(!A.value,t)}}}(),M=a((()=>U.value||D.value||V.value)),$=e("/casestrainer/api"),{currentStep:F,processingSteps:O,actualTimes:z,elapsedTime:q,remainingTime:B,totalProgress:j,currentStepProgress:X,startProcessing:H,updateStep:G,completeStep:W,updateActualTimes:Z,reset:J,formatTime:Y}=function(){const t=e(null),s=e(0),l=e(""),i=e(0),n=e([]),r=e({}),o=a((()=>t.value?(Date.now()-t.value)/1e3:0)),u=a((()=>s.value?Math.max(0,s.value-o.value):0)),d=a((()=>s.value?Math.min(100,o.value/s.value*100):0)),c=a((()=>{if(!n.value.length)return 0;const e=n.value.findIndex((e=>e.step===l.value));if(-1===e)return 0;const t=n.value[e],a=o.value-(t.startTime||0);return Math.min(100,a/t.estimated_time*100)})),v=(e,t)=>{const a=n.value.findIndex((t=>t.step===e));-1!==a&&(0!==a&&100!==n.value[a-1].progress||(l.value=e,n.value[a].startTime||(n.value[a].startTime=Date.now())),n.value[a].progress=t,i.value=t)};return{startTime:t,estimatedTotalTime:s,currentStep:l,stepProgress:i,processingSteps:n,actualTimes:r,elapsedTime:o,remainingTime:u,totalProgress:d,currentStepProgress:c,startProcessing:e=>{var a;t.value=Date.now(),s.value=e.estimated_total_time,n.value=e.steps.map((e=>({step:e[0],estimated_time:e[1],startTime:null,progress:0}))),l.value=(null==(a=n.value[0])?void 0:a.step)||"",i.value=0},updateStep:v,completeStep:e=>{v(e,100);const t=n.value.findIndex((t=>t.step===e))+1;t<n.value.length&&(l.value=n.value[t].step,n.value[t].startTime=Date.now())},updateActualTimes:e=>{r.value=e},reset:()=>{t.value=null,s.value=0,l.value="",i.value=0,n.value=[],r.value={}},formatTime:e=>e<60?`${Math.round(e)}s`:`${Math.floor(e/60)}m ${Math.round(e%60)}s`}}(),K=e(0),Q=e(null),ee=e(null),te=e(null),ae=e(!1),se=e(null),le=e(null),ie=e(null);const ne=()=>{try{const e=localStorage.getItem("recentValidations");e&&(x.value=JSON.parse(e))}catch(e){console.error("Error loading recent validations:",e)}},re=async e=>{if(e.trim()){U.value=!0,P.value=null,p.value=null,f.value=null,b.value=null;try{const t=await L.post("/analyze",{text:e,options:{batch_process:!1,return_debug:!1}});if(t.data&&t.data.task_id){const e=t.data.task_id;let a=0;const s=60;for(H(120),V.value=!0,se.value=e;a<s;){await new Promise((e=>setTimeout(e,2e3)));const t=await L.get(`/task_status/${e}`);if(t.data&&"completed"===t.data.status){const e=t.data.citations||[];p.value={...t.data,citations:ye(e),metadata:{...t.data.metadata||{},timestamp:(new Date).toISOString()}},G("Citation validation",100),W("Citation validation"),V.value=!1,se.value=null;break}if(t.data&&"failed"===t.data.status)throw new Error(t.data.error||"Task failed");if(!t.data||"processing"!==t.data.status&&"queued"!==t.data.status)a++;else{const s=t.data.progress||0,l=t.data.status_message||"Processing...",i=t.data.current_step||"Processing",n=t.data.estimated_time_remaining;j.value=s,i!==i.value&&G(i,0),s>0&&(X.value=Math.min(100,s)),null!=n&&(B.value=n),void 0!==t.data.total_citations&&(le.value={total:t.data.total_citations,processed:t.data.verified_citations||0,unique:t.data.total_citations}),console.log(`Task ${e} progress: ${s}% - ${l}`),a++}}if(a>=s)throw new Error("Task timed out")}else{const e=t.data.citations||[];p.value={...t.data,citations:ye(e),metadata:{...t.data.metadata||{},timestamp:(new Date).toISOString()}}}p.value&&p.value.citations&&p.value.citations.length>0&&ce(e,p.value)}catch(t){console.error("Error validating citation:",t),P.value=t.message||"Failed to validate citation"}finally{U.value=!1}}else P.value="Please enter a citation to validate"},oe=e=>{var t,a,s;try{const l=Array.isArray(e.validation_results)&&e.validation_results.length>0?e.validation_results:e.citations||[];if(y.value={...e,citations:ye(l),timestamp:(new Date).toISOString()},U.value=!1,P.value=null,ce(y.value),_((()=>{const e=document.querySelector(".results-section");e&&e.scrollIntoView({behavior:"smooth"})})),G("Document analysis",100),W("Document analysis"),V.value=!1,se.value=null,(null==(t=e.metadata)?void 0:t.time_estimate)&&H(e.metadata.time_estimate),null==(a=e.metadata)?void 0:a.processing_steps)for(const t of e.metadata.processing_steps)t.actual_time>0&&W(t.step);(null==(s=e.metadata)?void 0:s.actual_times)&&Z(e.metadata.actual_times)}catch(l){console.error("Error handling document results:",l),P.value="Failed to process document results",U.value=!1}},ue=e=>{var t,a,s;try{const l=Array.isArray(e.validation_results)&&e.validation_results.length>0?e.validation_results:e.citations||[];if(h.value={...e,citations:ye(l),timestamp:(new Date).toISOString()},U.value=!1,P.value=null,ce(h.value),_((()=>{const e=document.querySelector(".results-section");e&&e.scrollIntoView({behavior:"smooth"})})),G("Text analysis",100),W("Text analysis"),V.value=!1,se.value=null,(null==(t=e.metadata)?void 0:t.time_estimate)&&H(e.metadata.time_estimate),null==(a=e.metadata)?void 0:a.processing_steps)for(const t of e.metadata.processing_steps)t.actual_time>0&&W(t.step);(null==(s=e.metadata)?void 0:s.actual_times)&&Z(e.metadata.actual_times)}catch(l){console.error("Error handling text results:",l),P.value="Failed to process text results",U.value=!1}},de=e=>{var t,a,s;try{console.log("URL analysis results:",e);const l=Array.isArray(e.validation_results)&&e.validation_results.length>0?e.validation_results:e.citations||[];if(C.value={...e,citations:ye(l),timestamp:(new Date).toISOString()},U.value=!1,P.value=null,ce(C.value),_((()=>{const e=document.querySelector(".results-section");e&&e.scrollIntoView({behavior:"smooth"})})),G("URL analysis",100),W("URL analysis"),V.value=!1,se.value=null,(null==(t=e.metadata)?void 0:t.time_estimate)&&H(e.metadata.time_estimate),null==(a=e.metadata)?void 0:a.processing_steps)for(const t of e.metadata.processing_steps)t.actual_time>0&&W(t.step);(null==(s=e.metadata)?void 0:s.actual_times)&&Z(e.metadata.actual_times)}catch(l){console.error("Error handling URL analysis results:",l),P.value="Failed to process URL analysis results.",U.value=!1}},ce=(e,t)=>{if("object"==typeof t&&null!==t&&!Array.isArray(t)&&"Unknown citation"!==t.text){const s={citation:e,result:t,timestamp:(new Date).toISOString()};x.value.unshift(s),x.value.length>10&&(x.value=x.value.slice(0,10));try{localStorage.setItem("recentValidations",JSON.stringify(x.value))}catch(a){console.warn("[EnhancedValidator] Error saving recent validations:",a)}}},ve=e=>{if(!e)return"";let t="Validation Results\n";return t+=`Generated: ${(new Date).toLocaleString()}\n\n`,e.citation&&(t+=`Citation: ${e.citation}\n`),void 0!==e.valid&&(t+=`Valid: ${e.valid?"Yes":"No"}\n`),e.confidence&&(t+=`Confidence: ${(100*e.confidence).toFixed(1)}%\n`),e.suggestions&&e.suggestions.length>0&&(t+="\nSuggestions:\n",e.suggestions.forEach(((e,a)=>{t+=`${a+1}. ${e.text}\n`,e.reason&&(t+=`   Reason: ${e.reason}\n`),e.confidence&&(t+=`   Confidence: ${(100*e.confidence).toFixed(1)}%\n`),t+="\n"}))),t},me=e=>{e&&("single"===i.value&&(m.value=e.corrected_text),N.value&&(N.value=N.value.map((t=>t.id===e.id?{...t,applied:!0}:t))),console.log("Correction applied:",e))},ge=()=>{const{tab:e}=s.query;e&&l.some((t=>t.id===e))&&(i.value=e);const{citation:t}=s.query;t&&"string"==typeof t&&(m.value=t,re(t))};k((()=>s.query),ge),w((()=>{ne(),_(ge)})),t((()=>{V.value&&I()})),k((()=>s.query),((e,t)=>{JSON.stringify(e)!==JSON.stringify(t)&&ge()}));const pe=a((()=>be().filter((e=>{var t,a;return e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists})).length)),fe=a((()=>be().filter((e=>{var t,a;return!(e.valid||e.verified||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists)})).length));function be(){return"single"===i.value&&p.value&&p.value.citations?p.value.citations:"document"===i.value&&y.value&&y.value.citations?y.value.citations:"text"===i.value&&h.value&&h.value.citations?h.value.citations:"url"===i.value&&C.value&&C.value.citations?C.value.citations:[]}function ye(e){return(e||[]).map((e=>{var t,a;const s=e.clusters&&e.clusters.length>0?e.clusters[0]:{},l=s.absolute_url?`https://www.courtlistener.com${s.absolute_url}`:void 0,i=(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void 0:a.found)||e.exists||"verified"===e.status||!0===e.verified;return{...e,metadata:{...s,url:l},details:{...s,url:l},valid:i,verified:i}}))}const he=async(e,t)=>{var a,s,l,i,n,r,o,u;try{V.value=!0,te.value=null,ae.value=!1,le.value=null,ie.value=null;const o=await L.analyze(e,t);if(se.value=o.requestId,(null==(a=o.metadata)?void 0:a.citation_count)&&(le.value={total:o.metadata.citation_count,unique:o.metadata.unique_citations,processed:0}),"queued"===o.status&&(K.value=o.queuePosition,Q.value=o.estimatedWaitTime),(null==(s=o.metadata)?void 0:s.rate_limit_info)&&(ee.value=o.metadata.rate_limit_info),(null==(l=o.metadata)?void 0:l.timeout)&&(ie.value=o.metadata.timeout),(null==(i=o.metadata)?void 0:i.time_estimate)&&H(o.metadata.time_estimate),null==(n=o.metadata)?void 0:n.processing_steps)for(const e of o.metadata.processing_steps)if(e.actual_time>0&&(W(e.step),e.step.includes("Verifying citations")&&le.value)){const t=e.step.match(/Verifying citations (\d+)-(\d+) of (\d+)/);if(t){const[,e,a]=t.map(Number);le.value.processed=Math.max(le.value.processed,a)}}(null==(r=o.metadata)?void 0:r.actual_times)&&Z(o.metadata.actual_times),"completed"===o.status&&("url"===t?de(o):"text"===t?ue(o):"file"===t&&oe(o),le.value&&(le.value.processed=le.value.unique))}catch(d){504===(null==(o=d.response)?void 0:o.status)?te.value=`Request timed out after ${ie.value} seconds. The document contains ${(null==(u=le.value)?void 0:u.unique)||0} unique citations, which may take longer than expected to process.`:te.value=d.message||"An error occurred during processing",ae.value=!0,console.error("Analysis error:",d)}finally{V.value=!1,se.value=null,K.value=0,Q.value=null,ie.value=null,J()}};return t((()=>{se.value&&L.cancelRequest(se.value)})),{activeTab:i,activeResultTab:n,citationInput:m,citationText:g,validationResult:p,mlResult:f,correctionResult:b,documentAnalysisResult:y,textAnalysisResult:h,urlAnalysisResult:C,recentValidations:x,suggestions:N,error:P,isLoading:M,hasActiveRequest:V,useEnhanced:d,useML:c,useCorrection:v,showBasicValidation:r,showMLAnalysis:o,showCorrections:u,apiBaseUrl:$,tabs:l,clearResults:function(){p.value=null,f.value=null,b.value=null,y.value=null,h.value=null,C.value=null,P.value=null,g.value=""},validateCitation:re,applyCorrection:me,copyResults:async()=>{try{let e="";"document"===i.value&&y.value?e=ve(y.value):"text"===i.value&&h.value?e=ve(h.value):"url"===i.value&&C.value?e=ve(C.value):"single"===i.value&&p.value&&(e=ve(p.value)),e&&(await navigator.clipboard.writeText(e),console.log("Results copied to clipboard"))}catch(e){console.error("Failed to copy results:",e),P.value="Failed to copy results to clipboard"}},downloadResults:()=>{try{let e="",t="validation-results.txt";if("document"===i.value&&y.value?(e=ve(y.value),t="document-validation.txt"):"text"===i.value&&h.value?(e=ve(h.value),t="text-validation.txt"):"url"===i.value&&C.value?(e=ve(C.value),t="url-validation.txt"):"single"===i.value&&p.value&&(e=ve(p.value),t="citation-validation.txt"),e){const a=new Blob([e],{type:"text/plain"}),s=URL.createObjectURL(a),l=document.createElement("a");l.href=s,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s)}}catch(e){console.error("Failed to download results:",e),P.value="Failed to download results"}},handleDocumentResults:oe,handleTextResults:ue,handleUrlResults:de,handleDocumentError:e=>{console.error("Document analysis error:",e);const t="string"==typeof e?{message:e}:e;y.value={error:t.message||"An error occurred while analyzing the document",details:t.details||null,status:t.status||500,timestamp:(new Date).toISOString()},U.value=!1,e.value=y.value.error,V.value=!1,se.value=null,te.value=t.message||"Document analysis failed",ae.value=!0,_((()=>{const e=document.querySelector(".results-section");e&&e.scrollIntoView({behavior:"smooth"})}))},handleTextError:e=>{console.error("Text analysis error:",e),h.value={error:e.message||"An error occurred while analyzing the text",timestamp:(new Date).toISOString()},U.value=!1,e.value="Failed to analyze text. Please try again.",V.value=!1,se.value=null,te.value=e.message||"Text analysis failed",ae.value=!0},handleUrlError:e=>{console.error("URL analysis error:",e),C.value={error:e.message||"An error occurred while analyzing the URL",timestamp:(new Date).toISOString()},U.value=!1,e.value="Failed to analyze URL. Please check the URL and try again.",V.value=!1,se.value=null,te.value=e.message||"URL analysis failed",ae.value=!0},applyCorrectionFromResults:e=>{if(!e||!e.suggestions||0===e.suggestions.length)return!1;const t=e.suggestions.find((e=>e.confidence&&e.confidence>.7));return!!t&&(me(t),!0)},loadRecentValidations:ne,clearRecentValidations:()=>{try{x.value=[],localStorage.removeItem("recentValidations")}catch(e){console.error("Error clearing recent validations:",e)}},removeRecentValidation:e=>{try{x.value=x.value.filter((t=>t.id!==e)),localStorage.setItem("recentValidations",JSON.stringify(x.value))}catch(t){console.error("Error removing recent validation:",t)}},copyToClipboard:async(e,t="Copied to clipboard!")=>{try{return await navigator.clipboard.writeText(e),t&&console.log(t),!0}catch(a){console.error("Failed to copy text:",a);try{const a=document.createElement("textarea");return a.value=e,a.style.position="fixed",document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),t&&console.log(t),!0}catch(s){return console.error("Fallback copy failed:",s),!1}}},formatDate:function(e){if(!e)return"";try{const t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).format(t)}catch(t){return console.error("Error formatting date:",t),e||""}},getAlertClass:function(e){return null==e?"alert-info":e?"alert-success":"alert-danger"},getConfidenceClass:function(e){return e>=.8?"bg-success":e>=.5?"bg-warning":"bg-danger"},getProgressBarClass:function(e){return e>=.8?"bg-success":e>=.5?"bg-info":e>=.3?"bg-warning":"bg-danger"},formatCitation:function(e){return e?e.replace(/\s+/g," ").trim():""},getValidationIcon:function(e){return null==e?"bi-question-circle":e?"bi-check-circle":"bi-x-circle"},getValidationColor:function(e){return null==e?"text-info":e?"text-success":"text-danger"},getValidationLabel:function(e){return null==e?"Unknown":e?"Valid":"Invalid"},getCorrectionIcon:function(e){return e?e.confidence>.7?"bi-lightbulb":"bi-lightbulb-off":"bi-question-circle"},getCorrectionColor:function(e){return e&&e.confidence>.7?"text-warning":"text-muted"},getCorrectionLabel:function(e){return e?e.confidence>.7?"Suggested":"Low confidence":"No suggestions"},getMLLabel:function(e){return e?e.prediction||"Unknown":"N/A"},getMLColor:function(e){return e?e.confidence>.7?"text-success":e.confidence>.4?"text-warning":"text-danger":"text-muted"},getMLIcon:function(e){return e?e.confidence>.7?"bi-check-circle":e.confidence>.4?"bi-exclamation-circle":"bi-x-circle":"bi-question-circle"},isCitationValid:function(e){return!!e&&("verified"===e.status||!0===e.verified)},validCount:pe,invalidCount:fe,elapsedTime:q,remainingTime:B,totalProgress:j,currentStep:F,currentStepProgress:X,processingSteps:O,actualTimes:z,formatTime:Y,citationInfo:le,queuePosition:K,estimatedQueueTime:Q,rateLimitInfo:ee,timeout:ie,processingError:te,canRetry:ae,retryProcessing:async()=>{if(se.value)try{te.value=null,ae.value=!1,J(),await L.cancelRequest(se.value);const e=L.getRequestStatus(se.value);if(e){const{type:t,input:a}=e;await he(a,t)}}catch(e){te.value=`Failed to retry: ${e.message}`,ae.value=!0}}}}},[["render",function(e,t,a,s,o,f){const y=C("FileUpload"),k=C("TextPaste"),w=C("UrlUpload"),_=C("CitationResults"),T=C("ProcessingProgress");return i(),l("div",ul,[n("div",dl,[n("div",cl,[t[11]||(t[11]=n("h2",{class:"mb-4"},"Citation Validator",-1)),n("ul",vl,[(i(!0),l(c,null,v(s.tabs,(e=>(i(),l("li",{key:e.id,class:"nav-item",role:"presentation"},[n("button",{class:d(["nav-link",{active:s.activeTab===e.id}]),onClick:t=>s.activeTab=e.id,type:"button",role:"tab","aria-selected":s.activeTab===e.id},u(e.label),11,ml)])))),128))]),n("div",gl,["single"===s.activeTab?(i(),l("div",pl,[n("div",fl,[t[7]||(t[7]=n("label",{for:"citationInput",class:"form-label"},"Enter Citation",-1)),n("div",bl,[g(n("input",{type:"text",class:"form-control",id:"citationInput","onUpdate:modelValue":t[0]||(t[0]=e=>s.citationInput=e),placeholder:"e.g., 410 U.S. 113 (1973)",onKeyup:t[1]||(t[1]=b((e=>s.validateCitation(s.citationInput)),["enter"]))},null,544),[[p,s.citationInput]]),n("button",{class:"btn btn-primary",type:"button",onClick:t[2]||(t[2]=e=>s.validateCitation(s.citationInput)),disabled:!s.citationInput.trim()||s.isLoading},[s.isLoading?(i(),l("span",hl)):r("",!0),m(" "+u(s.isLoading?"Validating...":"Validate"),1)],8,yl)])])])):"document"===s.activeTab?(i(),l("div",Cl,[h(y,{onResults:s.handleDocumentResults,onError:s.handleDocumentError,onProgress:e.handleDocumentProgress,"is-loading":s.isLoading,onLoading:t[3]||(t[3]=e=>s.isLoading=e)},null,8,["onResults","onError","onProgress","is-loading"])])):"text"===s.activeTab?(i(),l("div",xl,[h(k,{onResults:s.handleTextResults,onError:s.handleTextError,onProgress:e.handleTextProgress,"is-loading":s.isLoading,onLoading:t[4]||(t[4]=e=>s.isLoading=e)},null,8,["onResults","onError","onProgress","is-loading"])])):"url"===s.activeTab?(i(),l("div",kl,[h(w,{onResults:s.handleUrlResults,onError:s.handleUrlError,onProgress:e.handleUrlProgress,"is-loading":s.isLoading,onLoading:t[5]||(t[5]=e=>s.isLoading=e)},null,8,["onResults","onError","onProgress","is-loading"])])):r("",!0)]),"single"===s.activeTab?(i(),l("div",wl,[s.validationResult&&s.validationResult.citations&&s.validationResult.citations.length?(i(),x(_,{key:0,results:s.validationResult,"active-tab":s.activeTab,onApplyCorrection:s.applyCorrection,onCopyResults:s.copyResults,onDownloadResults:s.downloadResults},null,8,["results","active-tab","onApplyCorrection","onCopyResults","onDownloadResults"])):(i(),l("div",_l," No results to display. Please enter a citation and click Analyze. "))])):"document"===s.activeTab?(i(),l("div",Tl,[s.documentAnalysisResult&&s.documentAnalysisResult.citations&&s.documentAnalysisResult.citations.length?(i(),x(_,{key:0,results:s.documentAnalysisResult,"active-tab":s.activeTab,onApplyCorrection:s.applyCorrection,onCopyResults:s.copyResults,onDownloadResults:s.downloadResults},null,8,["results","active-tab","onApplyCorrection","onCopyResults","onDownloadResults"])):(i(),l("div",Sl," No results to display. Please upload a document and wait for analysis. "))])):"text"===s.activeTab?(i(),l("div",Rl,[s.textAnalysisResult&&s.textAnalysisResult.citations&&s.textAnalysisResult.citations.length?(i(),x(_,{key:0,results:s.textAnalysisResult,"active-tab":s.activeTab,onApplyCorrection:s.applyCorrection,onCopyResults:s.copyResults,onDownloadResults:s.downloadResults},null,8,["results","active-tab","onApplyCorrection","onCopyResults","onDownloadResults"])):(i(),l("div",Nl," No results to display. Please paste text and wait for analysis. "))])):"url"===s.activeTab?(i(),l("div",Pl,[s.urlAnalysisResult&&s.urlAnalysisResult.citations&&s.urlAnalysisResult.citations.length?(i(),x(_,{key:0,results:s.urlAnalysisResult,"active-tab":s.activeTab,onApplyCorrection:s.applyCorrection,onCopyResults:s.copyResults,onDownloadResults:s.downloadResults},null,8,["results","active-tab","onApplyCorrection","onCopyResults","onDownloadResults"])):e.showLoading?r("",!0):(i(),l("div",Al," No results to display. Please enter a URL and wait for analysis. "))])):r("",!0),s.recentValidations.length>0?(i(),l("div",El,[n("div",Ll,[t[8]||(t[8]=n("h5",null,"Recent Validations",-1)),n("button",{class:"btn btn-sm btn-outline-danger",onClick:t[6]||(t[6]=(...e)=>s.clearRecentValidations&&s.clearRecentValidations(...e))}," Clear All ")]),n("ul",Ul,[(i(!0),l(c,null,v(s.recentValidations,(e=>(i(),l("li",{key:e.id,class:"list-group-item d-flex justify-content-between align-items-center"},[n("div",null,[n("span",Il,u(e.citation),1),e.result&&e.result.citations&&e.result.citations.length?(i(),l("span",{key:0,class:d(["badge ms-2",s.isCitationValid(e.result.citations[0])?"bg-success":"bg-danger"])},u(s.isCitationValid(e.result.citations[0])?"Valid":"Invalid"),3)):r("",!0)]),n("div",null,[n("button",{class:"btn btn-sm btn-outline-secondary me-1",onClick:t=>s.copyToClipboard(e.citation,"Citation copied!")},t[9]||(t[9]=[n("i",{class:"bi bi-clipboard"},null,-1)]),8,Vl),n("button",{class:"btn btn-sm btn-outline-danger",onClick:t=>s.removeRecentValidation(e.id)},t[10]||(t[10]=[n("i",{class:"bi bi-trash"},null,-1)]),8,Dl)])])))),128))])])):r("",!0),n("span",Ml," Total: "+u(s.validationResult&&s.validationResult.citations?s.validationResult.citations.length:0),1),n("span",$l," Verified: "+u(void 0!==s.validCount?s.validCount:0),1),n("span",Fl," Not Verified: "+u(void 0!==s.invalidCount?s.invalidCount:0),1),e.showLoading?(i(),l("div",Ol,[e.showLoading?(i(),x(T,{key:0,"elapsed-time":s.elapsedTime,"remaining-time":s.remainingTime,"total-progress":s.totalProgress,"current-step":s.currentStep,"current-step-progress":s.currentStepProgress,"processing-steps":s.processingSteps,"actual-times":s.actualTimes,"citation-info":s.citationInfo,"rate-limit-info":s.rateLimitInfo,timeout:s.timeout,error:s.processingError,"can-retry":s.canRetry,onRetry:s.retryProcessing},null,8,["elapsed-time","remaining-time","total-progress","current-step","current-step-progress","processing-steps","actual-times","citation-info","rate-limit-info","timeout","error","can-retry","onRetry"])):r("",!0)])):r("",!0)])])])}],["__scopeId","data-v-6caf01b9"]]);export{zl as default};
