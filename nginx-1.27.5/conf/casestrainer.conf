# CaseStrainer Nginx Configuration 
# Generated by CaseStrainer launcher 
 
events { 
    worker_connections 1024; 
} 
 
http { 
    include       mime.types; 
    default_type  application/octet-stream; 
 
    server { 
        listen 80; 
        server_name wolf.law.uw.edu localhost; 
 
        # Root location - redirect to casestrainer 
        location = / { 
            return 301 /casestrainer/; 
        } 
 
        # CaseStrainer frontend 
        location /casestrainer/ { 
            rewrite /casestrainer/(.*)$ /$1 break; 
            proxy_pass http://127.0.0.1:4173; 
            proxy_set_header Host $host; 
            proxy_set_header X-Real-IP $remote_addr; 
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; 
            proxy_set_header X-Forwarded-Proto $scheme; 
        } 
 
        # CaseStrainer API 
        location /casestrainer/api/ { 
            rewrite /casestrainer/api/(.*)$ /api/$1 break; 
            proxy_pass http://127.0.0.1:5001; 
            proxy_set_header Host $host; 
            proxy_set_header X-Real-IP $remote_addr; 
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; 
            proxy_set_header X-Forwarded-Proto $scheme; 
        } 
 
        # Health check 
        location /health { 
            proxy_pass http://127.0.0.1:5001/health; 
        } 
 
        # Nginx status page 
        location /nginx_status { 
            stub_status on; 
            allow 127.0.0.1; 
            deny all; 
        } 
 
        # Error and access logs 
        error_log logs/casestrainer_error.log; 
        access_log logs/casestrainer_access.log; 
    } 
} 
