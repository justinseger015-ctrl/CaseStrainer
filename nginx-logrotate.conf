# Log rotation for Nginx logs
/var/log/nginx/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 0640 www-data adm
    sharedscripts
    postrotate
        # Reload Nginx to use new log files
        if [ -f /var/run/nginx.pid ]; then
            nginx -s reopen
        fi
    endscript
}

# Specific rotation for access logs with larger size limit
/var/log/nginx/*.access.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 0640 www-data adm
    sharedscripts
    postrotate
        if [ -f /var/run/nginx.pid ]; then
            nginx -s reopen
        fi
    endscript
}

# Specific rotation for error logs with different settings
/var/log/nginx/*.error.log {
    weekly
    missingok
    rotate 12
    compress
    delaycompress
    notifempty
    create 0640 www-data adm
    sharedscripts
    postrotate
        if [ -f /var/run/nginx.pid ]; then
            nginx -s reopen
        fi
    endscript
}
