[2025-08-14 10:21:53] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 10:21:53] [INFO] Environment: Production, Mode: Status
[2025-08-14 10:21:53] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 10:21:53] [INFO] Checking prerequisites...
[2025-08-14 10:21:53] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 10:21:54] [INFO] Performing application health check...
[2025-08-14 10:21:54] [INFO] Application health check passed
[2025-08-14 10:21:54] [DEBUG] Launcher execution completed
[2025-08-14 10:24:39] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 10:24:39] [INFO] Environment: Production, Mode: Auto
[2025-08-14 10:24:39] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 10:24:39] [INFO] Checking prerequisites...
[2025-08-14 10:24:40] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 10:24:40] [INFO] Auto-detecting deployment mode...
[2025-08-14 10:24:40] [DEBUG] Recent changes detected in casestrainer-vue-new/src
[2025-08-14 10:24:40] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 10:24:40] [INFO] Auto-detected mode: Fast
[2025-08-14 10:24:40] [INFO] Starting deployment in Fast mode...
[2025-08-14 10:24:40] [INFO] Performing Fast Start (restart with current images)...
[2025-08-14 10:24:40] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 10:24:41] [ERROR] Docker operation failed: down -  Container casestrainer-nginx-prod  Stopping
[2025-08-14 10:24:41] [ERROR] Deployment failed
[2025-08-14 10:24:41] [DEBUG] Launcher execution completed
[2025-08-14 10:25:27] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 10:25:27] [INFO] Environment: Production, Mode: Auto
[2025-08-14 10:25:27] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 10:25:27] [INFO] Checking prerequisites...
[2025-08-14 10:25:27] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 10:25:27] [INFO] Auto-detecting deployment mode...
[2025-08-14 10:25:28] [DEBUG] Recent changes detected in casestrainer-vue-new/src
[2025-08-14 10:25:28] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 10:25:28] [INFO] Auto-detected mode: Fast
[2025-08-14 10:25:28] [INFO] Starting deployment in Fast mode...
[2025-08-14 10:25:28] [INFO] Performing Fast Start (restart with current images)...
[2025-08-14 10:25:28] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 10:25:28] [ERROR] Docker operation failed: down -  Container casestrainer-rqworker1-prod  Stopping
[2025-08-14 10:25:28] [ERROR] Deployment failed
[2025-08-14 10:25:28] [DEBUG] Launcher execution completed
[2025-08-14 10:26:01] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 10:26:01] [INFO] Environment: Production, Mode: Auto
[2025-08-14 10:26:01] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 10:26:01] [INFO] Checking prerequisites...
[2025-08-14 10:26:01] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 10:26:01] [INFO] Auto-detecting deployment mode...
[2025-08-14 10:26:02] [DEBUG] Recent changes detected in casestrainer-vue-new/src
[2025-08-14 10:26:02] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 10:26:02] [INFO] Auto-detected mode: Fast
[2025-08-14 10:26:02] [INFO] Starting deployment in Fast mode...
[2025-08-14 10:26:02] [INFO] Performing Fast Start (restart with current images)...
[2025-08-14 10:26:02] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 10:26:02] [INFO] [DRY RUN] Would execute: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 10:26:02] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 10:26:02] [INFO] [DRY RUN] Would execute: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 10:26:02] [INFO] Waiting for containers to stabilize...
[2025-08-14 10:26:12] [INFO] Performing application health check...
[2025-08-14 10:26:12] [INFO] Application health check passed
[2025-08-14 10:26:12] [INFO] Deployment completed successfully!
[2025-08-14 10:26:12] [INFO] Containers running: 6
[2025-08-14 10:26:12] [DEBUG] Launcher execution completed
[2025-08-14 10:26:19] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 10:26:19] [INFO] Environment: Production, Mode: Quick
[2025-08-14 10:26:19] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 10:26:19] [INFO] Checking prerequisites...
[2025-08-14 10:26:19] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 10:26:19] [INFO] Starting deployment in Quick mode...
[2025-08-14 10:26:19] [INFO] Performing Quick Start (containers assumed healthy)...
[2025-08-14 10:26:19] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 10:26:20] [ERROR] Docker operation exception: up -  Container casestrainer-frontend-prod  Running
[2025-08-14 10:26:20] [ERROR] Deployment failed
[2025-08-14 10:26:20] [DEBUG] Launcher execution completed
[2025-08-14 10:27:06] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 10:27:06] [INFO] Environment: Production, Mode: Quick
[2025-08-14 10:27:06] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 10:27:06] [INFO] Checking prerequisites...
[2025-08-14 10:27:06] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 10:27:06] [INFO] Starting deployment in Quick mode...
[2025-08-14 10:27:06] [INFO] Performing Quick Start (containers assumed healthy)...
[2025-08-14 10:27:06] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 10:27:08] [DEBUG] Docker operation exit code: 0
[2025-08-14 10:27:08] [DEBUG] Docker output:  Container casestrainer-redis-prod  Running;  Container casestrainer-backend-prod  Running;  Container casestrainer-frontend-prod  Running;  Container casestrainer-rqworker1-prod  Running;  Container casestrainer-rqworker3-prod  Running;  Container casestrainer-rqworker2-prod  Running;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 10:27:08] [INFO] Docker operation completed successfully: up
[2025-08-14 10:27:08] [INFO] Waiting for containers to stabilize...
[2025-08-14 10:27:19] [INFO] Performing application health check...
[2025-08-14 10:27:19] [INFO] Application health check passed
[2025-08-14 10:27:19] [INFO] Deployment completed successfully!
[2025-08-14 10:27:19] [INFO] Containers running: 7
[2025-08-14 10:27:19] [DEBUG] Launcher execution completed
[2025-08-14 10:27:25] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 10:27:25] [INFO] Environment: Production, Mode: Auto
[2025-08-14 10:27:25] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 10:27:25] [INFO] Checking prerequisites...
[2025-08-14 10:27:25] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 10:27:25] [INFO] Auto-detecting deployment mode...
[2025-08-14 10:27:26] [DEBUG] Recent changes detected in casestrainer-vue-new/src
[2025-08-14 10:27:26] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 10:27:26] [INFO] Auto-detected mode: Fast
[2025-08-14 10:27:26] [INFO] Starting deployment in Fast mode...
[2025-08-14 10:27:26] [INFO] Performing Fast Start (restart with current images)...
[2025-08-14 10:27:26] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 10:27:28] [DEBUG] Docker operation exit code: 0
[2025-08-14 10:27:28] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 10:27:28] [INFO] Docker operation completed successfully: down
[2025-08-14 10:27:28] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 10:27:42] [DEBUG] Docker operation exit code: 0
[2025-08-14 10:27:42] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 10:27:42] [INFO] Docker operation completed successfully: up
[2025-08-14 10:27:42] [INFO] Waiting for containers to stabilize...
[2025-08-14 10:27:53] [INFO] Performing application health check...
[2025-08-14 10:27:53] [INFO] Application health check passed
[2025-08-14 10:27:53] [INFO] Deployment completed successfully!
[2025-08-14 10:27:53] [INFO] Containers running: 7
[2025-08-14 10:27:53] [DEBUG] Launcher execution completed
[2025-08-14 10:27:59] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 10:27:59] [INFO] Environment: Production, Mode: Status
[2025-08-14 10:27:59] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 10:27:59] [INFO] Checking prerequisites...
[2025-08-14 10:27:59] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 10:28:00] [INFO] Performing application health check...
[2025-08-14 10:28:00] [INFO] Application health check passed
[2025-08-14 10:28:00] [DEBUG] Launcher execution completed
[2025-08-14 10:39:25] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 10:39:25] [INFO] Environment: Production, Mode: Auto
[2025-08-14 10:39:25] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 10:39:25] [INFO] Checking prerequisites...
[2025-08-14 10:39:25] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 10:39:25] [INFO] Auto-detecting deployment mode...
[2025-08-14 10:39:26] [INFO] No changes detected, containers running - recommending Quick start
[2025-08-14 10:39:26] [INFO] Auto-detected mode: Quick
[2025-08-14 10:39:26] [INFO] Starting deployment in Quick mode...
[2025-08-14 10:39:26] [INFO] Performing Quick Start (containers assumed healthy)...
[2025-08-14 10:39:26] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 10:39:27] [DEBUG] Docker operation exit code: 0
[2025-08-14 10:39:27] [DEBUG] Docker output:  Container casestrainer-frontend-prod  Running;  Container casestrainer-redis-prod  Running;  Container casestrainer-rqworker2-prod  Running;  Container casestrainer-rqworker3-prod  Running;  Container casestrainer-rqworker1-prod  Running;  Container casestrainer-backend-prod  Running;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 10:39:27] [INFO] Docker operation completed successfully: up
[2025-08-14 10:39:27] [INFO] Waiting for containers to stabilize...
[2025-08-14 10:39:38] [INFO] Performing application health check...
[2025-08-14 10:39:38] [INFO] Application health check passed
[2025-08-14 10:39:38] [INFO] Deployment completed successfully!
[2025-08-14 10:39:38] [INFO] Containers running: 7
[2025-08-14 10:39:38] [DEBUG] Launcher execution completed
[2025-08-14 10:48:05] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 10:48:05] [INFO] Environment: Production, Mode: Auto
[2025-08-14 10:48:05] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 10:48:05] [INFO] Checking prerequisites...
[2025-08-14 10:48:05] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 10:48:05] [INFO] Auto-detecting deployment mode...
[2025-08-14 10:48:05] [INFO] No changes detected, containers running - recommending Quick start
[2025-08-14 10:48:05] [INFO] Auto-detected mode: Quick
[2025-08-14 10:48:05] [INFO] Starting deployment in Quick mode...
[2025-08-14 10:48:05] [INFO] Performing Quick Start (containers assumed healthy)...
[2025-08-14 10:48:05] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 10:48:07] [DEBUG] Docker operation exit code: 0
[2025-08-14 10:48:07] [DEBUG] Docker output:  Container casestrainer-frontend-prod  Running;  Container casestrainer-redis-prod  Running;  Container casestrainer-rqworker2-prod  Running;  Container casestrainer-rqworker3-prod  Running;  Container casestrainer-backend-prod  Running;  Container casestrainer-rqworker1-prod  Running;  Container casestrainer-nginx-prod  Running;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy
[2025-08-14 10:48:07] [INFO] Docker operation completed successfully: up
[2025-08-14 10:48:07] [INFO] Waiting for containers to stabilize...
[2025-08-14 10:48:17] [INFO] Performing application health check...
[2025-08-14 10:48:18] [INFO] Application health check passed
[2025-08-14 10:48:18] [INFO] Deployment completed successfully!
[2025-08-14 10:48:18] [INFO] Containers running: 7
[2025-08-14 10:48:18] [DEBUG] Launcher execution completed
[2025-08-14 10:54:44] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 10:54:44] [INFO] Environment: Production, Mode: Status
[2025-08-14 10:54:44] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 10:54:44] [INFO] Checking prerequisites...
[2025-08-14 10:54:44] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 10:54:45] [INFO] Performing application health check...
[2025-08-14 10:54:45] [INFO] Application health check passed
[2025-08-14 10:54:45] [DEBUG] Launcher execution completed
[2025-08-14 10:54:50] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 10:54:50] [INFO] Environment: Production, Mode: Auto
[2025-08-14 10:54:50] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 10:54:50] [INFO] Checking prerequisites...
[2025-08-14 10:54:50] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 10:54:50] [INFO] Auto-detecting deployment mode...
[2025-08-14 10:54:51] [DEBUG] Recent changes detected in casestrainer-vue-new/src (within 2 hours)
[2025-08-14 10:54:51] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 10:54:51] [INFO] Auto-detected mode: Fast
[2025-08-14 10:54:51] [INFO] Starting deployment in Fast mode...
[2025-08-14 10:54:51] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 10:54:51] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 10:54:51] [INFO] [DRY RUN] Would execute: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 10:54:51] [INFO] Recent changes in casestrainer-vue-new/src - will rebuild images
[2025-08-14 10:54:51] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 10:54:51] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 10:54:51] [INFO] [DRY RUN] Would execute: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 10:54:51] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 10:54:51] [INFO] [DRY RUN] Would execute: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 10:54:51] [INFO] Waiting for containers to stabilize...
[2025-08-14 10:55:01] [INFO] Performing application health check...
[2025-08-14 10:55:02] [INFO] Application health check passed
[2025-08-14 10:55:02] [INFO] Deployment completed successfully!
[2025-08-14 10:55:02] [INFO] Containers running: 7
[2025-08-14 10:55:02] [DEBUG] Launcher execution completed
[2025-08-14 10:55:14] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 10:55:14] [INFO] Environment: Production, Mode: Auto
[2025-08-14 10:55:14] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 10:55:14] [INFO] Checking prerequisites...
[2025-08-14 10:55:14] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 10:55:14] [INFO] Auto-detecting deployment mode...
[2025-08-14 10:55:14] [DEBUG] Recent changes detected in casestrainer-vue-new/src (within 2 hours)
[2025-08-14 10:55:14] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 10:55:14] [INFO] Auto-detected mode: Fast
[2025-08-14 10:55:14] [INFO] Starting deployment in Fast mode...
[2025-08-14 10:55:14] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 10:55:14] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 10:55:17] [DEBUG] Docker operation exit code: 0
[2025-08-14 10:55:17] [DEBUG] Docker output:  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 10:55:17] [INFO] Docker operation completed successfully: down
[2025-08-14 10:55:17] [INFO] Recent changes in casestrainer-vue-new/src - will rebuild images
[2025-08-14 10:55:17] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 10:55:17] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 10:55:23] [DEBUG] Docker operation exit code: 0
[2025-08-14 10:55:23] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker2 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [nginx internal] load build definition from Dockerfile; #3 transferring dockerfile: 652B 0.0s done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.1s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B done; #7 DONE 0.0s; ; #8 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.1s; ; #9 [nginx internal] load build context; #9 transferring context: 97B done; #9 DONE 0.0s; ; #10 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #10 ...; ; #11 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #11 CACHED; ; #12 [nginx 2/8] RUN apk add --no-cache curl; #12 CACHED; ; #13 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #13 CACHED; ; #14 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #14 CACHED; ; #15 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #15 CACHED; ; #16 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #16 CACHED; ; #17 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #17 CACHED; ; #18 [auth] library/node:pull token for registry-1.docker.io; #18 DONE 0.0s; ; #19 [auth] library/python:pull token for registry-1.docker.io; #19 DONE 0.0s; ; #20 [nginx] exporting to image; #20 exporting layers 0.0s done; #20 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #20 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #20 exporting attestation manifest sha256:6fa4d2fb1bb557b2673e3596a89584df05b11e1e79b004c30cf484d27d9c001a 0.1s done; #20 exporting manifest list sha256:d76981f9d61e804e85667807190dee8d8d21c2fac1b391bce65ff1814521256a 0.0s done; #20 naming to docker.io/library/casestrainer-nginx:latest; #20 naming to docker.io/library/casestrainer-nginx:latest done; #20 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #20 DONE 0.3s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 0.8s; ; #10 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #10 DONE 0.8s; ; #21 [backend internal] load .dockerignore; #21 transferring context: 908B 0.0s done; #21 DONE 0.0s; ; #22 [rqworker1 internal] load build context; #22 DONE 0.0s; ; #23 [frontend-prod internal] load .dockerignore; #23 transferring context: 834B 0.0s done; #23 DONE 0.1s; ; #24 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #24 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608 0.1s done; #24 DONE 0.1s; ; #22 [rqworker2 internal] load build context; #22 DONE 0.0s; ; #25 [frontend-prod internal] load build context; #25 DONE 0.0s; ; #26 [nginx] resolving provenance for metadata file; #26 DONE 0.0s; ; #27 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #27 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #27 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #27 DONE 0.2s; ; #24 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #24 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608 0.1s done; #24 DONE 0.1s; ; #8 [frontend-prod production-stage 1/7] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.2s; ; #22 [rqworker1 internal] load build context; #22 ...; ; #25 [frontend-prod internal] load build context; #25 transferring context: 7.85kB 0.0s done; #25 DONE 0.1s; ; #28 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #28 CACHED; ; #29 [frontend-prod build-stage  7/10] COPY index.html .; #29 CACHED; ; #30 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #30 CACHED; ; #31 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #31 CACHED; ; #32 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #32 CACHED; ; #33 [frontend-prod build-stage  3/10] COPY package*.json ./; #33 CACHED; ; #34 [frontend-prod build-stage  8/10] COPY vite.config.js .; #34 CACHED; ; #35 [frontend-prod build-stage  6/10] COPY src/ src/; #35 CACHED; ; #36 [frontend-prod build-stage  9/10] RUN npm run build; #36 CACHED; ; #37 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #37 CACHED; ; #38 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #38 CACHED; ; #39 [frontend-prod build-stage  5/10] COPY public/ public/; #39 CACHED; ; #40 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #40 CACHED; ; #41 [frontend-prod build-stage  2/10] WORKDIR /app; #41 CACHED; ; #42 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #42 CACHED; ; #22 [rqworker1 internal] load build context; #22 transferring context: 131.72kB 0.3s done; #22 DONE 0.3s; ; #43 [frontend-prod] exporting to image; #43 exporting layers 0.0s done; #43 exporting manifest sha256:03325a88f7e14bf29c4cdab0e88902816b7025efc1e85d88b077929a2c6ca8f1 done; #43 exporting config sha256:e36d891d1dbce9750089a8a5aea56fbd17184b474b3374a744c5a96a815792d6 done; #43 exporting attestation manifest sha256:a186da894cce9d4370f2ec895e073d3932b631f875efa4061ae9c46f6d153407; #43 ...; ; #44 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #44 CACHED; ; #45 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #45 CACHED; ; #46 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #46 CACHED; ; #47 [rqworker2  3/17] COPY requirements.txt requirements.txt; #47 CACHED; ; #48 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #48 CACHED; ; #49 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #49 CACHED; ; #50 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #50 CACHED; ; #51 [rqworker2  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #51 CACHED; ; #52 [rqworker2  5/17] RUN pip install --no-cache-dir -r requirements.txt; #52 CACHED; ; #53 [rqworker2  2/17] WORKDIR /app; #53 CACHED; ; #54 [rqworker2 10/17] COPY --chown=app:app config/ /app/config/; #54 CACHED; ; #55 [rqworker2  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #55 CACHED; ; #56 [rqworker2 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #56 CACHED; ; #57 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #57 CACHED; ; #58 [rqworker2 11/17] COPY --chown=app:app templates/ /app/templates/; #58 CACHED; ; #59 [rqworker1 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 CACHED; ; #60 [rqworker3] exporting to image; #60 exporting layers 0.0s done; #60 exporting manifest sha256:f7b3799c678075d43b86fb5684573543efc5d1e09e33f5aa14762d9b5d770954 0.0s done; #60 exporting config sha256:6f645fd5380693b361bf6127df4ef227e3db46bf0049a31e9bb9ec73007655d1 0.0s done; #60 exporting attestation manifest sha256:59d20973977ea4993f7240163f43c73256b3017d6a34120ba5ce3f046438433f; #60 ...; ; #43 [frontend-prod] exporting to image; #43 exporting attestation manifest sha256:a186da894cce9d4370f2ec895e073d3932b631f875efa4061ae9c46f6d153407 0.1s done; #43 exporting manifest list sha256:918ef249df20eb79db27b7dd1ae1fc354d9186e4bcffe50bcfaa8215d8e1d039 0.1s done; #43 naming to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #43 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #43 DONE 0.5s; ; #60 [rqworker3] exporting to image; #60 exporting attestation manifest sha256:59d20973977ea4993f7240163f43c73256b3017d6a34120ba5ce3f046438433f 0.2s done; #60 exporting manifest list sha256:ecfb2c488fd279bc348c453ae60ca6b23138c4fd24d3d6ac5f7ee6b56a340f29; #60 exporting manifest list sha256:ecfb2c488fd279bc348c453ae60ca6b23138c4fd24d3d6ac5f7ee6b56a340f29 0.1s done; #60 naming to docker.io/library/casestrainer-rqworker3:latest; #60 naming to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #60 unpacking to docker.io/library/casestrainer-rqworker3:latest; #60 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #60 DONE 0.9s; ; #61 [frontend-prod] resolving provenance for metadata file; #61 DONE 0.0s; ; #62 [rqworker1] exporting to image; #62 exporting layers 0.0s done; #62 exporting manifest sha256:67b168c8aff945cb593003988022ddae690193992e96d9fe70f876573aa318ed 0.0s done; #62 exporting config sha256:73acb4a90ee111d24cffca5134f4b4dd487a479c83a869f5136ebf0a4d81b8a7 0.0s done; #62 exporting attestation manifest sha256:c7f92ad1c2999e8d826d2d3bb9fd68009ca515aaeee24187531506fe30352d30 0.3s done; #62 exporting manifest list sha256:ed1de402f6dfb3105cb0e9146a3569ca67a694565b9d2c6b78cc10ac2a4cc316 0.2s done; #62 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #62 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #62 DONE 0.9s; ; #63 [rqworker2] exporting to image; #63 exporting layers 0.0s done; #63 exporting manifest sha256:92ed0ef6af30a9240d3ece8ca4e25246d707863f1c8ad1e8c13f6564805d540b 0.0s done; #63 exporting config sha256:b861bce0d2fd283db3c4b5a2423ecea75e9ca1098ff99e0e51e9b2a9b7d9ff05 0.0s done; #63 exporting attestation manifest sha256:f99cf574c5ece8f3bcbfde9b7183ca8ff9ef953dedc62023187997ac18336103 0.3s done; #63 exporting manifest list sha256:9c38c566485fae4fb68b6af1ace227162c9935a8e060683917092335d5c6a961 0.2s done; #63 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #63 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #63 DONE 1.0s; ; #64 [backend] exporting to image; #64 exporting layers 0.0s done; #64 exporting manifest sha256:5845d4db331571d4cc3fac3be6c8393392367252225b87e7e54e08e70a808bb8 0.0s done; #64 exporting config sha256:e1da690c9ce8445eaabaab7baafde36c0421f64d9462846ab2a529329d9f0998 0.0s done; #64 exporting attestation manifest sha256:4e27c5a729873f1ab46a91eebeb8904de4b86b88eb6f1314e5516a3daba740ba 0.3s done; #64 exporting manifest list sha256:a614a5f8a753401408ac7e46005cde2f25a9be36fe6b84a906a70552606bc7a8 0.2s done; #64 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #64 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #64 DONE 1.0s; ; #65 [rqworker3] resolving provenance for metadata file; #65 DONE 0.1s; ; #66 [backend] resolving provenance for metadata file; #66 ...; ; #67 [rqworker1] resolving provenance for metadata file; #67 DONE 0.2s; ; #66 [backend] resolving provenance for metadata file; #66 DONE 0.1s; ; #68 [rqworker2] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built
[2025-08-14 10:55:23] [INFO] Docker operation completed successfully: build
[2025-08-14 10:55:23] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 10:55:37] [DEBUG] Docker operation exit code: 0
[2025-08-14 10:55:37] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 10:55:37] [INFO] Docker operation completed successfully: up
[2025-08-14 10:55:37] [INFO] Waiting for containers to stabilize...
[2025-08-14 10:55:48] [INFO] Performing application health check...
[2025-08-14 10:55:48] [INFO] Application health check passed
[2025-08-14 10:55:48] [INFO] Deployment completed successfully!
[2025-08-14 10:55:48] [INFO] Containers running: 7
[2025-08-14 10:55:48] [DEBUG] Launcher execution completed
[2025-08-14 10:58:10] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 10:58:10] [INFO] Environment: Production, Mode: Auto
[2025-08-14 10:58:10] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 10:58:10] [INFO] Checking prerequisites...
[2025-08-14 10:58:10] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 10:58:10] [INFO] Auto-detecting deployment mode...
[2025-08-14 10:58:11] [DEBUG] Recent changes detected in casestrainer-vue-new/src (within 2 hours)
[2025-08-14 10:58:11] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 10:58:11] [INFO] Auto-detected mode: Fast
[2025-08-14 10:58:11] [INFO] Starting deployment in Fast mode...
[2025-08-14 10:58:11] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 10:58:11] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 10:58:14] [DEBUG] Docker operation exit code: 0
[2025-08-14 10:58:14] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 10:58:14] [INFO] Docker operation completed successfully: down
[2025-08-14 10:58:14] [INFO] Recent changes in casestrainer-vue-new/src - will rebuild images
[2025-08-14 10:58:14] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 10:58:14] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 10:58:36] [DEBUG] Docker operation exit code: 0
[2025-08-14 10:58:36] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [frontend-prod internal] load build definition from Dockerfile.prod; #2 transferring dockerfile: 2.03kB 0.0s done; #2 DONE 0.1s; ; #3 [rqworker3 internal] load build definition from Dockerfile; #3 transferring dockerfile: 1.80kB 0.0s done; #3 DONE 0.1s; ; #4 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #4 ...; ; #5 [nginx internal] load build definition from Dockerfile; #5 transferring dockerfile: 652B 0.0s done; #5 DONE 0.1s; ; #4 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #4 ...; ; #6 [nginx internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.2s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B 0.0s done; #7 DONE 0.0s; ; #8 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.1s; ; #9 [nginx internal] load build context; #9 transferring context: 97B 0.0s done; #9 DONE 0.0s; ; #10 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #10 DONE 0.4s; ; #11 [nginx 2/8] RUN apk add --no-cache curl; #11 CACHED; ; #12 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #12 CACHED; ; #13 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #13 CACHED; ; #14 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #14 CACHED; ; #15 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #15 CACHED; ; #16 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #16 CACHED; ; #17 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #17 CACHED; ; #4 [backend internal] load metadata for docker.io/library/python:3.10-slim; #4 DONE 0.4s; ; #18 [backend internal] load .dockerignore; #18 transferring context: 908B 0.0s done; #18 DONE 0.1s; ; #19 [frontend-prod internal] load .dockerignore; #19 transferring context: 834B 0.0s done; #19 DONE 0.1s; ; #20 [backend internal] load build context; #20 DONE 0.0s; ; #21 [rqworker3  1/17] FROM docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #21 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #21 ...; ; #8 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.1s; ; #20 [rqworker2 internal] load build context; #20 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #21 [rqworker2  1/17] FROM docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #21 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608 0.2s done; #21 DONE 0.2s; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.2s done; #23 DONE 0.2s; ; #20 [rqworker1 internal] load build context; #20 transferring context: 131.72kB 0.2s done; #20 DONE 0.3s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 60.94kB 0.1s done; #22 DONE 0.1s; ; #24 [frontend-prod build-stage  2/10] WORKDIR /app; #24 CACHED; ; #25 [frontend-prod build-stage  3/10] COPY package*.json ./; #25 CACHED; ; #26 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #26 CACHED; ; #27 [frontend-prod build-stage  5/10] COPY public/ public/; #27 CACHED; ; #28 [nginx] exporting to image; #28 exporting layers 0.0s done; #28 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af 0.0s done; #28 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 0.0s done; #28 exporting attestation manifest sha256:30c718ce028c956e2ef6e6ae89201726d16baa261a81e48ee38a1894038389ec 0.2s done; #28 exporting manifest list sha256:be948ce35d478547bb312374a01217724f594b92b0a55cc7758b6197895c6c6e 0.0s done; #28 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #28 unpacking to docker.io/library/casestrainer-nginx:latest 0.1s done; #28 DONE 0.7s; ; #29 [frontend-prod build-stage  6/10] COPY src/ src/; #29 DONE 0.2s; ; #30 [rqworker3  8/17] COPY --chown=app:app src/ /app/src/; #30 CACHED; ; #31 [rqworker3  7/17] RUN useradd --create-home --shell /bin/bash app; #31 CACHED; ; #32 [rqworker3  3/17] COPY requirements.txt requirements.txt; #32 CACHED; ; #33 [rqworker3 11/17] COPY --chown=app:app templates/ /app/templates/; #33 CACHED; ; #34 [rqworker3  2/17] WORKDIR /app; #34 CACHED; ; #35 [rqworker3  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #35 CACHED; ; #36 [rqworker3 10/17] COPY --chown=app:app config/ /app/config/; #36 CACHED; ; #37 [rqworker3 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #37 CACHED; ; #38 [rqworker3 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #38 CACHED; ; #39 [rqworker3  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #39 CACHED; ; #40 [rqworker3 13/17] COPY --chown=app:app VERSION /app/VERSION; #40 CACHED; ; #41 [rqworker3 12/17] COPY --chown=app:app static/ /app/static/; #41 CACHED; ; #42 [rqworker3 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #42 CACHED; ; #43 [rqworker3  5/17] RUN pip install --no-cache-dir -r requirements.txt; #43 CACHED; ; #44 [rqworker3  9/17] COPY --chown=app:app app/ /app/app/; #44 CACHED; ; #45 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #45 CACHED; ; #46 [rqworker2] exporting to image; #46 exporting layers 0.0s done; #46 exporting manifest sha256:92ed0ef6af30a9240d3ece8ca4e25246d707863f1c8ad1e8c13f6564805d540b done; #46 exporting config sha256:b861bce0d2fd283db3c4b5a2423ecea75e9ca1098ff99e0e51e9b2a9b7d9ff05 0.0s done; #46 exporting attestation manifest sha256:7b990dac95e000f4c34089575675f7e26d3917114e229e8d49d127cdd1c4f457; #46 exporting attestation manifest sha256:7b990dac95e000f4c34089575675f7e26d3917114e229e8d49d127cdd1c4f457 0.4s done; #46 exporting manifest list sha256:a251f2aa7df04b4319d6403c705d6e3011076cebc8273b78924f866a33036c0c 0.1s done; #46 naming to docker.io/library/casestrainer-rqworker2:latest; #46 ...; ; #47 [frontend-prod build-stage  7/10] COPY index.html .; #47 DONE 0.8s; ; #46 [rqworker2] exporting to image; #46 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #46 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #46 DONE 1.2s; ; #48 [frontend-prod build-stage  8/10] COPY vite.config.js .; #48 DONE 0.4s; ; #49 [frontend-prod build-stage  9/10] RUN npm run build; #49 ...; ; #50 [rqworker1] exporting to image; #50 exporting layers 0.0s done; #50 exporting manifest sha256:67b168c8aff945cb593003988022ddae690193992e96d9fe70f876573aa318ed 0.0s done; #50 exporting config sha256:73acb4a90ee111d24cffca5134f4b4dd487a479c83a869f5136ebf0a4d81b8a7 0.0s done; #50 exporting attestation manifest sha256:cac2c3260e22a765eef5ab157953ecb6b51846f6dfaf4126d3988640b0e50206 0.4s done; #50 exporting manifest list sha256:d058b75034ee68e683c74dcd734acef1d55d53d0e5b7bb93db68c551880ecac2 0.2s done; #50 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #50 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #50 DONE 1.3s; ; #51 [nginx] resolving provenance for metadata file; #51 DONE 0.0s; ; #52 [rqworker3] exporting to image; #52 exporting layers 0.1s done; #52 exporting manifest sha256:f7b3799c678075d43b86fb5684573543efc5d1e09e33f5aa14762d9b5d770954 0.1s done; #52 exporting config sha256:6f645fd5380693b361bf6127df4ef227e3db46bf0049a31e9bb9ec73007655d1 0.0s done; #52 exporting attestation manifest sha256:1604bd1311121df98cdf6f77d8fe97e7760296f6a7e96c7ce096c8a0c332bd57 0.4s done; #52 exporting manifest list sha256:a75161a228112bb66bf5e60fa8141f4000d810ea3c723c3f551b26d6d11010bf 0.1s done; #52 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #52 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #52 DONE 1.4s; ; #53 [backend] exporting to image; #53 exporting layers 0.0s done; #53 exporting manifest sha256:5845d4db331571d4cc3fac3be6c8393392367252225b87e7e54e08e70a808bb8 0.1s done; #53 exporting config sha256:e1da690c9ce8445eaabaab7baafde36c0421f64d9462846ab2a529329d9f0998 0.0s done; #53 exporting attestation manifest sha256:3dc03ec29ae6fd9c5c5f20410e7180e249a81aab5858a7b80dfc5f888ca9bc47 0.4s done; #53 exporting manifest list sha256:517182e73c36796a1391aa8419bf26bdd0b3ef73e450e9d6e3a789ebbe6d33e0 0.1s done; #53 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #53 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #53 DONE 1.4s; ; #49 [frontend-prod build-stage  9/10] RUN npm run build; #49 ...; ; #54 [rqworker2] resolving provenance for metadata file; #54 DONE 0.4s; ; #55 [rqworker1] resolving provenance for metadata file; #55 DONE 0.2s; ; #56 [rqworker3] resolving provenance for metadata file; #56 DONE 0.1s; ; #57 [backend] resolving provenance for metadata file; #57 DONE 0.0s; ; #49 [frontend-prod build-stage  9/10] RUN npm run build; #49 1.181 ; #49 1.181 > casestrainer-vue-new@0.6.5 build; #49 1.181 > vite build; #49 1.181 ; #49 2.558 vite v6.3.5 building for production...; #49 3.366 transforming...; #49 8.262 G 136 modules transformed.; #49 9.427 rendering chunks...; #49 13.61 computing gzip size...; #49 13.64 dist/index.html                              0.91 kB G gzip:  0.45 kB; #49 13.64 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB G gzip:  0.07 kB; #49 13.64 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB G gzip:  0.07 kB; #49 13.64 dist/assets/NotFound-CrLUfTg_.css            1.01 kB G gzip:  0.45 kB; #49 13.64 dist/assets/Docs-La2G-zWQ.css                1.39 kB G gzip:  0.46 kB; #49 13.64 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB G gzip:  0.57 kB; #49 13.64 dist/assets/index-C4VRSvyB.css             249.76 kB G gzip: 35.16 kB; #49 13.64 dist/assets/Docs-BvDn3Zly.js                 1.01 kB G gzip:  0.56 kB; #49 13.64 dist/assets/WordPlugin-BTok3wr-.js           1.20 kB G gzip:  0.71 kB; #49 13.64 dist/assets/BrowserExtension-CfP2cUuE.js     1.22 kB G gzip:  0.73 kB; #49 13.64 dist/assets/NotFound-CaSE369c.js             1.89 kB G gzip:  0.92 kB; #49 13.64 dist/assets/ApiDocs-CHvnJXbN.js             23.31 kB G gzip:  4.00 kB; #49 13.64 dist/assets/vendor-C-1G2k3o.js              34.93 kB G gzip: 13.58 kB; #49 13.64 dist/assets/vue-qau5yeaZ.js                 91.39 kB G gzip: 34.94 kB; #49 13.64 dist/assets/index-BlYv17sH.js              119.64 kB G gzip: 36.19 kB; #49 13.64 G built in 10.77s; #49 DONE 13.8s; ; #58 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #58 DONE 0.4s; ; #8 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 CACHED; ; #59 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #59 DONE 0.1s; ; #60 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #60 DONE 0.3s; ; #61 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #61 DONE 0.2s; ; #62 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #62 DONE 0.1s; ; #63 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #63 DONE 0.4s; ; #64 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #64 DONE 0.4s; ; #65 [frontend-prod] exporting to image; #65 exporting layers; #65 exporting layers 0.5s done; #65 exporting manifest sha256:4f1a5ca712e01ee662e9b7b097765c36e13efbed38229942060d7254319b2494 0.0s done; #65 exporting config sha256:d8a2f9710887e8dcc92e7d56b1b1a44cf65ec0cde0a1f577db127d4c50af28eb 0.0s done; #65 exporting attestation manifest sha256:faffdacc0d2f8986a4d2b9291db7d15d94d2c375fc246aa626dcb673d44459ed 0.1s done; #65 exporting manifest list sha256:26196c24f84fd7161f8d4a407ff099167c38fb383f1765f975a3c85c656b1f98; #65 exporting manifest list sha256:26196c24f84fd7161f8d4a407ff099167c38fb383f1765f975a3c85c656b1f98 0.0s done; #65 naming to docker.io/library/casestrainer-frontend-prod:latest done; #65 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #65 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.3s done; #65 DONE 1.0s; ; #66 [frontend-prod] resolving provenance for metadata file; #66 DONE 0.0s;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built
[2025-08-14 10:58:36] [INFO] Docker operation completed successfully: build
[2025-08-14 10:58:36] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 10:58:50] [DEBUG] Docker operation exit code: 0
[2025-08-14 10:58:50] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 10:58:50] [INFO] Docker operation completed successfully: up
[2025-08-14 10:58:50] [INFO] Waiting for containers to stabilize...
[2025-08-14 10:59:01] [INFO] Performing application health check...
[2025-08-14 10:59:01] [INFO] Application health check passed
[2025-08-14 10:59:01] [INFO] Deployment completed successfully!
[2025-08-14 10:59:01] [INFO] Containers running: 7
[2025-08-14 10:59:01] [DEBUG] Launcher execution completed
[2025-08-14 10:59:53] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 10:59:53] [INFO] Environment: Production, Mode: Auto
[2025-08-14 10:59:53] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 10:59:53] [INFO] Checking prerequisites...
[2025-08-14 10:59:53] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 10:59:53] [INFO] Auto-detecting deployment mode...
[2025-08-14 10:59:54] [DEBUG] Recent changes detected in casestrainer-vue-new/src (within 2 hours)
[2025-08-14 10:59:54] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 10:59:54] [INFO] Auto-detected mode: Fast
[2025-08-14 10:59:54] [INFO] Starting deployment in Fast mode...
[2025-08-14 10:59:54] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 10:59:54] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 10:59:57] [DEBUG] Docker operation exit code: 0
[2025-08-14 10:59:57] [DEBUG] Docker output:  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 10:59:57] [INFO] Docker operation completed successfully: down
[2025-08-14 10:59:57] [INFO] Recent changes in casestrainer-vue-new/src - will rebuild images
[2025-08-14 10:59:57] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 10:59:57] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 11:00:18] [DEBUG] Docker operation exit code: 0
[2025-08-14 11:00:18] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker1 internal] load build definition from Dockerfile; #2 ...; ; #3 [nginx internal] load build definition from Dockerfile; #3 transferring dockerfile: 652B 0.0s done; #3 DONE 0.1s; ; #2 [rqworker3 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.1s; ; #5 [nginx internal] load metadata for docker.io/library/nginx:alpine; #5 DONE 0.1s; ; #6 [nginx internal] load .dockerignore; #6 transferring context:; #6 transferring context: 2B 0.0s done; #6 DONE 0.1s; ; #7 [nginx internal] load build context; #7 DONE 0.0s; ; #8 [auth] library/python:pull token for registry-1.docker.io; #8 DONE 0.0s; ; #9 [auth] library/node:pull token for registry-1.docker.io; #9 DONE 0.0s; ; #10 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #7 [nginx internal] load build context; #7 transferring context: 97B done; #7 DONE 0.0s; ; #11 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #11 CACHED; ; #12 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #12 CACHED; ; #13 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #13 CACHED; ; #14 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #14 CACHED; ; #15 [nginx 2/8] RUN apk add --no-cache curl; #15 CACHED; ; #16 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #16 CACHED; ; #17 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #17 CACHED; ; #18 [nginx] exporting to image; #18 exporting layers 0.0s done; #18 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af 0.0s done; #18 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #18 exporting attestation manifest sha256:d5db532650e36b0394ef76c1aa23e115bd7a30d98b7c61dd0bf63194bf99758b 0.1s done; #18 exporting manifest list sha256:37264cea2dd23f302108d93608a2d9ffeb24b542ac3be4da92c80e43dc6a123c; #18 exporting manifest list sha256:37264cea2dd23f302108d93608a2d9ffeb24b542ac3be4da92c80e43dc6a123c 0.0s done; #18 naming to docker.io/library/casestrainer-nginx:latest done; #18 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #18 DONE 0.4s; ; #19 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #19 DONE 0.8s; ; #20 [rqworker3 internal] load .dockerignore; #20 transferring context: 908B 0.0s done; #20 DONE 0.1s; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #21 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #21 DONE 0.8s; ; #22 [frontend-prod internal] load .dockerignore; #22 transferring context: 834B 0.0s done; #22 DONE 0.1s; ; #23 [rqworker1 internal] load build context; #23 DONE 0.0s; ; #24 [frontend-prod internal] load build context; #24 DONE 0.0s; ; #25 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #25 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #25 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608 0.1s done; #25 DONE 0.1s; ; #26 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #26 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #26 DONE 0.1s; ; #23 [rqworker3 internal] load build context; #23 ...; ; #24 [frontend-prod internal] load build context; #24 transferring context: 58.50kB 0.1s done; #24 DONE 0.1s; ; #23 [rqworker3 internal] load build context; #23 transferring context: 131.72kB 0.2s done; #23 transferring context: 131.72kB 0.2s done; #23 DONE 0.3s; ; #27 [nginx] resolving provenance for metadata file; #27 DONE 0.0s; ; #28 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #28 CACHED; ; #29 [frontend-prod build-stage  2/10] WORKDIR /app; #29 CACHED; ; #30 [frontend-prod build-stage  3/10] COPY package*.json ./; #30 CACHED; ; #31 [frontend-prod build-stage  5/10] COPY public/ public/; #31 CACHED; ; #32 [rqworker1  9/17] COPY --chown=app:app app/ /app/app/; #32 CACHED; ; #33 [rqworker1 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #33 CACHED; ; #34 [rqworker1 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #34 CACHED; ; #35 [rqworker1 12/17] COPY --chown=app:app static/ /app/static/; #35 CACHED; ; #36 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #36 CACHED; ; #37 [rqworker1  5/17] RUN pip install --no-cache-dir -r requirements.txt; #37 CACHED; ; #38 [rqworker1  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #38 CACHED; ; #39 [rqworker1  2/17] WORKDIR /app; #39 CACHED; ; #40 [rqworker1  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #40 CACHED; ; #41 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #41 CACHED; ; #42 [rqworker1  7/17] RUN useradd --create-home --shell /bin/bash app; #42 CACHED; ; #43 [rqworker1 13/17] COPY --chown=app:app VERSION /app/VERSION; #43 CACHED; ; #44 [rqworker1 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #44 CACHED; ; #45 [rqworker1  3/17] COPY requirements.txt requirements.txt; #45 CACHED; ; #46 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #46 CACHED; ; #47 [rqworker1 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #47 CACHED; ; #48 [frontend-prod build-stage  6/10] COPY src/ src/; #48 ...; ; #45 [backend  3/17] COPY requirements.txt requirements.txt; #45 CACHED; ; #36 [backend 11/17] COPY --chown=app:app templates/ /app/templates/; #36 CACHED; ; #42 [backend  7/17] RUN useradd --create-home --shell /bin/bash app; #42 CACHED; ; #34 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #34 CACHED; ; #46 [backend  8/17] COPY --chown=app:app src/ /app/src/; #46 CACHED; ; #43 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #43 CACHED; ; #39 [backend  2/17] WORKDIR /app; #39 CACHED; ; #44 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #44 CACHED; ; #40 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #40 CACHED; ; #38 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #38 CACHED; ; #37 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #37 CACHED; ; #32 [backend  9/17] COPY --chown=app:app app/ /app/app/; #32 CACHED; ; #35 [backend 12/17] COPY --chown=app:app static/ /app/static/; #35 CACHED; ; #41 [backend 10/17] COPY --chown=app:app config/ /app/config/; #41 CACHED; ; #33 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #33 CACHED; ; #47 [backend 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #47 CACHED; ; #48 [frontend-prod build-stage  6/10] COPY src/ src/; #48 DONE 0.2s; ; #49 [backend] exporting to image; #49 exporting layers 0.0s done; #49 exporting manifest sha256:5845d4db331571d4cc3fac3be6c8393392367252225b87e7e54e08e70a808bb8 0.0s done; #49 exporting config sha256:e1da690c9ce8445eaabaab7baafde36c0421f64d9462846ab2a529329d9f0998 0.0s done; #49 exporting attestation manifest sha256:e5800775c99ae69d232d875625fd1595393f3760eedc425630667af366032f41; #49 exporting attestation manifest sha256:e5800775c99ae69d232d875625fd1595393f3760eedc425630667af366032f41 0.2s done; #49 exporting manifest list sha256:bf552117914041b634501f7795913b476b1e7855ee3ef89a38a49cf8f65e0f04; #49 exporting manifest list sha256:bf552117914041b634501f7795913b476b1e7855ee3ef89a38a49cf8f65e0f04 0.1s done; #49 naming to docker.io/library/casestrainer-backend:latest; #49 ...; ; #50 [frontend-prod build-stage  7/10] COPY index.html .; #50 DONE 0.5s; ; #49 [backend] exporting to image; #49 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #49 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #49 DONE 0.8s; ; #51 [frontend-prod build-stage  8/10] COPY vite.config.js .; #51 DONE 0.1s; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 ...; ; #53 [rqworker3] exporting to image; #53 exporting layers 0.0s done; #53 exporting manifest sha256:f7b3799c678075d43b86fb5684573543efc5d1e09e33f5aa14762d9b5d770954 0.0s done; #53 exporting config sha256:6f645fd5380693b361bf6127df4ef227e3db46bf0049a31e9bb9ec73007655d1 0.0s done; #53 exporting attestation manifest sha256:91728981ffe1a5b680b73dc40c4ccf7e5c4ae24188d1e75a63bac96b96dc0534 0.2s done; #53 exporting manifest list sha256:8e1b36214423bd44d5d39dfde80eb430a2be1ef08076f07f83a983f313a04326 0.1s done; #53 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #53 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #53 DONE 0.9s; ; #54 [rqworker2] exporting to image; #54 exporting layers 0.0s done; #54 exporting manifest sha256:92ed0ef6af30a9240d3ece8ca4e25246d707863f1c8ad1e8c13f6564805d540b 0.0s done; #54 exporting config sha256:b861bce0d2fd283db3c4b5a2423ecea75e9ca1098ff99e0e51e9b2a9b7d9ff05 0.0s done; #54 exporting attestation manifest sha256:c74f32406768687543baafbc17117cf9bdf3e436878b2c43da9c680e8fcb2e6f 0.2s done; #54 exporting manifest list sha256:b12f43b8d1b00a2d32dfb8979bb7c7a8ed8e47783f53a782c306e64a2c7edbaf 0.1s done; #54 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #54 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #54 DONE 0.9s; ; #55 [rqworker1] exporting to image; #55 exporting layers 0.0s done; #55 exporting manifest sha256:67b168c8aff945cb593003988022ddae690193992e96d9fe70f876573aa318ed 0.1s done; #55 exporting config sha256:73acb4a90ee111d24cffca5134f4b4dd487a479c83a869f5136ebf0a4d81b8a7 0.1s done; #55 exporting attestation manifest sha256:802e8f31ed996e93d99376dd36fd0f8341653bbf4ab960f69ff4e9a443ce7d2e 0.3s done; #55 exporting manifest list sha256:2782a253f7c1c4f2e0dfa1e5af536007e65491ecc8252e9cf61820da0c71bfc6 0.1s done; #55 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #55 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #55 DONE 0.9s; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 0.846 ; #52 0.846 > casestrainer-vue-new@0.6.5 build; #52 0.846 > vite build; #52 0.846 ; #52 ...; ; #56 [backend] resolving provenance for metadata file; #56 DONE 0.3s; ; #57 [rqworker3] resolving provenance for metadata file; #57 DONE 0.3s; ; #58 [rqworker1] resolving provenance for metadata file; #58 DONE 0.1s; ; #59 [rqworker2] resolving provenance for metadata file; #59 DONE 0.0s; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 1.517 vite v6.3.5 building for production...; #52 1.768 transforming...; #52 6.730 G 136 modules transformed.; #52 7.865 rendering chunks...; #52 12.19 computing gzip size...; #52 12.23 dist/index.html                              0.91 kB G gzip:  0.45 kB; #52 12.23 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB G gzip:  0.07 kB; #52 12.23 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB G gzip:  0.07 kB; #52 12.23 dist/assets/NotFound-CrLUfTg_.css            1.01 kB G gzip:  0.45 kB; #52 12.23 dist/assets/Docs-La2G-zWQ.css                1.39 kB G gzip:  0.46 kB; #52 12.23 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB G gzip:  0.57 kB; #52 12.23 dist/assets/index-DTbaSoHF.css             249.76 kB G gzip: 35.16 kB; #52 12.23 dist/assets/Docs-CeozEg-4.js                 1.01 kB G gzip:  0.56 kB; #52 12.23 dist/assets/WordPlugin-Bc-kU1cE.js           1.20 kB G gzip:  0.71 kB; #52 12.23 dist/assets/BrowserExtension-YzSunblU.js     1.22 kB G gzip:  0.73 kB; #52 12.23 dist/assets/NotFound-BqLz_wW4.js             1.89 kB G gzip:  0.92 kB; #52 12.23 dist/assets/ApiDocs-6KVCOLnU.js             23.31 kB G gzip:  4.00 kB; #52 12.23 dist/assets/vendor-C-1G2k3o.js              34.93 kB G gzip: 13.58 kB; #52 12.23 dist/assets/vue-qau5yeaZ.js                 91.39 kB G gzip: 34.94 kB; #52 12.23 dist/assets/index-B8R-5ICD.js              117.33 kB G gzip: 35.71 kB; #52 12.23 G built in 10.65s; #52 DONE 12.4s; ; #60 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #60 DONE 0.4s; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 CACHED; ; #61 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #61 DONE 0.1s; ; #62 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #62 DONE 0.4s; ; #63 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #63 DONE 0.1s; ; #64 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #64 DONE 0.1s; ; #65 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #65 DONE 0.5s; ; #66 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #66 DONE 0.4s; ; #67 [frontend-prod] exporting to image; #67 exporting layers; #67 exporting layers 0.6s done; #67 exporting manifest sha256:56c241d8528bf85b9dac215b115db464748e16ec25d195a6df823900099220ae 0.0s done; #67 exporting config sha256:832df35a6a806dfb30ed1ce39be2e81891d4d3f7ff1ec058949c74115ade3afc 0.0s done; #67 exporting attestation manifest sha256:742803532f427fa87f35a404b2ec4c2e7c7592ed261f8c0ced33f2b133ba64be 0.1s done; #67 exporting manifest list sha256:3b31362221fba7d9de813ec61d29ba9ec83d0a4c6f4a5f7ef4f4e8eb8c967c16; #67 exporting manifest list sha256:3b31362221fba7d9de813ec61d29ba9ec83d0a4c6f4a5f7ef4f4e8eb8c967c16 0.0s done; #67 naming to docker.io/library/casestrainer-frontend-prod:latest done; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.2s done; #67 DONE 1.0s; ; #68 [frontend-prod] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built
[2025-08-14 11:00:18] [INFO] Docker operation completed successfully: build
[2025-08-14 11:00:18] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 11:00:32] [DEBUG] Docker operation exit code: 0
[2025-08-14 11:00:32] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 11:00:32] [INFO] Docker operation completed successfully: up
[2025-08-14 11:00:32] [INFO] Waiting for containers to stabilize...
[2025-08-14 11:00:43] [INFO] Performing application health check...
[2025-08-14 11:00:43] [INFO] Application health check passed
[2025-08-14 11:00:43] [INFO] Deployment completed successfully!
[2025-08-14 11:00:43] [INFO] Containers running: 7
[2025-08-14 11:00:43] [DEBUG] Launcher execution completed
[2025-08-14 11:05:28] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 11:05:28] [INFO] Environment: Production, Mode: Auto
[2025-08-14 11:05:28] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 11:05:28] [INFO] Checking prerequisites...
[2025-08-14 11:05:28] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 11:05:28] [INFO] Auto-detecting deployment mode...
[2025-08-14 11:05:29] [DEBUG] Recent changes detected in casestrainer-vue-new/src (within 2 hours)
[2025-08-14 11:05:29] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 11:05:29] [INFO] Auto-detected mode: Fast
[2025-08-14 11:05:29] [INFO] Starting deployment in Fast mode...
[2025-08-14 11:05:29] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 11:05:29] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 11:05:32] [DEBUG] Docker operation exit code: 0
[2025-08-14 11:05:32] [DEBUG] Docker output:  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 11:05:32] [INFO] Docker operation completed successfully: down
[2025-08-14 11:05:32] [INFO] Recent changes in casestrainer-vue-new/src - will rebuild images
[2025-08-14 11:05:32] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 11:05:32] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 11:05:54] [DEBUG] Docker operation exit code: 0
[2025-08-14 11:05:54] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [frontend-prod internal] load build definition from Dockerfile.prod; #2 transferring dockerfile: 2.03kB 0.0s done; #2 DONE 0.1s; ; #3 [nginx internal] load build definition from Dockerfile; #3 transferring dockerfile: 652B 0.0s done; #3 DONE 0.1s; ; #4 [rqworker2 internal] load build definition from Dockerfile; #4 transferring dockerfile: 1.80kB 0.0s done; #4 DONE 0.1s; ; #5 [nginx internal] load metadata for docker.io/library/nginx:alpine; #5 DONE 0.1s; ; #6 [nginx internal] load .dockerignore; #6 transferring context:; #6 transferring context: 2B done; #6 DONE 0.0s; ; #7 [auth] library/node:pull token for registry-1.docker.io; #7 DONE 0.0s; ; #8 [auth] library/python:pull token for registry-1.docker.io; #8 DONE 0.0s; ; #9 [nginx internal] load build context; #9 DONE 0.0s; ; #10 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #9 [nginx internal] load build context; #9 transferring context: 97B 0.0s done; #9 DONE 0.0s; ; #11 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #11 CACHED; ; #12 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #12 CACHED; ; #13 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #13 CACHED; ; #14 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #14 CACHED; ; #15 [nginx 2/8] RUN apk add --no-cache curl; #15 CACHED; ; #16 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #16 CACHED; ; #17 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #17 CACHED; ; #18 [nginx] exporting to image; #18 exporting layers 0.0s done; #18 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #18 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 0.0s done; #18 exporting attestation manifest sha256:a8d41f8fa5c47a4ebebec35ceb3264ac721a715a04b44c5dfb4b0bf5ac95a003 0.1s done; #18 exporting manifest list sha256:fd96783ae15780ad4cefc6ec64f75e43fb8cb46fefacbb9675a9b200932d08fc; #18 exporting manifest list sha256:fd96783ae15780ad4cefc6ec64f75e43fb8cb46fefacbb9675a9b200932d08fc 0.0s done; #18 naming to docker.io/library/casestrainer-nginx:latest done; #18 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #18 DONE 0.3s; ; #19 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #19 DONE 0.7s; ; #20 [rqworker3 internal] load .dockerignore; #20 transferring context: 908B 0.0s done; #20 DONE 0.0s; ; #21 [rqworker2 internal] load build context; #21 DONE 0.0s; ; #22 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #22 DONE 0.8s; ; #23 [rqworker2  1/17] FROM docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #23 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #23 ...; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #24 [frontend-prod internal] load .dockerignore; #24 transferring context: 834B 0.0s done; #24 DONE 0.0s; ; #25 [frontend-prod internal] load build context; #25 DONE 0.0s; ; #23 [rqworker3  1/17] FROM docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #23 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608 0.1s done; #23 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608 0.1s done; #23 DONE 0.2s; ; #21 [rqworker2 internal] load build context; #21 ...; ; #26 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #26 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.3s done; #26 DONE 0.3s; ; #21 [rqworker2 internal] load build context; #21 ...; ; #27 [nginx] resolving provenance for metadata file; #27 DONE 0.1s; ; #25 [frontend-prod internal] load build context; #25 transferring context: 58.20kB 0.1s done; #25 DONE 0.1s; ; #28 [frontend-prod build-stage  3/10] COPY package*.json ./; #28 CACHED; ; #29 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #29 CACHED; ; #30 [frontend-prod build-stage  2/10] WORKDIR /app; #30 CACHED; ; #31 [frontend-prod build-stage  5/10] COPY public/ public/; #31 CACHED; ; #21 [rqworker2 internal] load build context; #21 transferring context: 131.72kB 0.3s done; #21 DONE 0.4s; ; #32 [rqworker3 13/17] COPY --chown=app:app VERSION /app/VERSION; #32 CACHED; ; #33 [rqworker3  3/17] COPY requirements.txt requirements.txt; #33 CACHED; ; #34 [rqworker3  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #34 CACHED; ; #35 [rqworker3 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #35 CACHED; ; #36 [rqworker3  7/17] RUN useradd --create-home --shell /bin/bash app; #36 CACHED; ; #37 [rqworker3  5/17] RUN pip install --no-cache-dir -r requirements.txt; #37 CACHED; ; #38 [rqworker3 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #38 CACHED; ; #39 [rqworker3  2/17] WORKDIR /app; #39 CACHED; ; #40 [rqworker3  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #40 CACHED; ; #41 [rqworker3  9/17] COPY --chown=app:app app/ /app/app/; #41 CACHED; ; #42 [rqworker3 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #42 CACHED; ; #43 [rqworker3 12/17] COPY --chown=app:app static/ /app/static/; #43 CACHED; ; #44 [rqworker3  8/17] COPY --chown=app:app src/ /app/src/; #44 CACHED; ; #45 [rqworker3 10/17] COPY --chown=app:app config/ /app/config/; #45 CACHED; ; #46 [rqworker3 11/17] COPY --chown=app:app templates/ /app/templates/; #46 CACHED; ; #47 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #47 CACHED; ; #48 [rqworker1] exporting to image; #48 ...; ; #49 [frontend-prod build-stage  6/10] COPY src/ src/; #49 DONE 0.2s; ; #48 [rqworker1] exporting to image; #48 exporting layers 0.0s done; #48 exporting manifest sha256:67b168c8aff945cb593003988022ddae690193992e96d9fe70f876573aa318ed 0.0s done; #48 exporting config sha256:73acb4a90ee111d24cffca5134f4b4dd487a479c83a869f5136ebf0a4d81b8a7 0.0s done; #48 exporting attestation manifest sha256:9d1b44f6628f3f6374038402b3946f8fc1dfb75a885c74b62dbab4323ec4e1b1; #48 ...; ; #50 [frontend-prod build-stage  7/10] COPY index.html .; #50 DONE 0.5s; ; #48 [rqworker1] exporting to image; #48 exporting attestation manifest sha256:9d1b44f6628f3f6374038402b3946f8fc1dfb75a885c74b62dbab4323ec4e1b1 0.3s done; #48 exporting manifest list sha256:c296031d3ae9e98634876941b08abeb7ecec156605a800e47989ed5623ef13c7; #48 exporting manifest list sha256:c296031d3ae9e98634876941b08abeb7ecec156605a800e47989ed5623ef13c7 0.1s done; #48 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #48 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #48 DONE 0.9s; ; #51 [backend] exporting to image; #51 exporting layers 0.0s done; #51 exporting manifest sha256:5845d4db331571d4cc3fac3be6c8393392367252225b87e7e54e08e70a808bb8 done; #51 exporting config sha256:e1da690c9ce8445eaabaab7baafde36c0421f64d9462846ab2a529329d9f0998 0.0s done; #51 exporting attestation manifest sha256:7cda2da7618eb6cc8bf34c8a5655e1fe9d08945d919da132f9677c33fa723717 0.3s done; #51 exporting manifest list sha256:61fbcd414e50eb0344b4122107f8e07e09cf217897b07ec5002dc16fb4b41beb 0.1s done; #51 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #51 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #51 DONE 0.8s; ; #52 [frontend-prod build-stage  8/10] COPY vite.config.js .; #52 DONE 0.2s; ; #53 [rqworker2] exporting to image; #53 exporting layers 0.0s done; #53 exporting manifest sha256:92ed0ef6af30a9240d3ece8ca4e25246d707863f1c8ad1e8c13f6564805d540b 0.0s done; #53 exporting config sha256:b861bce0d2fd283db3c4b5a2423ecea75e9ca1098ff99e0e51e9b2a9b7d9ff05 done; #53 exporting attestation manifest sha256:12d17c2b2225bec1517691383534d046ff69992c0ac2b1a1e17e2a8bbb1203c0 0.2s done; #53 exporting manifest list sha256:f047d7daba2173fb37bdceec2715de7e09f833b63bf7fbd9fc2905e41c2fe06d 0.1s done; #53 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #53 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #53 DONE 0.8s; ; #54 [rqworker3] exporting to image; #54 exporting layers 0.0s done; #54 exporting manifest sha256:f7b3799c678075d43b86fb5684573543efc5d1e09e33f5aa14762d9b5d770954 0.1s done; #54 exporting config sha256:6f645fd5380693b361bf6127df4ef227e3db46bf0049a31e9bb9ec73007655d1 0.0s done; #54 exporting attestation manifest sha256:8dd867c24537bb3a2a5c42818a6b14c284909eebec9f26ebc3dd78f8a9d54d29 0.3s done; #54 exporting manifest list sha256:ecd4d1471004232f890abd11761fcc4809e96c0efaee81a357559c1a100cb85b 0.1s done; #54 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #54 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #54 DONE 0.9s; ; #55 [frontend-prod build-stage  9/10] RUN npm run build; #55 ...; ; #56 [backend] resolving provenance for metadata file; #56 DONE 0.2s; ; #57 [rqworker2] resolving provenance for metadata file; #57 DONE 0.3s; ; #58 [rqworker3] resolving provenance for metadata file; #58 DONE 0.2s; ; #59 [rqworker1] resolving provenance for metadata file; #59 DONE 0.0s; ; #55 [frontend-prod build-stage  9/10] RUN npm run build; #55 1.221 ; #55 1.221 > casestrainer-vue-new@0.6.5 build; #55 1.221 > vite build; #55 1.221 ; #55 2.500 vite v6.3.5 building for production...; #55 3.384 transforming...; #55 8.133 G 136 modules transformed.; #55 9.288 rendering chunks...; #55 13.12 computing gzip size...; #55 13.14 dist/index.html                              0.91 kB G gzip:  0.45 kB; #55 13.14 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB G gzip:  0.07 kB; #55 13.14 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB G gzip:  0.07 kB; #55 13.14 dist/assets/NotFound-CrLUfTg_.css            1.01 kB G gzip:  0.45 kB; #55 13.14 dist/assets/Docs-La2G-zWQ.css                1.39 kB G gzip:  0.46 kB; #55 13.14 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB G gzip:  0.57 kB; #55 13.14 dist/assets/index-xAb61e15.css             249.76 kB G gzip: 35.16 kB; #55 13.15 dist/assets/Docs-CGL2Jm0c.js                 1.01 kB G gzip:  0.56 kB; #55 13.15 dist/assets/WordPlugin-BXLGFaKQ.js           1.20 kB G gzip:  0.71 kB; #55 13.15 dist/assets/BrowserExtension-CYmbevHl.js     1.22 kB G gzip:  0.73 kB; #55 13.15 dist/assets/NotFound-B2vQbHzq.js             1.89 kB G gzip:  0.92 kB; #55 13.15 dist/assets/ApiDocs-D_hli5zv.js             23.31 kB G gzip:  4.00 kB; #55 13.15 dist/assets/vendor-C-1G2k3o.js              34.93 kB G gzip: 13.58 kB; #55 13.15 dist/assets/vue-qau5yeaZ.js                 91.39 kB G gzip: 34.94 kB; #55 13.15 dist/assets/index-CndhjWM1.js              117.10 kB G gzip: 35.68 kB; #55 13.15 G built in 10.33s; #55 DONE 13.3s; ; #60 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #60 DONE 0.4s; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 CACHED; ; #61 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #61 DONE 0.1s; ; #62 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #62 DONE 0.4s; ; #63 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #63 DONE 0.1s; ; #64 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #64 DONE 0.1s; ; #65 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #65 DONE 0.4s; ; #66 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #66 DONE 0.5s; ; #67 [frontend-prod] exporting to image; #67 exporting layers; #67 exporting layers 0.6s done; #67 exporting manifest sha256:7a5d058b509347cfe5ac2739dbbbe3d9ec07bfd2874c0d259e16101eea20e8e6 0.0s done; #67 exporting config sha256:dbd8cca9a02cc9053c6ef3152f93da1d300236aabc3c1dcb8c62a6b31c01529e 0.0s done; #67 exporting attestation manifest sha256:708da000fac04d25eb4088454de2013e786728963a218e0f64f600bc0f8202dc 0.1s done; #67 exporting manifest list sha256:300709cd5e041bb1d776780a5d08a3f04a39c0c68a66db72e641adfe340b8c85; #67 exporting manifest list sha256:300709cd5e041bb1d776780a5d08a3f04a39c0c68a66db72e641adfe340b8c85 0.0s done; #67 naming to docker.io/library/casestrainer-frontend-prod:latest done; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.2s done; #67 DONE 1.1s; ; #68 [frontend-prod] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built
[2025-08-14 11:05:54] [INFO] Docker operation completed successfully: build
[2025-08-14 11:05:54] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 11:06:08] [DEBUG] Docker operation exit code: 0
[2025-08-14 11:06:08] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-nginx-prod  Created;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 11:06:08] [INFO] Docker operation completed successfully: up
[2025-08-14 11:06:08] [INFO] Waiting for containers to stabilize...
[2025-08-14 11:06:19] [INFO] Performing application health check...
[2025-08-14 11:06:19] [INFO] Application health check passed
[2025-08-14 11:06:19] [INFO] Deployment completed successfully!
[2025-08-14 11:06:19] [INFO] Containers running: 7
[2025-08-14 11:06:19] [DEBUG] Launcher execution completed
[2025-08-14 11:08:04] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 11:08:04] [INFO] Environment: Production, Mode: Auto
[2025-08-14 11:08:04] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 11:08:04] [INFO] Checking prerequisites...
[2025-08-14 11:08:04] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 11:08:04] [INFO] Auto-detecting deployment mode...
[2025-08-14 11:08:04] [DEBUG] Recent changes detected in casestrainer-vue-new/src (within 2 hours)
[2025-08-14 11:08:04] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 11:08:04] [INFO] Auto-detected mode: Fast
[2025-08-14 11:08:04] [INFO] Starting deployment in Fast mode...
[2025-08-14 11:08:04] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 11:08:04] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 11:08:07] [DEBUG] Docker operation exit code: 0
[2025-08-14 11:08:07] [DEBUG] Docker output:  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 11:08:07] [INFO] Docker operation completed successfully: down
[2025-08-14 11:08:07] [INFO] Recent changes in casestrainer-vue-new/src - will rebuild images
[2025-08-14 11:08:07] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 11:08:07] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 11:08:26] [DEBUG] Docker operation exit code: 0
[2025-08-14 11:08:26] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker3 internal] load build definition from Dockerfile; #2 DONE 0.0s; ; #3 [nginx internal] load build definition from Dockerfile; #3 transferring dockerfile: 652B 0.0s done; #3 DONE 0.0s; ; #2 [rqworker2 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.1s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B 0.0s done; #7 DONE 0.0s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #8 [nginx internal] load build context; #8 DONE 0.0s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 DONE 0.1s; ; #8 [nginx internal] load build context; #8 transferring context: 97B done; #8 DONE 0.0s; ; #10 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #10 CACHED; ; #11 [nginx 2/8] RUN apk add --no-cache curl; #11 CACHED; ; #12 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #12 CACHED; ; #13 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #13 CACHED; ; #14 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #14 CACHED; ; #15 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [nginx] exporting to image; #17 exporting layers 0.0s done; #17 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af 0.0s done; #17 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #17 exporting attestation manifest sha256:748048153fb05b297abb7f4b56eadf2e73ca75b829ba2d2ac0b2bec8abc390d5 0.1s done; #17 exporting manifest list sha256:5dc309059249872e0c3ba9eb0d393e878945f17c25a9a7ecf431186642dd4ea1; #17 ...; ; #5 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 0.5s; ; #18 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #18 DONE 0.5s; ; #17 [nginx] exporting to image; #17 exporting manifest list sha256:5dc309059249872e0c3ba9eb0d393e878945f17c25a9a7ecf431186642dd4ea1 0.0s done; #17 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #17 unpacking to docker.io/library/casestrainer-nginx:latest; #17 ...; ; #9 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #19 [backend internal] load .dockerignore; #19 transferring context: 908B 0.0s done; #19 DONE 0.1s; ; #20 [frontend-prod internal] load .dockerignore; #20 transferring context: 834B 0.0s done; #20 DONE 0.1s; ; #21 [backend internal] load build context; #21 DONE 0.0s; ; #17 [nginx] exporting to image; #17 unpacking to docker.io/library/casestrainer-nginx:latest 0.1s done; #17 DONE 0.5s; ; #22 [rqworker2  1/17] FROM docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #22 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608 0.1s done; #22 DONE 0.1s; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #23 DONE 0.1s; ; #21 [rqworker2 internal] load build context; #21 ...; ; #24 [frontend-prod internal] load build context; #24 transferring context: 58.15kB 0.1s done; #24 DONE 0.2s; ; #25 [frontend-prod build-stage  2/10] WORKDIR /app; #25 CACHED; ; #26 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #26 CACHED; ; #27 [frontend-prod build-stage  3/10] COPY package*.json ./; #27 CACHED; ; #28 [frontend-prod build-stage  5/10] COPY public/ public/; #28 CACHED; ; #21 [rqworker2 internal] load build context; #21 transferring context: 131.72kB 0.2s done; #21 transferring context: 131.72kB 0.2s done; #21 DONE 0.3s; ; #29 [rqworker3  3/17] COPY requirements.txt requirements.txt; #29 CACHED; ; #30 [rqworker3 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #30 CACHED; ; #31 [rqworker3  7/17] RUN useradd --create-home --shell /bin/bash app; #31 CACHED; ; #32 [rqworker3 11/17] COPY --chown=app:app templates/ /app/templates/; #32 CACHED; ; #33 [rqworker3  2/17] WORKDIR /app; #33 CACHED; ; #34 [rqworker3 12/17] COPY --chown=app:app static/ /app/static/; #34 CACHED; ; #35 [rqworker3 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #35 CACHED; ; #36 [rqworker3  9/17] COPY --chown=app:app app/ /app/app/; #36 CACHED; ; #37 [rqworker3 10/17] COPY --chown=app:app config/ /app/config/; #37 CACHED; ; #38 [rqworker3 13/17] COPY --chown=app:app VERSION /app/VERSION; #38 CACHED; ; #39 [rqworker3  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #39 CACHED; ; #40 [rqworker3  8/17] COPY --chown=app:app src/ /app/src/; #40 CACHED; ; #41 [rqworker3 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #41 CACHED; ; #42 [rqworker3  5/17] RUN pip install --no-cache-dir -r requirements.txt; #42 CACHED; ; #43 [rqworker3  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #43 CACHED; ; #44 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #44 CACHED; ; #45 [frontend-prod build-stage  6/10] COPY src/ src/; #45 DONE 0.1s; ; #46 [frontend-prod build-stage  7/10] COPY index.html .; #46 DONE 0.3s; ; #47 [rqworker1] exporting to image; #47 exporting layers 0.1s done; #47 exporting manifest sha256:67b168c8aff945cb593003988022ddae690193992e96d9fe70f876573aa318ed 0.0s done; #47 exporting config sha256:73acb4a90ee111d24cffca5134f4b4dd487a479c83a869f5136ebf0a4d81b8a7 0.0s done; #47 exporting attestation manifest sha256:bf695a80648b2a0f13edc8651661a18fc62aafdd405e1a9f0c4fd7c07933b00c; #47 exporting attestation manifest sha256:bf695a80648b2a0f13edc8651661a18fc62aafdd405e1a9f0c4fd7c07933b00c 0.2s done; #47 exporting manifest list sha256:22107cd0e10721b46005c61f024d69ce7361f2b01ba4d4fb22ee4f6abf6cc32d; #47 exporting manifest list sha256:22107cd0e10721b46005c61f024d69ce7361f2b01ba4d4fb22ee4f6abf6cc32d 0.1s done; #47 naming to docker.io/library/casestrainer-rqworker1:latest; #47 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #47 unpacking to docker.io/library/casestrainer-rqworker1:latest; #47 ...; ; #48 [nginx] resolving provenance for metadata file; #48 DONE 0.1s; ; #49 [frontend-prod build-stage  8/10] COPY vite.config.js .; #49 DONE 0.5s; ; #47 [rqworker1] exporting to image; #47 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #47 DONE 0.9s; ; #50 [backend] exporting to image; #50 exporting layers 0.1s done; #50 exporting manifest sha256:5845d4db331571d4cc3fac3be6c8393392367252225b87e7e54e08e70a808bb8 0.0s done; #50 exporting config sha256:e1da690c9ce8445eaabaab7baafde36c0421f64d9462846ab2a529329d9f0998 0.0s done; #50 exporting attestation manifest sha256:243871db3a268203cd617813e6fb050d642e7c4023468055af1467a1a5735e9b 0.2s done; #50 exporting manifest list sha256:31fc3874db6af46b8f9bfe5a76223e3885cc534fd8dd5b3b85dfc8e3ef3c8a30 0.1s done; #50 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #50 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #50 DONE 0.9s; ; #51 [rqworker3] exporting to image; #51 exporting layers 0.1s done; #51 exporting manifest sha256:f7b3799c678075d43b86fb5684573543efc5d1e09e33f5aa14762d9b5d770954 0.0s done; #51 exporting config sha256:6f645fd5380693b361bf6127df4ef227e3db46bf0049a31e9bb9ec73007655d1 0.0s done; #51 exporting attestation manifest sha256:7dd4cbdfc0973acfd5013306918476aa0d7958ffe1a56978bc7e17090b0494ff 0.2s done; #51 exporting manifest list sha256:a112eaffb64e1930989aa26081e09fdb94c5e886fabbf27ee53ec5bd9b954db4 0.1s done; #51 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #51 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #51 DONE 1.0s; ; #52 [rqworker2] exporting to image; #52 exporting layers 0.1s done; #52 exporting manifest sha256:92ed0ef6af30a9240d3ece8ca4e25246d707863f1c8ad1e8c13f6564805d540b 0.0s done; #52 exporting config sha256:b861bce0d2fd283db3c4b5a2423ecea75e9ca1098ff99e0e51e9b2a9b7d9ff05 0.1s done; #52 exporting attestation manifest sha256:bb9dbcfa65423a2967a5c281045cab1fc173bcc21ff617dcd62cc5b40691fbbf 0.2s done; #52 exporting manifest list sha256:181cf70f83b4b102104fdbdc675274fb5fe004b1a99787ff5fce65983cd7daed 0.1s done; #52 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #52 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #52 DONE 1.0s; ; #53 [frontend-prod build-stage  9/10] RUN npm run build; #53 ...; ; #54 [rqworker1] resolving provenance for metadata file; #54 DONE 0.2s; ; #55 [backend] resolving provenance for metadata file; #55 DONE 0.2s; ; #56 [rqworker2] resolving provenance for metadata file; #56 DONE 0.0s; ; #57 [rqworker3] resolving provenance for metadata file; #57 DONE 0.1s; ; #53 [frontend-prod build-stage  9/10] RUN npm run build; #53 0.829 ; #53 0.829 > casestrainer-vue-new@0.6.5 build; #53 0.829 > vite build; #53 0.829 ; #53 1.416 vite v6.3.5 building for production...; #53 1.683 transforming...; #53 5.853 G 136 modules transformed.; #53 7.013 rendering chunks...; #53 10.76 computing gzip size...; #53 10.79 dist/index.html                              0.91 kB G gzip:  0.46 kB; #53 10.79 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB G gzip:  0.07 kB; #53 10.79 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB G gzip:  0.07 kB; #53 10.79 dist/assets/NotFound-CrLUfTg_.css            1.01 kB G gzip:  0.45 kB; #53 10.79 dist/assets/Docs-La2G-zWQ.css                1.39 kB G gzip:  0.46 kB; #53 10.79 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB G gzip:  0.57 kB; #53 10.79 dist/assets/index-s6bf2LPP.css             249.76 kB G gzip: 35.16 kB; #53 10.79 dist/assets/Docs-94JrwBgj.js                 1.01 kB G gzip:  0.56 kB; #53 10.79 dist/assets/WordPlugin-Bvmy8JzD.js           1.20 kB G gzip:  0.71 kB; #53 10.79 dist/assets/BrowserExtension-Bif8xb2W.js     1.22 kB G gzip:  0.73 kB; #53 10.79 dist/assets/NotFound-BMIBuyys.js             1.89 kB G gzip:  0.92 kB; #53 10.79 dist/assets/ApiDocs-Bm88HuB0.js             23.31 kB G gzip:  4.00 kB; #53 10.79 dist/assets/vendor-C-1G2k3o.js              34.93 kB G gzip: 13.58 kB; #53 10.79 dist/assets/vue-qau5yeaZ.js                 91.39 kB G gzip: 34.94 kB; #53 10.79 dist/assets/index-8IJKzoNu.js              120.06 kB G gzip: 36.63 kB; #53 10.79 G built in 9.31s; #53 DONE 11.0s; ; #58 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #58 DONE 0.4s; ; #9 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 CACHED; ; #59 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #59 DONE 0.1s; ; #60 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #60 DONE 0.3s; ; #61 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #61 DONE 0.1s; ; #62 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #62 DONE 0.1s; ; #63 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #63 DONE 0.4s; ; #64 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #64 DONE 0.5s; ; #65 [frontend-prod] exporting to image; #65 exporting layers; #65 exporting layers 0.6s done; #65 exporting manifest sha256:6db4a45cf6296645d13d23a4332259851c75d7b9a4ef6d1f28a7321a5814510a 0.0s done; #65 exporting config sha256:1d85e2ee7218601027125006c2ead6bd2bdd87d70c0226dc77be6aeea6229b91 0.0s done; #65 exporting attestation manifest sha256:7af1ea09089ade66b2956a28f343f493f06f4fd895e07438539b65e5e7c07f98; #65 exporting attestation manifest sha256:7af1ea09089ade66b2956a28f343f493f06f4fd895e07438539b65e5e7c07f98 0.1s done; #65 exporting manifest list sha256:968e2760e759be59e968dfce42f35a6799c546dfd658aa2e6e1eebc02803bef5 0.0s done; #65 naming to docker.io/library/casestrainer-frontend-prod:latest done; #65 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #65 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.3s done; #65 DONE 1.1s; ; #66 [frontend-prod] resolving provenance for metadata file; #66 DONE 0.0s;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built
[2025-08-14 11:08:26] [INFO] Docker operation completed successfully: build
[2025-08-14 11:08:26] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 11:08:40] [DEBUG] Docker operation exit code: 0
[2025-08-14 11:08:40] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 11:08:40] [INFO] Docker operation completed successfully: up
[2025-08-14 11:08:40] [INFO] Waiting for containers to stabilize...
[2025-08-14 11:08:50] [INFO] Performing application health check...
[2025-08-14 11:08:51] [INFO] Application health check passed
[2025-08-14 11:08:51] [INFO] Deployment completed successfully!
[2025-08-14 11:08:51] [INFO] Containers running: 7
[2025-08-14 11:08:51] [DEBUG] Launcher execution completed
[2025-08-14 11:09:47] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 11:09:47] [INFO] Environment: Production, Mode: Auto
[2025-08-14 11:09:47] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 11:09:47] [INFO] Checking prerequisites...
[2025-08-14 11:09:48] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 11:09:48] [INFO] Auto-detecting deployment mode...
[2025-08-14 11:09:48] [INFO] Vue source files are newer than dist files - rebuild needed
[2025-08-14 11:09:48] [INFO] Vue source files are newer than dist - performing build and Fast restart
[2025-08-14 11:09:48] [INFO] Building Vue frontend...
[2025-08-14 11:09:57] [INFO] Auto-detected mode: Fast
[2025-08-14 11:09:57] [INFO] Starting deployment in Fast mode...
[2025-08-14 11:09:57] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 11:09:57] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 11:09:59] [DEBUG] Docker operation exit code: 0
[2025-08-14 11:09:59] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 11:09:59] [INFO] Docker operation completed successfully: down
[2025-08-14 11:10:00] [INFO] Recent changes in casestrainer-vue-new/src - will rebuild images
[2025-08-14 11:10:00] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 11:10:00] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 11:10:05] [DEBUG] Docker operation exit code: 0
[2025-08-14 11:10:05] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [frontend-prod internal] load build definition from Dockerfile.prod; #2 transferring dockerfile: 2.03kB 0.0s done; #2 DONE 0.1s; ; #3 [rqworker3 internal] load build definition from Dockerfile; #3 transferring dockerfile: 1.80kB 0.0s done; #3 DONE 0.1s; ; #4 [backend internal] load metadata for docker.io/library/python:3.10-slim; #4 ...; ; #5 [nginx internal] load build definition from Dockerfile; #5 transferring dockerfile: 652B 0.0s done; #5 DONE 0.1s; ; #6 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #4 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #4 ...; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B done; #7 DONE 0.0s; ; #8 [nginx internal] load build context; #8 DONE 0.0s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 DONE 0.1s; ; #8 [nginx internal] load build context; #8 transferring context: 97B done; #8 DONE 0.0s; ; #10 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #10 CACHED; ; #11 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #11 CACHED; ; #12 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #12 CACHED; ; #13 [nginx 2/8] RUN apk add --no-cache curl; #13 CACHED; ; #14 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #14 CACHED; ; #15 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [nginx] exporting to image; #17 exporting layers 0.0s done; #17 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #17 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #17 exporting attestation manifest sha256:da984e3658d84675e4af5f08ae79b81934a215db4ac42c5c81cb22e074435cf5; #17 exporting attestation manifest sha256:da984e3658d84675e4af5f08ae79b81934a215db4ac42c5c81cb22e074435cf5 0.1s done; #17 exporting manifest list sha256:3becac09b7e12430041e01aff459c34bf208052724dfb55bffb9fe241e1483a8 0.0s done; #17 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #17 unpacking to docker.io/library/casestrainer-nginx:latest; #17 ...; ; #9 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #18 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #18 DONE 0.5s; ; #4 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #4 DONE 0.5s; ; #19 [frontend-prod internal] load .dockerignore; #19 transferring context: 834B 0.0s done; #19 DONE 0.0s; ; #20 [backend internal] load .dockerignore; #20 transferring context: 908B 0.0s done; #20 DONE 0.0s; ; #17 [nginx] exporting to image; #17 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #17 DONE 0.3s; ; #21 [frontend-prod internal] load build context; #21 DONE 0.0s; ; #22 [rqworker2 internal] load build context; #22 DONE 0.0s; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #23 DONE 0.1s; ; #24 [rqworker2  1/17] FROM docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #24 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #24 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608 0.1s done; #24 DONE 0.1s; ; #21 [frontend-prod internal] load build context; #21 transferring context: 58.15kB 0.1s done; #21 DONE 0.1s; ; #22 [rqworker2 internal] load build context; #22 ...; ; #25 [frontend-prod build-stage  6/10] COPY src/ src/; #25 CACHED; ; #26 [frontend-prod build-stage  2/10] WORKDIR /app; #26 CACHED; ; #27 [frontend-prod build-stage  3/10] COPY package*.json ./; #27 CACHED; ; #28 [frontend-prod build-stage  9/10] RUN npm run build; #28 CACHED; ; #29 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #29 CACHED; ; #30 [frontend-prod build-stage  7/10] COPY index.html .; #30 CACHED; ; #31 [frontend-prod build-stage  5/10] COPY public/ public/; #31 CACHED; ; #32 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #32 CACHED; ; #33 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #33 CACHED; ; #34 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #34 CACHED; ; #35 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #35 CACHED; ; #36 [frontend-prod build-stage  8/10] COPY vite.config.js .; #36 CACHED; ; #37 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #37 CACHED; ; #38 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #38 CACHED; ; #39 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #39 CACHED; ; #22 [rqworker2 internal] load build context; #22 transferring context: 131.72kB 0.2s done; #22 DONE 0.2s; ; #40 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #40 CACHED; ; #41 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #41 CACHED; ; #42 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #42 CACHED; ; #43 [backend  2/17] WORKDIR /app; #43 CACHED; ; #44 [backend 12/17] COPY --chown=app:app static/ /app/static/; #44 CACHED; ; #45 [backend  7/17] RUN useradd --create-home --shell /bin/bash app; #45 CACHED; ; #46 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #46 CACHED; ; #47 [backend 11/17] COPY --chown=app:app templates/ /app/templates/; #47 CACHED; ; #48 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #48 CACHED; ; #49 [backend  8/17] COPY --chown=app:app src/ /app/src/; #49 CACHED; ; #50 [backend  9/17] COPY --chown=app:app app/ /app/app/; #50 CACHED; ; #51 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #51 CACHED; ; #52 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #52 CACHED; ; #53 [backend 10/17] COPY --chown=app:app config/ /app/config/; #53 CACHED; ; #54 [backend  3/17] COPY requirements.txt requirements.txt; #54 CACHED; ; #55 [backend 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #55 CACHED; ; #56 [rqworker1] exporting to image; #56 exporting layers 0.0s done; #56 exporting manifest sha256:67b168c8aff945cb593003988022ddae690193992e96d9fe70f876573aa318ed 0.0s done; #56 exporting config sha256:73acb4a90ee111d24cffca5134f4b4dd487a479c83a869f5136ebf0a4d81b8a7; #56 exporting config sha256:73acb4a90ee111d24cffca5134f4b4dd487a479c83a869f5136ebf0a4d81b8a7 0.1s done; #56 ...; ; #57 [nginx] resolving provenance for metadata file; #57 DONE 0.0s; ; #56 [rqworker1] exporting to image; #56 exporting attestation manifest sha256:b859b88e4d8ac1d498cba089b5703c6cfe29064a043b6b0564ee0712b6383195; #56 ...; ; #58 [frontend-prod] exporting to image; #58 exporting layers 0.0s done; #58 exporting manifest sha256:6db4a45cf6296645d13d23a4332259851c75d7b9a4ef6d1f28a7321a5814510a done; #58 exporting config sha256:1d85e2ee7218601027125006c2ead6bd2bdd87d70c0226dc77be6aeea6229b91 done; #58 exporting attestation manifest sha256:baf50d1d078c4101476b3c3297cc72866b667081ff8a9a05f0b9ec702360b2b7 0.2s done; #58 exporting manifest list sha256:74b4697bf60af38e250d3ae3d1abeb9f8401b3d654511411e48ecafbc110ef30 0.1s done; #58 naming to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #58 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #58 DONE 0.6s; ; #56 [rqworker1] exporting to image; #56 exporting attestation manifest sha256:b859b88e4d8ac1d498cba089b5703c6cfe29064a043b6b0564ee0712b6383195 0.3s done; #56 exporting manifest list sha256:637542405b9dd5808b95233dfd6261ec8803eccab3b797c5fc2acd5bfaefdb31; #56 exporting manifest list sha256:637542405b9dd5808b95233dfd6261ec8803eccab3b797c5fc2acd5bfaefdb31 0.1s done; #56 naming to docker.io/library/casestrainer-rqworker1:latest; #56 ...; ; #59 [backend] exporting to image; #59 exporting layers 0.0s done; #59 exporting manifest sha256:5845d4db331571d4cc3fac3be6c8393392367252225b87e7e54e08e70a808bb8 0.0s done; #59 exporting config sha256:e1da690c9ce8445eaabaab7baafde36c0421f64d9462846ab2a529329d9f0998 0.0s done; #59 exporting attestation manifest sha256:38c95f4e6f817caee1556aece48db9b4ca45be7ce5de72355517c9f601e98266 0.3s done; #59 exporting manifest list sha256:74a44f32263389c58c71782d69a059d4e9268c79a6af607cceef0b64f05bf174 0.1s done; #59 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #59 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #59 DONE 0.9s; ; #56 [rqworker1] exporting to image; #56 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #56 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #56 DONE 0.9s; ; #60 [rqworker2] exporting to image; #60 exporting layers 0.0s done; #60 exporting manifest sha256:92ed0ef6af30a9240d3ece8ca4e25246d707863f1c8ad1e8c13f6564805d540b 0.0s done; #60 exporting config sha256:b861bce0d2fd283db3c4b5a2423ecea75e9ca1098ff99e0e51e9b2a9b7d9ff05 0.0s done; #60 exporting attestation manifest sha256:d6c59288812157449fdfbd379ac4abe5388a851761d9100d969ce8dfa92969cb 0.3s done; #60 exporting manifest list sha256:0882f87ba50821b076fefcdc92b2d3fdfc7b35d2e107623b0e6c80931e2135da 0.1s done; #60 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #60 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #60 DONE 0.9s; ; #61 [rqworker3] exporting to image; #61 exporting layers 0.0s done; #61 exporting manifest sha256:f7b3799c678075d43b86fb5684573543efc5d1e09e33f5aa14762d9b5d770954 0.0s done; #61 exporting config sha256:6f645fd5380693b361bf6127df4ef227e3db46bf0049a31e9bb9ec73007655d1 0.1s done; #61 exporting attestation manifest sha256:d57685e6c2d9ac76789ed9c745bf4375fa33f50aea660d1eeddfaaf22e0cdd2f 0.3s done; #61 exporting manifest list sha256:75c334b12f4736d91e5156d7e234f5230090f58ecec0a5b08da90eb865bc1c09 0.1s done; #61 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #61 DONE 0.9s; ; #62 [frontend-prod] resolving provenance for metadata file; #62 DONE 0.0s; ; #63 [backend] resolving provenance for metadata file; #63 DONE 0.2s; ; #64 [rqworker2] resolving provenance for metadata file; #64 ...; ; #65 [rqworker3] resolving provenance for metadata file; #65 DONE 0.2s; ; #64 [rqworker2] resolving provenance for metadata file; #64 DONE 0.3s; ; #66 [rqworker1] resolving provenance for metadata file; #66 DONE 0.0s;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built
[2025-08-14 11:10:05] [INFO] Docker operation completed successfully: build
[2025-08-14 11:10:05] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 11:10:19] [DEBUG] Docker operation exit code: 0
[2025-08-14 11:10:19] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 11:10:19] [INFO] Docker operation completed successfully: up
[2025-08-14 11:10:19] [INFO] Waiting for containers to stabilize...
[2025-08-14 11:10:30] [INFO] Performing application health check...
[2025-08-14 11:10:30] [INFO] Application health check passed
[2025-08-14 11:10:30] [INFO] Deployment completed successfully!
[2025-08-14 11:10:30] [INFO] Containers running: 7
[2025-08-14 11:10:30] [DEBUG] Launcher execution completed
[2025-08-14 11:14:54] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 11:14:54] [INFO] Environment: Production, Mode: Auto
[2025-08-14 11:14:54] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 11:14:54] [INFO] Checking prerequisites...
[2025-08-14 11:14:54] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 11:14:54] [INFO] Auto-detecting deployment mode...
[2025-08-14 11:14:54] [DEBUG] Recent changes detected in casestrainer-vue-new/src (within 2 hours)
[2025-08-14 11:14:54] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 11:14:54] [INFO] Auto-detected mode: Fast
[2025-08-14 11:14:54] [INFO] Starting deployment in Fast mode...
[2025-08-14 11:14:54] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 11:14:54] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 11:14:57] [DEBUG] Docker operation exit code: 0
[2025-08-14 11:14:57] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 11:14:57] [INFO] Docker operation completed successfully: down
[2025-08-14 11:14:58] [INFO] Recent changes in casestrainer-vue-new/src - will rebuild images
[2025-08-14 11:14:58] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 11:14:58] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 11:15:20] [DEBUG] Docker operation exit code: 0
[2025-08-14 11:15:20] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker3 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [backend internal] load metadata for docker.io/library/python:3.10-slim; #3 ...; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.1s; ; #5 [nginx internal] load build definition from Dockerfile; #5 transferring dockerfile: 652B 0.0s done; #5 DONE 0.1s; ; #6 [auth] library/python:pull token for registry-1.docker.io; #6 DONE 0.0s; ; #7 [auth] library/node:pull token for registry-1.docker.io; #7 DONE 0.0s; ; #3 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #3 ...; ; #8 [nginx internal] load metadata for docker.io/library/nginx:alpine; #8 DONE 0.1s; ; #9 [nginx internal] load .dockerignore; #9 transferring context: 2B 0.0s done; #9 DONE 0.0s; ; #10 [nginx internal] load build context; #10 DONE 0.0s; ; #11 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #11 DONE 0.1s; ; #11 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 DONE 0.1s; ; #10 [nginx internal] load build context; #10 transferring context: 97B done; #10 DONE 0.0s; ; #12 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #12 CACHED; ; #13 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #13 CACHED; ; #14 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #14 CACHED; ; #15 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #15 CACHED; ; #16 [nginx 2/8] RUN apk add --no-cache curl; #16 CACHED; ; #17 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:b1cdd61cd0eb6df799d92f6d625c36a8a48ff8fee27c17feba7067099c73a724; #19 exporting attestation manifest sha256:b1cdd61cd0eb6df799d92f6d625c36a8a48ff8fee27c17feba7067099c73a724 0.1s done; #19 exporting manifest list sha256:1be0639dfd6660ee40fb0b7d699fcf9621fb90cbdc4799982f4bbd4379a8348a 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.2s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 ...; ; #21 [rqworker2 internal] load .dockerignore; #21 DONE 0.0s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.7s; ; #3 [backend internal] load metadata for docker.io/library/python:3.10-slim; #3 DONE 0.7s; ; #21 [rqworker2 internal] load .dockerignore; #21 transferring context: 908B 0.0s done; #21 DONE 0.0s; ; #22 [frontend-prod internal] load .dockerignore; #22 transferring context: 834B 0.0s done; #22 DONE 0.1s; ; #23 [backend internal] load build context; #23 DONE 0.0s; ; #24 [backend  1/17] FROM docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #24 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #24 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608 0.1s done; #24 DONE 0.1s; ; #11 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #11 DONE 0.1s; ; #25 [frontend-prod internal] load build context; #25 DONE 0.0s; ; #26 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #26 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #26 DONE 0.1s; ; #27 [nginx] resolving provenance for metadata file; #27 DONE 0.0s; ; #25 [frontend-prod internal] load build context; #25 transferring context: 58.98kB 0.0s done; #25 DONE 0.1s; ; #23 [backend internal] load build context; #23 transferring context: 131.72kB 0.2s done; #23 DONE 0.2s; ; #28 [frontend-prod build-stage  3/10] COPY package*.json ./; #28 CACHED; ; #29 [frontend-prod build-stage  2/10] WORKDIR /app; #29 CACHED; ; #30 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #30 CACHED; ; #31 [frontend-prod build-stage  5/10] COPY public/ public/; #31 CACHED; ; #32 [rqworker2 11/17] COPY --chown=app:app templates/ /app/templates/; #32 CACHED; ; #33 [rqworker2 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #33 CACHED; ; #34 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #34 CACHED; ; #35 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #35 CACHED; ; #36 [rqworker2  5/17] RUN pip install --no-cache-dir -r requirements.txt; #36 CACHED; ; #37 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #37 CACHED; ; #38 [rqworker2  2/17] WORKDIR /app; #38 CACHED; ; #39 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #39 CACHED; ; #40 [rqworker2  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #40 CACHED; ; #41 [rqworker2 10/17] COPY --chown=app:app config/ /app/config/; #41 CACHED; ; #42 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #42 CACHED; ; #43 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #43 CACHED; ; #44 [rqworker2  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #44 CACHED; ; #45 [rqworker2  3/17] COPY requirements.txt requirements.txt; #45 CACHED; ; #46 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #46 CACHED; ; #47 [rqworker2 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #47 CACHED; ; #48 [frontend-prod build-stage  6/10] COPY src/ src/; #48 ...; ; #33 [rqworker3 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #33 CACHED; ; #44 [rqworker3  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #44 CACHED; ; #39 [rqworker3 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #39 CACHED; ; #32 [rqworker3 11/17] COPY --chown=app:app templates/ /app/templates/; #32 CACHED; ; #38 [rqworker3  2/17] WORKDIR /app; #38 CACHED; ; #45 [rqworker3  3/17] COPY requirements.txt requirements.txt; #45 CACHED; ; #41 [rqworker3 10/17] COPY --chown=app:app config/ /app/config/; #41 CACHED; ; #36 [rqworker3  5/17] RUN pip install --no-cache-dir -r requirements.txt; #36 CACHED; ; #34 [rqworker3 12/17] COPY --chown=app:app static/ /app/static/; #34 CACHED; ; #37 [rqworker3 13/17] COPY --chown=app:app VERSION /app/VERSION; #37 CACHED; ; #35 [rqworker3  8/17] COPY --chown=app:app src/ /app/src/; #35 CACHED; ; #43 [rqworker3 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #43 CACHED; ; #46 [rqworker3  7/17] RUN useradd --create-home --shell /bin/bash app; #46 CACHED; ; #42 [rqworker3  9/17] COPY --chown=app:app app/ /app/app/; #42 CACHED; ; #40 [rqworker3  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #40 CACHED; ; #47 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #47 CACHED; ; #48 [frontend-prod build-stage  6/10] COPY src/ src/; #48 DONE 0.2s; ; #49 [backend] exporting to image; #49 exporting layers 0.0s done; #49 exporting manifest sha256:5845d4db331571d4cc3fac3be6c8393392367252225b87e7e54e08e70a808bb8 0.0s done; #49 exporting config sha256:e1da690c9ce8445eaabaab7baafde36c0421f64d9462846ab2a529329d9f0998 0.0s done; #49 exporting attestation manifest sha256:b9353b65ff6395ba8372beec5ec5fc26a33149989ef05654009e519b2d8661b9; #49 ...; ; #50 [frontend-prod build-stage  7/10] COPY index.html .; #50 DONE 0.4s; ; #49 [backend] exporting to image; #49 exporting attestation manifest sha256:b9353b65ff6395ba8372beec5ec5fc26a33149989ef05654009e519b2d8661b9 0.2s done; #49 exporting manifest list sha256:ac34f42db4f2c45db7c431b576d40396765920a9707804ef5e4e45295c09f459; #49 exporting manifest list sha256:ac34f42db4f2c45db7c431b576d40396765920a9707804ef5e4e45295c09f459 0.1s done; #49 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #49 unpacking to docker.io/library/casestrainer-backend:latest; #49 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #49 DONE 0.8s; ; #51 [frontend-prod build-stage  8/10] COPY vite.config.js .; #51 DONE 0.2s; ; #52 [rqworker3] exporting to image; #52 exporting layers 0.1s done; #52 exporting manifest sha256:f7b3799c678075d43b86fb5684573543efc5d1e09e33f5aa14762d9b5d770954 0.0s done; #52 exporting config sha256:6f645fd5380693b361bf6127df4ef227e3db46bf0049a31e9bb9ec73007655d1 0.0s done; #52 exporting attestation manifest sha256:bf1a026bf440d04d86f0bcc1a14791a0611dc6a70ba06a6b79c5e7be86a254af 0.2s done; #52 exporting manifest list sha256:94b986672df77f0a927e1b97c178e427bef19619f403961132fb1db24e3f8c50 0.1s done; #52 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #52 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #52 DONE 0.8s; ; #53 [rqworker2] exporting to image; #53 exporting layers 0.0s done; #53 exporting manifest sha256:92ed0ef6af30a9240d3ece8ca4e25246d707863f1c8ad1e8c13f6564805d540b 0.0s done; #53 exporting config sha256:b861bce0d2fd283db3c4b5a2423ecea75e9ca1098ff99e0e51e9b2a9b7d9ff05 0.0s done; #53 exporting attestation manifest sha256:66dcc9623d972e6adf6cfbb2ba997150a0e52138197d1044f9c00260c7419ef0 0.2s done; #53 exporting manifest list sha256:3384e46d7ea3723e3465c2e8bd6369e54b46aa65f731e33e652db03f40505a43 0.1s done; #53 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #53 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #53 DONE 0.8s; ; #54 [rqworker1] exporting to image; #54 exporting layers 0.1s done; #54 exporting manifest sha256:67b168c8aff945cb593003988022ddae690193992e96d9fe70f876573aa318ed 0.0s done; #54 exporting config sha256:73acb4a90ee111d24cffca5134f4b4dd487a479c83a869f5136ebf0a4d81b8a7 0.0s done; #54 exporting attestation manifest sha256:d5bc1287c341bfc1b13d34d79c985e4c55707fc4bb8e7d87139fe90c7fdd9ab9 0.2s done; #54 exporting manifest list sha256:4823c801bc9129200df9e225709658eba6ae5ca67999b1fc77030e649d909327 0.1s done; #54 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #54 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #54 DONE 0.8s; ; #55 [frontend-prod build-stage  9/10] RUN npm run build; #55 ...; ; #56 [rqworker2] resolving provenance for metadata file; #56 DONE 0.1s; ; #57 [rqworker3] resolving provenance for metadata file; #57 DONE 0.1s; ; #58 [backend] resolving provenance for metadata file; #58 DONE 0.2s; ; #59 [rqworker1] resolving provenance for metadata file; #59 DONE 0.0s; ; #55 [frontend-prod build-stage  9/10] RUN npm run build; #55 1.102 ; #55 1.102 > casestrainer-vue-new@0.6.5 build; #55 1.102 > vite build; #55 1.102 ; #55 2.434 vite v6.3.5 building for production...; #55 3.471 transforming...; #55 8.366 G 136 modules transformed.; #55 9.487 rendering chunks...; #55 13.77 computing gzip size...; #55 13.82 dist/index.html                              0.91 kB G gzip:  0.45 kB; #55 13.82 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB G gzip:  0.07 kB; #55 13.82 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB G gzip:  0.07 kB; #55 13.82 dist/assets/NotFound-CrLUfTg_.css            1.01 kB G gzip:  0.45 kB; #55 13.82 dist/assets/Docs-La2G-zWQ.css                1.39 kB G gzip:  0.46 kB; #55 13.82 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB G gzip:  0.57 kB; #55 13.82 dist/assets/index-Oky-a3C3.css             272.58 kB G gzip: 38.42 kB; #55 13.82 dist/assets/Docs-DGq_XqQR.js                 1.01 kB G gzip:  0.56 kB; #55 13.82 dist/assets/WordPlugin-CsQjtjeh.js           1.20 kB G gzip:  0.71 kB; #55 13.82 dist/assets/BrowserExtension-zvyUrfJG.js     1.22 kB G gzip:  0.73 kB; #55 13.82 dist/assets/NotFound-DnyhOePl.js             1.89 kB G gzip:  0.92 kB; #55 13.82 dist/assets/ApiDocs-LW0jTRSf.js             23.31 kB G gzip:  4.00 kB; #55 13.82 dist/assets/vendor-C-1G2k3o.js              34.93 kB G gzip: 13.58 kB; #55 13.82 dist/assets/vue-ChBwCVzF.js                 91.40 kB G gzip: 34.95 kB; #55 13.82 dist/assets/index-BKTutPtl.js              149.96 kB G gzip: 44.56 kB; #55 13.82 G built in 11.04s; #55 DONE 14.0s; ; #60 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #60 DONE 0.4s; ; #11 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 CACHED; ; #61 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #61 DONE 0.1s; ; #62 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #62 DONE 0.4s; ; #63 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #63 DONE 0.1s; ; #64 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #64 DONE 0.1s; ; #65 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #65 DONE 0.5s; ; #66 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #66 DONE 0.4s; ; #67 [frontend-prod] exporting to image; #67 exporting layers; #67 exporting layers 0.6s done; #67 exporting manifest sha256:42b882da3b76504c32b38f7ed292b304b2cfe2af406eda19c7c7e1726a5884b3 0.0s done; #67 exporting config sha256:a368fa51a42d156713321507e49adbb1c202d244320e3b240079bbf127a5f854 0.0s done; #67 exporting attestation manifest sha256:57fc0997c66accf4932c44720f940443857a610a5040a3fe4902f0d4ca5e6246; #67 exporting attestation manifest sha256:57fc0997c66accf4932c44720f940443857a610a5040a3fe4902f0d4ca5e6246 0.1s done; #67 exporting manifest list sha256:4134a79267b8a11bb12b9c35411654a6c003ebdd923ce2870461d2b7f4b6aba1 0.0s done; #67 naming to docker.io/library/casestrainer-frontend-prod:latest done; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.2s done; #67 DONE 1.1s; ; #68 [frontend-prod] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built
[2025-08-14 11:15:20] [INFO] Docker operation completed successfully: build
[2025-08-14 11:15:20] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 11:15:34] [DEBUG] Docker operation exit code: 0
[2025-08-14 11:15:34] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-nginx-prod  Created;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 11:15:34] [INFO] Docker operation completed successfully: up
[2025-08-14 11:15:34] [INFO] Waiting for containers to stabilize...
[2025-08-14 11:15:44] [INFO] Performing application health check...
[2025-08-14 11:15:44] [INFO] Application health check passed
[2025-08-14 11:15:44] [INFO] Deployment completed successfully!
[2025-08-14 11:15:44] [INFO] Containers running: 7
[2025-08-14 11:15:44] [DEBUG] Launcher execution completed
[2025-08-14 14:43:41] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 14:43:41] [INFO] Environment: Production, Mode: Auto
[2025-08-14 14:43:41] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 14:43:41] [INFO] Checking prerequisites...
[2025-08-14 14:43:41] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 14:43:41] [INFO] Auto-detecting deployment mode...
[2025-08-14 14:43:42] [INFO] Vue source files are newer than dist files - rebuild needed
[2025-08-14 14:43:42] [INFO] Vue source files are newer than dist - performing build and Fast restart
[2025-08-14 14:43:42] [INFO] Building Vue frontend...
[2025-08-14 14:43:52] [INFO] Auto-detected mode: Fast
[2025-08-14 14:43:52] [INFO] Starting deployment in Fast mode...
[2025-08-14 14:43:52] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 14:43:52] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 14:43:55] [DEBUG] Docker operation exit code: 0
[2025-08-14 14:43:55] [DEBUG] Docker output:  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 14:43:55] [INFO] Docker operation completed successfully: down
[2025-08-14 14:43:55] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 14:44:10] [DEBUG] Docker operation exit code: 0
[2025-08-14 14:44:10] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 14:44:10] [INFO] Docker operation completed successfully: up
[2025-08-14 14:44:10] [INFO] Waiting for containers to stabilize...
[2025-08-14 14:44:21] [INFO] Performing application health check...
[2025-08-14 14:44:21] [INFO] Application health check passed
[2025-08-14 14:44:21] [INFO] Deployment completed successfully!
[2025-08-14 14:44:21] [INFO] Containers running: 7
[2025-08-14 14:44:21] [DEBUG] Launcher execution completed
[2025-08-14 14:48:10] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 14:48:10] [INFO] Environment: Production, Mode: Auto
[2025-08-14 14:48:10] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 14:48:10] [INFO] Checking prerequisites...
[2025-08-14 14:48:10] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 14:48:10] [INFO] Auto-detecting deployment mode...
[2025-08-14 14:48:11] [DEBUG] Recent changes detected in casestrainer-vue-new/src (within 2 hours)
[2025-08-14 14:48:11] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 14:48:11] [INFO] Auto-detected mode: Fast
[2025-08-14 14:48:11] [INFO] Starting deployment in Fast mode...
[2025-08-14 14:48:11] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 14:48:11] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 14:48:14] [DEBUG] Docker operation exit code: 0
[2025-08-14 14:48:14] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 14:48:14] [INFO] Docker operation completed successfully: down
[2025-08-14 14:48:14] [INFO] Recent changes in casestrainer-vue-new/src - will rebuild images
[2025-08-14 14:48:14] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 14:48:14] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 14:48:38] [DEBUG] Docker operation exit code: 0
[2025-08-14 14:48:38] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [nginx internal] load build definition from Dockerfile; #2 transferring dockerfile: 652B 0.0s done; #2 DONE 0.0s; ; #3 [backend internal] load build definition from Dockerfile; #3 transferring dockerfile: 1.80kB 0.0s done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.1s; ; #5 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #5 ...; ; #6 [nginx internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B done; #7 DONE 0.0s; ; #8 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.1s; ; #9 [nginx internal] load build context; #9 transferring context: 97B done; #9 DONE 0.0s; ; #10 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #10 CACHED; ; #11 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #11 CACHED; ; #12 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #12 CACHED; ; #13 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #13 CACHED; ; #14 [nginx 2/8] RUN apk add --no-cache curl; #14 CACHED; ; #15 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [auth] library/node:pull token for registry-1.docker.io; #17 DONE 0.0s; ; #18 [auth] library/python:pull token for registry-1.docker.io; #18 DONE 0.0s; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:9762e34d274b2b12008d3fbc15bb72c97ca6b4cfd158752fa811687cf7a0dbfd; #19 exporting attestation manifest sha256:9762e34d274b2b12008d3fbc15bb72c97ca6b4cfd158752fa811687cf7a0dbfd 0.1s done; #19 exporting manifest list sha256:9fe501dbadc25a6fe9066de70c0f000b2e849dbd7e4d3c186af16dbc8656d8ca 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest; #19 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.4s; ; #20 [backend internal] load metadata for docker.io/library/python:3.10-slim; #20 DONE 0.8s; ; #5 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #5 DONE 0.8s; ; #21 [rqworker3 internal] load .dockerignore; #21 transferring context: 908B 0.0s done; #21 DONE 0.1s; ; #22 [frontend-prod internal] load .dockerignore; #22 transferring context: 834B 0.0s done; #22 DONE 0.1s; ; #23 [backend internal] load build context; #23 DONE 0.0s; ; #24 [backend  1/17] FROM docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #24 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608 0.1s done; #24 DONE 0.2s; ; #8 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.1s; ; #23 [rqworker2 internal] load build context; #23 DONE 0.0s; ; #25 [frontend-prod internal] load build context; #25 DONE 0.0s; ; #26 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #26 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #26 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.2s done; #26 DONE 0.2s; ; #24 [backend  1/17] FROM docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #24 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608 0.1s done; #24 DONE 0.2s; ; #23 [rqworker1 internal] load build context; #23 ...; ; #25 [frontend-prod internal] load build context; #25 transferring context: 60.26kB 0.1s done; #25 DONE 0.1s; ; #27 [frontend-prod build-stage  2/10] WORKDIR /app; #27 CACHED; ; #28 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #28 CACHED; ; #29 [frontend-prod build-stage  3/10] COPY package*.json ./; #29 CACHED; ; #30 [frontend-prod build-stage  5/10] COPY public/ public/; #30 CACHED; ; #31 [nginx] resolving provenance for metadata file; #31 DONE 0.1s; ; #23 [rqworker1 internal] load build context; #23 transferring context: 131.72kB 0.2s done; #23 transferring context: 131.72kB 0.2s done; #23 DONE 0.3s; ; #32 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #32 CACHED; ; #33 [rqworker2  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #33 CACHED; ; #34 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #34 CACHED; ; #35 [rqworker2  3/17] COPY requirements.txt requirements.txt; #35 CACHED; ; #36 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #36 CACHED; ; #37 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #37 CACHED; ; #38 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #38 CACHED; ; #39 [rqworker2 10/17] COPY --chown=app:app config/ /app/config/; #39 CACHED; ; #40 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #40 CACHED; ; #41 [rqworker2  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #41 CACHED; ; #42 [rqworker2  5/17] RUN pip install --no-cache-dir -r requirements.txt; #42 CACHED; ; #43 [rqworker2 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #43 CACHED; ; #44 [rqworker2 11/17] COPY --chown=app:app templates/ /app/templates/; #44 CACHED; ; #45 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #45 CACHED; ; #46 [rqworker2  2/17] WORKDIR /app; #46 CACHED; ; #47 [backend 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #47 CACHED; ; #48 [backend] exporting to image; #48 exporting layers 0.0s done; #48 exporting manifest sha256:5845d4db331571d4cc3fac3be6c8393392367252225b87e7e54e08e70a808bb8 0.0s done; #48 exporting config sha256:e1da690c9ce8445eaabaab7baafde36c0421f64d9462846ab2a529329d9f0998; #48 ...; ; #49 [frontend-prod build-stage  6/10] COPY src/ src/; #49 DONE 0.3s; ; #48 [backend] exporting to image; #48 exporting config sha256:e1da690c9ce8445eaabaab7baafde36c0421f64d9462846ab2a529329d9f0998 0.1s done; #48 exporting attestation manifest sha256:f68d5c52b230372400560807d2e82865012fc740a39439263ac9f11ec78e79da; #48 exporting attestation manifest sha256:f68d5c52b230372400560807d2e82865012fc740a39439263ac9f11ec78e79da 0.3s done; #48 exporting manifest list sha256:dc023f4b55b4b61001181daefd8aa03d1a6ce8dd3bc46ec0bb22585d1d89f71e; #48 ...; ; #50 [frontend-prod build-stage  7/10] COPY index.html .; #50 DONE 0.5s; ; #48 [backend] exporting to image; #48 exporting manifest list sha256:dc023f4b55b4b61001181daefd8aa03d1a6ce8dd3bc46ec0bb22585d1d89f71e 0.2s done; #48 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #48 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #48 DONE 0.9s; ; #51 [rqworker1] exporting to image; #51 exporting layers 0.0s done; #51 exporting manifest sha256:67b168c8aff945cb593003988022ddae690193992e96d9fe70f876573aa318ed 0.1s done; #51 exporting config sha256:73acb4a90ee111d24cffca5134f4b4dd487a479c83a869f5136ebf0a4d81b8a7 0.0s done; #51 exporting attestation manifest sha256:10b45ae763b0fe66b3485ce3a11c0d60dcfb6535c855eb454fdf257c0eb733bc 0.3s done; #51 exporting manifest list sha256:a0f0b43e7bc20ce9a05a8271d9392511720268c0d6883449c02dbfa882413621 0.2s done; #51 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #51 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #51 DONE 1.0s; ; #52 [rqworker3] exporting to image; #52 exporting layers 0.0s done; #52 exporting manifest sha256:f7b3799c678075d43b86fb5684573543efc5d1e09e33f5aa14762d9b5d770954 0.1s done; #52 exporting config sha256:6f645fd5380693b361bf6127df4ef227e3db46bf0049a31e9bb9ec73007655d1 0.0s done; #52 exporting attestation manifest sha256:809e5112e662bc35a8257814b7e2d2319f4bcd2811a1b1831514cbb74a0e71ec 0.3s done; #52 exporting manifest list sha256:f45d2f4bc2f8885116b72df2130779dad85cbe09c82289e4627ddfbe16a62983 0.2s done; #52 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #52 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #52 DONE 0.9s; ; #53 [frontend-prod build-stage  8/10] COPY vite.config.js .; #53 DONE 0.3s; ; #54 [rqworker2] exporting to image; #54 exporting layers 0.0s done; #54 exporting manifest sha256:92ed0ef6af30a9240d3ece8ca4e25246d707863f1c8ad1e8c13f6564805d540b 0.0s done; #54 exporting config sha256:b861bce0d2fd283db3c4b5a2423ecea75e9ca1098ff99e0e51e9b2a9b7d9ff05 0.1s done; #54 exporting attestation manifest sha256:ae2d8b54dfda4ad00f0aef650a2ddfecc124c1bc5f1393ec382ab700cafc88d6 0.3s done; #54 exporting manifest list sha256:f369d82a91ac640655eedb5d6649fb0a1fb852c02f6452ddfe8a8e1e172bc23d 0.2s done; #54 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #54 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #54 DONE 1.0s; ; #55 [frontend-prod build-stage  9/10] RUN npm run build; #55 ...; ; #56 [backend] resolving provenance for metadata file; #56 DONE 0.3s; ; #57 [rqworker3] resolving provenance for metadata file; #57 DONE 0.3s; ; #58 [rqworker1] resolving provenance for metadata file; #58 DONE 0.1s; ; #59 [rqworker2] resolving provenance for metadata file; #59 DONE 0.0s; ; #55 [frontend-prod build-stage  9/10] RUN npm run build; #55 1.244 ; #55 1.244 > casestrainer-vue-new@0.6.5 build; #55 1.244 > vite build; #55 1.244 ; #55 2.366 vite v6.3.5 building for production...; #55 3.060 transforming...; #55 8.075 G 136 modules transformed.; #55 9.461 rendering chunks...; #55 14.07 computing gzip size...; #55 14.12 dist/index.html                              0.91 kB G gzip:  0.45 kB; #55 14.12 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB G gzip:  0.07 kB; #55 14.12 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB G gzip:  0.07 kB; #55 14.12 dist/assets/NotFound-CrLUfTg_.css            1.01 kB G gzip:  0.45 kB; #55 14.12 dist/assets/Docs-La2G-zWQ.css                1.39 kB G gzip:  0.46 kB; #55 14.12 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB G gzip:  0.57 kB; #55 14.12 dist/assets/index-D7McZxsA.css             272.58 kB G gzip: 38.42 kB; #55 14.14 dist/assets/Docs-B_RbpMfd.js                 1.01 kB G gzip:  0.56 kB; #55 14.14 dist/assets/WordPlugin-oSnpaJHa.js           1.20 kB G gzip:  0.71 kB; #55 14.14 dist/assets/BrowserExtension-EAQRVEkl.js     1.22 kB G gzip:  0.73 kB; #55 14.14 dist/assets/NotFound-BhhZZFKD.js             1.89 kB G gzip:  0.92 kB; #55 14.14 dist/assets/ApiDocs-m4Dlo4i3.js             23.31 kB G gzip:  4.00 kB; #55 14.14 dist/assets/vendor-C-1G2k3o.js              34.93 kB G gzip: 13.58 kB; #55 14.14 dist/assets/vue-ChBwCVzF.js                 91.40 kB G gzip: 34.95 kB; #55 14.14 dist/assets/index-CNiYiWlj.js              150.57 kB G gzip: 44.64 kB; #55 14.14 G built in 11.48s; #55 DONE 14.5s; ; #60 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #60 DONE 0.5s; ; #8 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 CACHED; ; #61 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #61 DONE 0.1s; ; #62 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #62 DONE 0.7s; ; #63 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #63 DONE 0.1s; ; #64 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #64 DONE 0.1s; ; #65 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #65 DONE 0.4s; ; #66 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #66 DONE 0.4s; ; #67 [frontend-prod] exporting to image; #67 exporting layers; #67 exporting layers 0.7s done; #67 exporting manifest sha256:e73af61161f0719e9bef8ba07c0946d16ad36d57d7d1f85bec616f48bc9e61dc 0.0s done; #67 exporting config sha256:03d62fb4fffe47f5aee6febdaaaccd17cd0ca6aa3c2d41421283364d045cb19a 0.0s done; #67 exporting attestation manifest sha256:7970b78930cd3fcaf7bb2d70972a75e6738c75f232d014bcc4478d646505dce7; #67 exporting attestation manifest sha256:7970b78930cd3fcaf7bb2d70972a75e6738c75f232d014bcc4478d646505dce7 0.1s done; #67 exporting manifest list sha256:6b85b873ed3768fe57e284364ed5b70f2bbdcf9ce16c0594462a0f4d87b19f10 0.0s done; #67 naming to docker.io/library/casestrainer-frontend-prod:latest done; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.3s done; #67 DONE 1.3s; ; #68 [frontend-prod] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built
[2025-08-14 14:48:38] [INFO] Docker operation completed successfully: build
[2025-08-14 14:48:38] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 14:48:53] [DEBUG] Docker operation exit code: 0
[2025-08-14 14:48:53] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 14:48:53] [INFO] Docker operation completed successfully: up
[2025-08-14 14:48:53] [INFO] Waiting for containers to stabilize...
[2025-08-14 14:49:03] [INFO] Performing application health check...
[2025-08-14 14:49:03] [INFO] Application health check passed
[2025-08-14 14:49:03] [INFO] Deployment completed successfully!
[2025-08-14 14:49:03] [INFO] Containers running: 7
[2025-08-14 14:49:03] [DEBUG] Launcher execution completed
[2025-08-14 15:04:07] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 15:04:07] [INFO] Environment: Production, Mode: Auto
[2025-08-14 15:04:07] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 15:04:07] [INFO] Checking prerequisites...
[2025-08-14 15:04:07] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 15:04:07] [INFO] Auto-detecting deployment mode...
[2025-08-14 15:04:08] [INFO] Vue source files are newer than dist files - rebuild needed
[2025-08-14 15:04:08] [INFO] Vue source files are newer than dist - performing build and Fast restart
[2025-08-14 15:04:08] [INFO] Building Vue frontend...
[2025-08-14 15:04:17] [INFO] Auto-detected mode: Fast
[2025-08-14 15:04:17] [INFO] Starting deployment in Fast mode...
[2025-08-14 15:04:17] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 15:04:17] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 15:04:20] [DEBUG] Docker operation exit code: 0
[2025-08-14 15:04:20] [DEBUG] Docker output:  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 15:04:20] [INFO] Docker operation completed successfully: down
[2025-08-14 15:04:20] [INFO] Recent changes in src - will rebuild images
[2025-08-14 15:04:20] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 15:04:20] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 15:04:37] [DEBUG] Docker operation exit code: 0
[2025-08-14 15:04:37] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [nginx internal] load build definition from Dockerfile; #2 transferring dockerfile: 652B 0.0s done; #2 DONE 0.0s; ; #3 [frontend-prod internal] load build definition from Dockerfile.prod; #3 transferring dockerfile: 2.03kB 0.0s done; #3 DONE 0.1s; ; #4 [rqworker2 internal] load build definition from Dockerfile; #4 transferring dockerfile: 1.80kB 0.0s done; #4 DONE 0.1s; ; #5 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #5 ...; ; #6 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B done; #7 DONE 0.0s; ; #8 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.1s; ; #9 [nginx internal] load build context; #9 transferring context: 97B done; #9 DONE 0.0s; ; #10 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #10 ...; ; #11 [nginx 2/8] RUN apk add --no-cache curl; #11 CACHED; ; #12 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #12 CACHED; ; #13 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #13 CACHED; ; #14 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #14 CACHED; ; #15 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #15 CACHED; ; #16 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #16 CACHED; ; #17 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #17 CACHED; ; #18 [auth] library/node:pull token for registry-1.docker.io; #18 DONE 0.0s; ; #19 [auth] library/python:pull token for registry-1.docker.io; #19 DONE 0.0s; ; #20 [nginx] exporting to image; #20 exporting layers 0.0s done; #20 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #20 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #20 exporting attestation manifest sha256:60a4713eb6d01cd207f1dc79e3fd9510052487c6f542a06a7ea72bc4bdefb839 0.1s done; #20 exporting manifest list sha256:27f83cecef6fb1b3b8e2da08230d790b0faefed68a3f9ddd8ad17f1a4f121fd7 0.0s done; #20 naming to docker.io/library/casestrainer-nginx:latest done; #20 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #20 DONE 0.2s; ; #10 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #10 DONE 0.8s; ; #5 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #5 DONE 0.8s; ; #21 [nginx] resolving provenance for metadata file; #21 DONE 0.0s; ; #22 [rqworker2 internal] load .dockerignore; #22 transferring context: 908B 0.0s done; #22 DONE 0.1s; ; #23 [frontend-prod internal] load .dockerignore; #23 transferring context: 834B 0.0s done; #23 DONE 0.1s; ; #22 [rqworker1 internal] load .dockerignore; #22 DONE 0.1s; ; #24 [rqworker2 internal] load build context; #24 DONE 0.0s; ; #25 [frontend-prod internal] load build context; #25 DONE 0.0s; ; #26 [rqworker2  1/17] FROM docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #26 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608 0.1s done; #26 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608 0.1s done; #26 DONE 0.1s; ; #8 [frontend-prod production-stage 1/7] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.2s; ; #27 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #27 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #27 DONE 0.1s; ; #25 [frontend-prod internal] load build context; #25 transferring context: 60.26kB 0.0s done; #25 DONE 0.1s; ; #24 [rqworker3 internal] load build context; #24 transferring context: 229.96kB 0.2s done; #24 DONE 0.2s; ; #28 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #28 CACHED; ; #29 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #29 CACHED; ; #30 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #30 CACHED; ; #31 [frontend-prod build-stage  2/10] WORKDIR /app; #31 CACHED; ; #32 [frontend-prod build-stage  3/10] COPY package*.json ./; #32 CACHED; ; #33 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #33 CACHED; ; #34 [frontend-prod build-stage  7/10] COPY index.html .; #34 CACHED; ; #35 [frontend-prod build-stage  5/10] COPY public/ public/; #35 CACHED; ; #36 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #36 CACHED; ; #37 [frontend-prod build-stage  9/10] RUN npm run build; #37 CACHED; ; #38 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #38 CACHED; ; #39 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #39 CACHED; ; #40 [frontend-prod build-stage  8/10] COPY vite.config.js .; #40 CACHED; ; #41 [frontend-prod build-stage  6/10] COPY src/ src/; #41 CACHED; ; #42 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #42 CACHED; ; #43 [frontend-prod] exporting to image; #43 exporting layers 0.0s done; #43 exporting manifest sha256:e73af61161f0719e9bef8ba07c0946d16ad36d57d7d1f85bec616f48bc9e61dc; #43 ...; ; #44 [backend  2/17] WORKDIR /app; #44 CACHED; ; #45 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #45 CACHED; ; #46 [backend  3/17] COPY requirements.txt requirements.txt; #46 CACHED; ; #47 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #47 CACHED; ; #48 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #48 CACHED; ; #49 [rqworker1  7/17] RUN useradd --create-home --shell /bin/bash app; #49 CACHED; ; #43 [frontend-prod] exporting to image; #43 exporting manifest sha256:e73af61161f0719e9bef8ba07c0946d16ad36d57d7d1f85bec616f48bc9e61dc done; #43 exporting config sha256:03d62fb4fffe47f5aee6febdaaaccd17cd0ca6aa3c2d41421283364d045cb19a 0.0s done; #43 exporting attestation manifest sha256:c2e9e025133fc2d0687aa8e9645656d1cd87e07e18e12203b3a5d769af2de0a0 0.1s done; #43 exporting manifest list sha256:936947f177a01462654835af968ddb406e8f8e7df020148ca0f55e0e30164f9e; #43 exporting manifest list sha256:936947f177a01462654835af968ddb406e8f8e7df020148ca0f55e0e30164f9e 0.0s done; #43 naming to docker.io/library/casestrainer-frontend-prod:latest done; #43 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #43 DONE 0.3s; ; #50 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #50 DONE 0.5s; ; #50 [backend  8/17] COPY --chown=app:app src/ /app/src/; #50 DONE 0.5s; ; #51 [rqworker3  9/17] COPY --chown=app:app app/ /app/app/; #51 DONE 0.2s; ; #51 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #51 DONE 0.2s; ; #52 [frontend-prod] resolving provenance for metadata file; #52 DONE 0.0s; ; #53 [backend 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.2s; ; #53 [rqworker2 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.2s; ; #54 [backend 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.1s; ; #54 [rqworker3 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.1s; ; #55 [rqworker1 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 1.2s; ; #55 [rqworker3 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 1.2s; ; #56 [rqworker3 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.2s; ; #56 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.2s; ; #57 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.7s; ; #57 [rqworker3 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.7s; ; #58 [rqworker2 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.5s; ; #58 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.5s; ; #59 [rqworker1 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.4s; ; #59 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.4s; ; #60 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.5s; ; #60 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.5s; ; #61 [rqworker1] exporting to image; #61 exporting layers 3.8s done; #61 exporting manifest sha256:6aa5f033eaf7bedddc38057e395bab36e0c080223bc883a3684e4804d2489c2d 0.1s done; #61 exporting config sha256:ad8327b10ac32bf47358569a5f2a7ec2fed0797c92bbc04b7048877ae4632ff0; #61 exporting config sha256:ad8327b10ac32bf47358569a5f2a7ec2fed0797c92bbc04b7048877ae4632ff0 0.1s done; #61 exporting attestation manifest sha256:80d9e4a24c21bd692d7c53cbdff9623341e9ed1cf72c6b339b234fb5095fc24e; #61 exporting attestation manifest sha256:80d9e4a24c21bd692d7c53cbdff9623341e9ed1cf72c6b339b234fb5095fc24e 0.2s done; #61 exporting manifest list sha256:7e6d220097722d0bd293e53a43394e5ed535c95a5424a547d8667822ff9499e5; #61 exporting manifest list sha256:7e6d220097722d0bd293e53a43394e5ed535c95a5424a547d8667822ff9499e5 0.1s done; #61 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest; #61 ...; ; #62 [rqworker3] exporting to image; #62 exporting layers 3.8s done; #62 exporting manifest sha256:a9726ed022ef124c8aa4da3eab7e2c1d5a2c572d728633203f433fa94dd21b3e 0.1s done; #62 exporting config sha256:15055ea6181990cdd848f95b7fd079265e4f7cf28d809c36191519a152dbc3e7 0.1s done; #62 exporting attestation manifest sha256:99c538a0580cc464bb7d96507acecf34644d68ff0b04b41bd64f3b026b21ec62 0.2s done; #62 exporting manifest list sha256:93e5ecfcf6239feb31882b5a713bf2c241e9e4ea7d6b5a96cf66a7cd5bf0a20c 0.1s done; #62 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #62 unpacking to docker.io/library/casestrainer-rqworker3:latest 3.2s done; #62 DONE 7.8s; ; #61 [rqworker1] exporting to image; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest 3.2s done; #61 DONE 7.8s; ; #63 [backend] exporting to image; #63 exporting layers 3.8s done; #63 exporting manifest sha256:f754758a1a1797ec2c08792cc65e0707b90fe5a1c37b9fa88e07cdbe23370943 0.1s done; #63 exporting config sha256:10f63beff29115d3ae78873a377287fd1fd2042dd12aaf905483922bf04d8297 0.1s done; #63 exporting attestation manifest sha256:6a6858c6b2de8b6d50d5f6bdba2bdf51a912dfb78c87bde4ede2156789dd7159 0.2s done; #63 exporting manifest list sha256:60cf67ee9b41f6d42b0456988aaad14186ff87062c7119cfbe2a390bdc3ed43d 0.1s done; #63 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #63 unpacking to docker.io/library/casestrainer-backend:latest 3.3s done; #63 DONE 7.9s; ; #64 [rqworker2] exporting to image; #64 exporting layers 3.8s done; #64 exporting manifest sha256:86a1f45c137bb695dae91ad66f3c68cbc546a71a7cbe9bdea2f0160eca945578 0.1s done; #64 exporting config sha256:35d80238701559a80aaae600e01994d9a26aab5160bf37ea25ee37542923bc66 0.1s done; #64 exporting attestation manifest sha256:76f1fabbad7544af94a7ab8beb2cb8efa6dd39b7d63a956bf0c19475066b4804 0.2s done; #64 exporting manifest list sha256:73b9e45a885f7f5889e4c44d409bf84783473d162c54a2f6ba5f71dad3218908 0.1s done; #64 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #64 unpacking to docker.io/library/casestrainer-rqworker2:latest 3.2s done; #64 DONE 7.8s; ; #65 [rqworker3] resolving provenance for metadata file; #65 DONE 0.5s; ; #66 [rqworker2] resolving provenance for metadata file; #66 DONE 0.2s; ; #67 [backend] resolving provenance for metadata file; #67 DONE 0.3s; ; #68 [rqworker1] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built
[2025-08-14 15:04:37] [INFO] Docker operation completed successfully: build
[2025-08-14 15:04:37] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 15:04:54] [DEBUG] Docker operation exit code: 0
[2025-08-14 15:04:54] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 15:04:54] [INFO] Docker operation completed successfully: up
[2025-08-14 15:04:54] [INFO] Waiting for containers to stabilize...
[2025-08-14 15:05:04] [INFO] Performing application health check...
[2025-08-14 15:05:04] [INFO] Application health check passed
[2025-08-14 15:05:04] [INFO] Deployment completed successfully!
[2025-08-14 15:05:04] [INFO] Containers running: 7
[2025-08-14 15:05:04] [DEBUG] Launcher execution completed
[2025-08-14 15:19:09] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 15:19:09] [INFO] Environment: Production, Mode: Auto
[2025-08-14 15:19:09] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 15:19:09] [INFO] Checking prerequisites...
[2025-08-14 15:19:09] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 15:19:09] [INFO] Auto-detecting deployment mode...
[2025-08-14 15:19:10] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-14 15:19:10] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 15:19:10] [INFO] Auto-detected mode: Fast
[2025-08-14 15:19:10] [INFO] Starting deployment in Fast mode...
[2025-08-14 15:19:10] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 15:19:10] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 15:19:13] [DEBUG] Docker operation exit code: 0
[2025-08-14 15:19:13] [DEBUG] Docker output:  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 15:19:13] [INFO] Docker operation completed successfully: down
[2025-08-14 15:19:13] [INFO] Recent changes in src - will rebuild images
[2025-08-14 15:19:13] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 15:19:13] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 15:19:37] [DEBUG] Docker operation exit code: 0
[2025-08-14 15:19:37] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [nginx internal] load build definition from Dockerfile; #2 transferring dockerfile: 652B 0.0s done; #2 DONE 0.1s; ; #3 [backend internal] load build definition from Dockerfile; #3 transferring dockerfile: 1.80kB 0.0s done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.1s; ; #5 [backend internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 DONE 0.0s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B 0.0s done; #7 DONE 0.0s; ; #8 [nginx internal] load build context; #8 DONE 0.0s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 DONE 0.1s; ; #8 [nginx internal] load build context; #8 transferring context: 97B done; #8 DONE 0.0s; ; #10 [nginx 2/8] RUN apk add --no-cache curl; #10 CACHED; ; #11 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #11 CACHED; ; #12 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #12 CACHED; ; #13 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #13 CACHED; ; #14 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #14 CACHED; ; #15 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [auth] library/python:pull token for registry-1.docker.io; #17 DONE 0.0s; ; #18 [auth] library/node:pull token for registry-1.docker.io; #18 DONE 0.0s; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:5757eb165ec57a9e09b633992dd35fb9cd8aa03e08381a983d49da268bd8d798; #19 exporting attestation manifest sha256:5757eb165ec57a9e09b633992dd35fb9cd8aa03e08381a983d49da268bd8d798 0.1s done; #19 exporting manifest list sha256:39d9d6ea6270a314e025d3549eda4395b67724898900ad9e31edc5d6f5225862 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.3s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.8s; ; #5 [backend internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 0.8s; ; #21 [rqworker2 internal] load .dockerignore; #21 transferring context: 908B 0.0s done; #21 DONE 0.1s; ; #22 [frontend-prod internal] load .dockerignore; #22 transferring context: 834B 0.0s done; #22 DONE 0.1s; ; #23 [rqworker3 internal] load build context; #23 DONE 0.0s; ; #24 [frontend-prod internal] load build context; #24 DONE 0.0s; ; #25 [nginx] resolving provenance for metadata file; #25 DONE 0.1s; ; #26 [rqworker3  1/17] FROM docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #26 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608 0.1s done; #26 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608 0.1s done; #26 DONE 0.2s; ; #27 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #27 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.2s done; #27 DONE 0.2s; ; #9 [frontend-prod production-stage 1/7] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.2s; ; #23 [rqworker2 internal] load build context; #23 transferring context: 131.72kB 0.2s done; #23 DONE 0.2s; ; #24 [frontend-prod internal] load build context; #24 transferring context: 61.04kB 0.1s done; #24 DONE 0.1s; ; #28 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #28 CACHED; ; #29 [frontend-prod build-stage  2/10] WORKDIR /app; #29 CACHED; ; #30 [frontend-prod build-stage  3/10] COPY package*.json ./; #30 CACHED; ; #31 [frontend-prod build-stage  5/10] COPY public/ public/; #31 CACHED; ; #32 [frontend-prod build-stage  6/10] COPY src/ src/; #32 ...; ; #23 [rqworker1 internal] load build context; #23 DONE 0.2s; ; #33 [rqworker1  2/17] WORKDIR /app; #33 CACHED; ; #34 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #34 CACHED; ; #35 [rqworker1 12/17] COPY --chown=app:app static/ /app/static/; #35 CACHED; ; #36 [rqworker1 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #36 CACHED; ; #37 [rqworker1  3/17] COPY requirements.txt requirements.txt; #37 CACHED; ; #38 [rqworker1 13/17] COPY --chown=app:app VERSION /app/VERSION; #38 CACHED; ; #39 [rqworker1 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #39 CACHED; ; #40 [rqworker1  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #40 CACHED; ; #41 [rqworker1  9/17] COPY --chown=app:app app/ /app/app/; #41 CACHED; ; #42 [rqworker1  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #42 CACHED; ; #43 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #43 CACHED; ; #44 [rqworker1  7/17] RUN useradd --create-home --shell /bin/bash app; #44 CACHED; ; #45 [rqworker1  5/17] RUN pip install --no-cache-dir -r requirements.txt; #45 CACHED; ; #46 [rqworker1 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #46 CACHED; ; #47 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #47 CACHED; ; #48 [rqworker1 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #48 CACHED; ; #32 [frontend-prod build-stage  6/10] COPY src/ src/; #32 DONE 0.2s; ; #49 [rqworker2] exporting to image; #49 exporting layers 0.0s done; #49 exporting manifest sha256:86a1f45c137bb695dae91ad66f3c68cbc546a71a7cbe9bdea2f0160eca945578 0.1s done; #49 exporting config sha256:35d80238701559a80aaae600e01994d9a26aab5160bf37ea25ee37542923bc66 0.1s done; #49 ...; ; #50 [frontend-prod build-stage  7/10] COPY index.html .; #50 DONE 0.3s; ; #49 [rqworker2] exporting to image; #49 exporting attestation manifest sha256:e27cd2533c803677c529065666d84ab3c31519c67d2446151563c399764223e0; #49 exporting attestation manifest sha256:e27cd2533c803677c529065666d84ab3c31519c67d2446151563c399764223e0 0.3s done; #49 exporting manifest list sha256:ae39c3f5986737d8c73aa65966d729b50f328e1f486d4bfd528c6e120cffb3cb; #49 exporting manifest list sha256:ae39c3f5986737d8c73aa65966d729b50f328e1f486d4bfd528c6e120cffb3cb 0.1s done; #49 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #49 unpacking to docker.io/library/casestrainer-rqworker2:latest; #49 ...; ; #51 [frontend-prod build-stage  8/10] COPY vite.config.js .; #51 DONE 0.5s; ; #52 [backend] exporting to image; #52 exporting layers 0.0s done; #52 exporting manifest sha256:f754758a1a1797ec2c08792cc65e0707b90fe5a1c37b9fa88e07cdbe23370943 0.0s done; #52 exporting config sha256:10f63beff29115d3ae78873a377287fd1fd2042dd12aaf905483922bf04d8297 0.1s done; #52 exporting attestation manifest sha256:440c0ecd83a6891b2837b9f6c7a062e36560835c51273cc1f62105ad62699fdc 0.3s done; #52 exporting manifest list sha256:7dacb1ae3b2673fd159f38ebbb9cd56cf7ae032cd222e8b824ff5ba32f3b6925 0.1s done; #52 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #52 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #52 DONE 1.0s; ; #49 [rqworker2] exporting to image; #49 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #49 DONE 1.0s; ; #53 [rqworker3] exporting to image; #53 exporting layers 0.0s done; #53 exporting manifest sha256:a9726ed022ef124c8aa4da3eab7e2c1d5a2c572d728633203f433fa94dd21b3e 0.0s done; #53 exporting config sha256:15055ea6181990cdd848f95b7fd079265e4f7cf28d809c36191519a152dbc3e7 0.1s done; #53 exporting attestation manifest sha256:bd2d83a494bf66da72c0f842e0fdc4505fe1faf451a8b454e8657a868663daec 0.3s done; #53 exporting manifest list sha256:e844b9a99c85f8ca556da76f889f421b1fabb8825b110e4f51e3e204972bb357 0.1s done; #53 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #53 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #53 DONE 1.1s; ; #54 [rqworker1] exporting to image; #54 exporting layers 0.0s done; #54 exporting manifest sha256:6aa5f033eaf7bedddc38057e395bab36e0c080223bc883a3684e4804d2489c2d 0.1s done; #54 exporting config sha256:ad8327b10ac32bf47358569a5f2a7ec2fed0797c92bbc04b7048877ae4632ff0 0.1s done; #54 exporting attestation manifest sha256:c8aae4bb03e6ce60b65704da0e3728c0035de45d6ccb066e7f7fa15f92463410 0.2s done; #54 exporting manifest list sha256:82566e606e163e2138d7fea4f3986e521c205ece3094be06dc875b63171a049d 0.1s done; #54 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #54 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #54 DONE 1.0s; ; #55 [frontend-prod build-stage  9/10] RUN npm run build; #55 ...; ; #56 [backend] resolving provenance for metadata file; #56 DONE 0.1s; ; #57 [rqworker3] resolving provenance for metadata file; #57 ...; ; #58 [rqworker2] resolving provenance for metadata file; #58 DONE 0.3s; ; #57 [rqworker3] resolving provenance for metadata file; #57 DONE 0.1s; ; #59 [rqworker1] resolving provenance for metadata file; #59 DONE 0.0s; ; #55 [frontend-prod build-stage  9/10] RUN npm run build; #55 1.253 ; #55 1.253 > casestrainer-vue-new@0.6.5 build; #55 1.253 > vite build; #55 1.253 ; #55 2.427 vite v6.3.5 building for production...; #55 3.180 transforming...; #55 8.312 G 136 modules transformed.; #55 9.531 rendering chunks...; #55 14.15 computing gzip size...; #55 14.18 dist/index.html                              0.91 kB G gzip:  0.45 kB; #55 14.18 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB G gzip:  0.07 kB; #55 14.18 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB G gzip:  0.07 kB; #55 14.18 dist/assets/NotFound-CrLUfTg_.css            1.01 kB G gzip:  0.45 kB; #55 14.18 dist/assets/Docs-La2G-zWQ.css                1.39 kB G gzip:  0.46 kB; #55 14.18 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB G gzip:  0.57 kB; #55 14.18 dist/assets/index-C0OIkjjg.css             272.58 kB G gzip: 38.42 kB; #55 14.18 dist/assets/Docs-CuDwlj_L.js                 1.01 kB G gzip:  0.56 kB; #55 14.18 dist/assets/WordPlugin-DEVaAP-n.js           1.20 kB G gzip:  0.71 kB; #55 14.19 dist/assets/BrowserExtension-B4DvLfe3.js     1.22 kB G gzip:  0.73 kB; #55 14.19 dist/assets/NotFound-C4pAvWv2.js             1.89 kB G gzip:  0.92 kB; #55 14.19 dist/assets/ApiDocs-By02U9zC.js             23.31 kB G gzip:  4.00 kB; #55 14.19 dist/assets/vendor-C-1G2k3o.js              34.93 kB G gzip: 13.58 kB; #55 14.19 dist/assets/vue-ChBwCVzF.js                 91.40 kB G gzip: 34.95 kB; #55 14.19 dist/assets/index-DJJFTf1C.js              150.82 kB G gzip: 44.67 kB; #55 14.19 G built in 11.51s; #55 DONE 14.5s; ; #60 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #60 DONE 0.4s; ; #9 [frontend-prod production-stage 1/7] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 CACHED; ; #61 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #61 DONE 0.1s; ; #62 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #62 DONE 0.4s; ; #63 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #63 DONE 0.2s; ; #64 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #64 DONE 0.1s; ; #65 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #65 DONE 0.4s; ; #66 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #66 DONE 0.5s; ; #67 [frontend-prod] exporting to image; #67 exporting layers; #67 exporting layers 0.8s done; #67 exporting manifest sha256:e2b726cb8b3c12502e5ae7503e09b825ee940ddbfe14dfd989a3c0ec643eb129 0.0s done; #67 exporting config sha256:394755b29ec28b020c1b47aadd176ac3248a56fb0d671edf7ceeb2d8d198aa76 0.0s done; #67 exporting attestation manifest sha256:1c4d80698a079bdd9d7f9f7e53feb42dc23dd88935de4f157fcacc4e6d2de283; #67 exporting attestation manifest sha256:1c4d80698a079bdd9d7f9f7e53feb42dc23dd88935de4f157fcacc4e6d2de283 0.1s done; #67 exporting manifest list sha256:789afc44bbf068d4be3abb35ff762666410ddf0a7f5c16cb08afce8fad84b669 0.0s done; #67 naming to docker.io/library/casestrainer-frontend-prod:latest done; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.3s done; #67 DONE 1.4s; ; #68 [frontend-prod] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built
[2025-08-14 15:19:37] [INFO] Docker operation completed successfully: build
[2025-08-14 15:19:37] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 15:19:52] [DEBUG] Docker operation exit code: 0
[2025-08-14 15:19:52] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 15:19:52] [INFO] Docker operation completed successfully: up
[2025-08-14 15:19:52] [INFO] Waiting for containers to stabilize...
[2025-08-14 15:20:02] [INFO] Performing application health check...
[2025-08-14 15:20:03] [INFO] Application health check passed
[2025-08-14 15:20:03] [INFO] Deployment completed successfully!
[2025-08-14 15:20:03] [INFO] Containers running: 7
[2025-08-14 15:20:03] [DEBUG] Launcher execution completed
[2025-08-14 15:27:27] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 15:27:27] [INFO] Environment: Production, Mode: Auto
[2025-08-14 15:27:27] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 15:27:27] [INFO] Checking prerequisites...
[2025-08-14 15:27:27] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 15:27:27] [INFO] Auto-detecting deployment mode...
[2025-08-14 15:27:28] [INFO] Vue source files are newer than dist files - rebuild needed
[2025-08-14 15:27:28] [INFO] Vue source files are newer than dist - performing build and Fast restart
[2025-08-14 15:27:28] [INFO] Building Vue frontend...
[2025-08-14 15:27:58] [INFO] Auto-detected mode: Fast
[2025-08-14 15:27:58] [INFO] Starting deployment in Fast mode...
[2025-08-14 15:27:58] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 15:27:58] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 15:28:02] [DEBUG] Docker operation exit code: 0
[2025-08-14 15:28:02] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 15:28:02] [INFO] Docker operation completed successfully: down
[2025-08-14 15:28:02] [INFO] Recent changes in src - will rebuild images
[2025-08-14 15:28:02] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 15:28:02] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 15:28:22] [DEBUG] Docker operation exit code: 0
[2025-08-14 15:28:22] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker3 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #3 ...; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.1s; ; #5 [nginx internal] load build definition from Dockerfile; #5 transferring dockerfile: 652B 0.0s done; #5 DONE 0.1s; ; #3 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #3 ...; ; #6 [auth] library/python:pull token for registry-1.docker.io; #6 DONE 0.0s; ; #7 [auth] library/node:pull token for registry-1.docker.io; #7 DONE 0.0s; ; #8 [nginx internal] load metadata for docker.io/library/nginx:alpine; #8 DONE 0.1s; ; #9 [nginx internal] load .dockerignore; #9 transferring context: 2B done; #9 DONE 0.0s; ; #10 [nginx internal] load build context; #10 DONE 0.0s; ; #11 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #11 DONE 0.1s; ; #10 [nginx internal] load build context; #10 transferring context: 97B 0.0s done; #10 DONE 0.0s; ; #12 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #12 ...; ; #13 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #13 CACHED; ; #14 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #14 CACHED; ; #15 [nginx 2/8] RUN apk add --no-cache curl; #15 CACHED; ; #16 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #16 CACHED; ; #17 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #17 CACHED; ; #18 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #18 CACHED; ; #19 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #19 CACHED; ; #20 [nginx] exporting to image; #20 exporting layers 0.0s done; #20 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #20 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #20 exporting attestation manifest sha256:861bdf19ed57bd1f90a55ebc1bbd2c1b4f7e00d7d7e0c99dad70a421e6778897 0.1s done; #20 exporting manifest list sha256:0938a2f62c8016ef58e05e19c1003d9b6c48d3855f87f516dc4cb4fa37efd7aa 0.0s done; #20 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #20 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #20 DONE 0.3s; ; #3 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #3 ...; ; #12 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #12 DONE 0.8s; ; #11 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #11 DONE 0.1s; ; #3 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #3 DONE 0.8s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.1s; ; #22 [backend internal] load .dockerignore; #22 transferring context: 908B 0.0s done; #22 DONE 0.1s; ; #11 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 DONE 0.1s; ; #23 [frontend-prod internal] load build context; #23 DONE 0.0s; ; #24 [rqworker3 internal] load build context; #24 DONE 0.0s; ; #25 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #25 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.2s done; #25 DONE 0.2s; ; #26 [rqworker3  1/17] FROM docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #26 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #26 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608 0.1s done; #26 DONE 0.2s; ; #23 [frontend-prod internal] load build context; #23 transferring context: 61.04kB 0.0s done; #23 DONE 0.1s; ; #27 [nginx] resolving provenance for metadata file; #27 DONE 0.0s; ; #28 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #28 CACHED; ; #29 [frontend-prod build-stage  2/10] WORKDIR /app; #29 CACHED; ; #30 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #30 CACHED; ; #31 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #31 CACHED; ; #32 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #32 CACHED; ; #33 [frontend-prod build-stage  5/10] COPY public/ public/; #33 CACHED; ; #34 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #34 CACHED; ; #35 [frontend-prod build-stage  7/10] COPY index.html .; #35 CACHED; ; #36 [frontend-prod build-stage  8/10] COPY vite.config.js .; #36 CACHED; ; #37 [frontend-prod build-stage  6/10] COPY src/ src/; #37 CACHED; ; #38 [frontend-prod build-stage  9/10] RUN npm run build; #38 CACHED; ; #39 [frontend-prod build-stage  3/10] COPY package*.json ./; #39 CACHED; ; #40 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #40 CACHED; ; #41 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #41 CACHED; ; #42 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #42 CACHED; ; #43 [frontend-prod] exporting to image; #43 ...; ; #24 [backend internal] load build context; #24 transferring context: 231.47kB 0.2s done; #24 DONE 0.2s; ; #44 [rqworker2  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #44 CACHED; ; #45 [rqworker2  3/17] COPY requirements.txt requirements.txt; #45 CACHED; ; #46 [rqworker2  5/17] RUN pip install --no-cache-dir -r requirements.txt; #46 CACHED; ; #47 [rqworker2  2/17] WORKDIR /app; #47 CACHED; ; #48 [rqworker2  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #48 CACHED; ; #49 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #49 CACHED; ; #43 [frontend-prod] exporting to image; #43 exporting layers 0.0s done; #43 exporting manifest sha256:e2b726cb8b3c12502e5ae7503e09b825ee940ddbfe14dfd989a3c0ec643eb129 0.0s done; #43 exporting config sha256:394755b29ec28b020c1b47aadd176ac3248a56fb0d671edf7ceeb2d8d198aa76 0.0s done; #43 exporting attestation manifest sha256:1641b3af3357cd7415b34ccca1de97ed65395431f9e1d81e34779d3ac72f2dae 0.1s done; #43 exporting manifest list sha256:01321cb113c2bb208359c1ba15cdb03161ec15ebcc3c7b65f8409a4c6b7942d7; #43 exporting manifest list sha256:01321cb113c2bb208359c1ba15cdb03161ec15ebcc3c7b65f8409a4c6b7942d7 0.0s done; #43 naming to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #43 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #43 DONE 0.3s; ; #50 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #50 DONE 0.5s; ; #51 [rqworker3  9/17] COPY --chown=app:app app/ /app/app/; #51 DONE 0.3s; ; #52 [frontend-prod] resolving provenance for metadata file; #52 DONE 0.0s; ; #53 [rqworker2 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.3s; ; #54 [backend 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.3s; ; #55 [rqworker1 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 1.7s; ; #56 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.3s; ; #57 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.7s; ; #58 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.6s; ; #59 [rqworker3 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.5s; ; #60 [rqworker1 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.5s; ; #61 [backend] exporting to image; #61 exporting layers; #61 exporting layers 4.3s done; #61 exporting manifest sha256:9ac3f63fe72093b3de8c2c5d8d08b16c79e1989981d5954732b9da350a47a98a; #61 exporting manifest sha256:9ac3f63fe72093b3de8c2c5d8d08b16c79e1989981d5954732b9da350a47a98a 0.1s done; #61 exporting config sha256:a4d7a13e80212c5ad7aa085b63c1f91c4335678ebd2c215061d0a7d045c0fc64; #61 exporting config sha256:a4d7a13e80212c5ad7aa085b63c1f91c4335678ebd2c215061d0a7d045c0fc64 0.1s done; #61 exporting attestation manifest sha256:01901ea5d637053cd8c0d1164e71dcae06b5306c45587c3a2d0217cb67e1caa2; #61 exporting attestation manifest sha256:01901ea5d637053cd8c0d1164e71dcae06b5306c45587c3a2d0217cb67e1caa2 0.2s done; #61 exporting manifest list sha256:4c4be5b5606697462defa43a17d82a650d31d7b5e55a06f220b8c68aec1e5905; #61 exporting manifest list sha256:4c4be5b5606697462defa43a17d82a650d31d7b5e55a06f220b8c68aec1e5905 0.1s done; #61 naming to docker.io/library/casestrainer-backend:latest; #61 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #61 unpacking to docker.io/library/casestrainer-backend:latest; #61 unpacking to docker.io/library/casestrainer-backend:latest 4.0s done; #61 DONE 9.3s; ; #62 [rqworker3] exporting to image; #62 exporting layers 4.3s done; #62 exporting manifest sha256:2d3fed4c4afd6d309ea600111d13d86d0a7bf98260e5cea92c09f83093268681 0.1s done; #62 exporting config sha256:ef58ad98c76a0da9420d041c4f554cb2bd4db44a5fd8762a2a9d8fec0673528f 0.1s done; #62 exporting attestation manifest sha256:5e083a3c2ae8e43e898234c907f6396631ef233b5ccd2f3bc0f96f8b17a93531 0.3s done; #62 exporting manifest list sha256:562453abcc0e48ecb1be59505a737bba3dd5173b5354bdaa3215bf855b8adb1b 0.1s done; #62 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #62 unpacking to docker.io/library/casestrainer-rqworker3:latest 4.0s done; #62 DONE 9.3s; ; #63 [rqworker1] exporting to image; #63 exporting layers 4.3s done; #63 exporting manifest sha256:8e3822150e9924bbd7f5782a14076cb8aad5f01ce327bbad46d24cf883f48887 0.1s done; #63 exporting config sha256:42c0581e5e7cc970b113f2389ae9227b3ad0f9376d39e1acfdbac2a56f1884be 0.1s done; #63 exporting attestation manifest sha256:4cae722b1d2f8676159de132c7ad25050778d7f253d21cde672054a94572e91a 0.3s done; #63 exporting manifest list sha256:1d023ec60f6c83e3b5b9977952b19dbe55dc7d7805f71c142e400cf15e7bde41 0.1s done; #63 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #63 unpacking to docker.io/library/casestrainer-rqworker1:latest 4.0s done; #63 DONE 9.3s; ; #64 [rqworker2] exporting to image; #64 exporting layers 4.3s done; #64 exporting manifest sha256:cd4527afe60f92ee0dfa6192b018d6b02c06bf044c60ad532b008634d9c68a10 0.1s done; #64 exporting config sha256:0dc330d2952d8dcfe8b4997497f6503234010cf9e21953c7b9e9d74d3612db4d 0.1s done; #64 exporting attestation manifest sha256:7ce0c076ec335470305b0a78ae5eaa6d04d63d0ccbe2fbf8d9249b7529b5e12e 0.3s done; #64 exporting manifest list sha256:d3eec39d0dd93800e56f5d483f37fd833894d113b0a0e7ed7555a0c39c4bd73f 0.1s done; #64 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #64 unpacking to docker.io/library/casestrainer-rqworker2:latest 4.0s done; #64 DONE 9.4s; ; #65 [backend] resolving provenance for metadata file; #65 DONE 0.5s; ; #66 [rqworker3] resolving provenance for metadata file; #66 DONE 0.2s; ; #67 [rqworker1] resolving provenance for metadata file; #67 DONE 0.4s; ; #68 [rqworker2] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built
[2025-08-14 15:28:22] [INFO] Docker operation completed successfully: build
[2025-08-14 15:28:22] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 15:28:39] [DEBUG] Docker operation exit code: 0
[2025-08-14 15:28:39] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 15:28:39] [INFO] Docker operation completed successfully: up
[2025-08-14 15:28:39] [INFO] Waiting for containers to stabilize...
[2025-08-14 15:28:49] [INFO] Performing application health check...
[2025-08-14 15:28:49] [INFO] Application health check passed
[2025-08-14 15:28:49] [INFO] Deployment completed successfully!
[2025-08-14 15:28:49] [INFO] Containers running: 7
[2025-08-14 15:28:49] [DEBUG] Launcher execution completed
[2025-08-14 16:48:41] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 16:48:41] [INFO] Environment: Production, Mode: Auto
[2025-08-14 16:48:41] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 16:48:41] [INFO] Checking prerequisites...
[2025-08-14 16:48:41] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 16:48:41] [INFO] Auto-detecting deployment mode...
[2025-08-14 16:48:42] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-14 16:48:42] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 16:48:42] [INFO] Auto-detected mode: Fast
[2025-08-14 16:48:42] [INFO] Starting deployment in Fast mode...
[2025-08-14 16:48:42] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 16:48:42] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 16:48:45] [DEBUG] Docker operation exit code: 0
[2025-08-14 16:48:45] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 16:48:45] [INFO] Docker operation completed successfully: down
[2025-08-14 16:48:45] [INFO] Recent changes in src - will rebuild images
[2025-08-14 16:48:45] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 16:48:45] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 16:48:51] [DEBUG] Docker operation exit code: 0
[2025-08-14 16:48:51] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [nginx internal] load build definition from Dockerfile; #2 transferring dockerfile: 652B 0.0s done; #2 DONE 0.1s; ; #3 [rqworker3 internal] load build definition from Dockerfile; #3 transferring dockerfile: 1.80kB 0.0s done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.1s; ; #5 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B done; #7 DONE 0.0s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #8 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.1s; ; #9 [nginx internal] load build context; #9 transferring context: 97B done; #9 DONE 0.0s; ; #10 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #10 CACHED; ; #11 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #11 CACHED; ; #12 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #12 CACHED; ; #13 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #13 CACHED; ; #14 [nginx 2/8] RUN apk add --no-cache curl; #14 CACHED; ; #15 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [auth] library/node:pull token for registry-1.docker.io; #17 DONE 0.0s; ; #18 [auth] library/python:pull token for registry-1.docker.io; #18 DONE 0.0s; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:e5588a4cb4db53f98d74e20b967b378e418981d71e96e92bf808e1a3c8c3ad1e; #19 exporting attestation manifest sha256:e5588a4cb4db53f98d74e20b967b378e418981d71e96e92bf808e1a3c8c3ad1e 0.1s done; #19 exporting manifest list sha256:a3d93e519d011b79206589d529bcd48bba89c2c54e1b9935f568ce478000ba5c 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.3s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.8s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 0.8s; ; #21 [rqworker3 internal] load .dockerignore; #21 transferring context: 908B 0.0s done; #21 DONE 0.0s; ; #22 [frontend-prod internal] load .dockerignore; #22 transferring context: 834B 0.0s done; #22 DONE 0.1s; ; #8 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.1s; ; #23 [rqworker1 internal] load build context; #23 DONE 0.0s; ; #24 [frontend-prod internal] load build context; #24 DONE 0.0s; ; #25 [nginx] resolving provenance for metadata file; #25 DONE 0.0s; ; #26 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608; #26 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608 0.1s done; #26 resolve docker.io/library/python:3.10-slim@sha256:e7a12cb51c3c52dd1385202633439671efc0c6ba4258436c81dad37f67816608 0.1s done; #26 DONE 0.1s; ; #27 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #27 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #27 DONE 0.1s; ; #23 [backend internal] load build context; #23 transferring context: 131.72kB 0.1s done; #23 DONE 0.2s; ; #24 [frontend-prod internal] load build context; #24 transferring context: 4.04kB 0.0s done; #24 DONE 0.1s; ; #28 [frontend-prod build-stage  7/10] COPY index.html .; #28 CACHED; ; #29 [frontend-prod build-stage  9/10] RUN npm run build; #29 CACHED; ; #30 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #30 CACHED; ; #31 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #31 CACHED; ; #32 [frontend-prod build-stage  2/10] WORKDIR /app; #32 CACHED; ; #33 [frontend-prod build-stage  8/10] COPY vite.config.js .; #33 CACHED; ; #34 [frontend-prod build-stage  3/10] COPY package*.json ./; #34 CACHED; ; #35 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #35 CACHED; ; #36 [frontend-prod build-stage  6/10] COPY src/ src/; #36 CACHED; ; #37 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #37 CACHED; ; #38 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #38 CACHED; ; #39 [frontend-prod build-stage  5/10] COPY public/ public/; #39 CACHED; ; #40 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #40 CACHED; ; #41 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #41 CACHED; ; #42 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #42 CACHED; ; #43 [backend 11/17] COPY --chown=app:app templates/ /app/templates/; #43 CACHED; ; #44 [backend  7/17] RUN useradd --create-home --shell /bin/bash app; #44 CACHED; ; #45 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #45 CACHED; ; #46 [backend 10/17] COPY --chown=app:app config/ /app/config/; #46 CACHED; ; #47 [backend  3/17] COPY requirements.txt requirements.txt; #47 CACHED; ; #48 [backend  9/17] COPY --chown=app:app app/ /app/app/; #48 CACHED; ; #49 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #49 CACHED; ; #50 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #50 CACHED; ; #51 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #51 CACHED; ; #52 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #52 CACHED; ; #53 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #53 CACHED; ; #54 [backend  2/17] WORKDIR /app; #54 CACHED; ; #55 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #55 CACHED; ; #56 [backend 12/17] COPY --chown=app:app static/ /app/static/; #56 CACHED; ; #57 [backend  8/17] COPY --chown=app:app src/ /app/src/; #57 CACHED; ; #58 [backend 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #58 CACHED; ; #55 [rqworker1 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #55 CACHED; ; #48 [rqworker1  9/17] COPY --chown=app:app app/ /app/app/; #48 CACHED; ; #53 [rqworker1 13/17] COPY --chown=app:app VERSION /app/VERSION; #53 CACHED; ; #50 [rqworker1  5/17] RUN pip install --no-cache-dir -r requirements.txt; #50 CACHED; ; #47 [rqworker1  3/17] COPY requirements.txt requirements.txt; #47 CACHED; ; #51 [rqworker1  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #51 CACHED; ; #54 [rqworker1  2/17] WORKDIR /app; #54 CACHED; ; #57 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #57 CACHED; ; #43 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #43 CACHED; ; #44 [rqworker1  7/17] RUN useradd --create-home --shell /bin/bash app; #44 CACHED; ; #49 [rqworker1 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #49 CACHED; ; #56 [rqworker1 12/17] COPY --chown=app:app static/ /app/static/; #56 CACHED; ; #46 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #46 CACHED; ; #52 [rqworker1 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #52 CACHED; ; #45 [rqworker1  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #45 CACHED; ; #59 [rqworker1] exporting to image; #59 exporting layers 0.0s done; #59 exporting manifest sha256:8e3822150e9924bbd7f5782a14076cb8aad5f01ce327bbad46d24cf883f48887 0.0s done; #59 exporting config sha256:42c0581e5e7cc970b113f2389ae9227b3ad0f9376d39e1acfdbac2a56f1884be; #59 exporting config sha256:42c0581e5e7cc970b113f2389ae9227b3ad0f9376d39e1acfdbac2a56f1884be 0.1s done; #59 exporting attestation manifest sha256:d551ee060883cd32e8ce90534dd5e52aa97efcbc8473531990813abce3f3f814; #59 exporting attestation manifest sha256:d551ee060883cd32e8ce90534dd5e52aa97efcbc8473531990813abce3f3f814 0.4s done; #59 exporting manifest list sha256:b7e7c9690920239008aa9fd11da45a5ad761f86b9bb9778e9f113b3782ed4058; #59 ...; ; #60 [frontend-prod] exporting to image; #60 exporting layers 0.0s done; #60 exporting manifest sha256:e2b726cb8b3c12502e5ae7503e09b825ee940ddbfe14dfd989a3c0ec643eb129 done; #60 exporting config sha256:394755b29ec28b020c1b47aadd176ac3248a56fb0d671edf7ceeb2d8d198aa76 0.0s done; #60 exporting attestation manifest sha256:a83b5d8c824fa7b9b13fc89955fae41c6039a359fb7198b0441a79d916598c22 0.3s done; #60 exporting manifest list sha256:8cb0ec5285323806e02d8ce2735f712f667da74337f54b68f73cb9cb32dc12b8 0.1s done; #60 naming to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #60 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #60 DONE 0.9s; ; #59 [rqworker1] exporting to image; #59 exporting manifest list sha256:b7e7c9690920239008aa9fd11da45a5ad761f86b9bb9778e9f113b3782ed4058 0.1s done; #59 naming to docker.io/library/casestrainer-rqworker1:latest; #59 ...; ; #61 [rqworker3] exporting to image; #61 exporting layers 0.0s done; #61 exporting manifest sha256:2d3fed4c4afd6d309ea600111d13d86d0a7bf98260e5cea92c09f83093268681 0.0s done; #61 exporting config sha256:ef58ad98c76a0da9420d041c4f554cb2bd4db44a5fd8762a2a9d8fec0673528f 0.0s done; #61 exporting attestation manifest sha256:9cd40562813a36b000f2a71ab01645b1f9b0342c733cea0ec7d1f36777acb856 0.3s done; #61 exporting manifest list sha256:7197ac91549221929d52cd0c0ce466f13421806da5650a9fa9671634d9e6044c 0.1s done; #61 naming to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #61 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #61 DONE 1.0s; ; #59 [rqworker1] exporting to image; #59 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #59 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #59 DONE 1.0s; ; #62 [backend] exporting to image; #62 exporting layers 0.0s done; #62 exporting manifest sha256:9ac3f63fe72093b3de8c2c5d8d08b16c79e1989981d5954732b9da350a47a98a 0.0s done; #62 exporting config sha256:a4d7a13e80212c5ad7aa085b63c1f91c4335678ebd2c215061d0a7d045c0fc64 0.0s done; #62 exporting attestation manifest sha256:4c497e42f6de3f5d1a79239f9a60425e4955d81a0c830c80c287d59f5a1814e0 0.3s done; #62 exporting manifest list sha256:258e01c73d204203d7f57115e96d4222d82f49aec78c85e5fad6ccd59dffcd46 0.2s done; #62 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #62 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #62 DONE 1.0s; ; #63 [rqworker2] exporting to image; #63 exporting layers 0.0s done; #63 exporting manifest sha256:cd4527afe60f92ee0dfa6192b018d6b02c06bf044c60ad532b008634d9c68a10 0.0s done; #63 exporting config sha256:0dc330d2952d8dcfe8b4997497f6503234010cf9e21953c7b9e9d74d3612db4d 0.0s done; #63 exporting attestation manifest sha256:b211c97aa9c9db79bcf815a2a0766994c6d1c3f48b3c7792fa860e66d4c55ae9 0.3s done; #63 exporting manifest list sha256:4678f6edaf0fb94eca0adbad2f677362d80ff333dcb93b19c41b8b3215e7ccff 0.2s done; #63 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #63 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #63 DONE 1.1s; ; #64 [frontend-prod] resolving provenance for metadata file; #64 DONE 0.5s; ; #65 [backend] resolving provenance for metadata file; #65 DONE 0.1s; ; #66 [rqworker2] resolving provenance for metadata file; #66 DONE 0.3s; ; #67 [rqworker3] resolving provenance for metadata file; #67 DONE 0.4s; ; #68 [rqworker1] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built
[2025-08-14 16:48:51] [INFO] Docker operation completed successfully: build
[2025-08-14 16:48:51] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 16:49:05] [DEBUG] Docker operation exit code: 0
[2025-08-14 16:49:05] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 16:49:05] [INFO] Docker operation completed successfully: up
[2025-08-14 16:49:05] [INFO] Waiting for containers to stabilize...
[2025-08-14 16:49:16] [INFO] Performing application health check...
[2025-08-14 16:49:16] [INFO] Application health check passed
[2025-08-14 16:49:16] [INFO] Deployment completed successfully!
[2025-08-14 16:49:16] [INFO] Containers running: 7
[2025-08-14 16:49:16] [DEBUG] Launcher execution completed
[2025-08-14 17:35:38] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 17:35:38] [INFO] Environment: Production, Mode: Fast
[2025-08-14 17:35:38] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 17:35:38] [INFO] Checking prerequisites...
[2025-08-14 17:35:38] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 17:35:38] [INFO] Starting deployment in Fast mode...
[2025-08-14 17:35:38] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 17:35:38] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 17:35:42] [DEBUG] Docker operation exit code: 0
[2025-08-14 17:35:42] [DEBUG] Docker output:  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 17:35:42] [INFO] Docker operation completed successfully: down
[2025-08-14 17:35:42] [INFO] Recent changes in src - will rebuild images
[2025-08-14 17:35:42] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 17:35:42] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 17:36:11] [DEBUG] Docker operation exit code: 0
[2025-08-14 17:36:11] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [frontend-prod internal] load build definition from Dockerfile.prod; #2 transferring dockerfile: 2.03kB 0.0s done; #2 DONE 0.1s; ; #3 [rqworker2 internal] load build definition from Dockerfile; #3 transferring dockerfile: 1.80kB 0.0s done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #4 ...; ; #5 [nginx internal] load build definition from Dockerfile; #5 transferring dockerfile: 652B 0.0s done; #5 DONE 0.1s; ; #6 [nginx internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B done; #7 DONE 0.0s; ; #8 [nginx internal] load build context; #8 DONE 0.0s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #10 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #10 ...; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 DONE 0.1s; ; #8 [nginx internal] load build context; #8 transferring context: 97B done; #8 DONE 0.0s; ; #11 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #11 CACHED; ; #12 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #12 CACHED; ; #13 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #13 CACHED; ; #14 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #14 CACHED; ; #15 [nginx 2/8] RUN apk add --no-cache curl; #15 CACHED; ; #16 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #16 CACHED; ; #17 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #17 CACHED; ; #18 [auth] library/node:pull token for registry-1.docker.io; #18 DONE 0.0s; ; #19 [auth] library/python:pull token for registry-1.docker.io; #19 DONE 0.0s; ; #20 [nginx] exporting to image; #20 exporting layers 0.0s done; #20 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #20 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #20 exporting attestation manifest sha256:09544fd8d4e36c76d4b09d36c3034664301136354fddb120be30dad97a5f05ad 0.1s done; #20 exporting manifest list sha256:fdaf0caa625bbe3e8563f5bbb183f97026dd1434d544b8ae26f21be3cbd86369 0.0s done; #20 naming to docker.io/library/casestrainer-nginx:latest; #20 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #20 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #20 DONE 0.3s; ; #4 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #4 DONE 0.8s; ; #10 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #10 ...; ; #9 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B done; #21 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #10 [backend internal] load metadata for docker.io/library/python:3.10-slim; #10 DONE 0.9s; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #23 DONE 0.1s; ; #24 [rqworker2 internal] load .dockerignore; #24 transferring context: 908B 0.0s done; #24 DONE 0.0s; ; #25 [nginx] resolving provenance for metadata file; #25 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 62.78kB 0.0s done; #22 DONE 0.1s; ; #26 [rqworker1 internal] load build context; #26 DONE 0.0s; ; #27 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #27 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #27 DONE 0.1s; ; #28 [frontend-prod build-stage  2/10] WORKDIR /app; #28 CACHED; ; #29 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #29 CACHED; ; #30 [frontend-prod build-stage  3/10] COPY package*.json ./; #30 CACHED; ; #31 [frontend-prod build-stage  5/10] COPY public/ public/; #31 CACHED; ; #27 [rqworker3  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #27 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #27 DONE 0.1s; ; #26 [rqworker2 internal] load build context; #26 transferring context: 280.69kB 0.2s done; #26 DONE 0.2s; ; #32 [frontend-prod build-stage  6/10] COPY src/ src/; #32 DONE 0.3s; ; #26 [backend internal] load build context; #26 DONE 0.2s; ; #33 [rqworker2  5/17] RUN pip install --no-cache-dir -r requirements.txt; #33 CACHED; ; #34 [rqworker2  2/17] WORKDIR /app; #34 CACHED; ; #35 [rqworker2  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #35 CACHED; ; #36 [rqworker2  3/17] COPY requirements.txt requirements.txt; #36 CACHED; ; #37 [rqworker2  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #37 CACHED; ; #38 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #38 CACHED; ; #39 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #39 ...; ; #40 [frontend-prod build-stage  7/10] COPY index.html .; #40 DONE 0.2s; ; #41 [frontend-prod build-stage  8/10] COPY vite.config.js .; #41 ...; ; #39 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #39 DONE 0.5s; ; #39 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #39 DONE 0.5s; ; #41 [frontend-prod build-stage  8/10] COPY vite.config.js .; #41 DONE 0.3s; ; #42 [rqworker1  9/17] COPY --chown=app:app app/ /app/app/; #42 DONE 0.3s; ; #43 [frontend-prod build-stage  9/10] RUN npm run build; #43 ...; ; #42 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #42 DONE 0.3s; ; #44 [rqworker2 10/17] COPY --chown=app:app config/ /app/config/; #44 DONE 0.2s; ; #43 [frontend-prod build-stage  9/10] RUN npm run build; #43 ...; ; #44 [backend 10/17] COPY --chown=app:app config/ /app/config/; #44 DONE 0.2s; ; #45 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #45 DONE 0.2s; ; #43 [frontend-prod build-stage  9/10] RUN npm run build; #43 ...; ; #45 [backend 11/17] COPY --chown=app:app templates/ /app/templates/; #45 DONE 0.2s; ; #46 [rqworker1 12/17] COPY --chown=app:app static/ /app/static/; #46 DONE 1.3s; ; #43 [frontend-prod build-stage  9/10] RUN npm run build; #43 1.191 ; #43 1.191 > casestrainer-vue-new@0.6.5 build; #43 1.191 > vite build; #43 1.191 ; #43 ...; ; #46 [backend 12/17] COPY --chown=app:app static/ /app/static/; #46 DONE 1.3s; ; #47 [rqworker3 13/17] COPY --chown=app:app VERSION /app/VERSION; #47 DONE 0.2s; ; #43 [frontend-prod build-stage  9/10] RUN npm run build; #43 ...; ; #47 [rqworker1 13/17] COPY --chown=app:app VERSION /app/VERSION; #47 DONE 0.2s; ; #43 [frontend-prod build-stage  9/10] RUN npm run build; #43 2.263 vite v6.3.5 building for production...; #43 ...; ; #48 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #48 DONE 0.6s; ; #48 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #48 DONE 0.6s; ; #43 [frontend-prod build-stage  9/10] RUN npm run build; #43 2.887 transforming...; #43 ...; ; #49 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #49 DONE 0.5s; ; #49 [rqworker3 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #49 DONE 0.5s; ; #50 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #50 DONE 0.5s; ; #43 [frontend-prod build-stage  9/10] RUN npm run build; #43 ...; ; #50 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #50 DONE 0.5s; ; #51 [rqworker1 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #51 DONE 0.5s; ; #43 [frontend-prod build-stage  9/10] RUN npm run build; #43 ...; ; #51 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #51 DONE 0.5s; ; #52 [backend] exporting to image; #52 exporting layers; #52 exporting layers 4.6s done; #52 exporting manifest sha256:d1538ca2c8ad1e0d8b3aac46ef09148d4552bd06e52e081f02a1a5df0d1e56c6; #52 exporting manifest sha256:d1538ca2c8ad1e0d8b3aac46ef09148d4552bd06e52e081f02a1a5df0d1e56c6 0.1s done; #52 exporting config sha256:48a2df3158c71290615f2fe4663a17b1afbc156342911dd53458d409e1543314; #52 exporting config sha256:48a2df3158c71290615f2fe4663a17b1afbc156342911dd53458d409e1543314 0.2s done; #52 exporting attestation manifest sha256:595998d152d3fdf26036c9634a48d1322489f09005170c9e7284db49afd29267; #52 exporting attestation manifest sha256:595998d152d3fdf26036c9634a48d1322489f09005170c9e7284db49afd29267 0.3s done; #52 exporting manifest list sha256:ef5c8056b92a319560f778a6c3ed488321406359975254ee089e6af1e762db54; #52 exporting manifest list sha256:ef5c8056b92a319560f778a6c3ed488321406359975254ee089e6af1e762db54 0.2s done; #52 naming to docker.io/library/casestrainer-backend:latest; #52 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #52 unpacking to docker.io/library/casestrainer-backend:latest; #52 ...; ; #53 [rqworker3] exporting to image; #53 exporting layers 4.6s done; #53 exporting manifest sha256:5bf6d59fca6db6d5364bfed6a645a25ba29f105d2d26f8e5713b672f1dfed4f9 0.2s done; #53 exporting config sha256:c76f261d0bf72e3100fa58bca7638a81cdf3e8003cbc255ccdc8a46f731e1ca0 0.2s done; #53 exporting attestation manifest sha256:e9379ccad6342fef7d9f00bbb96201e9b15aa41e814237eba3a317d2e1f8b1b8 0.4s done; #53 exporting manifest list sha256:21026329e56e100fdce9a8e169335b0445cf263af1a3bf7c6cf60c2d875570a8 0.2s done; #53 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #53 unpacking to docker.io/library/casestrainer-rqworker3:latest; #53 ...; ; #54 [rqworker1] exporting to image; #54 exporting layers 4.6s done; #54 exporting manifest sha256:bfa8dadb786c22ddec2acaa435607f77a9130c2400506622d3fcad55d627bb05 0.1s done; #54 exporting config sha256:8f02ca58997c84a1765acd3691570b6e90d29b1ddc87a9c5af26b0379da6b298 0.2s done; #54 exporting attestation manifest sha256:021d032821c2a1abf903f2a9cb65102c37ef9c8fe69c3a3e5cb0a70f098a6d8d 0.4s done; #54 exporting manifest list sha256:8d67c711b13cb3ef5e8f01b6aea9562bc19fa25a05135b3f1a2c7829597f96b6 0.2s done; #54 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #54 unpacking to docker.io/library/casestrainer-rqworker1:latest; #54 ...; ; #55 [rqworker2] exporting to image; #55 exporting layers 4.6s done; #55 exporting manifest sha256:49f8ee3f82db54d32ade97bb809f45ca49cbc60ba651db1bf9e094b83d9ea9d9 0.1s done; #55 exporting config sha256:a16f23a02a53d57e24d6c4843d844fdeb8330c9272cb0989e747ab7847607ac5 0.2s done; #55 exporting attestation manifest sha256:db88cc8a0903f51eab9501eb857e0235a3c4ce6d085071a639f3114c42f39e85 0.4s done; #55 exporting manifest list sha256:9c42e40bdc7bef24778915a37ed750edf0563a25443fa83764c383d8e2b616ee 0.2s done; #55 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #55 unpacking to docker.io/library/casestrainer-rqworker2:latest; #55 ...; ; #52 [backend] exporting to image; #52 unpacking to docker.io/library/casestrainer-backend:latest 4.9s done; #52 DONE 10.7s; ; #53 [rqworker3] exporting to image; #53 unpacking to docker.io/library/casestrainer-rqworker3:latest 4.9s done; #53 DONE 10.8s; ; #54 [rqworker1] exporting to image; #54 unpacking to docker.io/library/casestrainer-rqworker1:latest 4.9s done; #54 DONE 10.7s; ; #55 [rqworker2] exporting to image; #55 unpacking to docker.io/library/casestrainer-rqworker2:latest 4.8s done; #55 DONE 10.7s; ; #43 [frontend-prod build-stage  9/10] RUN npm run build; #43 8.739 G 136 modules transformed.; #43 10.93 rendering chunks...; #43 ...; ; #56 [backend] resolving provenance for metadata file; #56 DONE 0.8s; ; #57 [rqworker2] resolving provenance for metadata file; #57 DONE 0.5s; ; #58 [rqworker1] resolving provenance for metadata file; #58 DONE 0.3s; ; #59 [rqworker3] resolving provenance for metadata file; #59 DONE 0.1s; ; #43 [frontend-prod build-stage  9/10] RUN npm run build; #43 18.58 computing gzip size...; #43 18.61 dist/index.html                              0.91 kB G gzip:  0.45 kB; #43 18.61 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB G gzip:  0.07 kB; #43 18.61 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB G gzip:  0.07 kB; #43 18.61 dist/assets/NotFound-CrLUfTg_.css            1.01 kB G gzip:  0.45 kB; #43 18.61 dist/assets/Docs-La2G-zWQ.css                1.39 kB G gzip:  0.46 kB; #43 18.61 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB G gzip:  0.57 kB; #43 18.61 dist/assets/index-BBu1wBep.css             273.52 kB G gzip: 38.55 kB; #43 18.61 dist/assets/Docs-BlXUVxqX.js                 1.01 kB G gzip:  0.56 kB; #43 18.61 dist/assets/WordPlugin-DWowCKxb.js           1.20 kB G gzip:  0.71 kB; #43 18.61 dist/assets/BrowserExtension-C1LW2mYg.js     1.22 kB G gzip:  0.73 kB; #43 18.61 dist/assets/NotFound-ieqysInl.js             1.89 kB G gzip:  0.92 kB; #43 18.61 dist/assets/ApiDocs-45NJKRvk.js             23.31 kB G gzip:  4.00 kB; #43 18.61 dist/assets/vendor-C-1G2k3o.js              34.93 kB G gzip: 13.58 kB; #43 18.61 dist/assets/vue-ChBwCVzF.js                 91.40 kB G gzip: 34.95 kB; #43 18.61 dist/assets/index-_QgBXlok.js              151.17 kB G gzip: 44.76 kB; #43 18.61 G built in 16.11s; #43 DONE 19.5s; ; #60 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #60 DONE 0.6s; ; #9 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 CACHED; ; #61 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #61 DONE 0.2s; ; #62 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #62 DONE 0.4s; ; #63 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #63 DONE 0.1s; ; #64 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #64 DONE 0.1s; ; #65 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #65 DONE 0.4s; ; #66 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #66 DONE 0.5s; ; #67 [frontend-prod] exporting to image; #67 exporting layers; #67 exporting layers 0.7s done; #67 exporting manifest sha256:388a4e2d1c7f57b67a77a3b0196e572f02ff4d631d05320503150ecdd09bdbe5 0.0s done; #67 exporting config sha256:54c83de45b7dd11d08f1cc3a8f2cc5cc85ac9a182e72c82de148c0799d355c25 0.1s done; #67 exporting attestation manifest sha256:8d87b0f5e249248c8a13eff0423e859d6ff071b2a7d7964e27993092c2d0493b; #67 exporting attestation manifest sha256:8d87b0f5e249248c8a13eff0423e859d6ff071b2a7d7964e27993092c2d0493b 0.1s done; #67 exporting manifest list sha256:164187d3e521bb920fdbc44b62b06fb4a3ae4184929d820529528ea01aff1cbc 0.0s done; #67 naming to docker.io/library/casestrainer-frontend-prod:latest done; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.4s done; #67 DONE 1.4s; ; #68 [frontend-prod] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built
[2025-08-14 17:36:11] [INFO] Docker operation completed successfully: build
[2025-08-14 17:36:11] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 17:36:25] [DEBUG] Docker operation exit code: 0
[2025-08-14 17:36:25] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 17:36:25] [INFO] Docker operation completed successfully: up
[2025-08-14 17:36:25] [INFO] Waiting for containers to stabilize...
[2025-08-14 17:36:35] [INFO] Performing application health check...
[2025-08-14 17:36:35] [INFO] Application health check passed
[2025-08-14 17:36:35] [INFO] Deployment completed successfully!
[2025-08-14 17:36:35] [INFO] Containers running: 7
[2025-08-14 17:36:35] [DEBUG] Launcher execution completed
[2025-08-14 17:43:22] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 17:43:22] [INFO] Environment: Production, Mode: Fast
[2025-08-14 17:43:22] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 17:43:22] [INFO] Checking prerequisites...
[2025-08-14 17:43:22] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 17:43:22] [INFO] Starting deployment in Fast mode...
[2025-08-14 17:43:22] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 17:43:22] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 17:43:25] [DEBUG] Docker operation exit code: 0
[2025-08-14 17:43:25] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 17:43:25] [INFO] Docker operation completed successfully: down
[2025-08-14 17:43:25] [INFO] Recent changes in src - will rebuild images
[2025-08-14 17:43:25] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 17:43:25] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 17:43:43] [DEBUG] Docker operation exit code: 0
[2025-08-14 17:43:43] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [nginx internal] load build definition from Dockerfile; #2 transferring dockerfile: 652B 0.0s done; #2 DONE 0.1s; ; #3 [rqworker2 internal] load build definition from Dockerfile; #3 transferring dockerfile: 1.80kB 0.0s done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.1s; ; #5 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [auth] library/python:pull token for registry-1.docker.io; #7 DONE 0.0s; ; #8 [auth] library/node:pull token for registry-1.docker.io; #8 DONE 0.0s; ; #9 [nginx internal] load .dockerignore; #9 transferring context: 2B done; #9 DONE 0.0s; ; #10 [nginx internal] load build context; #10 DONE 0.0s; ; #11 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #11 DONE 0.1s; ; #10 [nginx internal] load build context; #10 transferring context: 97B 0.0s done; #10 DONE 0.0s; ; #12 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #12 CACHED; ; #13 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #13 CACHED; ; #14 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #14 CACHED; ; #15 [nginx 2/8] RUN apk add --no-cache curl; #15 CACHED; ; #16 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #16 CACHED; ; #17 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:75ce3644d552f11c126563a4adf9dd7c2d5fb2fbab24a0a120de41dcefcde60d 0.1s done; #19 exporting manifest list sha256:1030156e966dc0c37dfc787b5e275615a4c5868cef285e6f154024f7f4a06a1e; #19 exporting manifest list sha256:1030156e966dc0c37dfc787b5e275615a4c5868cef285e6f154024f7f4a06a1e 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.1s done; #19 DONE 0.3s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.7s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #11 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #11 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #5 [backend internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 0.9s; ; #23 [rqworker3 internal] load .dockerignore; #23 transferring context: 908B 0.0s done; #23 DONE 0.0s; ; #24 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #24 DONE 0.1s; ; #25 [rqworker1 internal] load build context; #25 DONE 0.0s; ; #26 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #26 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #26 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #26 DONE 0.1s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 62.78kB 0.0s done; #22 DONE 0.1s; ; #27 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #27 CACHED; ; #28 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #28 CACHED; ; #29 [frontend-prod build-stage  8/10] COPY vite.config.js .; #29 CACHED; ; #30 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #30 CACHED; ; #31 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #31 CACHED; ; #32 [frontend-prod build-stage  7/10] COPY index.html .; #32 CACHED; ; #33 [frontend-prod build-stage  5/10] COPY public/ public/; #33 CACHED; ; #34 [frontend-prod build-stage  2/10] WORKDIR /app; #34 CACHED; ; #35 [frontend-prod build-stage  6/10] COPY src/ src/; #35 CACHED; ; #36 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #36 CACHED; ; #37 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #37 CACHED; ; #38 [frontend-prod build-stage  3/10] COPY package*.json ./; #38 CACHED; ; #39 [frontend-prod build-stage  9/10] RUN npm run build; #39 CACHED; ; #40 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #40 CACHED; ; #41 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #41 CACHED; ; #25 [rqworker2 internal] load build context; #25 ...; ; #42 [nginx] resolving provenance for metadata file; #42 DONE 0.0s; ; #25 [rqworker2 internal] load build context; #25 transferring context: 187.80kB 0.2s done; #25 DONE 0.3s; ; #43 [rqworker3  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #43 CACHED; ; #44 [rqworker3  3/17] COPY requirements.txt requirements.txt; #44 CACHED; ; #45 [rqworker3  5/17] RUN pip install --no-cache-dir -r requirements.txt; #45 CACHED; ; #46 [rqworker3  2/17] WORKDIR /app; #46 CACHED; ; #47 [rqworker3  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #47 CACHED; ; #48 [rqworker3  7/17] RUN useradd --create-home --shell /bin/bash app; #48 CACHED; ; #49 [frontend-prod] exporting to image; #49 exporting layers 0.0s done; #49 exporting manifest sha256:388a4e2d1c7f57b67a77a3b0196e572f02ff4d631d05320503150ecdd09bdbe5 0.0s done; #49 exporting config sha256:54c83de45b7dd11d08f1cc3a8f2cc5cc85ac9a182e72c82de148c0799d355c25 0.0s done; #49 exporting attestation manifest sha256:f471255f2482af3d79c8fecca9a57423b10f4bceaf3fa881bfb34d2ea0975221 0.1s done; #49 exporting manifest list sha256:af2c9481fb807e2e399c1f503086cc75cb8da7f03858a5fb7f0e82a77db63f11 0.0s done; #49 naming to docker.io/library/casestrainer-frontend-prod:latest done; #49 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #49 DONE 0.4s; ; #50 [rqworker3  8/17] COPY --chown=app:app src/ /app/src/; #50 DONE 0.5s; ; #51 [frontend-prod] resolving provenance for metadata file; #51 DONE 0.0s; ; #52 [rqworker3  9/17] COPY --chown=app:app app/ /app/app/; #52 DONE 0.2s; ; #53 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.2s; ; #54 [rqworker3 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.2s; ; #55 [backend 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 1.2s; ; #56 [rqworker3 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.2s; ; #57 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.6s; ; #58 [rqworker1 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.6s; ; #59 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.4s; ; #60 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.5s; ; #61 [rqworker1] exporting to image; #61 exporting layers 4.1s done; #61 exporting manifest sha256:b401a0a1ef7f802fbdb3c4968a28c98dabd68fe3392bce03f5ac76aaf58fbd83; #61 exporting manifest sha256:b401a0a1ef7f802fbdb3c4968a28c98dabd68fe3392bce03f5ac76aaf58fbd83 0.1s done; #61 exporting config sha256:669acdb5226666b42a65fd8a549277d9984fdd830269a0d8e9fe259c698c68db; #61 exporting config sha256:669acdb5226666b42a65fd8a549277d9984fdd830269a0d8e9fe259c698c68db 0.1s done; #61 exporting attestation manifest sha256:30621b1ab4a63c171945aac8c9ed11ec16e8b3c768e206d6e78edb8bf10c0660; #61 exporting attestation manifest sha256:30621b1ab4a63c171945aac8c9ed11ec16e8b3c768e206d6e78edb8bf10c0660 0.3s done; #61 exporting manifest list sha256:c48e8c5cbfa10c342bc3d9e249bebeebea79ba67beacb95c2e9c4b7836f565bf; #61 exporting manifest list sha256:c48e8c5cbfa10c342bc3d9e249bebeebea79ba67beacb95c2e9c4b7836f565bf 0.1s done; #61 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest; #61 ...; ; #62 [rqworker3] exporting to image; #62 exporting layers 4.1s done; #62 exporting manifest sha256:9f50479e4fe55d7460551341a52e3feb55ab81f06dff234a46b544c344a19c3d 0.1s done; #62 exporting config sha256:631df918740f8c81c47318419d6792ea6d8715042d759f4409eb614f403e437a 0.1s done; #62 exporting attestation manifest sha256:0cce61e21c696b44ed577ac7cf91217a80f4b07321204bca8262b41783615764 0.3s done; #62 exporting manifest list sha256:ee80ae7de8d8a463f537eefc47d9df9f7f44679b26e709f918d76df5be9a3038 0.1s done; #62 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #62 unpacking to docker.io/library/casestrainer-rqworker3:latest 3.3s done; #62 ...; ; #63 [rqworker2] exporting to image; #63 exporting layers 4.1s done; #63 exporting manifest sha256:be99b392db21c0098eaa06bb83e4f8e03a5fa82a588d1e1c7725a3efa7921498 0.1s done; #63 exporting config sha256:6eee59fa9a286b399484b801a11a468ca5ba8566a4e122fb2afe531da47480d4 0.1s done; #63 exporting attestation manifest sha256:fb90d81b4958b688517db77d01f2094bcd491533f884d9529c816e3f602ce8c1 0.2s done; #63 exporting manifest list sha256:8fa29d23aa93705f25a01e645fd60667feaeadf68ffe637ba22c437c5f9a43a5 0.1s done; #63 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #63 unpacking to docker.io/library/casestrainer-rqworker2:latest 3.3s done; #63 DONE 8.3s; ; #61 [rqworker1] exporting to image; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest 3.3s done; #61 DONE 8.3s; ; #62 [rqworker3] exporting to image; #62 DONE 8.3s; ; #64 [backend] exporting to image; #64 exporting layers 4.1s done; #64 exporting manifest sha256:eb6d1cd2157aac9ce1b85b7ebb4271cd6d4345361b6d29d5534bc4f24df7f106 0.1s done; #64 exporting config sha256:996351d55d0867069213defe203b0401a307244626348849e08c87aea97a2aad 0.1s done; #64 exporting attestation manifest sha256:74833caccda65462c0afd9119a37bea5435a165377321aff111e08d5f6fc4703 0.3s done; #64 exporting manifest list sha256:5bedf905df0266b128b58774cf81df3ca84bd96279c5e55d0ff4000c7f962d45 0.1s done; #64 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #64 unpacking to docker.io/library/casestrainer-backend:latest 3.3s done; #64 DONE 8.4s; ; #65 [rqworker2] resolving provenance for metadata file; #65 DONE 0.5s; ; #66 [rqworker1] resolving provenance for metadata file; #66 DONE 0.2s; ; #67 [rqworker3] resolving provenance for metadata file; #67 DONE 0.3s; ; #68 [backend] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built
[2025-08-14 17:43:43] [INFO] Docker operation completed successfully: build
[2025-08-14 17:43:43] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 17:44:00] [DEBUG] Docker operation exit code: 0
[2025-08-14 17:44:00] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 17:44:00] [INFO] Docker operation completed successfully: up
[2025-08-14 17:44:00] [INFO] Waiting for containers to stabilize...
[2025-08-14 17:44:10] [INFO] Performing application health check...
[2025-08-14 17:44:11] [INFO] Application health check passed
[2025-08-14 17:44:11] [INFO] Deployment completed successfully!
[2025-08-14 17:44:11] [INFO] Containers running: 7
[2025-08-14 17:44:11] [DEBUG] Launcher execution completed
[2025-08-14 17:45:10] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 17:45:10] [INFO] Environment: Production, Mode: Fast
[2025-08-14 17:45:10] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 17:45:10] [INFO] Checking prerequisites...
[2025-08-14 17:45:10] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 17:45:10] [INFO] Starting deployment in Fast mode...
[2025-08-14 17:45:10] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 17:45:10] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 17:45:13] [DEBUG] Docker operation exit code: 0
[2025-08-14 17:45:13] [DEBUG] Docker output:  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 17:45:13] [INFO] Docker operation completed successfully: down
[2025-08-14 17:45:13] [INFO] Recent changes in src - will rebuild images
[2025-08-14 17:45:13] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 17:45:30] [DEBUG] Docker operation exit code: 0
[2025-08-14 17:45:30] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker2 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [nginx internal] load build definition from Dockerfile; #3 transferring dockerfile: 652B 0.0s done; #3 DONE 0.1s; ; #4 [nginx internal] load metadata for docker.io/library/nginx:alpine; #4 DONE 0.1s; ; #5 [frontend-prod internal] load build definition from Dockerfile.prod; #5 transferring dockerfile: 2.03kB 0.0s done; #5 DONE 0.1s; ; #6 [nginx internal] load .dockerignore; #6 transferring context:; #6 transferring context: 2B 0.0s done; #6 DONE 0.0s; ; #7 [nginx internal] load build context; #7 DONE 0.0s; ; #8 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.1s; ; #7 [nginx internal] load build context; #7 transferring context: 97B 0.0s done; #7 DONE 0.0s; ; #9 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #9 CACHED; ; #10 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #10 CACHED; ; #11 [nginx 2/8] RUN apk add --no-cache curl; #11 CACHED; ; #12 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #12 CACHED; ; #13 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #13 CACHED; ; #14 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #14 CACHED; ; #15 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #15 CACHED; ; #16 [nginx] exporting to image; #16 exporting layers done; #16 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #16 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #16 exporting attestation manifest sha256:9ef086da1798c9cd41e1abb8e42d12ef9e325f01ffd26453ba25a0188fbee4b1; #16 exporting attestation manifest sha256:9ef086da1798c9cd41e1abb8e42d12ef9e325f01ffd26453ba25a0188fbee4b1 0.1s done; #16 exporting manifest list sha256:f17dcb6fb542cb4c8a9f889e0832130c2b20e7dc9b8ecb48e758c9220fc0863e 0.1s done; #16 naming to docker.io/library/casestrainer-nginx:latest; #16 ...; ; #17 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #17 DONE 0.5s; ; #18 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #18 DONE 0.6s; ; #19 [frontend-prod internal] load .dockerignore; #19 transferring context: 834B 0.0s done; #19 DONE 0.1s; ; #16 [nginx] exporting to image; #16 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #16 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #16 DONE 0.5s; ; #8 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.1s; ; #20 [frontend-prod internal] load build context; #20 DONE 0.0s; ; #21 [backend internal] load .dockerignore; #21 transferring context: 908B 0.0s done; #21 DONE 0.1s; ; #22 [rqworker1 internal] load build context; #22 DONE 0.0s; ; #23 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #23 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #23 ...; ; #24 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #24 DONE 0.1s; ; #20 [frontend-prod internal] load build context; #20 transferring context: 4.04kB 0.0s done; #20 DONE 0.1s; ; #25 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #25 CACHED; ; #26 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #26 CACHED; ; #27 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #27 CACHED; ; #28 [frontend-prod build-stage  9/10] RUN npm run build; #28 CACHED; ; #29 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #29 CACHED; ; #30 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #30 CACHED; ; #31 [frontend-prod build-stage  7/10] COPY index.html .; #31 CACHED; ; #32 [frontend-prod build-stage  3/10] COPY package*.json ./; #32 CACHED; ; #33 [frontend-prod build-stage  2/10] WORKDIR /app; #33 CACHED; ; #34 [frontend-prod build-stage  5/10] COPY public/ public/; #34 CACHED; ; #35 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #35 CACHED; ; #36 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #36 CACHED; ; #37 [frontend-prod build-stage  8/10] COPY vite.config.js .; #37 CACHED; ; #38 [frontend-prod build-stage  6/10] COPY src/ src/; #38 CACHED; ; #39 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #39 CACHED; ; #23 [rqworker3  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #23 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.2s done; #23 DONE 0.2s; ; #22 [rqworker3 internal] load build context; #22 transferring context: 189.50kB 0.2s done; #22 DONE 0.2s; ; #40 [rqworker3  5/17] RUN pip install --no-cache-dir -r requirements.txt; #40 CACHED; ; #41 [rqworker3  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #41 CACHED; ; #42 [rqworker3  3/17] COPY requirements.txt requirements.txt; #42 CACHED; ; #43 [rqworker3  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #43 CACHED; ; #44 [rqworker3  2/17] WORKDIR /app; #44 CACHED; ; #45 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #45 CACHED; ; #46 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #46 ...; ; #47 [frontend-prod] exporting to image; #47 exporting layers 0.0s done; #47 exporting manifest sha256:388a4e2d1c7f57b67a77a3b0196e572f02ff4d631d05320503150ecdd09bdbe5 0.0s done; #47 exporting config sha256:54c83de45b7dd11d08f1cc3a8f2cc5cc85ac9a182e72c82de148c0799d355c25 0.0s done; #47 exporting attestation manifest sha256:4096ad08df3e36abb090e425e08a6d44f9700607323487650f3af0478a865dc3 0.1s done; #47 exporting manifest list sha256:733eabdfc48f524a61cffdb71664dae81b893b9ae56823569cb475c8772871f9 0.1s done; #47 naming to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #47 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #47 DONE 0.5s; ; #48 [nginx] resolving provenance for metadata file; #48 DONE 0.0s; ; #46 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #46 DONE 0.6s; ; #49 [rqworker3  9/17] COPY --chown=app:app app/ /app/app/; #49 DONE 0.3s; ; #50 [frontend-prod] resolving provenance for metadata file; #50 DONE 0.0s; ; #51 [rqworker2 10/17] COPY --chown=app:app config/ /app/config/; #51 DONE 0.2s; ; #52 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #52 DONE 0.2s; ; #53 [rqworker3 12/17] COPY --chown=app:app static/ /app/static/; #53 DONE 1.0s; ; #54 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #54 DONE 0.2s; ; #55 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #55 DONE 0.4s; ; #56 [rqworker1 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #56 DONE 0.5s; ; #57 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #57 DONE 0.4s; ; #58 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #58 DONE 0.5s; ; #59 [rqworker2] exporting to image; #59 exporting layers 4.0s done; #59 exporting manifest sha256:efb89cdd11a7ca1917c339db8c7fde667b0665e229ae3d5d276bcf9fd92a6793 0.1s done; #59 exporting config sha256:14e76cf7cb4e5f177eee455ccd43124941b0caad82b47093f823a604a6afc892; #59 exporting config sha256:14e76cf7cb4e5f177eee455ccd43124941b0caad82b47093f823a604a6afc892 0.1s done; #59 exporting attestation manifest sha256:c2345687466e144273566f7e2e260a7afeaeed13708b3de57757f620924f14e0; #59 exporting attestation manifest sha256:c2345687466e144273566f7e2e260a7afeaeed13708b3de57757f620924f14e0 0.2s done; #59 exporting manifest list sha256:9f6225639f9eb06e24bbd1a258dcc31f9b743e957bd2e8dc6ee68e693ab76dee; #59 exporting manifest list sha256:9f6225639f9eb06e24bbd1a258dcc31f9b743e957bd2e8dc6ee68e693ab76dee 0.1s done; #59 naming to docker.io/library/casestrainer-rqworker2:latest; #59 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #59 unpacking to docker.io/library/casestrainer-rqworker2:latest; #59 unpacking to docker.io/library/casestrainer-rqworker2:latest 2.8s done; #59 DONE 7.8s; ; #60 [backend] exporting to image; #60 exporting layers 4.1s done; #60 exporting manifest sha256:263a58eba4b02c9d036c9c541061b83acacd41da35778012f6ea064d8e37d838 0.1s done; #60 exporting config sha256:eaffcb2497dd37624f33cbd9615d3a8177d423e9559e671f3476e9c1066c021e 0.1s done; #60 exporting attestation manifest sha256:fb192e6f7b26d11c910334063e16cb782c052766051eff40d6b0e6d93fdb7a66 0.2s done; #60 exporting manifest list sha256:f56479dc63764c4185f475004a4604bc32a22b7a4adb398837d16d8d0bdd1f78 0.1s done; #60 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #60 unpacking to docker.io/library/casestrainer-backend:latest 2.9s done; #60 DONE 7.9s; ; #61 [rqworker3] exporting to image; #61 exporting layers 4.1s done; #61 exporting manifest sha256:e164d9db8f7f36b2c8c5a5da87e9436465a397b6a5c8a74267bd63b1ddb30d5b 0.1s done; #61 exporting config sha256:1d30977c1d05f78081d1d9ffd5874b9a370ec50191e43423574968623a22b15b 0.1s done; #61 exporting attestation manifest sha256:a472a22bcccc997ea50e273b56f872987fb39175ffae6fb2f3fe0ef4d5334cbe 0.2s done; #61 exporting manifest list sha256:f53068aa02653877b882200e6da5ecef25086c478fdc67b2664c6ea99c5a2e55 0.1s done; #61 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-rqworker3:latest 2.8s done; #61 DONE 7.9s; ; #62 [rqworker1] exporting to image; #62 exporting layers 4.1s done; #62 exporting manifest sha256:af3c07db704a5f51a5d24c1933c73abfedcb7f0f2723197ca66427080f373352 0.1s done; #62 exporting config sha256:98f3493fca7c394231749e4b0c8a1b50bc54ff6180d0792d056a669a56d65f41 0.1s done; #62 exporting attestation manifest sha256:affcb41b731992ae4f4e3a3f8196dc17cb06ebc328f8921d77c01bb7573dfa8e 0.3s done; #62 exporting manifest list sha256:8bf5b66451616f0e755cd7cf1ab6df68b91239d3fe22d5ebd18668ac0b6a4fe5 0.1s done; #62 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #62 unpacking to docker.io/library/casestrainer-rqworker1:latest 2.9s done; #62 DONE 7.9s; ; #63 [rqworker2] resolving provenance for metadata file; #63 DONE 0.3s; ; #64 [rqworker3] resolving provenance for metadata file; #64 DONE 0.3s; ; #65 [rqworker1] resolving provenance for metadata file; #65 DONE 0.1s; ; #66 [backend] resolving provenance for metadata file; #66 DONE 0.0s;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built
[2025-08-14 17:45:30] [INFO] Docker operation completed successfully: build
[2025-08-14 17:45:30] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 17:45:47] [DEBUG] Docker operation exit code: 0
[2025-08-14 17:45:47] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 17:45:47] [INFO] Docker operation completed successfully: up
[2025-08-14 17:45:47] [INFO] Waiting for containers to stabilize...
[2025-08-14 17:45:58] [INFO] Performing application health check...
[2025-08-14 17:45:58] [INFO] Application health check passed
[2025-08-14 17:45:58] [INFO] Deployment completed successfully!
[2025-08-14 17:45:58] [INFO] Containers running: 7
[2025-08-14 17:45:58] [DEBUG] Launcher execution completed
[2025-08-14 17:47:05] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 17:47:05] [INFO] Environment: Production, Mode: Fast
[2025-08-14 17:47:05] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 17:47:05] [INFO] Checking prerequisites...
[2025-08-14 17:47:05] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 17:47:05] [INFO] Starting deployment in Fast mode...
[2025-08-14 17:47:05] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 17:47:05] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 17:47:09] [DEBUG] Docker operation exit code: 0
[2025-08-14 17:47:09] [DEBUG] Docker output:  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 17:47:09] [INFO] Docker operation completed successfully: down
[2025-08-14 17:47:09] [INFO] Recent changes in src - will rebuild images
[2025-08-14 17:47:09] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 17:47:09] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 17:47:27] [DEBUG] Docker operation exit code: 0
[2025-08-14 17:47:27] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker1 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [nginx internal] load build definition from Dockerfile; #3 transferring dockerfile: 652B 0.0s done; #3 DONE 0.1s; ; #4 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #4 ...; ; #5 [frontend-prod internal] load build definition from Dockerfile.prod; #5 transferring dockerfile: 2.03kB 0.0s done; #5 DONE 0.1s; ; #4 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #4 ...; ; #6 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B done; #7 DONE 0.0s; ; #8 [nginx internal] load build context; #8 DONE 0.0s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 DONE 0.1s; ; #8 [nginx internal] load build context; #8 transferring context: 97B done; #8 DONE 0.0s; ; #10 [nginx 2/8] RUN apk add --no-cache curl; #10 CACHED; ; #11 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #11 CACHED; ; #12 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #12 CACHED; ; #13 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #13 CACHED; ; #14 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #14 CACHED; ; #15 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [nginx] exporting to image; #17 exporting layers 0.0s done; #17 ...; ; #18 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #18 DONE 0.5s; ; #17 [nginx] exporting to image; #17 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af 0.0s done; #17 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 0.0s done; #17 ...; ; #9 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #4 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #4 DONE 0.5s; ; #19 [frontend-prod internal] load .dockerignore; #19 transferring context: 834B 0.0s done; #19 DONE 0.1s; ; #20 [rqworker3 internal] load .dockerignore; #20 transferring context: 908B 0.0s done; #20 DONE 0.1s; ; #17 [nginx] exporting to image; #17 exporting attestation manifest sha256:684cff8a1748d69873708a062765352e945ab65a9a14ff4d769a909bf405853d; #17 ...; ; #21 [frontend-prod internal] load build context; #21 DONE 0.0s; ; #22 [rqworker3 internal] load build context; #22 DONE 0.0s; ; #17 [nginx] exporting to image; #17 exporting attestation manifest sha256:684cff8a1748d69873708a062765352e945ab65a9a14ff4d769a909bf405853d 0.1s done; #17 exporting manifest list sha256:a00db81661e35d7965c2ac8365cffe0bf4e0d6712b650363bb7f70bc5b76f291 0.1s done; #17 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #17 unpacking to docker.io/library/casestrainer-nginx:latest; #17 ...; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.2s done; #23 DONE 0.2s; ; #24 [backend  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #24 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.2s done; #24 DONE 0.2s; ; #21 [frontend-prod internal] load build context; #21 transferring context: 4.04kB 0.0s done; #21 DONE 0.1s; ; #17 [nginx] exporting to image; #17 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #17 ...; ; #25 [frontend-prod build-stage  6/10] COPY src/ src/; #25 CACHED; ; #26 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #26 CACHED; ; #27 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #27 CACHED; ; #28 [frontend-prod build-stage  9/10] RUN npm run build; #28 CACHED; ; #29 [frontend-prod build-stage  2/10] WORKDIR /app; #29 CACHED; ; #30 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #30 CACHED; ; #31 [frontend-prod build-stage  8/10] COPY vite.config.js .; #31 CACHED; ; #32 [frontend-prod build-stage  7/10] COPY index.html .; #32 CACHED; ; #33 [frontend-prod build-stage  3/10] COPY package*.json ./; #33 CACHED; ; #34 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #34 CACHED; ; #35 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #35 CACHED; ; #36 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #36 CACHED; ; #37 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #37 CACHED; ; #38 [frontend-prod build-stage  5/10] COPY public/ public/; #38 CACHED; ; #39 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #39 CACHED; ; #17 [nginx] exporting to image; #17 DONE 0.6s; ; #22 [rqworker1 internal] load build context; #22 transferring context: 190.38kB 0.2s done; #22 transferring context: 190.38kB 0.2s done; #22 DONE 0.2s; ; #40 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #40 CACHED; ; #41 [backend  3/17] COPY requirements.txt requirements.txt; #41 CACHED; ; #42 [backend  2/17] WORKDIR /app; #42 CACHED; ; #43 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #43 CACHED; ; #44 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #44 CACHED; ; #45 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #45 CACHED; ; #46 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #46 ...; ; #47 [frontend-prod] exporting to image; #47 exporting layers 0.0s done; #47 exporting manifest sha256:388a4e2d1c7f57b67a77a3b0196e572f02ff4d631d05320503150ecdd09bdbe5 0.0s done; #47 exporting config sha256:54c83de45b7dd11d08f1cc3a8f2cc5cc85ac9a182e72c82de148c0799d355c25 0.0s done; #47 exporting attestation manifest sha256:1d86dcc88525f65295a77dde4c4f59f452d26e41eca211db01765568fd681aa9 0.1s done; #47 exporting manifest list sha256:ec884f7a03e0c3eed2ceaa22097279f9155830187fcb267db8356c87c6585504 0.1s done; #47 naming to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #47 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #47 DONE 0.5s; ; #46 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #46 DONE 0.6s; ; #46 [rqworker3  8/17] COPY --chown=app:app src/ /app/src/; #46 DONE 0.6s; ; #48 [nginx] resolving provenance for metadata file; #48 DONE 0.0s; ; #49 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #49 DONE 0.3s; ; #49 [rqworker3  9/17] COPY --chown=app:app app/ /app/app/; #49 DONE 0.3s; ; #50 [frontend-prod] resolving provenance for metadata file; #50 DONE 0.0s; ; #51 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #51 DONE 0.2s; ; #51 [rqworker3 10/17] COPY --chown=app:app config/ /app/config/; #51 DONE 0.2s; ; #52 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #52 DONE 0.2s; ; #52 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #52 DONE 0.2s; ; #53 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #53 DONE 1.0s; ; #53 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #53 DONE 1.0s; ; #54 [rqworker1 13/17] COPY --chown=app:app VERSION /app/VERSION; #54 DONE 0.2s; ; #54 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #54 DONE 0.2s; ; #55 [rqworker3 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #55 DONE 0.4s; ; #55 [rqworker3 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #55 DONE 0.4s; ; #56 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #56 DONE 0.5s; ; #56 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #56 DONE 0.5s; ; #57 [rqworker3 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #57 DONE 0.5s; ; #57 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #57 DONE 0.5s; ; #58 [rqworker2 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #58 DONE 0.5s; ; #58 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #58 DONE 0.5s; ; #59 [rqworker1] exporting to image; #59 exporting layers 3.9s done; #59 exporting manifest sha256:7d2b3848e1639595c7bcb320f2fc25209b6ccd7fdeaf458d846ba6a4b3173c16; #59 exporting manifest sha256:7d2b3848e1639595c7bcb320f2fc25209b6ccd7fdeaf458d846ba6a4b3173c16 0.1s done; #59 exporting config sha256:20460d8a3746160352f81fe6d2ed5d95878c4ed3fbaa937289f675c4723ff010; #59 exporting config sha256:20460d8a3746160352f81fe6d2ed5d95878c4ed3fbaa937289f675c4723ff010 0.1s done; #59 exporting attestation manifest sha256:78d2434a2d713c36256bb47128a67fd4a5a7cf9bbfb20508153e28fd518344fb; #59 exporting attestation manifest sha256:78d2434a2d713c36256bb47128a67fd4a5a7cf9bbfb20508153e28fd518344fb 0.3s done; #59 exporting manifest list sha256:8d0515f07f0f9e93294e60526883c7fc29373553c7dbf5f9acb611b14f7e093f; #59 exporting manifest list sha256:8d0515f07f0f9e93294e60526883c7fc29373553c7dbf5f9acb611b14f7e093f 0.1s done; #59 naming to docker.io/library/casestrainer-rqworker1:latest; #59 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #59 unpacking to docker.io/library/casestrainer-rqworker1:latest; #59 ...; ; #60 [rqworker2] exporting to image; #60 exporting layers 3.9s done; #60 exporting manifest sha256:8c10f335aa2e26367c803f33d5eb27b253390f55992424c0f448e4965195919c 0.1s done; #60 exporting config sha256:5b806572a1443a46fa103a7b9a8b82355a21471f2790e88ae49ebf074461fe89 0.1s done; #60 exporting attestation manifest sha256:bec2c20a8cb620b2d9c94efe0a8de6e1181eb0d07f8cdbb94e8fcec81ae1120f 0.2s done; #60 exporting manifest list sha256:1e168be99cf0d5f3732fb806970a2bd7396f95ca8b7ea2c0ebfa3d48b0914cc2 0.1s done; #60 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #60 unpacking to docker.io/library/casestrainer-rqworker2:latest 3.4s done; #60 DONE 8.2s; ; #59 [rqworker1] exporting to image; #59 unpacking to docker.io/library/casestrainer-rqworker1:latest 3.3s done; #59 DONE 8.1s; ; #61 [backend] exporting to image; #61 exporting layers 3.9s done; #61 exporting manifest sha256:218a32be4f4c5920a65bdb3a6d83562937f8e084f712df27f30c6535b6c803a5 0.1s done; #61 exporting config sha256:e82343cf344a4cd893e0a6d4e045c0eafe230a37878261107d7d3914aeac069e 0.1s done; #61 exporting attestation manifest sha256:55127bcdb3d324d00c9412e61ce1925e250d2d4a3bb830cd6b064796788468c7 0.3s done; #61 exporting manifest list sha256:6cf83d0754a0cb0714b5610a1e474597b340c8e2a62120b39c7b7dacab1c5a6f 0.1s done; #61 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-backend:latest 3.4s done; #61 DONE 8.2s; ; #62 [rqworker3] exporting to image; #62 exporting layers 3.9s done; #62 exporting manifest sha256:038bf6b57dd3c46a326826bbda7195bc26280ba1a26d5556d82b370b0da979f9 0.1s done; #62 exporting config sha256:58a49b3a27550022ff077cf7051bfad23e35605eaa053ad57d9fda84cabb6ad6 0.1s done; #62 exporting attestation manifest sha256:8bd9fac7ce1fadf9f6279f1c488e63702bb366fa6b38f39ae47a133ee6838a6f 0.3s done; #62 exporting manifest list sha256:08341fd8409e0090d7c0abdb43274c483c11023e5b51eff66df276c49abe50ba 0.1s done; #62 naming to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #62 unpacking to docker.io/library/casestrainer-rqworker3:latest 3.4s done; #62 DONE 8.2s; ; #63 [rqworker2] resolving provenance for metadata file; #63 DONE 0.5s; ; #64 [rqworker3] resolving provenance for metadata file; #64 DONE 0.2s; ; #65 [rqworker1] resolving provenance for metadata file; #65 DONE 0.3s; ; #66 [backend] resolving provenance for metadata file; #66 DONE 0.0s;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built
[2025-08-14 17:47:27] [INFO] Docker operation completed successfully: build
[2025-08-14 17:47:27] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 17:47:43] [DEBUG] Docker operation exit code: 0
[2025-08-14 17:47:43] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 17:47:43] [INFO] Docker operation completed successfully: up
[2025-08-14 17:47:43] [INFO] Waiting for containers to stabilize...
[2025-08-14 17:47:53] [INFO] Performing application health check...
[2025-08-14 17:47:53] [INFO] Application health check passed
[2025-08-14 17:47:53] [INFO] Deployment completed successfully!
[2025-08-14 17:47:53] [INFO] Containers running: 7
[2025-08-14 17:47:53] [DEBUG] Launcher execution completed
[2025-08-14 20:22:49] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 20:22:49] [INFO] Environment: Production, Mode: Fast
[2025-08-14 20:22:49] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 20:22:49] [INFO] Checking prerequisites...
[2025-08-14 20:22:49] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 20:22:49] [INFO] Starting deployment in Fast mode...
[2025-08-14 20:22:49] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 20:22:49] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 20:22:53] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:22:53] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 20:22:53] [INFO] Docker operation completed successfully: down
[2025-08-14 20:22:53] [INFO] Recent changes in src - will rebuild images
[2025-08-14 20:22:53] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 20:22:53] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 20:23:10] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:23:10] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [frontend-prod internal] load build definition from Dockerfile.prod; #2 transferring dockerfile: 2.03kB 0.0s done; #2 DONE 0.0s; ; #3 [rqworker1 internal] load build definition from Dockerfile; #3 transferring dockerfile: 1.80kB 0.0s done; #3 DONE 0.1s; ; #4 [nginx internal] load build definition from Dockerfile; #4 transferring dockerfile: 652B done; #4 DONE 0.1s; ; #5 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B done; #7 DONE 0.0s; ; #8 [nginx internal] load build context; #8 DONE 0.0s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.0s done; #9 DONE 0.1s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 DONE 0.1s; ; #8 [nginx internal] load build context; #8 transferring context: 97B done; #8 DONE 0.0s; ; #10 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #10 CACHED; ; #11 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #11 CACHED; ; #12 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #12 CACHED; ; #13 [nginx 2/8] RUN apk add --no-cache curl; #13 CACHED; ; #14 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #14 CACHED; ; #15 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [auth] library/node:pull token for registry-1.docker.io; #17 DONE 0.0s; ; #18 [auth] library/python:pull token for registry-1.docker.io; #18 DONE 0.0s; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:a1234509a5fb97d5ff8fd1537e38ec87d2caf9fb107e442a46b5bff2f83e4e88 0.1s done; #19 exporting manifest list sha256:5d7c3d230dc112845e4b286432c2d7a7be6515985314eea898a034a8b34184b2 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.3s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.8s; ; #5 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #21 [nginx] resolving provenance for metadata file; #21 DONE 0.0s; ; #22 [frontend-prod internal] load .dockerignore; #22 transferring context: 834B 0.0s done; #22 DONE 0.1s; ; #23 [frontend-prod internal] load build context; #23 DONE 0.0s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 0.9s; ; #24 [rqworker2 internal] load .dockerignore; #24 transferring context: 908B 0.0s done; #24 DONE 0.1s; ; #25 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #25 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #25 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.2s done; #25 DONE 0.2s; ; #24 [rqworker3 internal] load .dockerignore; #24 DONE 0.1s; ; #9 [frontend-prod production-stage 1/7] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.2s done; #9 DONE 0.3s; ; #26 [rqworker2 internal] load build context; #26 DONE 0.0s; ; #23 [frontend-prod internal] load build context; #23 transferring context: 4.04kB 0.0s done; #23 DONE 0.0s; ; #27 [frontend-prod build-stage  7/10] COPY index.html .; #27 CACHED; ; #28 [frontend-prod build-stage  8/10] COPY vite.config.js .; #28 CACHED; ; #29 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #29 CACHED; ; #30 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #30 CACHED; ; #31 [frontend-prod build-stage  9/10] RUN npm run build; #31 CACHED; ; #32 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #32 CACHED; ; #33 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #33 CACHED; ; #34 [frontend-prod build-stage  6/10] COPY src/ src/; #34 CACHED; ; #35 [frontend-prod build-stage  2/10] WORKDIR /app; #35 CACHED; ; #36 [frontend-prod build-stage  5/10] COPY public/ public/; #36 CACHED; ; #37 [frontend-prod build-stage  3/10] COPY package*.json ./; #37 CACHED; ; #38 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #38 CACHED; ; #39 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #39 CACHED; ; #40 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #40 CACHED; ; #41 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #41 CACHED; ; #42 [backend  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #42 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #42 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #42 DONE 0.1s; ; #26 [backend internal] load build context; #26 transferring context: 194.25kB 0.3s done; #26 DONE 0.3s; ; #43 [frontend-prod] exporting to image; #43 exporting layers 0.0s done; #43 exporting manifest sha256:388a4e2d1c7f57b67a77a3b0196e572f02ff4d631d05320503150ecdd09bdbe5 done; #43 exporting config sha256:54c83de45b7dd11d08f1cc3a8f2cc5cc85ac9a182e72c82de148c0799d355c25 0.0s done; #43 exporting attestation manifest sha256:c9e42062b0d6959eb12d9c580830ec7fa3446bbc075b085edb8d26bf9d885a79 0.1s done; #43 exporting manifest list sha256:9747319c0e311a6a09873c18c987a72855311fda5ed72c4eaf7632ce21d7cde6 0.0s done; #43 naming to docker.io/library/casestrainer-frontend-prod:latest done; #43 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #43 DONE 0.4s; ; #44 [rqworker2  2/17] WORKDIR /app; #44 CACHED; ; #45 [rqworker2  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #45 CACHED; ; #46 [rqworker2  3/17] COPY requirements.txt requirements.txt; #46 CACHED; ; #47 [rqworker2  5/17] RUN pip install --no-cache-dir -r requirements.txt; #47 CACHED; ; #48 [rqworker2  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #48 CACHED; ; #49 [rqworker3  7/17] RUN useradd --create-home --shell /bin/bash app; #49 CACHED; ; #50 [rqworker3  8/17] COPY --chown=app:app src/ /app/src/; #50 DONE 0.4s; ; #51 [frontend-prod] resolving provenance for metadata file; #51 DONE 0.0s; ; #52 [rqworker1  9/17] COPY --chown=app:app app/ /app/app/; #52 DONE 0.1s; ; #52 [backend  9/17] COPY --chown=app:app app/ /app/app/; #52 DONE 0.1s; ; #53 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.1s; ; #53 [rqworker3 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.1s; ; #54 [rqworker3 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.1s; ; #54 [backend 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.1s; ; #55 [rqworker1 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 1.0s; ; #55 [backend 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 1.0s; ; #56 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.1s; ; #56 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.1s; ; #57 [rqworker3 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.6s; ; #57 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.6s; ; #58 [rqworker2 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.5s; ; #58 [rqworker2 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.5s; ; #59 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.5s; ; #59 [rqworker1 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.5s; ; #60 [backend 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.4s; ; #60 [rqworker2 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.4s; ; #61 [backend] exporting to image; #61 exporting layers 3.8s done; #61 exporting manifest sha256:c01a0744ca8802fc4cc9725506f95f5a82a2ad5e75362b305d206a26b4d3ae12 0.1s done; #61 exporting config sha256:f45777788080628f7b213bce652a039a990d0e787e804cee61706088d19c6b88; #61 exporting config sha256:f45777788080628f7b213bce652a039a990d0e787e804cee61706088d19c6b88 0.2s done; #61 exporting attestation manifest sha256:90c6dd304dd1301d05a29d5a87378e8d47407a8ad1c4704c46b26584d7291b05; #61 exporting attestation manifest sha256:90c6dd304dd1301d05a29d5a87378e8d47407a8ad1c4704c46b26584d7291b05 0.3s done; #61 exporting manifest list sha256:efec809fb32442d24b808cd04442c6cfb935d72596abc5c6ff250e1666807fb3; #61 exporting manifest list sha256:efec809fb32442d24b808cd04442c6cfb935d72596abc5c6ff250e1666807fb3 0.2s done; #61 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-backend:latest; #61 ...; ; #62 [rqworker3] exporting to image; #62 exporting layers 3.9s done; #62 exporting manifest sha256:3cdd4680e92938a5a27d01543d3e33140a737a2282d598c58d123f6be21f21a6 0.1s done; #62 exporting config sha256:db269bf4ae500b2f7fb7660fa1ba7846e2b8320eb2c37b89ca68a2c486e1f65b 0.2s done; #62 exporting attestation manifest sha256:ee60d35668101c72bd79f0efca796e4db3b27d007790686118dcfe56286336fa 0.3s done; #62 exporting manifest list sha256:10666fcd1c53a59b65697396ced7e4fc03f7e074bbe727bf59f96958d8183e36 0.2s done; #62 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #62 unpacking to docker.io/library/casestrainer-rqworker3:latest 3.5s done; #62 DONE 8.3s; ; #61 [backend] exporting to image; #61 unpacking to docker.io/library/casestrainer-backend:latest 3.5s done; #61 DONE 8.3s; ; #63 [rqworker2] exporting to image; #63 exporting layers 3.9s done; #63 exporting manifest sha256:0d3f978c0ecacf9599c612db2907ad71e60dbe5c230f0ac46eeaa5b479462963 0.1s done; #63 exporting config sha256:4dca6b3665599767be43b32121630fa1f0e641e571af71231395719d3ec1f299 0.2s done; #63 exporting attestation manifest sha256:2fdb49cbfb828aab832c72231926580274070263c5200b83fb7e60f64a3d53c1 0.3s done; #63 exporting manifest list sha256:fd2df07c350730174e8b2bdff488e35ce55a27d315f5477d68c268568c86209b 0.2s done; #63 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #63 unpacking to docker.io/library/casestrainer-rqworker2:latest 3.5s done; #63 DONE 8.3s; ; #64 [rqworker1] exporting to image; #64 exporting layers 3.9s done; #64 exporting manifest sha256:4541b2beefad5c23c731b5ccb613e1049c9e9b594c8fd88823ea4a8752245080 0.1s done; #64 exporting config sha256:957b27e70a3d18996f95ca8529df19b98165c6714f27aaceef5bd2d041dfc8e9 0.1s done; #64 exporting attestation manifest sha256:b32850eaa59aca046a27486fce0d75597b208446c959f0285b5adbef2c59f2ef 0.2s done; #64 exporting manifest list sha256:6d17b841197aa171380a4a85acd25346bd30daddf40988e645ff17fd13770d4f 0.2s done; #64 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #64 unpacking to docker.io/library/casestrainer-rqworker1:latest 3.5s done; #64 DONE 8.3s; ; #65 [rqworker2] resolving provenance for metadata file; #65 DONE 0.1s; ; #66 [rqworker1] resolving provenance for metadata file; #66 DONE 0.1s; ; #67 [rqworker3] resolving provenance for metadata file; #67 DONE 0.2s; ; #68 [backend] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built
[2025-08-14 20:23:10] [INFO] Docker operation completed successfully: build
[2025-08-14 20:23:10] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 20:23:25] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:23:25] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 20:23:25] [INFO] Docker operation completed successfully: up
[2025-08-14 20:23:25] [INFO] Waiting for containers to stabilize...
[2025-08-14 20:23:35] [INFO] Performing application health check...
[2025-08-14 20:23:35] [INFO] Application health check passed
[2025-08-14 20:23:35] [INFO] Deployment completed successfully!
[2025-08-14 20:23:35] [INFO] Containers running: 7
[2025-08-14 20:23:35] [DEBUG] Launcher execution completed
[2025-08-14 20:31:04] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 20:31:04] [INFO] Environment: Production, Mode: Fast
[2025-08-14 20:31:04] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 20:31:04] [INFO] Checking prerequisites...
[2025-08-14 20:31:04] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 20:31:04] [INFO] Starting deployment in Fast mode...
[2025-08-14 20:31:04] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 20:31:04] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 20:31:07] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:31:07] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 20:31:07] [INFO] Docker operation completed successfully: down
[2025-08-14 20:31:07] [INFO] Recent changes in src - will rebuild images
[2025-08-14 20:31:07] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 20:31:07] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 20:31:22] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:31:22] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [nginx internal] load build definition from Dockerfile; #2 transferring dockerfile: 652B 0.0s done; #2 DONE 0.1s; ; #3 [frontend-prod internal] load build definition from Dockerfile.prod; #3 transferring dockerfile: 2.03kB 0.0s done; #3 DONE 0.1s; ; #4 [rqworker2 internal] load build definition from Dockerfile; #4 transferring dockerfile: 1.80kB 0.0s done; #4 DONE 0.1s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B done; #7 DONE 0.0s; ; #8 [auth] library/node:pull token for registry-1.docker.io; #8 DONE 0.0s; ; #9 [auth] library/python:pull token for registry-1.docker.io; #9 DONE 0.0s; ; #10 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.0s done; #10 DONE 0.1s; ; #11 [nginx internal] load build context; #11 transferring context: 97B done; #11 DONE 0.0s; ; #12 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #12 CACHED; ; #13 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #13 CACHED; ; #14 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #14 CACHED; ; #15 [nginx 2/8] RUN apk add --no-cache curl; #15 CACHED; ; #16 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #16 CACHED; ; #17 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:6b800aa8e40eb654e12e3e261495c34671d10841ac50f36d05e74010b0f1cfeb 0.0s done; #19 exporting manifest list sha256:6944e8380b79b591fca8d90a3fe5bc0c9711908af5e78244063f83058a345f78; #19 exporting manifest list sha256:6944e8380b79b591fca8d90a3fe5bc0c9711908af5e78244063f83058a345f78 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.2s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.7s; ; #21 [nginx] resolving provenance for metadata file; #21 DONE 0.0s; ; #22 [frontend-prod internal] load .dockerignore; #22 transferring context: 834B 0.0s done; #22 DONE 0.0s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #23 [frontend-prod internal] load build context; #23 DONE 0.0s; ; #10 [frontend-prod production-stage 1/7] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #24 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #24 DONE 0.1s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 0.8s; ; #23 [frontend-prod internal] load build context; #23 transferring context: 4.04kB 0.0s done; #23 DONE 0.0s; ; #25 [backend internal] load .dockerignore; #25 transferring context: 908B done; #25 DONE 0.0s; ; #26 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #26 CACHED; ; #27 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #27 CACHED; ; #28 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #28 CACHED; ; #29 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #29 CACHED; ; #30 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #30 CACHED; ; #31 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #31 CACHED; ; #32 [frontend-prod build-stage  6/10] COPY src/ src/; #32 CACHED; ; #33 [frontend-prod build-stage  3/10] COPY package*.json ./; #33 CACHED; ; #34 [frontend-prod build-stage  2/10] WORKDIR /app; #34 CACHED; ; #35 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #35 CACHED; ; #36 [frontend-prod build-stage  7/10] COPY index.html .; #36 CACHED; ; #37 [frontend-prod build-stage  9/10] RUN npm run build; #37 CACHED; ; #38 [frontend-prod build-stage  8/10] COPY vite.config.js .; #38 CACHED; ; #39 [frontend-prod build-stage  5/10] COPY public/ public/; #39 CACHED; ; #40 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #40 CACHED; ; #41 [frontend-prod] exporting to image; #41 ...; ; #42 [rqworker2 internal] load build context; #42 DONE 0.0s; ; #41 [frontend-prod] exporting to image; #41 exporting layers 0.0s done; #41 exporting manifest sha256:388a4e2d1c7f57b67a77a3b0196e572f02ff4d631d05320503150ecdd09bdbe5 done; #41 exporting config sha256:54c83de45b7dd11d08f1cc3a8f2cc5cc85ac9a182e72c82de148c0799d355c25 done; #41 exporting attestation manifest sha256:dec4c12ad3636238d97f5dd26bfdc901d2ef53164f326d2d076ec517db56ac87; #41 ...; ; #43 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #43 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #43 DONE 0.1s; ; #41 [frontend-prod] exporting to image; #41 exporting attestation manifest sha256:dec4c12ad3636238d97f5dd26bfdc901d2ef53164f326d2d076ec517db56ac87 0.1s done; #41 exporting manifest list sha256:6446f50c63daa70350760e1cf78becd8255a1b5698d756af34434c33a7f6461f 0.1s done; #41 naming to docker.io/library/casestrainer-frontend-prod:latest; #41 ...; ; #42 [rqworker2 internal] load build context; #42 transferring context: 194.90kB 0.2s done; #42 DONE 0.2s; ; #44 [rqworker2  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #44 CACHED; ; #45 [rqworker2  5/17] RUN pip install --no-cache-dir -r requirements.txt; #45 CACHED; ; #46 [rqworker2  3/17] COPY requirements.txt requirements.txt; #46 CACHED; ; #47 [rqworker2  2/17] WORKDIR /app; #47 CACHED; ; #48 [rqworker2  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #48 CACHED; ; #49 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #49 CACHED; ; #41 [frontend-prod] exporting to image; #41 naming to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #41 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #41 DONE 0.4s; ; #48 [rqworker1  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #48 CACHED; ; #44 [rqworker1  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #44 CACHED; ; #45 [rqworker1  5/17] RUN pip install --no-cache-dir -r requirements.txt; #45 CACHED; ; #46 [rqworker1  3/17] COPY requirements.txt requirements.txt; #46 CACHED; ; #47 [rqworker1  2/17] WORKDIR /app; #47 CACHED; ; #49 [rqworker1  7/17] RUN useradd --create-home --shell /bin/bash app; #49 CACHED; ; #50 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #50 DONE 0.3s; ; #51 [frontend-prod] resolving provenance for metadata file; #51 DONE 0.0s; ; #52 [rqworker1  9/17] COPY --chown=app:app app/ /app/app/; #52 DONE 0.1s; ; #53 [rqworker2 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.1s; ; #54 [rqworker2 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.1s; ; #55 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 0.8s; ; #56 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.1s; ; #57 [rqworker3 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.4s; ; #58 [rqworker3 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.4s; ; #59 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.5s; ; #60 [rqworker1 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.4s; ; #61 [backend] exporting to image; #61 exporting layers 3.8s done; #61 exporting manifest sha256:f89b997c02bf7dc67bf84d5c9632d3cea5c76eafa00e4770885665792362e1b5 0.1s done; #61 exporting config sha256:bd16497de0d16519e8b9429d964378f005215d67c50c902305d43abf45db4082; #61 exporting config sha256:bd16497de0d16519e8b9429d964378f005215d67c50c902305d43abf45db4082 0.1s done; #61 exporting attestation manifest sha256:67e2d2c123687302431d923876b204b99740508217fba087cc85728090db1796; #61 exporting attestation manifest sha256:67e2d2c123687302431d923876b204b99740508217fba087cc85728090db1796 0.2s done; #61 exporting manifest list sha256:bd6f6ccba81ac4fb27101409ff9bbec4b8016bbcca51fe2666ba59e3337dbd30; #61 exporting manifest list sha256:bd6f6ccba81ac4fb27101409ff9bbec4b8016bbcca51fe2666ba59e3337dbd30 0.1s done; #61 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-backend:latest; #61 ...; ; #62 [rqworker3] exporting to image; #62 exporting layers 3.8s done; #62 exporting manifest sha256:d84c741b48b9f5506b57ae568816e830bb753c31e3614b7a613048085a8ae564 0.1s done; #62 exporting config sha256:c0e051c5511366f5479adc08aadd49c7c211c6433f96668f2a44d81caba3763c 0.1s done; #62 exporting attestation manifest sha256:922453d9c46558beb26909c425c76d8a4a442e8713c390f7e96a16411515d1c2 0.2s done; #62 exporting manifest list sha256:4f0b2ff91b110c929811462e11003cd2e9237530fb00d17ab03dd0abcd36789e 0.1s done; #62 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #62 unpacking to docker.io/library/casestrainer-rqworker3:latest 2.8s done; #62 DONE 7.3s; ; #63 [rqworker1] exporting to image; #63 exporting layers 3.8s done; #63 exporting manifest sha256:d110ec2db59e3c42b936a607b656696e3f3085c43e662fdba8e3cd559cd6f7b3 0.1s done; #63 exporting config sha256:1b4466864cff1541837a71ed674ad4719ecb3609b2e892ef45d4626d3d4595c7 0.1s done; #63 exporting attestation manifest sha256:00641fe43de992329aee7d00cfe0a231e6a2c294fe85dadde498394a4dd578bb 0.2s done; #63 exporting manifest list sha256:9a232464c74ea2fac01715e4d842fc0803c86699e5f96ac031ffe9b8639dc815 0.1s done; #63 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #63 unpacking to docker.io/library/casestrainer-rqworker1:latest 2.7s done; #63 DONE 7.3s; ; #61 [backend] exporting to image; #61 unpacking to docker.io/library/casestrainer-backend:latest 2.7s done; #61 DONE 7.3s; ; #64 [rqworker2] exporting to image; #64 exporting layers 3.8s done; #64 exporting manifest sha256:f7909e7b4afe51a79b4d3c6f41c936af4a96faa17b4cf729ac7fb647f8dba7f0 0.1s done; #64 exporting config sha256:88259016a0f92e9e3dee68aec6c1bfb6273f4c3b06d97cc0e4fcfeff4930a6c0 0.1s done; #64 exporting attestation manifest sha256:95745dbc3b872e3f6687d33c07262a3e4252281e0b313bbf3c861a74be4df181 0.2s done; #64 exporting manifest list sha256:50e7c145229313fbcacc9c93d81f6441f10426c1c1c33e77160b8c156a2a001f 0.1s done; #64 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #64 unpacking to docker.io/library/casestrainer-rqworker2:latest 2.7s done; #64 DONE 7.3s; ; #65 [rqworker3] resolving provenance for metadata file; #65 DONE 0.3s; ; #66 [rqworker2] resolving provenance for metadata file; #66 DONE 0.0s; ; #67 [rqworker1] resolving provenance for metadata file; #67 DONE 0.1s; ; #68 [backend] resolving provenance for metadata file; #68 DONE 0.2s;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built
[2025-08-14 20:31:22] [INFO] Docker operation completed successfully: build
[2025-08-14 20:31:22] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 20:31:36] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:31:36] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 20:31:36] [INFO] Docker operation completed successfully: up
[2025-08-14 20:31:36] [INFO] Waiting for containers to stabilize...
[2025-08-14 20:31:47] [INFO] Performing application health check...
[2025-08-14 20:31:47] [INFO] Application health check passed
[2025-08-14 20:31:47] [INFO] Deployment completed successfully!
[2025-08-14 20:31:47] [INFO] Containers running: 7
[2025-08-14 20:31:47] [DEBUG] Launcher execution completed
[2025-08-14 20:33:09] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 20:33:09] [INFO] Environment: Production, Mode: Fast
[2025-08-14 20:33:09] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 20:33:09] [INFO] Checking prerequisites...
[2025-08-14 20:33:09] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 20:33:09] [INFO] Starting deployment in Fast mode...
[2025-08-14 20:33:09] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 20:33:09] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 20:33:12] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:33:12] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 20:33:12] [INFO] Docker operation completed successfully: down
[2025-08-14 20:33:12] [INFO] Recent changes in src - will rebuild images
[2025-08-14 20:33:12] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 20:33:12] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 20:33:17] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:33:17] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker2 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.0s; ; #3 [nginx internal] load build definition from Dockerfile; #3 transferring dockerfile: 652B 0.0s done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.1s; ; #5 [nginx internal] load metadata for docker.io/library/nginx:alpine; #5 DONE 0.1s; ; #6 [nginx internal] load .dockerignore; #6 transferring context: 2B done; #6 DONE 0.0s; ; #7 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #7 ...; ; #8 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.0s done; #8 DONE 0.1s; ; #9 [nginx internal] load build context; #9 transferring context: 97B done; #9 DONE 0.0s; ; #10 [nginx 2/8] RUN apk add --no-cache curl; #10 CACHED; ; #11 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #11 CACHED; ; #12 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #12 CACHED; ; #13 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #13 CACHED; ; #14 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #14 CACHED; ; #15 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [nginx] exporting to image; #17 exporting layers 0.0s done; #17 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #17 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 0.0s done; #17 exporting attestation manifest sha256:9156f6af7d53f4a1472bb989db38fe3996a48d583c7b27f89d3ad4c7d1f421da 0.1s done; #17 exporting manifest list sha256:5095dfdd2ac9763e6958f634dd561caac8ea17555c316c4e724efc10fa91a3e1; #17 ...; ; #7 [backend internal] load metadata for docker.io/library/python:3.10-slim; #7 DONE 0.5s; ; #18 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #18 DONE 0.5s; ; #19 [rqworker2 internal] load .dockerignore; #19 transferring context: 908B 0.0s done; #19 DONE 0.0s; ; #20 [frontend-prod internal] load .dockerignore; #20 transferring context: 834B 0.0s done; #20 DONE 0.0s; ; #21 [rqworker3 internal] load build context; #21 DONE 0.0s; ; #17 [nginx] exporting to image; #17 exporting manifest list sha256:5095dfdd2ac9763e6958f634dd561caac8ea17555c316c4e724efc10fa91a3e1 0.0s done; #17 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #17 unpacking to docker.io/library/casestrainer-nginx:latest; #17 ...; ; #8 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.0s done; #8 DONE 0.1s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #23 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #23 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #23 DONE 0.1s; ; #24 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #24 DONE 0.1s; ; #17 [nginx] exporting to image; #17 unpacking to docker.io/library/casestrainer-nginx:latest 0.1s done; #17 DONE 0.4s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 4.04kB 0.0s done; #22 DONE 0.1s; ; #21 [backend internal] load build context; #21 transferring context: 131.80kB 0.1s done; #21 DONE 0.2s; ; #25 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #25 CACHED; ; #26 [frontend-prod build-stage  9/10] RUN npm run build; #26 CACHED; ; #27 [frontend-prod build-stage  5/10] COPY public/ public/; #27 CACHED; ; #28 [frontend-prod build-stage  7/10] COPY index.html .; #28 CACHED; ; #29 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #29 CACHED; ; #30 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #30 CACHED; ; #31 [frontend-prod build-stage  2/10] WORKDIR /app; #31 CACHED; ; #32 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #32 CACHED; ; #33 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #33 CACHED; ; #34 [frontend-prod build-stage  6/10] COPY src/ src/; #34 CACHED; ; #35 [frontend-prod build-stage  8/10] COPY vite.config.js .; #35 CACHED; ; #36 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #36 CACHED; ; #37 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #37 CACHED; ; #38 [frontend-prod build-stage  3/10] COPY package*.json ./; #38 CACHED; ; #39 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #39 CACHED; ; #40 [rqworker1  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #40 CACHED; ; #41 [rqworker1  7/17] RUN useradd --create-home --shell /bin/bash app; #41 CACHED; ; #42 [rqworker1  5/17] RUN pip install --no-cache-dir -r requirements.txt; #42 CACHED; ; #43 [rqworker1  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #43 CACHED; ; #44 [rqworker1 13/17] COPY --chown=app:app VERSION /app/VERSION; #44 CACHED; ; #45 [rqworker1 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #45 CACHED; ; #46 [rqworker1 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #46 CACHED; ; #47 [rqworker1 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #47 CACHED; ; #48 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #48 CACHED; ; #49 [rqworker1 12/17] COPY --chown=app:app static/ /app/static/; #49 CACHED; ; #50 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #50 CACHED; ; #51 [rqworker1  3/17] COPY requirements.txt requirements.txt; #51 CACHED; ; #52 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #52 CACHED; ; #53 [rqworker1  2/17] WORKDIR /app; #53 CACHED; ; #54 [rqworker1  9/17] COPY --chown=app:app app/ /app/app/; #54 CACHED; ; #55 [rqworker2 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #55 CACHED; ; #56 [rqworker1] exporting to image; #56 exporting layers 0.0s done; #56 exporting manifest sha256:d110ec2db59e3c42b936a607b656696e3f3085c43e662fdba8e3cd559cd6f7b3 0.0s done; #56 exporting config sha256:1b4466864cff1541837a71ed674ad4719ecb3609b2e892ef45d4626d3d4595c7; #56 exporting config sha256:1b4466864cff1541837a71ed674ad4719ecb3609b2e892ef45d4626d3d4595c7 0.1s done; #56 exporting attestation manifest sha256:c8ae0ee6da1075c48de740c5306b390045d86c4658a878bf7690c15d4e9f0939; #56 exporting attestation manifest sha256:c8ae0ee6da1075c48de740c5306b390045d86c4658a878bf7690c15d4e9f0939 0.2s done; #56 exporting manifest list sha256:17d3fb60f5c57d2742d6f8bb71c024cc44470caec0a2f3d6ed9294365dcdb11f; #56 exporting manifest list sha256:17d3fb60f5c57d2742d6f8bb71c024cc44470caec0a2f3d6ed9294365dcdb11f 0.1s done; #56 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #56 unpacking to docker.io/library/casestrainer-rqworker1:latest; #56 ...; ; #57 [nginx] resolving provenance for metadata file; #57 DONE 0.0s; ; #56 [rqworker1] exporting to image; #56 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #56 DONE 0.8s; ; #58 [frontend-prod] exporting to image; #58 exporting layers 0.0s done; #58 exporting manifest sha256:388a4e2d1c7f57b67a77a3b0196e572f02ff4d631d05320503150ecdd09bdbe5 0.0s done; #58 exporting config sha256:54c83de45b7dd11d08f1cc3a8f2cc5cc85ac9a182e72c82de148c0799d355c25 0.1s done; #58 exporting attestation manifest sha256:a32b15ad67bf13d4932356b139113b0708412cb9570e7df2f98f2244365c4f15 0.2s done; #58 exporting manifest list sha256:dfd38b4944c08aa9575173b185920a1369a8625566697517e6084a19b02f0afe 0.1s done; #58 naming to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #58 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #58 DONE 0.8s; ; #59 [rqworker2] exporting to image; #59 exporting layers 0.0s done; #59 exporting manifest sha256:f7909e7b4afe51a79b4d3c6f41c936af4a96faa17b4cf729ac7fb647f8dba7f0 done; #59 exporting config sha256:88259016a0f92e9e3dee68aec6c1bfb6273f4c3b06d97cc0e4fcfeff4930a6c0 0.0s done; #59 exporting attestation manifest sha256:78ef482b5f882dc8bba9586562246c8d69a80f217317bd0e5c0afd5a658c0d50 0.2s done; #59 exporting manifest list sha256:27e5b2e174a7a32c4304397d2e8befeabc787ceb5e774a9614fc187731bdc981 0.1s done; #59 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #59 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #59 DONE 0.8s; ; #60 [rqworker3] exporting to image; #60 exporting layers 0.0s done; #60 exporting manifest sha256:d84c741b48b9f5506b57ae568816e830bb753c31e3614b7a613048085a8ae564 0.1s done; #60 exporting config sha256:c0e051c5511366f5479adc08aadd49c7c211c6433f96668f2a44d81caba3763c 0.1s done; #60 exporting attestation manifest sha256:dd5907e13a9fc7bce205333681e0854a6bd9bf3ccf30f63ddc6ab8d6c0da9d6c 0.2s done; #60 exporting manifest list sha256:b3c462b75c12e93824559b6bd435ed3629a23f37a54661bacf70b5dd1ee97243 0.1s done; #60 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #60 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #60 DONE 0.9s; ; #61 [backend] exporting to image; #61 exporting layers 0.0s done; #61 exporting manifest sha256:f89b997c02bf7dc67bf84d5c9632d3cea5c76eafa00e4770885665792362e1b5 0.1s done; #61 exporting config sha256:bd16497de0d16519e8b9429d964378f005215d67c50c902305d43abf45db4082 0.1s done; #61 exporting attestation manifest sha256:1803ca0060b643bc164b14c2c3c102e04c82befcdda7b366efe40781b5613e01 0.2s done; #61 exporting manifest list sha256:3713e98c95f581818e94bf6ddc3dbd4d8eabf463195f1289e4b755af34cc10a6 0.1s done; #61 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #61 DONE 0.9s; ; #62 [frontend-prod] resolving provenance for metadata file; #62 DONE 0.3s; ; #63 [rqworker1] resolving provenance for metadata file; #63 DONE 0.1s; ; #64 [backend] resolving provenance for metadata file; #64 DONE 0.2s; ; #65 [rqworker2] resolving provenance for metadata file; #65 DONE 0.3s; ; #66 [rqworker3] resolving provenance for metadata file; #66 DONE 0.0s;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built
[2025-08-14 20:33:17] [INFO] Docker operation completed successfully: build
[2025-08-14 20:33:17] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 20:33:31] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:33:31] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 20:33:31] [INFO] Docker operation completed successfully: up
[2025-08-14 20:33:31] [INFO] Waiting for containers to stabilize...
[2025-08-14 20:33:41] [INFO] Performing application health check...
[2025-08-14 20:33:41] [INFO] Application health check passed
[2025-08-14 20:33:41] [INFO] Deployment completed successfully!
[2025-08-14 20:33:41] [INFO] Containers running: 7
[2025-08-14 20:33:41] [DEBUG] Launcher execution completed
[2025-08-14 20:37:45] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 20:37:45] [INFO] Environment: Production, Mode: Fast
[2025-08-14 20:37:45] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 20:37:45] [INFO] Checking prerequisites...
[2025-08-14 20:37:45] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 20:37:45] [INFO] Starting deployment in Fast mode...
[2025-08-14 20:37:45] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 20:37:45] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 20:38:02] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:38:02] [DEBUG] Docker output:  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 20:38:02] [INFO] Docker operation completed successfully: down
[2025-08-14 20:38:03] [INFO] Recent changes in src - will rebuild images
[2025-08-14 20:38:03] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 20:38:03] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 20:38:25] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:38:25] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [backend internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [nginx internal] load build definition from Dockerfile; #3 transferring dockerfile: 652B done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB done; #4 DONE 0.1s; ; #5 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #5 ...; ; #6 [nginx internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [auth] library/python:pull token for registry-1.docker.io; #7 DONE 0.0s; ; #8 [auth] library/node:pull token for registry-1.docker.io; #8 DONE 0.0s; ; #9 [nginx internal] load .dockerignore; #9 transferring context: 2B done; #9 DONE 0.0s; ; #10 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.0s done; #10 DONE 0.1s; ; #11 [nginx internal] load build context; #11 transferring context: 97B done; #11 DONE 0.0s; ; #12 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #12 CACHED; ; #13 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #13 CACHED; ; #14 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #14 CACHED; ; #15 [nginx 2/8] RUN apk add --no-cache curl; #15 CACHED; ; #16 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #16 CACHED; ; #17 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:3fc142dc8ed7d74d1ad060af2ed73cd3f4194d620bde05cc7fe682e2eb36014d 0.1s done; #19 exporting manifest list sha256:a216c36f6c931d4d8491e10778a7d1e3172b1804072af1a21b0bc711ec8ae37b; #19 exporting manifest list sha256:a216c36f6c931d4d8491e10778a7d1e3172b1804072af1a21b0bc711ec8ae37b 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.3s; ; #20 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #20 DONE 0.7s; ; #5 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #5 DONE 0.7s; ; #21 [rqworker2 internal] load .dockerignore; #21 transferring context: 908B 0.0s done; #21 DONE 0.0s; ; #22 [rqworker3 internal] load build context; #22 DONE 0.0s; ; #23 [rqworker3  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #23 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #23 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #23 DONE 0.1s; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.0s done; #10 DONE 0.1s; ; #24 [frontend-prod internal] load .dockerignore; #24 transferring context: 834B 0.0s done; #24 DONE 0.1s; ; #25 [frontend-prod internal] load build context; #25 DONE 0.0s; ; #26 [nginx] resolving provenance for metadata file; #26 DONE 0.0s; ; #22 [rqworker3 internal] load build context; #22 ...; ; #27 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #27 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #27 DONE 0.1s; ; #22 [rqworker2 internal] load build context; #22 ...; ; #25 [frontend-prod internal] load build context; #25 transferring context: 63.29kB 0.1s done; #25 DONE 0.1s; ; #28 [frontend-prod build-stage  3/10] COPY package*.json ./; #28 CACHED; ; #29 [frontend-prod build-stage  2/10] WORKDIR /app; #29 CACHED; ; #30 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #30 CACHED; ; #31 [frontend-prod build-stage  5/10] COPY public/ public/; #31 CACHED; ; #22 [rqworker2 internal] load build context; #22 transferring context: 191.26kB 0.2s done; #22 DONE 0.3s; ; #32 [backend 11/17] COPY --chown=app:app templates/ /app/templates/; #32 CACHED; ; #33 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #33 CACHED; ; #34 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #34 CACHED; ; #35 [backend 12/17] COPY --chown=app:app static/ /app/static/; #35 CACHED; ; #36 [backend  9/17] COPY --chown=app:app app/ /app/app/; #36 CACHED; ; #37 [backend  3/17] COPY requirements.txt requirements.txt; #37 CACHED; ; #38 [backend 10/17] COPY --chown=app:app config/ /app/config/; #38 CACHED; ; #39 [backend  7/17] RUN useradd --create-home --shell /bin/bash app; #39 CACHED; ; #40 [backend  2/17] WORKDIR /app; #40 CACHED; ; #41 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #41 CACHED; ; #42 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #42 CACHED; ; #43 [backend  8/17] COPY --chown=app:app src/ /app/src/; #43 CACHED; ; #44 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #44 CACHED; ; #45 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #45 CACHED; ; #46 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #46 CACHED; ; #47 [backend 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #47 CACHED; ; #42 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #42 CACHED; ; #38 [rqworker2 10/17] COPY --chown=app:app config/ /app/config/; #38 CACHED; ; #45 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #45 CACHED; ; #46 [rqworker2 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #46 CACHED; ; #35 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #35 CACHED; ; #32 [rqworker2 11/17] COPY --chown=app:app templates/ /app/templates/; #32 CACHED; ; #37 [rqworker2  3/17] COPY requirements.txt requirements.txt; #37 CACHED; ; #36 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #36 CACHED; ; #34 [rqworker2  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #34 CACHED; ; #33 [rqworker2  5/17] RUN pip install --no-cache-dir -r requirements.txt; #33 CACHED; ; #41 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #41 CACHED; ; #40 [rqworker2  2/17] WORKDIR /app; #40 CACHED; ; #44 [rqworker2  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #44 CACHED; ; #39 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #39 CACHED; ; #43 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #43 CACHED; ; #48 [frontend-prod build-stage  6/10] COPY src/ src/; #48 DONE 0.2s; ; #49 [rqworker2] exporting to image; #49 exporting layers 0.0s done; #49 exporting manifest sha256:f7909e7b4afe51a79b4d3c6f41c936af4a96faa17b4cf729ac7fb647f8dba7f0 0.0s done; #49 exporting config sha256:88259016a0f92e9e3dee68aec6c1bfb6273f4c3b06d97cc0e4fcfeff4930a6c0 0.0s done; #49 exporting attestation manifest sha256:0ff1abecfe4962ddd0fb3afa7b91a7bca9fbfb6f0e8af6136d70085bf036ce0e; #49 exporting attestation manifest sha256:0ff1abecfe4962ddd0fb3afa7b91a7bca9fbfb6f0e8af6136d70085bf036ce0e 0.3s done; #49 exporting manifest list sha256:ca11237174ed32543670e66df027a1776f0e6f2b06fe0e9858006c4d5c61f322; #49 ...; ; #50 [frontend-prod build-stage  7/10] COPY index.html .; #50 DONE 0.5s; ; #49 [rqworker2] exporting to image; #49 exporting manifest list sha256:ca11237174ed32543670e66df027a1776f0e6f2b06fe0e9858006c4d5c61f322 0.2s done; #49 naming to docker.io/library/casestrainer-rqworker2:latest; #49 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #49 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #49 DONE 0.9s; ; #51 [frontend-prod build-stage  8/10] COPY vite.config.js .; #51 DONE 0.3s; ; #52 [backend] exporting to image; #52 exporting layers 0.0s done; #52 exporting manifest sha256:f89b997c02bf7dc67bf84d5c9632d3cea5c76eafa00e4770885665792362e1b5 done; #52 exporting config sha256:bd16497de0d16519e8b9429d964378f005215d67c50c902305d43abf45db4082 0.0s done; #52 exporting attestation manifest sha256:ad7dad589b6242991dfbbf659a53fcc2440001b8d4d91c55285ba20a8285688f 0.3s done; #52 exporting manifest list sha256:8d9202da4da677fc61d7001d607955e3792e036cf87e0c59744bfc89c2ad8626 0.1s done; #52 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #52 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #52 DONE 0.9s; ; #53 [rqworker1] exporting to image; #53 exporting layers 0.0s done; #53 exporting manifest sha256:d110ec2db59e3c42b936a607b656696e3f3085c43e662fdba8e3cd559cd6f7b3 0.0s done; #53 exporting config sha256:1b4466864cff1541837a71ed674ad4719ecb3609b2e892ef45d4626d3d4595c7 0.0s done; #53 exporting attestation manifest sha256:4580fb7eb3cdc0aac39eb07a3dfd99334775e7de74d898b12b87b4ad7ac88bf6 0.3s done; #53 exporting manifest list sha256:92538a5313396f5ed7c8c9a0dab7237fe6e7d5a90c8e2aee8ae71033af558920 0.2s done; #53 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #53 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #53 DONE 0.9s; ; #54 [rqworker3] exporting to image; #54 exporting layers 0.0s done; #54 exporting manifest sha256:d84c741b48b9f5506b57ae568816e830bb753c31e3614b7a613048085a8ae564 0.0s done; #54 exporting config sha256:c0e051c5511366f5479adc08aadd49c7c211c6433f96668f2a44d81caba3763c 0.1s done; #54 exporting attestation manifest sha256:4a6ae712c0ae110eb17700435a8908b19a59f106973f68b35354b15928c132c9 0.3s done; #54 exporting manifest list sha256:a857a5922c1e7c56bba117663ca6888cffa0b9a3ec551b5da7034d82dccf5718 0.1s done; #54 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #54 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #54 DONE 1.0s; ; #55 [frontend-prod build-stage  9/10] RUN npm run build; #55 ...; ; #56 [backend] resolving provenance for metadata file; #56 DONE 0.3s; ; #57 [rqworker3] resolving provenance for metadata file; #57 DONE 0.0s; ; #58 [rqworker1] resolving provenance for metadata file; #58 DONE 0.1s; ; #59 [rqworker2] resolving provenance for metadata file; #59 DONE 0.3s; ; #55 [frontend-prod build-stage  9/10] RUN npm run build; #55 1.090 ; #55 1.090 > casestrainer-vue-new@0.6.5 build; #55 1.090 > vite build; #55 1.090 ; #55 2.222 vite v6.3.5 building for production...; #55 3.001 transforming...; #55 8.075 G 136 modules transformed.; #55 9.577 rendering chunks...; #55 14.08 computing gzip size...; #55 14.12 dist/index.html                              0.91 kB G gzip:  0.45 kB; #55 14.12 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB G gzip:  0.07 kB; #55 14.12 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB G gzip:  0.07 kB; #55 14.12 dist/assets/NotFound-CrLUfTg_.css            1.01 kB G gzip:  0.45 kB; #55 14.12 dist/assets/Docs-La2G-zWQ.css                1.39 kB G gzip:  0.46 kB; #55 14.12 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB G gzip:  0.57 kB; #55 14.12 dist/assets/index-rpZUKAxa.css             273.52 kB G gzip: 38.55 kB; #55 14.12 dist/assets/Docs-DmkQi94_.js                 1.01 kB G gzip:  0.56 kB; #55 14.12 dist/assets/WordPlugin-zx-UsYKQ.js           1.20 kB G gzip:  0.71 kB; #55 14.13 dist/assets/BrowserExtension-D01iEZLS.js     1.22 kB G gzip:  0.73 kB; #55 14.14 dist/assets/NotFound-Bzehw2rJ.js             1.89 kB G gzip:  0.92 kB; #55 14.14 dist/assets/ApiDocs-BfvT7Det.js             23.31 kB G gzip:  4.00 kB; #55 14.14 dist/assets/vendor-C-1G2k3o.js              34.93 kB G gzip: 13.58 kB; #55 14.14 dist/assets/vue-ChBwCVzF.js                 91.40 kB G gzip: 34.95 kB; #55 14.14 dist/assets/index-Dn1QTwoc.js              151.34 kB G gzip: 44.80 kB; #55 14.14 G built in 11.62s; #55 DONE 14.4s; ; #60 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #60 DONE 0.4s; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 CACHED; ; #61 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #61 DONE 0.1s; ; #62 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #62 DONE 0.3s; ; #63 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #63 DONE 0.1s; ; #64 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #64 DONE 0.1s; ; #65 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #65 DONE 0.4s; ; #66 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #66 DONE 0.4s; ; #67 [frontend-prod] exporting to image; #67 exporting layers; #67 exporting layers 0.5s done; #67 exporting manifest sha256:7ed1f98a37a10390b466f3f185a1bf4ef301f5749a6c3ddd030bfe4b517d14d3 0.0s done; #67 exporting config sha256:87bbf92a01b11ef6eb8a2bc4b1311cbf3aecf4a2dfe508ef0e8fe65249d22501 0.0s done; #67 exporting attestation manifest sha256:938b537e0b06b29e01d658a86f080e8f25ceff1ab4382365bd419d3ad0720c46 0.1s done; #67 exporting manifest list sha256:76c40e429a6ff6eda8efbacffb402840141ec0b664018d3cde7cf63a72bea641; #67 exporting manifest list sha256:76c40e429a6ff6eda8efbacffb402840141ec0b664018d3cde7cf63a72bea641 0.0s done; #67 naming to docker.io/library/casestrainer-frontend-prod:latest done; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.3s done; #67 DONE 1.1s; ; #68 [frontend-prod] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built
[2025-08-14 20:38:25] [INFO] Docker operation completed successfully: build
[2025-08-14 20:38:25] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 20:38:39] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:38:39] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-nginx-prod  Created;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 20:38:39] [INFO] Docker operation completed successfully: up
[2025-08-14 20:38:39] [INFO] Waiting for containers to stabilize...
[2025-08-14 20:38:49] [INFO] Performing application health check...
[2025-08-14 20:38:50] [INFO] Application health check passed
[2025-08-14 20:38:50] [INFO] Deployment completed successfully!
[2025-08-14 20:38:50] [INFO] Containers running: 7
[2025-08-14 20:38:50] [DEBUG] Launcher execution completed
[2025-08-14 20:46:47] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 20:46:47] [INFO] Environment: Production, Mode: Fast
[2025-08-14 20:46:47] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 20:46:47] [INFO] Checking prerequisites...
[2025-08-14 20:46:47] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 20:46:47] [INFO] Starting deployment in Fast mode...
[2025-08-14 20:46:47] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 20:46:47] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 20:46:49] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:46:49] [DEBUG] Docker output:  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 20:46:49] [INFO] Docker operation completed successfully: down
[2025-08-14 20:46:50] [INFO] Recent changes in src - will rebuild images
[2025-08-14 20:46:50] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 20:46:50] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 20:47:06] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:47:06] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker3 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [nginx internal] load build definition from Dockerfile; #3 transferring dockerfile: 652B 0.0s done; #3 DONE 0.1s; ; #2 [rqworker2 internal] load build definition from Dockerfile; #2 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.1s done; #4 DONE 0.2s; ; #5 [auth] library/python:pull token for registry-1.docker.io; #5 DONE 0.0s; ; #6 [nginx internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [auth] library/node:pull token for registry-1.docker.io; #7 DONE 0.0s; ; #8 [nginx internal] load .dockerignore; #8 transferring context: 2B 0.0s done; #8 DONE 0.0s; ; #9 [backend internal] load metadata for docker.io/library/python:3.10-slim; #9 ...; ; #10 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #11 [nginx internal] load build context; #11 transferring context: 97B 0.0s done; #11 DONE 0.0s; ; #12 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #12 CACHED; ; #13 [nginx 2/8] RUN apk add --no-cache curl; #13 CACHED; ; #14 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #14 CACHED; ; #15 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #15 CACHED; ; #16 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #16 CACHED; ; #17 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:98be7386bf8e8a7806c12b5f27c8e071405f04b04f40d8d1db136396811fa6a9; #19 exporting attestation manifest sha256:98be7386bf8e8a7806c12b5f27c8e071405f04b04f40d8d1db136396811fa6a9 0.1s done; #19 exporting manifest list sha256:d313bc39c77416029a987008a1d5b636787bc7c7782fc6e134e55bb63e085c26 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.3s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.7s; ; #9 [backend internal] load metadata for docker.io/library/python:3.10-slim; #9 ...; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.1s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #9 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #9 DONE 0.9s; ; #23 [backend internal] load .dockerignore; #23 transferring context: 908B 0.0s done; #23 DONE 0.1s; ; #24 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #24 DONE 0.1s; ; #25 [rqworker3 internal] load build context; #25 DONE 0.0s; ; #26 [rqworker3  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #26 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #26 ...; ; #25 [backend internal] load build context; #25 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 4.04kB 0.0s done; #22 DONE 0.1s; ; #27 [nginx] resolving provenance for metadata file; #27 DONE 0.1s; ; #26 [backend  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #26 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #26 DONE 0.2s; ; #28 [frontend-prod build-stage  9/10] RUN npm run build; #28 CACHED; ; #29 [frontend-prod build-stage  7/10] COPY index.html .; #29 CACHED; ; #30 [frontend-prod build-stage  8/10] COPY vite.config.js .; #30 CACHED; ; #31 [frontend-prod build-stage  3/10] COPY package*.json ./; #31 CACHED; ; #32 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #32 CACHED; ; #33 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #33 CACHED; ; #34 [frontend-prod build-stage  2/10] WORKDIR /app; #34 CACHED; ; #35 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #35 CACHED; ; #36 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #36 CACHED; ; #37 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #37 CACHED; ; #38 [frontend-prod build-stage  5/10] COPY public/ public/; #38 CACHED; ; #39 [frontend-prod build-stage  6/10] COPY src/ src/; #39 CACHED; ; #40 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #40 CACHED; ; #41 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #41 CACHED; ; #42 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #42 CACHED; ; #43 [frontend-prod] exporting to image; #43 exporting layers 0.1s done; #43 exporting manifest sha256:7ed1f98a37a10390b466f3f185a1bf4ef301f5749a6c3ddd030bfe4b517d14d3 0.0s done; #43 exporting config sha256:87bbf92a01b11ef6eb8a2bc4b1311cbf3aecf4a2dfe508ef0e8fe65249d22501 0.0s done; #43 ...; ; #25 [backend internal] load build context; #25 transferring context: 223.54kB 0.4s done; #25 DONE 0.4s; ; #44 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #44 CACHED; ; #45 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #45 CACHED; ; #46 [backend  3/17] COPY requirements.txt requirements.txt; #46 CACHED; ; #47 [backend  2/17] WORKDIR /app; #47 CACHED; ; #48 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #48 CACHED; ; #49 [backend  7/17] RUN useradd --create-home --shell /bin/bash app; #49 CACHED; ; #43 [frontend-prod] exporting to image; #43 exporting attestation manifest sha256:f1c6254052cfccecf16d42622cfb4e8d302e7b3e7055df62ba03fa3022c4e662 0.1s done; #43 exporting manifest list sha256:d9eac38fa2ad487d7e4a271e9dd4ebf283b059fc2e05d93480d5532086c2d7df; #43 exporting manifest list sha256:d9eac38fa2ad487d7e4a271e9dd4ebf283b059fc2e05d93480d5532086c2d7df 0.0s done; #43 naming to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #43 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #43 DONE 0.6s; ; #50 [backend  8/17] COPY --chown=app:app src/ /app/src/; #50 DONE 0.4s; ; #50 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #50 DONE 0.4s; ; #51 [backend  9/17] COPY --chown=app:app app/ /app/app/; #51 DONE 0.2s; ; #52 [frontend-prod] resolving provenance for metadata file; #52 DONE 0.0s; ; #53 [backend 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.1s; ; #53 [rqworker3 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.1s; ; #54 [rqworker3 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.1s; ; #54 [backend 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.1s; ; #55 [rqworker3 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 0.8s; ; #55 [rqworker3 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 0.8s; ; #56 [rqworker3 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.1s; ; #56 [rqworker1 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.1s; ; #57 [rqworker1 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.4s; ; #57 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.4s; ; #58 [rqworker3 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.4s; ; #58 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.4s; ; #59 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.4s; ; #59 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.4s; ; #60 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.4s; ; #60 [backend 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.4s; ; #61 [rqworker2] exporting to image; #61 exporting layers 4.1s done; #61 exporting manifest sha256:2647d013f66feea15f26b505a096ee6517787c60601c80d5fab5d023e6b04347; #61 exporting manifest sha256:2647d013f66feea15f26b505a096ee6517787c60601c80d5fab5d023e6b04347 0.2s done; #61 exporting config sha256:04809d3e5fcc66f8b5ab99a45b93b093b3114b2e8a3cb4ffa24749ff698c8fe9; #61 exporting config sha256:04809d3e5fcc66f8b5ab99a45b93b093b3114b2e8a3cb4ffa24749ff698c8fe9 0.1s done; #61 exporting attestation manifest sha256:293d173f81848c88c7cc6adaa74007812c83146468699599994c6dda1529cecb; #61 exporting attestation manifest sha256:293d173f81848c88c7cc6adaa74007812c83146468699599994c6dda1529cecb 0.3s done; #61 exporting manifest list sha256:e9765c0c6f4188350ca8b37da52f8e0c2f10ef6b27c35152ceb60176c10e2a37; #61 exporting manifest list sha256:e9765c0c6f4188350ca8b37da52f8e0c2f10ef6b27c35152ceb60176c10e2a37 0.1s done; #61 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-rqworker2:latest; #61 unpacking to docker.io/library/casestrainer-rqworker2:latest 2.6s done; #61 DONE 7.7s; ; #62 [backend] exporting to image; #62 exporting layers 4.1s done; #62 exporting manifest sha256:0f5a4de397e8adb85a508c4c3681e6f07e118c70ef4ad6708e7b6fc250c95437 0.2s done; #62 exporting config sha256:280c46a90e70e9cf958165f4c95ec36432e13dee3be9e1a77cc1fd06a21697f1 0.1s done; #62 exporting attestation manifest sha256:a6d8deb8c063cd1ff9ba95dd836258dbae4bb4772c26783be42b9a032192bdff 0.3s done; #62 exporting manifest list sha256:f50dc8d83e88161d6666df635d30d55378a40a3f67308dbaa7406daf0ea7309d 0.1s done; #62 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #62 unpacking to docker.io/library/casestrainer-backend:latest 2.6s done; #62 DONE 7.7s; ; #63 [rqworker1] exporting to image; #63 exporting layers 4.1s done; #63 exporting manifest sha256:33141637fea70a9ae234da5d240f7c702b5ebbbef1d45d8cc842c6d105f79c9d 0.1s done; #63 exporting config sha256:5e68f7a05cdb4dfe1288350df7811c242ce23b90e34f5174dc6d091c78615624 0.1s done; #63 exporting attestation manifest sha256:a182683a2201f8d00dc5b5a51e17ebbce4451e5256454d3446a3f37a9a6a67f5 0.3s done; #63 exporting manifest list sha256:d7df1f4d6f2d1b9541ce58e4cea3bc07a1c72a39cd3ec6100b23f796e7d6ab3f 0.1s done; #63 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #63 unpacking to docker.io/library/casestrainer-rqworker1:latest 2.6s done; #63 DONE 7.7s; ; #64 [rqworker3] exporting to image; #64 exporting layers 4.1s done; #64 exporting manifest sha256:d975d6bcc727b3af97bdbb42796ed9824d0785010e9b1604c555eef01b1bc7f8 0.2s done; #64 exporting config sha256:11846c5eaae46997eb3ddc21bcbd325c8eb13386f39d28a68fef0537cb2db3ba 0.1s done; #64 exporting attestation manifest sha256:6f4eb658465ab90ecf18ea15eb78def120a415a99230766059c098a674f75edf 0.3s done; #64 exporting manifest list sha256:61623951491faa610e60d0a4f875febd01819558a454756446203bfc34816282 0.1s done; #64 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #64 unpacking to docker.io/library/casestrainer-rqworker3:latest 2.6s done; #64 DONE 7.7s; ; #65 [rqworker2] resolving provenance for metadata file; #65 DONE 0.4s; ; #66 [rqworker3] resolving provenance for metadata file; #66 DONE 0.4s; ; #67 [rqworker1] resolving provenance for metadata file; #67 DONE 0.2s; ; #68 [backend] resolving provenance for metadata file; #68 DONE 0.1s;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built
[2025-08-14 20:47:06] [INFO] Docker operation completed successfully: build
[2025-08-14 20:47:06] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 20:47:22] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:47:22] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 20:47:22] [INFO] Docker operation completed successfully: up
[2025-08-14 20:47:22] [INFO] Waiting for containers to stabilize...
[2025-08-14 20:47:32] [INFO] Performing application health check...
[2025-08-14 20:47:32] [INFO] Application health check passed
[2025-08-14 20:47:32] [INFO] Deployment completed successfully!
[2025-08-14 20:47:32] [INFO] Containers running: 7
[2025-08-14 20:47:32] [DEBUG] Launcher execution completed
[2025-08-14 20:55:15] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 20:55:15] [INFO] Environment: Production, Mode: Fast
[2025-08-14 20:55:15] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 20:55:15] [INFO] Checking prerequisites...
[2025-08-14 20:55:15] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 20:55:15] [INFO] Starting deployment in Fast mode...
[2025-08-14 20:55:15] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 20:55:15] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 20:55:19] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:55:19] [DEBUG] Docker output:  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 20:55:19] [INFO] Docker operation completed successfully: down
[2025-08-14 20:55:19] [INFO] Recent changes in src - will rebuild images
[2025-08-14 20:55:19] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 20:55:19] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 20:55:35] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:55:35] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker3 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [nginx internal] load build definition from Dockerfile; #3 transferring dockerfile: 652B 0.0s done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.1s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [auth] library/node:pull token for registry-1.docker.io; #7 DONE 0.0s; ; #8 [auth] library/python:pull token for registry-1.docker.io; #8 DONE 0.0s; ; #9 [nginx internal] load .dockerignore; #9 transferring context: 2B done; #9 DONE 0.0s; ; #10 [nginx internal] load build context; #10 DONE 0.0s; ; #11 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #11 DONE 0.1s; ; #12 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #12 ...; ; #11 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 DONE 0.1s; ; #10 [nginx internal] load build context; #10 transferring context: 97B 0.0s done; #10 DONE 0.0s; ; #13 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #13 CACHED; ; #14 [nginx 2/8] RUN apk add --no-cache curl; #14 CACHED; ; #15 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #15 CACHED; ; #16 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #16 CACHED; ; #17 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #17 CACHED; ; #18 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #18 CACHED; ; #19 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #19 CACHED; ; #20 [nginx] exporting to image; #20 exporting layers 0.0s done; #20 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af 0.0s done; #20 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #20 exporting attestation manifest sha256:430a49731d5fb902731c4748bb0088b51d8e9f70e40b9e462122243f7db50c0f 0.1s done; #20 exporting manifest list sha256:58c53390d5cebef59fb4dd9310ccc22fe9a002864ce71b8283d62c934cef7d84 0.0s done; #20 naming to docker.io/library/casestrainer-nginx:latest done; #20 unpacking to docker.io/library/casestrainer-nginx:latest 0.1s done; #20 DONE 0.3s; ; #12 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #12 DONE 0.7s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #11 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #11 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #5 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 0.8s; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #23 DONE 0.1s; ; #24 [rqworker1 internal] load .dockerignore; #24 transferring context: 908B 0.0s done; #24 DONE 0.1s; ; #25 [rqworker1 internal] load build context; #25 DONE 0.0s; ; #26 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #26 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #26 DONE 0.1s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 4.04kB 0.0s done; #22 DONE 0.1s; ; #27 [nginx] resolving provenance for metadata file; #27 DONE 0.0s; ; #28 [frontend-prod build-stage  5/10] COPY public/ public/; #28 CACHED; ; #29 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #29 CACHED; ; #30 [frontend-prod build-stage  2/10] WORKDIR /app; #30 CACHED; ; #31 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #31 CACHED; ; #32 [frontend-prod build-stage  8/10] COPY vite.config.js .; #32 CACHED; ; #33 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #33 CACHED; ; #34 [frontend-prod build-stage  6/10] COPY src/ src/; #34 CACHED; ; #35 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #35 CACHED; ; #36 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #36 CACHED; ; #37 [frontend-prod build-stage  7/10] COPY index.html .; #37 CACHED; ; #38 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #38 CACHED; ; #39 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #39 CACHED; ; #40 [frontend-prod build-stage  3/10] COPY package*.json ./; #40 CACHED; ; #41 [frontend-prod build-stage  9/10] RUN npm run build; #41 CACHED; ; #42 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #42 CACHED; ; #25 [rqworker1 internal] load build context; #25 transferring context: 341.80kB 0.3s done; #25 DONE 0.3s; ; #43 [backend  3/17] COPY requirements.txt requirements.txt; #43 CACHED; ; #44 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #44 CACHED; ; #45 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #45 CACHED; ; #46 [backend  2/17] WORKDIR /app; #46 CACHED; ; #47 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #47 CACHED; ; #48 [rqworker3  7/17] RUN useradd --create-home --shell /bin/bash app; #48 CACHED; ; #49 [frontend-prod] exporting to image; #49 exporting layers 0.0s done; #49 exporting manifest sha256:7ed1f98a37a10390b466f3f185a1bf4ef301f5749a6c3ddd030bfe4b517d14d3 done; #49 exporting config sha256:87bbf92a01b11ef6eb8a2bc4b1311cbf3aecf4a2dfe508ef0e8fe65249d22501 done; #49 exporting attestation manifest sha256:0f57ca3a97cb2e299f83529d15e2334b0b6a997fd43384b663034d14383c9358 0.2s done; #49 exporting manifest list sha256:37ba98ce50724b8e84b598b09ccd24e866d14ccddfe02ba9e96e8d361e3e66e8 0.0s done; #49 naming to docker.io/library/casestrainer-frontend-prod:latest done; #49 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #49 DONE 0.5s; ; #50 [rqworker3  8/17] COPY --chown=app:app src/ /app/src/; #50 DONE 0.4s; ; #51 [frontend-prod] resolving provenance for metadata file; #51 DONE 0.0s; ; #52 [backend  9/17] COPY --chown=app:app app/ /app/app/; #52 DONE 0.1s; ; #53 [rqworker2 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.1s; ; #54 [rqworker2 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.2s; ; #55 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 1.2s; ; #56 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.1s; ; #57 [rqworker1 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.4s; ; #58 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.5s; ; #59 [rqworker3 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.5s; ; #60 [backend 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.4s; ; #61 [rqworker2] exporting to image; #61 exporting layers 3.8s done; #61 exporting manifest sha256:faf3ad9d87f83ba35ba14be942407226a671c36c9bfd40a08c9bb5d43a6f0c94; #61 exporting manifest sha256:faf3ad9d87f83ba35ba14be942407226a671c36c9bfd40a08c9bb5d43a6f0c94 0.1s done; #61 exporting config sha256:5be52972dce76ed18fa23d844a0f28f17ef098b23d6b5369b44d0c555df9078c; #61 exporting config sha256:5be52972dce76ed18fa23d844a0f28f17ef098b23d6b5369b44d0c555df9078c 0.1s done; #61 exporting attestation manifest sha256:e7312b1b0d8885d376effa2572aadc84ee2de0ecc846b6b34388efd96fd7902e; #61 exporting attestation manifest sha256:e7312b1b0d8885d376effa2572aadc84ee2de0ecc846b6b34388efd96fd7902e 0.2s done; #61 exporting manifest list sha256:c512aeda7bbf499bcd430f0646ab0aed08c819929fa84075a96ba000d9301576; #61 exporting manifest list sha256:c512aeda7bbf499bcd430f0646ab0aed08c819929fa84075a96ba000d9301576 0.1s done; #61 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-rqworker2:latest; #61 ...; ; #62 [rqworker1] exporting to image; #62 exporting layers 3.8s done; #62 exporting manifest sha256:35d4b17f00c67d6e26336c7923332fe646efd0de4a7d130487be212b9e28c481 0.1s done; #62 exporting config sha256:9701ad94aec51c6598712a633545853835699e44261796fc60472a1689b727b8 0.1s done; #62 exporting attestation manifest sha256:b20d67778ca0e6978a3dfa2f9e927864f3a9c311904c49371929c10adf3073e6 0.2s done; #62 exporting manifest list sha256:15a30b78d35937a159a1d2cbaf26baa30fd5ba785a8fbaa9f103278bf143cc89 0.1s done; #62 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #62 unpacking to docker.io/library/casestrainer-rqworker1:latest 2.7s done; #62 DONE 7.4s; ; #61 [rqworker2] exporting to image; #61 unpacking to docker.io/library/casestrainer-rqworker2:latest 2.7s done; #61 DONE 7.4s; ; #63 [rqworker3] exporting to image; #63 exporting layers 3.8s done; #63 exporting manifest sha256:0190d32fa9a08ed5e987833778b8ca0c271c9e9297ed593c0bbf4119aa7c7a2e 0.1s done; #63 exporting config sha256:120d51e9eb336b7afc974211f8c677aa4f2b934095e1b81758b1ee18432e5d87 0.1s done; #63 exporting attestation manifest sha256:45584bc89449f98901505a9b2efc9a1a5645206d86d19c245dc1dbc02a45a4c0 0.2s done; #63 exporting manifest list sha256:62e48be99e7907a2055fcefe7205413021347de01044e9670485a1f45a071cb6 0.1s done; #63 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #63 unpacking to docker.io/library/casestrainer-rqworker3:latest 2.7s done; #63 DONE 7.4s; ; #64 [backend] exporting to image; #64 exporting layers 3.8s done; #64 exporting manifest sha256:1d25db707c933449fdd535d9b388bb821cb4ce0633ff3814e78d90cc73aaa1bb 0.2s done; #64 exporting config sha256:f560733703ae3af9ed9c5e77e60be0369e51a83b5d831585ccf5eba7a602e8e5 0.1s done; #64 exporting attestation manifest sha256:a8455fddbf1e7d5fa6ab3e6d0dc0ebf2beb18823e18415943c064c477b35de8c 0.2s done; #64 exporting manifest list sha256:54d058d52b6679c709a0d35ba616865cf1e3c36aa86815909d733f78a21ce672 0.1s done; #64 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #64 unpacking to docker.io/library/casestrainer-backend:latest 2.8s done; #64 DONE 7.4s; ; #65 [rqworker1] resolving provenance for metadata file; #65 DONE 0.3s; ; #66 [rqworker3] resolving provenance for metadata file; #66 DONE 0.2s; ; #67 [backend] resolving provenance for metadata file; #67 DONE 0.0s; ; #68 [rqworker2] resolving provenance for metadata file; #68 DONE 0.1s;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built
[2025-08-14 20:55:35] [INFO] Docker operation completed successfully: build
[2025-08-14 20:55:35] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 20:55:51] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:55:51] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 20:55:51] [INFO] Docker operation completed successfully: up
[2025-08-14 20:55:51] [INFO] Waiting for containers to stabilize...
[2025-08-14 20:56:01] [INFO] Performing application health check...
[2025-08-14 20:56:01] [INFO] Application health check passed
[2025-08-14 20:56:01] [INFO] Deployment completed successfully!
[2025-08-14 20:56:01] [INFO] Containers running: 7
[2025-08-14 20:56:01] [DEBUG] Launcher execution completed
[2025-08-14 20:57:35] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 20:57:35] [INFO] Environment: Production, Mode: Fast
[2025-08-14 20:57:35] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 20:57:35] [INFO] Checking prerequisites...
[2025-08-14 20:57:35] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 20:57:35] [INFO] Starting deployment in Fast mode...
[2025-08-14 20:57:35] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 20:57:35] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 20:57:39] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:57:39] [DEBUG] Docker output:  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 20:57:39] [INFO] Docker operation completed successfully: down
[2025-08-14 20:57:39] [INFO] Recent changes in src - will rebuild images
[2025-08-14 20:57:39] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 20:57:39] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 20:57:55] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:57:55] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [frontend-prod internal] load build definition from Dockerfile.prod; #2 transferring dockerfile: 2.03kB 0.0s done; #2 DONE 0.0s; ; #3 [nginx internal] load build definition from Dockerfile; #3 transferring dockerfile: 652B 0.0s done; #3 DONE 0.1s; ; #4 [rqworker1 internal] load build definition from Dockerfile; #4 transferring dockerfile: 1.80kB 0.0s done; #4 DONE 0.1s; ; #5 [nginx internal] load metadata for docker.io/library/nginx:alpine; #5 DONE 0.2s; ; #6 [nginx internal] load .dockerignore; #6 transferring context: 2B 0.0s done; #6 DONE 0.1s; ; #7 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #7 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #7 DONE 0.1s; ; #8 [nginx internal] load build context; #8 transferring context: 97B done; #8 DONE 0.0s; ; #9 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #9 ...; ; #10 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #10 CACHED; ; #11 [nginx 2/8] RUN apk add --no-cache curl; #11 CACHED; ; #12 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #12 CACHED; ; #13 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #13 CACHED; ; #14 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #14 CACHED; ; #15 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #9 [backend internal] load metadata for docker.io/library/python:3.10-slim; #9 DONE 0.5s; ; #17 [rqworker2 internal] load .dockerignore; #17 transferring context: 908B 0.0s done; #17 DONE 0.0s; ; #18 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #18 DONE 0.5s; ; #19 [backend internal] load build context; #19 DONE 0.0s; ; #20 [backend  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #20 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #20 ...; ; #7 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #7 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #7 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.1s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #20 [backend  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #20 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #20 DONE 0.2s; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #23 DONE 0.2s; ; #19 [rqworker3 internal] load build context; #19 ...; ; #22 [frontend-prod internal] load build context; #22 transferring context: 4.04kB 0.0s done; #22 DONE 0.1s; ; #19 [rqworker3 internal] load build context; #19 transferring context: 205.61kB 0.3s done; #19 DONE 0.3s; ; #24 [frontend-prod build-stage  2/10] WORKDIR /app; #24 CACHED; ; #25 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #25 CACHED; ; #26 [frontend-prod build-stage  8/10] COPY vite.config.js .; #26 CACHED; ; #27 [frontend-prod build-stage  9/10] RUN npm run build; #27 CACHED; ; #28 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #28 CACHED; ; #29 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #29 CACHED; ; #30 [frontend-prod build-stage  7/10] COPY index.html .; #30 CACHED; ; #31 [frontend-prod build-stage  6/10] COPY src/ src/; #31 CACHED; ; #32 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #32 CACHED; ; #33 [frontend-prod build-stage  3/10] COPY package*.json ./; #33 CACHED; ; #34 [frontend-prod build-stage  5/10] COPY public/ public/; #34 CACHED; ; #35 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #35 CACHED; ; #36 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #36 CACHED; ; #37 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #37 CACHED; ; #38 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #38 CACHED; ; #39 [nginx] exporting to image; #39 exporting layers 0.0s done; #39 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af 0.0s done; #39 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #39 exporting attestation manifest sha256:9411dc87a42f940d41cf174e49e0ca1658f8df1de3cfb7c703fb8b3521997ce3 0.1s done; #39 exporting manifest list sha256:1bceef34ab7107482a6b56bdc0d3f6ef0eccacb5d841805870f9e22821a3d742 0.1s done; #39 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #39 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #39 DONE 0.6s; ; #40 [backend  2/17] WORKDIR /app; #40 CACHED; ; #41 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #41 CACHED; ; #42 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #42 CACHED; ; #43 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #43 CACHED; ; #44 [backend  3/17] COPY requirements.txt requirements.txt; #44 CACHED; ; #45 [backend  7/17] RUN useradd --create-home --shell /bin/bash app; #45 CACHED; ; #46 [backend  8/17] COPY --chown=app:app src/ /app/src/; #46 ...; ; #40 [rqworker2  2/17] WORKDIR /app; #40 CACHED; ; #44 [rqworker2  3/17] COPY requirements.txt requirements.txt; #44 CACHED; ; #41 [rqworker2  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #41 CACHED; ; #42 [rqworker2  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #42 CACHED; ; #43 [rqworker2  5/17] RUN pip install --no-cache-dir -r requirements.txt; #43 CACHED; ; #45 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #45 CACHED; ; #46 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #46 ...; ; #47 [frontend-prod] exporting to image; #47 exporting layers 0.0s done; #47 exporting manifest sha256:7ed1f98a37a10390b466f3f185a1bf4ef301f5749a6c3ddd030bfe4b517d14d3 0.0s done; #47 exporting config sha256:87bbf92a01b11ef6eb8a2bc4b1311cbf3aecf4a2dfe508ef0e8fe65249d22501 0.0s done; #47 exporting attestation manifest sha256:c4589e6ca7b5409553e1b4ca0a1756a3c9b10fc620e86c81ed4ffc0e9d0de15f 0.1s done; #47 exporting manifest list sha256:16d473122eb4bf69a9ff07c7ef54ba14ff285338258cc0ec3c6583840ff828d9 0.0s done; #47 naming to docker.io/library/casestrainer-frontend-prod:latest done; #47 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #47 DONE 0.4s; ; #46 [rqworker3  8/17] COPY --chown=app:app src/ /app/src/; #46 DONE 0.4s; ; #48 [nginx] resolving provenance for metadata file; #48 DONE 0.0s; ; #49 [rqworker1  9/17] COPY --chown=app:app app/ /app/app/; #49 DONE 0.2s; ; #50 [frontend-prod] resolving provenance for metadata file; #50 DONE 0.0s; ; #51 [rqworker3 10/17] COPY --chown=app:app config/ /app/config/; #51 DONE 0.1s; ; #52 [rqworker3 11/17] COPY --chown=app:app templates/ /app/templates/; #52 DONE 0.2s; ; #53 [backend 12/17] COPY --chown=app:app static/ /app/static/; #53 DONE 0.8s; ; #54 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #54 DONE 0.2s; ; #55 [rqworker3 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #55 DONE 0.4s; ; #56 [rqworker1 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #56 DONE 0.4s; ; #57 [rqworker1 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #57 DONE 0.5s; ; #58 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #58 DONE 0.4s; ; #59 [backend] exporting to image; #59 exporting layers 3.8s done; #59 exporting manifest sha256:270ad8dcdc6d7d247a4a14b47aa9801cfcecece0ed8f76cca4a736b9e5ff68b3 0.1s done; #59 exporting config sha256:c89b055bdb4c6333d6ac3792e56201133a88259de24362370f7c749107541db4; #59 exporting config sha256:c89b055bdb4c6333d6ac3792e56201133a88259de24362370f7c749107541db4 0.1s done; #59 exporting attestation manifest sha256:f662102d58faf6c7a01d70e0ccb470462b3d5d8eb66c9953e12dbacb87ef0ce3; #59 exporting attestation manifest sha256:f662102d58faf6c7a01d70e0ccb470462b3d5d8eb66c9953e12dbacb87ef0ce3 0.2s done; #59 exporting manifest list sha256:ec476283da4a9bcbcd98038da2359eabd91a65fe7f9eb8d2976652a263ca3fca; #59 exporting manifest list sha256:ec476283da4a9bcbcd98038da2359eabd91a65fe7f9eb8d2976652a263ca3fca 0.2s done; #59 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #59 unpacking to docker.io/library/casestrainer-backend:latest; #59 ...; ; #60 [rqworker3] exporting to image; #60 exporting layers 3.8s done; #60 exporting manifest sha256:c88d8920f1e3d8e758353e194b2407b1dbe27c2be188924b23fbe2151ee3893c 0.1s done; #60 exporting config sha256:ab206a500307b6314193466098fd57f35611d3bb7ed59559ca140e5bad6793e1 0.1s done; #60 exporting attestation manifest sha256:ec2870e505c5931c96bdbe10da99185b548a68e6e5db347436ea619c850c1984 0.3s done; #60 exporting manifest list sha256:be694262fb9f056e77903b949ca4423fee98c666c28e75aea374c3baa8f96cc7 0.2s done; #60 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #60 unpacking to docker.io/library/casestrainer-rqworker3:latest 2.9s done; #60 DONE 7.7s; ; #59 [backend] exporting to image; #59 unpacking to docker.io/library/casestrainer-backend:latest 3.0s done; #59 DONE 7.7s; ; #61 [rqworker2] exporting to image; #61 exporting layers 3.8s done; #61 exporting manifest sha256:e016e6762fb6152235a5231701828733d1f7aab057bd0ea30acd0fb54a2255e3 0.1s done; #61 exporting config sha256:040ca7bb93086b122e0baa3bb05993eace28d4dc0a9559f11dfc42aa367b542a 0.1s done; #61 exporting attestation manifest sha256:9891d666e7372754ae8de8def0c5085a33d1ab0c87100652bc4bfc19a8f236a1 0.3s done; #61 exporting manifest list sha256:2f051d9e0f38083e5d1e64dec36aff34f64bb929832c0a42d11de9b4e6defe1f 0.2s done; #61 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-rqworker2:latest 2.9s done; #61 DONE 7.7s; ; #62 [rqworker1] exporting to image; #62 exporting layers 3.9s done; #62 exporting manifest sha256:54161693426e1a4087ac8a8c44f1eac011ff72d77ec626477e146c827e81d8b5 0.1s done; #62 exporting config sha256:0a71c236812f6c90a6e00badd212a401c941536223a60be0e5af10bdaa2d08a7 0.1s done; #62 exporting attestation manifest sha256:a7456d649c1a4447ef15c5a211dfde4f0821910a39b7c1780c57a157a44b5d3c 0.2s done; #62 exporting manifest list sha256:387737324e9d7e63e9dec5420319c7ba4e9c3019b28c69a0f5fa40ae12093fe6 0.1s done; #62 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #62 unpacking to docker.io/library/casestrainer-rqworker1:latest 3.0s done; #62 DONE 7.7s; ; #63 [backend] resolving provenance for metadata file; #63 DONE 0.1s; ; #64 [rqworker2] resolving provenance for metadata file; #64 DONE 0.1s; ; #65 [rqworker3] resolving provenance for metadata file; #65 DONE 0.2s; ; #66 [rqworker1] resolving provenance for metadata file; #66 DONE 0.0s;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built
[2025-08-14 20:57:55] [INFO] Docker operation completed successfully: build
[2025-08-14 20:57:55] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 20:58:11] [DEBUG] Docker operation exit code: 0
[2025-08-14 20:58:11] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-nginx-prod  Created;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 20:58:11] [INFO] Docker operation completed successfully: up
[2025-08-14 20:58:11] [INFO] Waiting for containers to stabilize...
[2025-08-14 20:58:21] [INFO] Performing application health check...
[2025-08-14 20:58:21] [INFO] Application health check passed
[2025-08-14 20:58:21] [INFO] Deployment completed successfully!
[2025-08-14 20:58:21] [INFO] Containers running: 7
[2025-08-14 20:58:21] [DEBUG] Launcher execution completed
[2025-08-14 21:07:31] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 21:07:31] [INFO] Environment: Production, Mode: Fast
[2025-08-14 21:07:31] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 21:07:31] [INFO] Checking prerequisites...
[2025-08-14 21:07:31] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 21:07:31] [INFO] Starting deployment in Fast mode...
[2025-08-14 21:07:31] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 21:07:31] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 21:07:34] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:07:34] [DEBUG] Docker output:  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 21:07:34] [INFO] Docker operation completed successfully: down
[2025-08-14 21:07:35] [INFO] Recent changes in src - will rebuild images
[2025-08-14 21:07:35] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 21:07:35] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 21:08:02] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:08:02] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [backend internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.0s; ; #3 [nginx internal] load build definition from Dockerfile; #3 transferring dockerfile: 652B 0.0s done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.1s; ; #5 [auth] library/node:pull token for registry-1.docker.io; #5 DONE 0.0s; ; #6 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [auth] library/python:pull token for registry-1.docker.io; #7 DONE 0.0s; ; #8 [nginx internal] load .dockerignore; #8 transferring context: 2B done; #8 DONE 0.0s; ; #9 [nginx internal] load build context; #9 DONE 0.0s; ; #10 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #11 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #11 ...; ; #10 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 DONE 0.1s; ; #9 [nginx internal] load build context; #9 transferring context: 97B done; #9 DONE 0.0s; ; #12 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #12 CACHED; ; #13 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #13 CACHED; ; #14 [nginx 2/8] RUN apk add --no-cache curl; #14 CACHED; ; #15 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #15 CACHED; ; #16 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #16 CACHED; ; #17 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af 0.0s done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:e470863237986f543bc549b08fc629b0cdb2b2b39a075933ae8762c6477da4f4 0.1s done; #19 exporting manifest list sha256:f305d81a8cb464f57b2d0b39135bd1193eeb21902807df863310316952abaf52 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.1s done; #19 DONE 0.3s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.7s; ; #11 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #11 ...; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B done; #21 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #11 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #11 DONE 0.9s; ; #23 [rqworker2 internal] load .dockerignore; #23 transferring context: 908B 0.0s done; #23 DONE 0.1s; ; #24 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #24 DONE 0.1s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 81.19kB 0.1s done; #22 DONE 0.1s; ; #25 [rqworker1 internal] load build context; #25 DONE 0.0s; ; #26 [nginx] resolving provenance for metadata file; #26 DONE 0.1s; ; #27 [frontend-prod build-stage  3/10] COPY package*.json ./; #27 CACHED; ; #28 [frontend-prod build-stage  2/10] WORKDIR /app; #28 CACHED; ; #29 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #29 CACHED; ; #30 [frontend-prod build-stage  5/10] COPY public/ public/; #30 CACHED; ; #31 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #31 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #31 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #31 DONE 0.1s; ; #25 [backend internal] load build context; #25 ...; ; #32 [frontend-prod build-stage  6/10] COPY src/ src/; #32 DONE 0.2s; ; #25 [backend internal] load build context; #25 transferring context: 348.47kB 0.2s done; #25 transferring context: 348.47kB 0.2s done; #25 DONE 0.3s; ; #33 [rqworker3  3/17] COPY requirements.txt requirements.txt; #33 CACHED; ; #34 [rqworker3  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #34 CACHED; ; #35 [rqworker3  5/17] RUN pip install --no-cache-dir -r requirements.txt; #35 CACHED; ; #36 [rqworker3  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #36 CACHED; ; #37 [rqworker3  2/17] WORKDIR /app; #37 CACHED; ; #38 [rqworker3  7/17] RUN useradd --create-home --shell /bin/bash app; #38 CACHED; ; #39 [frontend-prod build-stage  7/10] COPY index.html .; #39 DONE 0.2s; ; #40 [frontend-prod build-stage  8/10] COPY vite.config.js .; #40 DONE 0.2s; ; #41 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #41 DONE 0.3s; ; #42 [rqworker1  9/17] COPY --chown=app:app app/ /app/app/; #42 DONE 0.2s; ; #43 [backend 10/17] COPY --chown=app:app config/ /app/config/; #43 DONE 0.1s; ; #44 [rqworker3 11/17] COPY --chown=app:app templates/ /app/templates/; #44 DONE 0.1s; ; #45 [backend 12/17] COPY --chown=app:app static/ /app/static/; #45 DONE 0.7s; ; #46 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #46 DONE 0.1s; ; #47 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #47 DONE 0.5s; ; #48 [rqworker1 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #48 DONE 0.4s; ; #49 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #49 DONE 0.6s; ; #50 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #50 DONE 0.4s; ; #51 [rqworker3] exporting to image; #51 exporting layers 4.2s done; #51 exporting manifest sha256:56ea5fafa73759695c11ecbb5d98c23241ae49ed9e4c58a408e9e3b9d33989c3 0.1s done; #51 exporting config sha256:0b1140d20f0c89686d33ed77d21a3fb205a8be0af94898893f9753a0a2c89636; #51 exporting config sha256:0b1140d20f0c89686d33ed77d21a3fb205a8be0af94898893f9753a0a2c89636 0.2s done; #51 exporting attestation manifest sha256:18382f8078b45784b4119f73a4ebc59d0ad2d2fd92823efc1003f2004417797a; #51 exporting attestation manifest sha256:18382f8078b45784b4119f73a4ebc59d0ad2d2fd92823efc1003f2004417797a 0.3s done; #51 exporting manifest list sha256:6bab4f30cbb3bda4c303dca2dfcaf935eaf0ac0a89fa17f7ee56cb7555dd99a5; #51 exporting manifest list sha256:6bab4f30cbb3bda4c303dca2dfcaf935eaf0ac0a89fa17f7ee56cb7555dd99a5 0.2s done; #51 naming to docker.io/library/casestrainer-rqworker3:latest; #51 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #51 unpacking to docker.io/library/casestrainer-rqworker3:latest; #51 ...; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 0.976 ; #52 0.976 > casestrainer-vue-new@0.6.5 build; #52 0.976 > vite build; #52 0.976 ; #52 2.442 vite v6.3.5 building for production...; #52 3.390 transforming...; #52 9.375 G 139 modules transformed.; #52 ...; ; #53 [backend] exporting to image; #53 exporting layers 4.3s done; #53 exporting manifest sha256:a529c96fd6e5bf0ac6690b848671fbf21ef9fd9a67d44bca6e23747cccc704cf 0.1s done; #53 exporting config sha256:ef4d6a88cee9dedfc3a71aa14d92702d5dd39ca80e9221256f4d3a1669c2eaa3 0.1s done; #53 exporting attestation manifest sha256:bc22bc8765395f96ee4be3702cf55960b07ce0d815edd396ea85f94b3761380c 0.3s done; #53 exporting manifest list sha256:e1d67a594668058ddd8d103363f631db4957f5ad2f895de90715316b5edd2c98 0.2s done; #53 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #53 unpacking to docker.io/library/casestrainer-backend:latest; #53 ...; ; #54 [rqworker1] exporting to image; #54 exporting layers 4.3s done; #54 exporting manifest sha256:c6189c81d66682490418510e4fe6ed08c581cdab504ee7152f643fede43a96b3 0.2s done; #54 exporting config sha256:ca7c25c0c9faca41ca7693170d186ab3765134db3844877b61a50133b6f828d0 0.2s done; #54 exporting attestation manifest sha256:74c8a3b9610bae034008787a0572f3bce84fd738049a929c62681e0c4d405803 0.3s done; #54 exporting manifest list sha256:0727224ee2cba0bc1e6fc030aaf1baefd84dfb4ffa0b34022d310e4459ad7eb9 0.2s done; #54 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #54 unpacking to docker.io/library/casestrainer-rqworker1:latest 4.3s done; #54 DONE 9.7s; ; #51 [rqworker3] exporting to image; #51 unpacking to docker.io/library/casestrainer-rqworker3:latest 4.3s done; #51 DONE 9.8s; ; #53 [backend] exporting to image; #53 unpacking to docker.io/library/casestrainer-backend:latest 4.3s done; #53 DONE 9.7s; ; #55 [rqworker2] exporting to image; #55 exporting layers 4.3s done; #55 exporting manifest sha256:aecb4fbef0b1518639e2965d33c8516601a01882aaf5f2845ac0ed01e194a6ba 0.1s done; #55 exporting config sha256:e1b3e368144421f46825fbbef18dec462e0b34a31603bba0254e1ff85cb75b69 0.2s done; #55 exporting attestation manifest sha256:9062aa6f2fc5f54a2f57bce5fa6858f9c7624fe10ac8242df222a86fcf638fec 0.3s done; #55 exporting manifest list sha256:fdf146ec86b3a0d8db075701adcb3da0c6a244a97fcc380d822f5e17cbbdf2a1 0.2s done; #55 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #55 unpacking to docker.io/library/casestrainer-rqworker2:latest 4.3s done; #55 DONE 9.8s; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 13.29 rendering chunks...; #52 ...; ; #56 [rqworker1] resolving provenance for metadata file; #56 DONE 0.4s; ; #57 [rqworker2] resolving provenance for metadata file; #57 DONE 0.2s; ; #58 [backend] resolving provenance for metadata file; #58 DONE 0.5s; ; #59 [rqworker3] resolving provenance for metadata file; #59 DONE 0.1s; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 18.55 computing gzip size...; #52 18.57 dist/index.html                              0.91 kB G gzip:  0.45 kB; #52 18.57 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB G gzip:  0.07 kB; #52 18.57 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB G gzip:  0.07 kB; #52 18.57 dist/assets/NotFound-CrLUfTg_.css            1.01 kB G gzip:  0.45 kB; #52 18.57 dist/assets/Docs-La2G-zWQ.css                1.39 kB G gzip:  0.46 kB; #52 18.57 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB G gzip:  0.57 kB; #52 18.57 dist/assets/index-Bmv2TN48.css             276.13 kB G gzip: 39.00 kB; #52 18.58 dist/assets/Docs-D5860S5O.js                 1.01 kB G gzip:  0.56 kB; #52 18.58 dist/assets/WordPlugin-DTlxIns8.js           1.20 kB G gzip:  0.71 kB; #52 18.58 dist/assets/BrowserExtension-B7mWKQEC.js     1.22 kB G gzip:  0.73 kB; #52 18.58 dist/assets/NotFound-DOqroncb.js             1.89 kB G gzip:  0.92 kB; #52 18.58 dist/assets/ApiDocs-jvDJqENv.js             23.31 kB G gzip:  4.00 kB; #52 18.58 dist/assets/vendor-C-1G2k3o.js              34.93 kB G gzip: 13.58 kB; #52 18.58 dist/assets/vue-DOX4hRq3.js                 91.40 kB G gzip: 34.95 kB; #52 18.58 dist/assets/index-C-MhFw0C.js              157.18 kB G gzip: 46.34 kB; #52 18.58 G built in 15.79s; #52 DONE 19.3s; ; #60 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #60 DONE 0.4s; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 CACHED; ; #61 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #61 DONE 0.1s; ; #62 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #62 DONE 0.4s; ; #63 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #63 DONE 0.1s; ; #64 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #64 DONE 0.2s; ; #65 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #65 DONE 0.4s; ; #66 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #66 DONE 0.4s; ; #67 [frontend-prod] exporting to image; #67 exporting layers; #67 exporting layers 0.7s done; #67 exporting manifest sha256:31c98de84dc24a709ddad8317a1b0feeb719e105ee0ad44c221562b8cd3e0ceb 0.1s done; #67 exporting config sha256:e11633b85de0e0aec6b6012af8ae9fca9d3ae3319d443f00389eb7bc4946bb61 0.0s done; #67 exporting attestation manifest sha256:0e675deefbe5b8cb15d33edd560dd0697c6f3d0f7e1fce3b4d5648a54ebb72ab; #67 exporting attestation manifest sha256:0e675deefbe5b8cb15d33edd560dd0697c6f3d0f7e1fce3b4d5648a54ebb72ab 0.1s done; #67 exporting manifest list sha256:e6f39243d2b16dd3ecd8166d8fadafe3d53dc6e99e5fc7476b989d6fe3eac2ac 0.0s done; #67 naming to docker.io/library/casestrainer-frontend-prod:latest; #67 naming to docker.io/library/casestrainer-frontend-prod:latest done; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.3s done; #67 DONE 1.2s; ; #68 [frontend-prod] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built
[2025-08-14 21:08:02] [INFO] Docker operation completed successfully: build
[2025-08-14 21:08:02] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 21:08:16] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:08:16] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 21:08:16] [INFO] Docker operation completed successfully: up
[2025-08-14 21:08:16] [INFO] Waiting for containers to stabilize...
[2025-08-14 21:08:27] [INFO] Performing application health check...
[2025-08-14 21:08:27] [INFO] Application health check passed
[2025-08-14 21:08:27] [INFO] Deployment completed successfully!
[2025-08-14 21:08:27] [INFO] Containers running: 7
[2025-08-14 21:08:27] [DEBUG] Launcher execution completed
[2025-08-14 21:10:49] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 21:10:49] [INFO] Environment: Production, Mode: Fast
[2025-08-14 21:10:49] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 21:10:49] [INFO] Checking prerequisites...
[2025-08-14 21:10:49] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 21:10:49] [INFO] Starting deployment in Fast mode...
[2025-08-14 21:10:49] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 21:10:49] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 21:10:54] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:10:54] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 21:10:54] [INFO] Docker operation completed successfully: down
[2025-08-14 21:10:54] [INFO] Recent changes in src - will rebuild images
[2025-08-14 21:10:54] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 21:10:54] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 21:11:17] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:11:17] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [nginx internal] load build definition from Dockerfile; #2 transferring dockerfile: 652B 0.0s done; #2 DONE 0.1s; ; #3 [backend internal] load build definition from Dockerfile; #3 transferring dockerfile: 1.80kB 0.0s done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.1s; ; #5 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #5 DONE 0.1s; ; #6 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #6 ...; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B 0.0s done; #7 DONE 0.1s; ; #8 [nginx internal] load build context; #8 DONE 0.0s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.0s done; #9 DONE 0.1s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 DONE 0.1s; ; #8 [nginx internal] load build context; #8 transferring context: 97B done; #8 DONE 0.0s; ; #10 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #10 CACHED; ; #11 [nginx 2/8] RUN apk add --no-cache curl; #11 CACHED; ; #12 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #12 CACHED; ; #13 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #13 CACHED; ; #14 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #14 CACHED; ; #15 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [nginx] exporting to image; #17 exporting layers 0.0s done; #17 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #17 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #17 exporting attestation manifest sha256:373b722f3d842c650c4244493cf7034006cd75cc545a43ba5e4e0659224aae57; #17 exporting attestation manifest sha256:373b722f3d842c650c4244493cf7034006cd75cc545a43ba5e4e0659224aae57 0.1s done; #17 exporting manifest list sha256:6f6e56a7806b6f4c359cba770f5b6e1c94343604eed28498fb7a890d004fe677 0.0s done; #17 naming to docker.io/library/casestrainer-nginx:latest; #17 ...; ; #18 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #18 DONE 0.5s; ; #6 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #6 DONE 0.5s; ; #19 [frontend-prod internal] load .dockerignore; #19 transferring context: 834B 0.0s done; #19 DONE 0.0s; ; #20 [rqworker2 internal] load .dockerignore; #20 transferring context: 908B 0.0s done; #20 DONE 0.0s; ; #17 [nginx] exporting to image; #17 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #17 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #17 DONE 0.3s; ; #9 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.0s done; #9 DONE 0.1s; ; #21 [frontend-prod internal] load build context; #21 DONE 0.0s; ; #22 [rqworker2  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #22 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #22 DONE 0.1s; ; #23 [rqworker2 internal] load build context; #23 ...; ; #24 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.2s done; #24 DONE 0.2s; ; #23 [rqworker2 internal] load build context; #23 ...; ; #21 [frontend-prod internal] load build context; #21 transferring context: 9.26kB 0.1s done; #21 DONE 0.1s; ; #23 [rqworker2 internal] load build context; #23 ...; ; #25 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #25 CACHED; ; #26 [frontend-prod build-stage  2/10] WORKDIR /app; #26 CACHED; ; #27 [frontend-prod build-stage  3/10] COPY package*.json ./; #27 CACHED; ; #28 [frontend-prod build-stage  5/10] COPY public/ public/; #28 CACHED; ; #23 [rqworker1 internal] load build context; #23 transferring context: 131.80kB 0.3s done; #23 DONE 0.3s; ; #29 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #29 CACHED; ; #30 [rqworker2 11/17] COPY --chown=app:app templates/ /app/templates/; #30 CACHED; ; #31 [rqworker2  2/17] WORKDIR /app; #31 CACHED; ; #32 [rqworker2  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #32 CACHED; ; #33 [rqworker2  5/17] RUN pip install --no-cache-dir -r requirements.txt; #33 CACHED; ; #34 [rqworker2  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #34 CACHED; ; #35 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #35 CACHED; ; #36 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #36 CACHED; ; #37 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #37 CACHED; ; #38 [rqworker2  3/17] COPY requirements.txt requirements.txt; #38 CACHED; ; #39 [rqworker2 10/17] COPY --chown=app:app config/ /app/config/; #39 CACHED; ; #40 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #40 CACHED; ; #41 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #41 CACHED; ; #42 [rqworker2 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #42 CACHED; ; #43 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #43 CACHED; ; #44 [rqworker2 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #44 CACHED; ; #45 [nginx] resolving provenance for metadata file; #45 DONE 0.1s; ; #35 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #35 CACHED; ; #41 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #41 CACHED; ; #42 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #42 CACHED; ; #40 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #40 CACHED; ; #32 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #32 CACHED; ; #37 [backend  9/17] COPY --chown=app:app app/ /app/app/; #37 CACHED; ; #31 [backend  2/17] WORKDIR /app; #31 CACHED; ; #39 [backend 10/17] COPY --chown=app:app config/ /app/config/; #39 CACHED; ; #38 [backend  3/17] COPY requirements.txt requirements.txt; #38 CACHED; ; #30 [backend 11/17] COPY --chown=app:app templates/ /app/templates/; #30 CACHED; ; #34 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #34 CACHED; ; #36 [backend  8/17] COPY --chown=app:app src/ /app/src/; #36 CACHED; ; #33 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #33 CACHED; ; #43 [backend 12/17] COPY --chown=app:app static/ /app/static/; #43 CACHED; ; #29 [backend  7/17] RUN useradd --create-home --shell /bin/bash app; #29 CACHED; ; #44 [backend 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #44 CACHED; ; #46 [frontend-prod build-stage  6/10] COPY src/ src/; #46 DONE 0.3s; ; #47 [rqworker2] exporting to image; #47 exporting layers 0.1s done; #47 exporting manifest sha256:aecb4fbef0b1518639e2965d33c8516601a01882aaf5f2845ac0ed01e194a6ba 0.0s done; #47 exporting config sha256:e1b3e368144421f46825fbbef18dec462e0b34a31603bba0254e1ff85cb75b69 0.0s done; #47 exporting attestation manifest sha256:650f7fff8efac71930d4bac16ff53c5e990c284dfe75a37bf3f76eb3859fa7aa; #47 ...; ; #48 [frontend-prod build-stage  7/10] COPY index.html .; #48 DONE 0.5s; ; #47 [rqworker2] exporting to image; #47 exporting attestation manifest sha256:650f7fff8efac71930d4bac16ff53c5e990c284dfe75a37bf3f76eb3859fa7aa 0.3s done; #47 exporting manifest list sha256:e2028d9d4ed1181730277847c30873ac1c73097871de95776b9848d2fe15e7d5; #47 exporting manifest list sha256:e2028d9d4ed1181730277847c30873ac1c73097871de95776b9848d2fe15e7d5 0.3s done; #47 naming to docker.io/library/casestrainer-rqworker2:latest; #47 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #47 unpacking to docker.io/library/casestrainer-rqworker2:latest; #47 ...; ; #49 [frontend-prod build-stage  8/10] COPY vite.config.js .; #49 DONE 0.5s; ; #50 [rqworker1] exporting to image; #50 exporting layers 0.1s done; #50 exporting manifest sha256:c6189c81d66682490418510e4fe6ed08c581cdab504ee7152f643fede43a96b3 0.0s done; #50 exporting config sha256:ca7c25c0c9faca41ca7693170d186ab3765134db3844877b61a50133b6f828d0 0.0s done; #50 exporting attestation manifest sha256:8b9981f8d8fab7fba71491ea8c1fd41521f6fbe059d9657ca1599c6a9d799f46 0.3s done; #50 exporting manifest list sha256:702532a283e3b0686a7598bddaf54f57f3730124628016123d75b13230db9e9a 0.3s done; #50 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #50 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #50 DONE 1.3s; ; #47 [rqworker2] exporting to image; #47 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #47 DONE 1.3s; ; #51 [rqworker3] exporting to image; #51 exporting layers 0.1s done; #51 exporting manifest sha256:56ea5fafa73759695c11ecbb5d98c23241ae49ed9e4c58a408e9e3b9d33989c3 0.0s done; #51 exporting config sha256:0b1140d20f0c89686d33ed77d21a3fb205a8be0af94898893f9753a0a2c89636 0.0s done; #51 exporting attestation manifest sha256:10de172c07fec3e56c051f5a4d0a0b688bc2b60d98ea6d54dff477064ffbb898 0.3s done; #51 exporting manifest list sha256:976dce33353b9d6806a5efd92ccea65a0c83433eb86125d30896d69fe1ed1fcf 0.3s done; #51 naming to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #51 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #51 DONE 1.3s; ; #52 [backend] exporting to image; #52 exporting layers 0.1s done; #52 exporting manifest sha256:a529c96fd6e5bf0ac6690b848671fbf21ef9fd9a67d44bca6e23747cccc704cf 0.0s done; #52 exporting config sha256:ef4d6a88cee9dedfc3a71aa14d92702d5dd39ca80e9221256f4d3a1669c2eaa3 0.0s done; #52 exporting attestation manifest sha256:9817944b71a07abfd09474757e8305720eff9de6d248fc600449973450db67de 0.3s done; #52 exporting manifest list sha256:c5e87164d18b652370aca80a0e5979e3df947ef23bc75859012b7debb754317c 0.2s done; #52 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #52 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #52 DONE 1.3s; ; #53 [frontend-prod build-stage  9/10] RUN npm run build; #53 ...; ; #54 [backend] resolving provenance for metadata file; #54 DONE 0.2s; ; #55 [rqworker1] resolving provenance for metadata file; #55 DONE 0.1s; ; #56 [rqworker3] resolving provenance for metadata file; #56 DONE 0.3s; ; #57 [rqworker2] resolving provenance for metadata file; #57 DONE 0.0s; ; #53 [frontend-prod build-stage  9/10] RUN npm run build; #53 1.260 ; #53 1.260 > casestrainer-vue-new@0.6.5 build; #53 1.260 > vite build; #53 1.260 ; #53 2.672 vite v6.3.5 building for production...; #53 3.746 transforming...; #53 8.866 G 139 modules transformed.; #53 9.983 rendering chunks...; #53 14.12 computing gzip size...; #53 14.15 dist/index.html                              0.91 kB G gzip:  0.45 kB; #53 14.15 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB G gzip:  0.07 kB; #53 14.15 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB G gzip:  0.07 kB; #53 14.15 dist/assets/NotFound-CrLUfTg_.css            1.01 kB G gzip:  0.45 kB; #53 14.15 dist/assets/Docs-La2G-zWQ.css                1.39 kB G gzip:  0.46 kB; #53 14.15 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB G gzip:  0.57 kB; #53 14.15 dist/assets/index-Bmv2TN48.css             276.13 kB G gzip: 39.00 kB; #53 14.15 dist/assets/Docs-B_PEUc2v.js                 1.01 kB G gzip:  0.56 kB; #53 14.15 dist/assets/WordPlugin-Cx4VNgQH.js           1.20 kB G gzip:  0.72 kB; #53 14.15 dist/assets/BrowserExtension-BKvN5qfn.js     1.22 kB G gzip:  0.73 kB; #53 14.15 dist/assets/NotFound-Dm3Mz2W_.js             1.89 kB G gzip:  0.92 kB; #53 14.15 dist/assets/ApiDocs-DOFMowG8.js             23.31 kB G gzip:  4.00 kB; #53 14.15 dist/assets/vendor-C-1G2k3o.js              34.93 kB G gzip: 13.58 kB; #53 14.15 dist/assets/vue-DOX4hRq3.js                 91.40 kB G gzip: 34.95 kB; #53 14.15 dist/assets/index-BuRGSEkQ.js              157.18 kB G gzip: 46.34 kB; #53 14.15 G built in 11.12s; #53 DONE 14.3s; ; #58 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #58 DONE 0.4s; ; #9 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 CACHED; ; #59 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #59 DONE 0.1s; ; #60 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #60 DONE 0.5s; ; #61 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #61 DONE 0.2s; ; #62 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #62 DONE 0.1s; ; #63 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #63 DONE 0.4s; ; #64 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #64 DONE 0.4s; ; #65 [frontend-prod] exporting to image; #65 exporting layers; #65 exporting layers 0.6s done; #65 exporting manifest sha256:7840b374eba9ec90b4e18e6d5099eb0953ccbba1efac5ac0c2e81135ab6c0c83 0.0s done; #65 exporting config sha256:c4e0ad1af8b345bad51ee1dae56b5b46b5af475ca7d57492e341ca5592bfff4b 0.0s done; #65 exporting attestation manifest sha256:dc0ed506b9110e87d38cbf61173f193001e5b4e01337a07a9b3b007dcbdd2d87; #65 exporting attestation manifest sha256:dc0ed506b9110e87d38cbf61173f193001e5b4e01337a07a9b3b007dcbdd2d87 0.1s done; #65 exporting manifest list sha256:22ea35bf25b6b0727d37b5a845dcaba7ab7b62539867bc26e65e8d5b57c44305 0.0s done; #65 naming to docker.io/library/casestrainer-frontend-prod:latest done; #65 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #65 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.2s done; #65 DONE 1.1s; ; #66 [frontend-prod] resolving provenance for metadata file; #66 DONE 0.0s;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built
[2025-08-14 21:11:17] [INFO] Docker operation completed successfully: build
[2025-08-14 21:11:17] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 21:11:31] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:11:31] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 21:11:31] [INFO] Docker operation completed successfully: up
[2025-08-14 21:11:31] [INFO] Waiting for containers to stabilize...
[2025-08-14 21:11:42] [INFO] Performing application health check...
[2025-08-14 21:11:42] [INFO] Application health check passed
[2025-08-14 21:11:42] [INFO] Deployment completed successfully!
[2025-08-14 21:11:42] [INFO] Containers running: 7
[2025-08-14 21:11:42] [DEBUG] Launcher execution completed
[2025-08-14 21:15:20] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 21:15:20] [INFO] Environment: Production, Mode: Auto
[2025-08-14 21:15:20] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 21:15:20] [INFO] Checking prerequisites...
[2025-08-14 21:15:20] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 21:15:20] [INFO] Auto-detecting deployment mode...
[2025-08-14 21:15:21] [INFO] Vue source files are newer than dist files - rebuild needed
[2025-08-14 21:15:21] [INFO] Vue source files are newer than dist - performing build and Fast restart
[2025-08-14 21:15:21] [INFO] Building Vue frontend...
[2025-08-14 21:15:31] [INFO] Auto-detected mode: Fast
[2025-08-14 21:15:31] [INFO] Starting deployment in Fast mode...
[2025-08-14 21:15:31] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 21:15:31] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 21:15:35] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:15:35] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 21:15:35] [INFO] Docker operation completed successfully: down
[2025-08-14 21:15:35] [INFO] Recent changes in src - will rebuild images
[2025-08-14 21:15:35] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 21:15:35] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 21:15:41] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:15:41] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [frontend-prod internal] load build definition from Dockerfile.prod; #2 transferring dockerfile: 2.03kB 0.0s done; #2 DONE 0.0s; ; #3 [rqworker1 internal] load build definition from Dockerfile; #3 transferring dockerfile: 1.80kB 0.0s done; #3 DONE 0.1s; ; #4 [nginx internal] load build definition from Dockerfile; #4 transferring dockerfile: 652B 0.0s done; #4 DONE 0.1s; ; #5 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [nginx internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [auth] library/node:pull token for registry-1.docker.io; #7 DONE 0.0s; ; #8 [nginx internal] load .dockerignore; #8 transferring context: 2B done; #8 DONE 0.0s; ; #9 [auth] library/python:pull token for registry-1.docker.io; #9 DONE 0.0s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #10 [nginx internal] load build context; #10 DONE 0.0s; ; #11 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #11 DONE 0.1s; ; #11 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 DONE 0.1s; ; #10 [nginx internal] load build context; #10 transferring context: 97B 0.0s done; #10 DONE 0.0s; ; #12 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #12 CACHED; ; #13 [nginx 2/8] RUN apk add --no-cache curl; #13 CACHED; ; #14 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #14 CACHED; ; #15 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #15 CACHED; ; #16 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #16 CACHED; ; #17 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:4b413a9fe69c529b8e8ede22f08f8f95fd4a61bbefdf5bb28aeba4552713f6e2; #19 exporting attestation manifest sha256:4b413a9fe69c529b8e8ede22f08f8f95fd4a61bbefdf5bb28aeba4552713f6e2 0.1s done; #19 exporting manifest list sha256:c859b0107cb1e19a5cf813448f9301b67759e816157d5ca902849e339c113329 0.1s done; #19 naming to docker.io/library/casestrainer-nginx:latest; #19 ...; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.7s; ; #19 [nginx] exporting to image; #19 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.1s done; #19 DONE 0.5s; ; #5 [backend internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 0.7s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.1s done; #21 DONE 0.1s; ; #22 [backend internal] load .dockerignore; #22 transferring context: 908B 0.0s done; #22 DONE 0.1s; ; #11 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #11 DONE 0.1s; ; #23 [frontend-prod internal] load build context; #23 DONE 0.0s; ; #24 [rqworker3 internal] load build context; #24 DONE 0.0s; ; #25 [rqworker3  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #25 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #25 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #25 DONE 0.1s; ; #26 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #26 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #26 DONE 0.1s; ; #23 [frontend-prod internal] load build context; #23 transferring context: 9.26kB 0.0s done; #23 DONE 0.1s; ; #24 [backend internal] load build context; #24 ...; ; #27 [frontend-prod build-stage  5/10] COPY public/ public/; #27 CACHED; ; #28 [frontend-prod build-stage  3/10] COPY package*.json ./; #28 CACHED; ; #29 [frontend-prod build-stage  2/10] WORKDIR /app; #29 CACHED; ; #30 [frontend-prod build-stage  8/10] COPY vite.config.js .; #30 CACHED; ; #31 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #31 CACHED; ; #32 [frontend-prod build-stage  7/10] COPY index.html .; #32 CACHED; ; #33 [frontend-prod build-stage  9/10] RUN npm run build; #33 CACHED; ; #34 [frontend-prod build-stage  6/10] COPY src/ src/; #34 CACHED; ; #35 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #35 CACHED; ; #36 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #36 CACHED; ; #37 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #37 CACHED; ; #38 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #38 CACHED; ; #39 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #39 CACHED; ; #40 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #40 CACHED; ; #41 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #41 CACHED; ; #24 [backend internal] load build context; #24 transferring context: 131.80kB 0.2s done; #24 transferring context: 131.80kB 0.2s done; #24 DONE 0.3s; ; #42 [rqworker1  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #42 CACHED; ; #43 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #43 CACHED; ; #44 [rqworker1 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #44 CACHED; ; #45 [rqworker1  2/17] WORKDIR /app; #45 CACHED; ; #46 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #46 CACHED; ; #47 [rqworker1 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #47 CACHED; ; #48 [rqworker1 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #48 CACHED; ; #49 [rqworker1  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #49 CACHED; ; #50 [rqworker1 12/17] COPY --chown=app:app static/ /app/static/; #50 CACHED; ; #51 [rqworker1  3/17] COPY requirements.txt requirements.txt; #51 CACHED; ; #52 [rqworker1  5/17] RUN pip install --no-cache-dir -r requirements.txt; #52 CACHED; ; #53 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #53 CACHED; ; #54 [rqworker1  7/17] RUN useradd --create-home --shell /bin/bash app; #54 CACHED; ; #55 [rqworker1  9/17] COPY --chown=app:app app/ /app/app/; #55 CACHED; ; #56 [rqworker1 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 CACHED; ; #57 [rqworker1 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #57 CACHED; ; #58 [frontend-prod] exporting to image; #58 exporting layers 0.0s done; #58 exporting manifest sha256:7840b374eba9ec90b4e18e6d5099eb0953ccbba1efac5ac0c2e81135ab6c0c83 0.0s done; #58 exporting config sha256:c4e0ad1af8b345bad51ee1dae56b5b46b5af475ca7d57492e341ca5592bfff4b 0.0s done; #58 exporting attestation manifest sha256:48520c5e100e60d9c07de098bac68afa0214401b39657ecf45617131ae8dd821; #58 ...; ; #42 [rqworker2  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #42 CACHED; ; #45 [rqworker2  2/17] WORKDIR /app; #45 CACHED; ; #43 [rqworker2 11/17] COPY --chown=app:app templates/ /app/templates/; #43 CACHED; ; #44 [rqworker2 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #44 CACHED; ; #47 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #47 CACHED; ; #50 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #50 CACHED; ; #46 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #46 CACHED; ; #51 [rqworker2  3/17] COPY requirements.txt requirements.txt; #51 CACHED; ; #53 [rqworker2 10/17] COPY --chown=app:app config/ /app/config/; #53 CACHED; ; #55 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #55 CACHED; ; #54 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #54 CACHED; ; #48 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #48 CACHED; ; #49 [rqworker2  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #49 CACHED; ; #56 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 CACHED; ; #52 [rqworker2  5/17] RUN pip install --no-cache-dir -r requirements.txt; #52 CACHED; ; #57 [rqworker2 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #57 CACHED; ; #58 [frontend-prod] exporting to image; #58 exporting attestation manifest sha256:48520c5e100e60d9c07de098bac68afa0214401b39657ecf45617131ae8dd821 0.1s done; #58 exporting manifest list sha256:181aa910016dc6af00139ccdb748f09e5cffddd0a150f2bd8c7f7f1139027423; #58 ...; ; #59 [nginx] resolving provenance for metadata file; #59 DONE 0.0s; ; #58 [frontend-prod] exporting to image; #58 exporting manifest list sha256:181aa910016dc6af00139ccdb748f09e5cffddd0a150f2bd8c7f7f1139027423 0.1s done; #58 naming to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #58 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #58 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #58 DONE 0.6s; ; #60 [backend] exporting to image; #60 exporting layers 0.0s done; #60 exporting manifest sha256:a529c96fd6e5bf0ac6690b848671fbf21ef9fd9a67d44bca6e23747cccc704cf 0.1s done; #60 exporting config sha256:ef4d6a88cee9dedfc3a71aa14d92702d5dd39ca80e9221256f4d3a1669c2eaa3 0.1s done; #60 exporting attestation manifest sha256:c1c84bc347f719470182c1c644cfd51a67dc18570f18bd74469580fe6fa7e236; #60 exporting attestation manifest sha256:c1c84bc347f719470182c1c644cfd51a67dc18570f18bd74469580fe6fa7e236 0.4s done; #60 exporting manifest list sha256:87fa67c0c971b060fbc162c7213181d57994607035bbb0ed52e4c989cc0d6127; #60 exporting manifest list sha256:87fa67c0c971b060fbc162c7213181d57994607035bbb0ed52e4c989cc0d6127 0.2s done; #60 naming to docker.io/library/casestrainer-backend:latest; #60 ...; ; #61 [rqworker2] exporting to image; #61 exporting layers 0.0s done; #61 exporting manifest sha256:aecb4fbef0b1518639e2965d33c8516601a01882aaf5f2845ac0ed01e194a6ba 0.0s done; #61 exporting config sha256:e1b3e368144421f46825fbbef18dec462e0b34a31603bba0254e1ff85cb75b69 0.1s done; #61 exporting attestation manifest sha256:f0c064392efeafd00bd864b836507399e357ab5927f77072b6d385442393e502 0.4s done; #61 exporting manifest list sha256:79980c812ae4c9dd2e9c3eb6be3a3958f29fdc09b4f8a4c58b754fa54345df12 0.2s done; #61 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #61 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #61 DONE 1.0s; ; #62 [rqworker3] exporting to image; #62 exporting layers 0.0s done; #62 exporting manifest sha256:56ea5fafa73759695c11ecbb5d98c23241ae49ed9e4c58a408e9e3b9d33989c3 0.0s done; #62 exporting config sha256:0b1140d20f0c89686d33ed77d21a3fb205a8be0af94898893f9753a0a2c89636 0.0s done; #62 exporting attestation manifest sha256:bce92e0ea0795705a0ab05218bd8a7977aced9a25db6fb693f4adaf01053fe1e 0.4s done; #62 exporting manifest list sha256:d4cbf41634c0995cc4c3db9d5f3b05c383a3e7667a78a1c639f368b78e9a46ee 0.2s done; #62 naming to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #62 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #62 DONE 1.0s; ; #60 [backend] exporting to image; #60 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #60 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #60 DONE 1.1s; ; #63 [rqworker1] exporting to image; #63 exporting layers 0.0s done; #63 exporting manifest sha256:c6189c81d66682490418510e4fe6ed08c581cdab504ee7152f643fede43a96b3 0.0s done; #63 exporting config sha256:ca7c25c0c9faca41ca7693170d186ab3765134db3844877b61a50133b6f828d0 0.1s done; #63 exporting attestation manifest sha256:f3a81ab0f293fc724c5efd6a84488d2c353c0dcca74a575c678887f8513d92ec 0.4s done; #63 exporting manifest list sha256:5b5449f737f7196b1f3a0acafd9762987a96e49e4d3dca83c192c2e375ee96ce 0.2s done; #63 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #63 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #63 DONE 1.1s; ; #64 [frontend-prod] resolving provenance for metadata file; #64 DONE 0.1s; ; #65 [rqworker2] resolving provenance for metadata file; #65 DONE 0.4s; ; #66 [rqworker3] resolving provenance for metadata file; #66 DONE 0.3s; ; #67 [backend] resolving provenance for metadata file; #67 DONE 0.2s; ; #68 [rqworker1] resolving provenance for metadata file; #68 DONE 0.1s;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built
[2025-08-14 21:15:41] [INFO] Docker operation completed successfully: build
[2025-08-14 21:15:41] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 21:15:56] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:15:56] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 21:15:56] [INFO] Docker operation completed successfully: up
[2025-08-14 21:15:56] [INFO] Waiting for containers to stabilize...
[2025-08-14 21:16:07] [INFO] Performing application health check...
[2025-08-14 21:16:07] [INFO] Application health check passed
[2025-08-14 21:16:07] [INFO] Deployment completed successfully!
[2025-08-14 21:16:07] [INFO] Containers running: 7
[2025-08-14 21:16:07] [DEBUG] Launcher execution completed
[2025-08-14 21:32:31] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 21:32:31] [INFO] Environment: Production, Mode: Auto
[2025-08-14 21:32:31] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 21:32:31] [INFO] Checking prerequisites...
[2025-08-14 21:32:31] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 21:32:31] [INFO] Auto-detecting deployment mode...
[2025-08-14 21:32:32] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-14 21:32:32] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 21:32:32] [INFO] Auto-detected mode: Fast
[2025-08-14 21:32:32] [INFO] Starting deployment in Fast mode...
[2025-08-14 21:32:32] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 21:32:32] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 21:32:36] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:32:36] [DEBUG] Docker output:  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 21:32:36] [INFO] Docker operation completed successfully: down
[2025-08-14 21:32:36] [INFO] Recent changes in src - will rebuild images
[2025-08-14 21:32:36] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 21:32:36] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 21:33:10] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:33:10] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [backend internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [nginx internal] load build definition from Dockerfile; #3 transferring dockerfile: 652B 0.0s done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.1s; ; #5 [backend internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B done; #7 DONE 0.1s; ; #8 [nginx internal] load build context; #8 DONE 0.0s; ; #9 [auth] library/python:pull token for registry-1.docker.io; #9 DONE 0.0s; ; #10 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #11 [auth] library/node:pull token for registry-1.docker.io; #11 DONE 0.0s; ; #8 [nginx internal] load build context; #8 transferring context: 97B 0.0s done; #8 DONE 0.1s; ; #12 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #12 CACHED; ; #13 [nginx 2/8] RUN apk add --no-cache curl; #13 CACHED; ; #14 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #14 CACHED; ; #15 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #15 CACHED; ; #16 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #16 CACHED; ; #17 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #19 DONE 0.9s; ; #20 [frontend-prod internal] load .dockerignore; #20 transferring context: 834B 0.0s done; #20 DONE 0.1s; ; #21 [nginx] exporting to image; #21 exporting layers 0.0s done; #21 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af 0.0s done; #21 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #21 exporting attestation manifest sha256:f934c9ac12d62038f8d24f58f305fd63102a255246aa5a7b371ae3997d644ed9 0.1s done; #21 exporting manifest list sha256:0bf42fd662a7c9e318e17fea39e1c1239f4f56b8c559d17713d6e42050d62406 0.0s done; #21 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #21 unpacking to docker.io/library/casestrainer-nginx:latest 0.1s done; #21 DONE 0.6s; ; #5 [backend internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 1.1s; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #23 [backend internal] load .dockerignore; #23 transferring context: 908B 0.0s done; #23 transferring context: 908B 0.0s done; #23 DONE 0.1s; ; #24 [rqworker1 internal] load build context; #24 DONE 0.0s; ; #25 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #25 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #25 ...; ; #24 [backend internal] load build context; #24 DONE 0.0s; ; #26 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #26 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.2s done; #26 DONE 0.2s; ; #25 [backend  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #25 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.2s done; #25 DONE 0.2s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 68.69kB 0.1s done; #22 DONE 0.1s; ; #27 [frontend-prod build-stage  2/10] WORKDIR /app; #27 CACHED; ; #28 [frontend-prod build-stage  3/10] COPY package*.json ./; #28 CACHED; ; #29 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #29 CACHED; ; #30 [frontend-prod build-stage  5/10] COPY public/ public/; #30 CACHED; ; #24 [rqworker3 internal] load build context; #24 transferring context: 248.07kB 0.3s done; #24 transferring context: 248.07kB 0.3s done; #24 DONE 0.3s; ; #31 [frontend-prod build-stage  6/10] COPY src/ src/; #31 DONE 0.4s; ; #32 [nginx] resolving provenance for metadata file; #32 DONE 0.0s; ; #33 [rqworker1  3/17] COPY requirements.txt requirements.txt; #33 CACHED; ; #34 [rqworker1  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #34 CACHED; ; #35 [rqworker1  5/17] RUN pip install --no-cache-dir -r requirements.txt; #35 CACHED; ; #36 [rqworker1  2/17] WORKDIR /app; #36 CACHED; ; #37 [rqworker1  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #37 CACHED; ; #38 [rqworker1  7/17] RUN useradd --create-home --shell /bin/bash app; #38 CACHED; ; #39 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #39 ...; ; #40 [frontend-prod build-stage  7/10] COPY index.html .; #40 DONE 0.2s; ; #41 [frontend-prod build-stage  8/10] COPY vite.config.js .; #41 DONE 0.2s; ; #39 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #39 DONE 0.5s; ; #42 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #42 DONE 0.2s; ; #43 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #43 DONE 0.2s; ; #44 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #44 DONE 0.2s; ; #45 [rqworker3 12/17] COPY --chown=app:app static/ /app/static/; #45 DONE 1.2s; ; #46 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #46 DONE 0.2s; ; #47 [rqworker3 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #47 DONE 0.8s; ; #48 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #48 DONE 0.5s; ; #49 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #49 DONE 0.6s; ; #50 [rqworker1 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #50 DONE 0.6s; ; #51 [rqworker2] exporting to image; #51 exporting layers; #51 ...; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 0.991 ; #52 0.991 > casestrainer-vue-new@0.6.5 build; #52 0.991 > vite build; #52 0.991 ; #52 1.827 vite v6.3.5 building for production...; #52 2.240 transforming...; #52 9.837 G 139 modules transformed.; #52 ...; ; #53 [rqworker1] exporting to image; #53 exporting layers 5.8s done; #53 exporting manifest sha256:d3c8b4856832906e5c92a1c0b96cccc070c6fec794367d0f258d655c51c65045; #53 ...; ; #51 [rqworker2] exporting to image; #51 exporting layers 5.8s done; #51 exporting manifest sha256:4d907e9c8d61870621d2162ee71a230982af13a041cc8fcab937b3405a2f4b32; #51 exporting manifest sha256:4d907e9c8d61870621d2162ee71a230982af13a041cc8fcab937b3405a2f4b32 0.2s done; #51 exporting config sha256:253b5254eba5878ae8cb8eee992ce08ac8dd08a2f933b0f5af0ee18dd6116ba3; #51 exporting config sha256:253b5254eba5878ae8cb8eee992ce08ac8dd08a2f933b0f5af0ee18dd6116ba3 0.2s done; #51 exporting attestation manifest sha256:38b8222a5049347d2812cbc52b8c0816e57c8004ce11fa5865010be738488647; #51 exporting attestation manifest sha256:38b8222a5049347d2812cbc52b8c0816e57c8004ce11fa5865010be738488647 0.6s done; #51 exporting manifest list sha256:6b88378ee80ca34f9ee2c181d0edb8fb3917e3b8e074d9948466d0dfd81d8315; #51 exporting manifest list sha256:6b88378ee80ca34f9ee2c181d0edb8fb3917e3b8e074d9948466d0dfd81d8315 0.2s done; #51 naming to docker.io/library/casestrainer-rqworker2:latest; #51 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #51 unpacking to docker.io/library/casestrainer-rqworker2:latest; #51 ...; ; #54 [backend] exporting to image; #54 exporting layers 5.8s done; #54 exporting manifest sha256:7d15ed32803728065e43271fe9ca4329a43ea5a03708b164c35fd004419e554e 0.2s done; #54 exporting config sha256:8dd400d13269f628661f4da8ba81b311099e43253c3f98b306e6fa1a56024667 0.3s done; #54 exporting attestation manifest sha256:203e9add61927d3d5f20a84d9470386d7773c9d8d10515a9f7f6b31620a0a7c0 0.5s done; #54 exporting manifest list sha256:8dcd5c715ad10583aeb161944a84ce620fd2a8cda89ec832edf1af9c7f2bb5a4 0.3s done; #54 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #54 unpacking to docker.io/library/casestrainer-backend:latest; #54 ...; ; #55 [rqworker3] exporting to image; #55 exporting layers 5.8s done; #55 exporting manifest sha256:e257016f96e434b54ffecdfe4033c13fda6ce0400135c38fe2bee73e5531e8c8 0.2s done; #55 exporting config sha256:90f1212f2337ba9fdb21c9c12b59e9db2a6a9439ad2f8e0507b43c96e2e6e7a8 0.2s done; #55 exporting attestation manifest sha256:67596535557a348bcad12f594838da4b96e0f609911b80df02823babce7f6289 0.5s done; #55 exporting manifest list sha256:603e644dcaed2f1c404a167de34c31d32fa43c02c28eb1537c07ef8edba57b01 0.2s done; #55 naming to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #55 unpacking to docker.io/library/casestrainer-rqworker3:latest; #55 ...; ; #53 [rqworker1] exporting to image; #53 exporting manifest sha256:d3c8b4856832906e5c92a1c0b96cccc070c6fec794367d0f258d655c51c65045 0.2s done; #53 exporting config sha256:72cd78041f7f777e5c99fc2264162a53340ca47be3e70f5fc5360afe4a25386b 0.2s done; #53 exporting attestation manifest sha256:4634d1b44bee96f8120ff5215a6f41666bca6ac99493da1c27bf441c6e9d1157 0.5s done; #53 exporting manifest list sha256:3f928cc26d64621fe63dfdf28f3dc710f8526f01ba17fba736557512e2125c3b 0.2s done; #53 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #53 unpacking to docker.io/library/casestrainer-rqworker1:latest; #53 ...; ; #55 [rqworker3] exporting to image; #55 unpacking to docker.io/library/casestrainer-rqworker3:latest 5.5s done; #55 DONE 13.1s; ; #53 [rqworker1] exporting to image; #53 unpacking to docker.io/library/casestrainer-rqworker1:latest 5.6s done; #53 DONE 13.2s; ; #54 [backend] exporting to image; #54 unpacking to docker.io/library/casestrainer-backend:latest 5.7s done; #54 DONE 13.2s; ; #51 [rqworker2] exporting to image; #51 unpacking to docker.io/library/casestrainer-rqworker2:latest 5.5s done; #51 DONE 13.1s; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 11.66 rendering chunks...; #52 ...; ; #56 [backend] resolving provenance for metadata file; #56 DONE 0.4s; ; #57 [rqworker2] resolving provenance for metadata file; #57 DONE 0.2s; ; #58 [rqworker3] resolving provenance for metadata file; #58 DONE 0.5s; ; #59 [rqworker1] resolving provenance for metadata file; #59 DONE 0.0s; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 22.88 computing gzip size...; #52 22.94 dist/index.html                              0.91 kB G gzip:  0.45 kB; #52 22.94 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB G gzip:  0.07 kB; #52 22.94 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB G gzip:  0.07 kB; #52 22.94 dist/assets/NotFound-CrLUfTg_.css            1.01 kB G gzip:  0.45 kB; #52 22.94 dist/assets/Docs-La2G-zWQ.css                1.39 kB G gzip:  0.46 kB; #52 22.94 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB G gzip:  0.57 kB; #52 22.94 dist/assets/index-HY6Xlwcx.css             276.13 kB G gzip: 39.00 kB; #52 22.94 dist/assets/Docs-B9twhlft.js                 1.01 kB G gzip:  0.56 kB; #52 22.95 dist/assets/WordPlugin-BydrWqI2.js           1.20 kB G gzip:  0.71 kB; #52 22.95 dist/assets/BrowserExtension-kiAJk5t4.js     1.22 kB G gzip:  0.73 kB; #52 22.95 dist/assets/NotFound-VWUpSW8v.js             1.89 kB G gzip:  0.92 kB; #52 22.95 dist/assets/ApiDocs-DsK76gr-.js             23.31 kB G gzip:  4.00 kB; #52 22.95 dist/assets/vendor-C-1G2k3o.js              34.93 kB G gzip: 13.58 kB; #52 22.95 dist/assets/vue-DOX4hRq3.js                 91.40 kB G gzip: 34.95 kB; #52 22.95 dist/assets/index-BR-7SHvu.js              157.18 kB G gzip: 46.34 kB; #52 22.95 G built in 20.99s; #52 DONE 23.8s; ; #60 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #60 DONE 0.5s; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 CACHED; ; #61 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #61 DONE 0.1s; ; #62 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #62 DONE 0.5s; ; #63 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #63 DONE 0.2s; ; #64 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #64 DONE 0.2s; ; #65 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #65 DONE 0.5s; ; #66 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #66 DONE 0.5s; ; #67 [frontend-prod] exporting to image; #67 exporting layers; #67 exporting layers 0.7s done; #67 exporting manifest sha256:4ef698a17ce53941b569e99fca76bcde793166c1736c367ce2afbb94a4989c2c 0.1s done; #67 exporting config sha256:780039e9f66350cf17d261172a1756aa88112f183055c3be6c1407f672549a36 0.0s done; #67 exporting attestation manifest sha256:b0eac4dc97ca2145c0a9cd3d783cf8a0f548d0b51798a8fc0af342c4f8577207; #67 exporting attestation manifest sha256:b0eac4dc97ca2145c0a9cd3d783cf8a0f548d0b51798a8fc0af342c4f8577207 0.1s done; #67 exporting manifest list sha256:1af321dc8a734b0a4fcdc6984cf3ad035f56c16f292251cf27371f32340f0d10 0.0s done; #67 naming to docker.io/library/casestrainer-frontend-prod:latest; #67 naming to docker.io/library/casestrainer-frontend-prod:latest done; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.3s done; #67 DONE 1.3s; ; #68 [frontend-prod] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built
[2025-08-14 21:33:10] [INFO] Docker operation completed successfully: build
[2025-08-14 21:33:10] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 21:33:26] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:33:26] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 21:33:26] [INFO] Docker operation completed successfully: up
[2025-08-14 21:33:26] [INFO] Waiting for containers to stabilize...
[2025-08-14 21:33:37] [INFO] Performing application health check...
[2025-08-14 21:33:37] [INFO] Application health check passed
[2025-08-14 21:33:37] [INFO] Deployment completed successfully!
[2025-08-14 21:33:37] [INFO] Containers running: 7
[2025-08-14 21:33:37] [DEBUG] Launcher execution completed
[2025-08-14 21:40:06] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 21:40:06] [INFO] Environment: Production, Mode: Auto
[2025-08-14 21:40:06] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 21:40:06] [INFO] Checking prerequisites...
[2025-08-14 21:40:06] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 21:40:06] [INFO] Auto-detecting deployment mode...
[2025-08-14 21:40:07] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-14 21:40:07] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 21:40:07] [INFO] Auto-detected mode: Fast
[2025-08-14 21:40:07] [INFO] Starting deployment in Fast mode...
[2025-08-14 21:40:07] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 21:40:07] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 21:40:11] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:40:11] [DEBUG] Docker output:  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 21:40:11] [INFO] Docker operation completed successfully: down
[2025-08-14 21:40:11] [INFO] Recent changes in src - will rebuild images
[2025-08-14 21:40:11] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 21:40:11] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 21:40:46] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:40:46] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker3 internal] load build definition from Dockerfile; #2 DONE 0.0s; ; #3 [frontend-prod internal] load build definition from Dockerfile.prod; #3 transferring dockerfile: 2.03kB 0.0s done; #3 DONE 0.1s; ; #2 [rqworker3 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.1s done; #2 DONE 0.2s; ; #4 [nginx internal] load build definition from Dockerfile; #4 transferring dockerfile: 652B 0.0s done; #4 DONE 0.1s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [auth] library/node:pull token for registry-1.docker.io; #6 DONE 0.0s; ; #7 [auth] library/python:pull token for registry-1.docker.io; #7 DONE 0.0s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #8 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #8 DONE 0.2s; ; #9 [nginx internal] load .dockerignore; #9 transferring context: 2B 0.0s done; #9 DONE 0.1s; ; #10 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #11 [nginx internal] load build context; #11 transferring context: 97B 0.0s done; #11 DONE 0.1s; ; #12 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #12 CACHED; ; #13 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #13 CACHED; ; #14 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #14 CACHED; ; #15 [nginx 2/8] RUN apk add --no-cache curl; #15 CACHED; ; #16 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #16 CACHED; ; #17 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:cff559150534fcb235aec513a4c30af7c22925e63245ba70ad9cb9e4897009a3; #19 exporting attestation manifest sha256:cff559150534fcb235aec513a4c30af7c22925e63245ba70ad9cb9e4897009a3 0.2s done; #19 exporting manifest list sha256:4c6cfe0bea15569ecfa99ee28fbfeeac4b4bb3a30c93ce999ff30e0a9ba22a90; #19 exporting manifest list sha256:4c6cfe0bea15569ecfa99ee28fbfeeac4b4bb3a30c93ce999ff30e0a9ba22a90 0.1s done; #19 naming to docker.io/library/casestrainer-nginx:latest; #19 ...; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 1.0s; ; #19 [nginx] exporting to image; #19 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 unpacking to docker.io/library/casestrainer-nginx:latest; #19 ...; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.1s; ; #5 [backend internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 1.0s; ; #19 [nginx] exporting to image; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.1s done; #19 DONE 0.7s; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #23 [rqworker3 internal] load .dockerignore; #23 transferring context: 908B 0.0s done; #23 DONE 0.1s; ; #24 [rqworker3 internal] load build context; #24 DONE 0.0s; ; #25 [rqworker3  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #25 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #25 ...; ; #26 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #26 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.2s done; #26 DONE 0.2s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 68.79kB 0.0s done; #22 DONE 0.1s; ; #25 [rqworker3  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #25 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.2s done; #25 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.2s done; #25 DONE 0.3s; ; #27 [frontend-prod build-stage  2/10] WORKDIR /app; #27 CACHED; ; #28 [frontend-prod build-stage  3/10] COPY package*.json ./; #28 CACHED; ; #29 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #29 CACHED; ; #30 [frontend-prod build-stage  5/10] COPY public/ public/; #30 CACHED; ; #24 [rqworker2 internal] load build context; #24 transferring context: 171.40kB 0.2s done; #24 transferring context: 171.40kB 0.2s done; #24 DONE 0.3s; ; #31 [rqworker3  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #31 CACHED; ; #32 [rqworker3  5/17] RUN pip install --no-cache-dir -r requirements.txt; #32 CACHED; ; #33 [rqworker3  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #33 CACHED; ; #34 [rqworker3  2/17] WORKDIR /app; #34 CACHED; ; #35 [rqworker3  3/17] COPY requirements.txt requirements.txt; #35 CACHED; ; #36 [rqworker3  7/17] RUN useradd --create-home --shell /bin/bash app; #36 CACHED; ; #37 [nginx] resolving provenance for metadata file; #37 DONE 0.1s; ; #38 [frontend-prod build-stage  6/10] COPY src/ src/; #38 DONE 0.4s; ; #39 [frontend-prod build-stage  7/10] COPY index.html .; #39 DONE 0.2s; ; #40 [rqworker3  8/17] COPY --chown=app:app src/ /app/src/; #40 ...; ; #41 [frontend-prod build-stage  8/10] COPY vite.config.js .; #41 DONE 0.1s; ; #40 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #40 DONE 0.5s; ; #42 [rqworker3  9/17] COPY --chown=app:app app/ /app/app/; #42 DONE 0.2s; ; #43 [rqworker3 10/17] COPY --chown=app:app config/ /app/config/; #43 DONE 0.2s; ; #44 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #44 DONE 0.2s; ; #45 [rqworker3 12/17] COPY --chown=app:app static/ /app/static/; #45 DONE 1.4s; ; #46 [rqworker1 13/17] COPY --chown=app:app VERSION /app/VERSION; #46 DONE 0.3s; ; #47 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #47 DONE 0.7s; ; #48 [rqworker3 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #48 DONE 0.6s; ; #49 [rqworker1 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #49 DONE 0.5s; ; #50 [backend 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #50 DONE 0.6s; ; #51 [backend] exporting to image; #51 exporting layers; #51 ...; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 1.292 ; #52 1.292 > casestrainer-vue-new@0.6.5 build; #52 1.292 > vite build; #52 1.292 ; #52 2.847 vite v6.3.5 building for production...; #52 3.410 transforming...; #52 ...; ; #51 [backend] exporting to image; #51 exporting layers 5.6s done; #51 exporting manifest sha256:d6976ed6d76e2ee36afbc7f7be1be5578c4ac01fed7aee6ba973c9330ee4e4ef; #51 exporting manifest sha256:d6976ed6d76e2ee36afbc7f7be1be5578c4ac01fed7aee6ba973c9330ee4e4ef 0.1s done; #51 exporting config sha256:563be8e016c9febee6e569101c6d0883ffb359f19400f308f2c846f3bad019b5; #51 exporting config sha256:563be8e016c9febee6e569101c6d0883ffb359f19400f308f2c846f3bad019b5 0.2s done; #51 exporting attestation manifest sha256:e8ef8815d61ca096c3f446f596f471ec8f7957da7bb54a20c329c9303c9982e0; #51 exporting attestation manifest sha256:e8ef8815d61ca096c3f446f596f471ec8f7957da7bb54a20c329c9303c9982e0 0.5s done; #51 exporting manifest list sha256:4422ff79f363402e9ce6173faa702a87d74421d2ca082c6b4270fbe1629ee0df; #51 exporting manifest list sha256:4422ff79f363402e9ce6173faa702a87d74421d2ca082c6b4270fbe1629ee0df 0.3s done; #51 naming to docker.io/library/casestrainer-backend:latest; #51 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #51 unpacking to docker.io/library/casestrainer-backend:latest; #51 ...; ; #53 [rqworker1] exporting to image; #53 exporting layers 5.6s done; #53 exporting manifest sha256:e425cd87ef42f706e7774d4407f47e861d9e6126bb06789911ae2daaa9766d0f 0.1s done; #53 exporting config sha256:e53c1f18e13e061db1cb8e577a5de57336cb1d16eac1ffe9fa4a2a86683e58d9 0.2s done; #53 exporting attestation manifest sha256:7bc5c7a89e89d04aab9a8c0c3c654b11907b303e7ca417587cd14dfa23310acc 0.4s done; #53 exporting manifest list sha256:132aa19e7524d83c6455c28111c33ca4e4ebe95bdd2cf50a9b35958b4ccceedd 0.3s done; #53 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #53 unpacking to docker.io/library/casestrainer-rqworker1:latest; #53 ...; ; #54 [rqworker2] exporting to image; #54 exporting layers 5.6s done; #54 exporting manifest sha256:21595c12ca58082d1aafc7391b946314d0b87119858620ea489dd178942d9bea 0.1s done; #54 exporting config sha256:5567a6f3e0ebc4d03194fa4f2ba67e01ed95092cc5ab45722382a7afd51ee28b 0.2s done; #54 exporting attestation manifest sha256:10058bab655ea2f2922ca526f72aa6c4c1e3b00390df77449b975f1c43b32995 0.5s done; #54 exporting manifest list sha256:25265d113fa643038c80642478a7758be1fb28109e001f3491e1297d89b3ef3c 0.3s done; #54 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #54 unpacking to docker.io/library/casestrainer-rqworker2:latest; #54 ...; ; #55 [rqworker3] exporting to image; #55 exporting layers 5.6s done; #55 exporting manifest sha256:869317db619e0339714ac66f3e29f5564a11cfe285160f4fff37bcda2aeb2c78 0.2s done; #55 exporting config sha256:9246df1198e4167ab115122e4cb57ee23247cff58d3b0c54a268a25f32b62854 0.2s done; #55 exporting attestation manifest sha256:690e6c5faa3f4aa08f6de5f907f2454d836b0160da849a79357c1e6e81105a9f 0.7s done; #55 exporting manifest list sha256:6df7a911177b2a72141d1238a8f69ca80c60724899f6e6a8702e3ca33c78df29 0.3s done; #55 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #55 unpacking to docker.io/library/casestrainer-rqworker3:latest; #55 ...; ; #54 [rqworker2] exporting to image; #54 unpacking to docker.io/library/casestrainer-rqworker2:latest 5.0s done; #54 ...; ; #53 [rqworker1] exporting to image; #53 unpacking to docker.io/library/casestrainer-rqworker1:latest 5.0s done; #53 DONE 12.3s; ; #54 [rqworker2] exporting to image; #54 DONE 12.3s; ; #51 [backend] exporting to image; #51 unpacking to docker.io/library/casestrainer-backend:latest 5.0s done; #51 DONE 12.3s; ; #55 [rqworker3] exporting to image; #55 unpacking to docker.io/library/casestrainer-rqworker3:latest 5.0s done; #55 DONE 12.4s; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 10.94 G 139 modules transformed.; #52 13.53 rendering chunks...; #52 ...; ; #56 [backend] resolving provenance for metadata file; #56 DONE 0.3s; ; #57 [rqworker2] resolving provenance for metadata file; #57 DONE 0.4s; ; #58 [rqworker1] resolving provenance for metadata file; #58 DONE 0.2s; ; #59 [rqworker3] resolving provenance for metadata file; #59 DONE 0.1s; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 23.12 computing gzip size...; #52 23.17 dist/index.html                              0.91 kB G gzip:  0.46 kB; #52 23.18 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB G gzip:  0.07 kB; #52 23.18 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB G gzip:  0.07 kB; #52 23.18 dist/assets/NotFound-CrLUfTg_.css            1.01 kB G gzip:  0.45 kB; #52 23.18 dist/assets/Docs-La2G-zWQ.css                1.39 kB G gzip:  0.46 kB; #52 23.18 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB G gzip:  0.57 kB; #52 23.18 dist/assets/index-BTPD7yL5.css             276.13 kB G gzip: 39.00 kB; #52 23.18 dist/assets/Docs-8acI06QQ.js                 1.01 kB G gzip:  0.56 kB; #52 23.18 dist/assets/WordPlugin-oOrrqf_b.js           1.20 kB G gzip:  0.72 kB; #52 23.19 dist/assets/BrowserExtension-DPMMZrZh.js     1.22 kB G gzip:  0.73 kB; #52 23.19 dist/assets/NotFound-B6Gz_glL.js             1.89 kB G gzip:  0.92 kB; #52 23.19 dist/assets/ApiDocs-D8P7fldq.js             23.31 kB G gzip:  4.00 kB; #52 23.19 dist/assets/vendor-C-1G2k3o.js              34.93 kB G gzip: 13.58 kB; #52 23.19 dist/assets/vue-DOX4hRq3.js                 91.40 kB G gzip: 34.95 kB; #52 23.19 dist/assets/index-C0_jzZ44.js              158.65 kB G gzip: 46.87 kB; #52 23.19 G built in 20.17s; #52 DONE 23.9s; ; #60 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #60 DONE 0.6s; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 CACHED; ; #61 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #61 DONE 0.1s; ; #62 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #62 DONE 0.4s; ; #63 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #63 DONE 0.2s; ; #64 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #64 DONE 0.2s; ; #65 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #65 DONE 0.6s; ; #66 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #66 DONE 0.7s; ; #67 [frontend-prod] exporting to image; #67 exporting layers; #67 exporting layers 0.7s done; #67 exporting manifest sha256:05cc44cafc8b6d3c87447f2be22e19ffcce52a90f60407cbbb14c01301bdc8b5 0.0s done; #67 exporting config sha256:97f805f2a5c819a6b1297cc8fd46e804896599ffbadeeccfddda8997f3bab41b 0.0s done; #67 exporting attestation manifest sha256:7fdac5707244aa60844d70e72e5b11660e1de691abc3e3de17b52df2eba18069; #67 exporting attestation manifest sha256:7fdac5707244aa60844d70e72e5b11660e1de691abc3e3de17b52df2eba18069 0.1s done; #67 exporting manifest list sha256:733f74f6ce709abbe0f8e1c1a659b0da4a175a7f44f21f6f912fea4ead23144e 0.0s done; #67 naming to docker.io/library/casestrainer-frontend-prod:latest; #67 naming to docker.io/library/casestrainer-frontend-prod:latest done; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.3s done; #67 DONE 1.4s; ; #68 [frontend-prod] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built
[2025-08-14 21:40:46] [INFO] Docker operation completed successfully: build
[2025-08-14 21:40:46] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 21:41:01] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:41:01] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 21:41:01] [INFO] Docker operation completed successfully: up
[2025-08-14 21:41:01] [INFO] Waiting for containers to stabilize...
[2025-08-14 21:41:12] [INFO] Performing application health check...
[2025-08-14 21:41:12] [INFO] Application health check passed
[2025-08-14 21:41:12] [INFO] Deployment completed successfully!
[2025-08-14 21:41:12] [INFO] Containers running: 7
[2025-08-14 21:41:12] [DEBUG] Launcher execution completed
[2025-08-14 21:54:49] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 21:54:49] [INFO] Environment: Production, Mode: Auto
[2025-08-14 21:54:49] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 21:54:49] [INFO] Checking prerequisites...
[2025-08-14 21:54:49] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 21:54:49] [INFO] Auto-detecting deployment mode...
[2025-08-14 21:54:50] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-14 21:54:50] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 21:54:50] [INFO] Auto-detected mode: Fast
[2025-08-14 21:54:50] [INFO] Starting deployment in Fast mode...
[2025-08-14 21:54:50] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 21:54:50] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 21:54:54] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:54:54] [DEBUG] Docker output:  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 21:54:54] [INFO] Docker operation completed successfully: down
[2025-08-14 21:54:54] [INFO] Recent changes in src - will rebuild images
[2025-08-14 21:54:54] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 21:54:54] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 21:55:24] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:55:24] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker2 internal] load build definition from Dockerfile; #2 DONE 0.0s; ; #2 [rqworker1 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.1s done; #2 DONE 0.1s; ; #3 [frontend-prod internal] load build definition from Dockerfile.prod; #3 transferring dockerfile: 2.03kB 0.0s done; #3 DONE 0.1s; ; #4 [nginx internal] load build definition from Dockerfile; #4 transferring dockerfile: 652B 0.0s done; #4 DONE 0.1s; ; #5 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #5 DONE 0.1s; ; #6 [nginx internal] load .dockerignore; #6 transferring context: 2B done; #6 DONE 0.0s; ; #7 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #7 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #7 DONE 0.1s; ; #8 [nginx internal] load build context; #8 transferring context: 97B 0.0s done; #8 DONE 0.0s; ; #9 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #9 CACHED; ; #10 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #10 CACHED; ; #11 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #11 CACHED; ; #12 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #12 CACHED; ; #13 [nginx 2/8] RUN apk add --no-cache curl; #13 CACHED; ; #14 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #14 CACHED; ; #15 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #15 CACHED; ; #16 [auth] library/python:pull token for registry-1.docker.io; #16 DONE 0.0s; ; #17 [auth] library/node:pull token for registry-1.docker.io; #17 DONE 0.0s; ; #18 [nginx] exporting to image; #18 exporting layers 0.0s done; #18 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #18 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #18 exporting attestation manifest sha256:b03e26d82f120dd06c54d4e3d615751c3d5ec2386c4a487da33602902e779fd1 0.1s done; #18 exporting manifest list sha256:e0c9658bd0818c2518b8fe6b34f6921ed809ab7a5060a87bfd36193d3d2606bd; #18 exporting manifest list sha256:e0c9658bd0818c2518b8fe6b34f6921ed809ab7a5060a87bfd36193d3d2606bd 0.0s done; #18 naming to docker.io/library/casestrainer-nginx:latest done; #18 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #18 DONE 0.3s; ; #19 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #19 ...; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.8s; ; #7 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #7 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #7 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #19 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #19 DONE 1.0s; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #23 DONE 0.1s; ; #24 [nginx] resolving provenance for metadata file; #24 DONE 0.0s; ; #25 [rqworker3 internal] load .dockerignore; #25 transferring context: 908B 0.0s done; #25 DONE 0.1s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 69.00kB 0.0s done; #22 DONE 0.1s; ; #26 [frontend-prod build-stage  2/10] WORKDIR /app; #26 CACHED; ; #27 [frontend-prod build-stage  3/10] COPY package*.json ./; #27 CACHED; ; #28 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #28 CACHED; ; #29 [frontend-prod build-stage  5/10] COPY public/ public/; #29 CACHED; ; #30 [rqworker2  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #30 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #30 DONE 0.1s; ; #31 [rqworker2 internal] load build context; #31 transferring context: 185.70kB 0.3s done; #31 DONE 0.3s; ; #32 [frontend-prod build-stage  6/10] COPY src/ src/; #32 DONE 0.3s; ; #33 [rqworker3  5/17] RUN pip install --no-cache-dir -r requirements.txt; #33 CACHED; ; #34 [rqworker3  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #34 CACHED; ; #35 [rqworker3  2/17] WORKDIR /app; #35 CACHED; ; #36 [rqworker3  3/17] COPY requirements.txt requirements.txt; #36 CACHED; ; #37 [rqworker3  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #37 CACHED; ; #38 [rqworker3  7/17] RUN useradd --create-home --shell /bin/bash app; #38 CACHED; ; #39 [rqworker3  8/17] COPY --chown=app:app src/ /app/src/; #39 ...; ; #36 [backend  3/17] COPY requirements.txt requirements.txt; #36 CACHED; ; #37 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #37 CACHED; ; #34 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #34 CACHED; ; #35 [backend  2/17] WORKDIR /app; #35 CACHED; ; #33 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #33 CACHED; ; #38 [backend  7/17] RUN useradd --create-home --shell /bin/bash app; #38 CACHED; ; #39 [backend  8/17] COPY --chown=app:app src/ /app/src/; #39 ...; ; #40 [frontend-prod build-stage  7/10] COPY index.html .; #40 DONE 0.2s; ; #41 [frontend-prod build-stage  8/10] COPY vite.config.js .; #41 DONE 0.2s; ; #39 [backend  8/17] COPY --chown=app:app src/ /app/src/; #39 DONE 0.4s; ; #42 [rqworker3  9/17] COPY --chown=app:app app/ /app/app/; #42 DONE 0.2s; ; #43 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #43 DONE 0.2s; ; #44 [rqworker3 11/17] COPY --chown=app:app templates/ /app/templates/; #44 DONE 0.2s; ; #45 [rqworker1 12/17] COPY --chown=app:app static/ /app/static/; #45 DONE 1.0s; ; #46 [rqworker3 13/17] COPY --chown=app:app VERSION /app/VERSION; #46 DONE 0.2s; ; #47 [rqworker1 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #47 DONE 0.6s; ; #48 [rqworker1 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #48 DONE 0.6s; ; #49 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #49 DONE 0.5s; ; #50 [backend 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #50 DONE 0.5s; ; #51 [backend] exporting to image; #51 exporting layers; #51 exporting layers 5.1s done; #51 exporting manifest sha256:dd01f76540cb0e228b24fe4eb4bbf848dd4ef6a7ae80ad16f42ff2f24396d21d; #51 exporting manifest sha256:dd01f76540cb0e228b24fe4eb4bbf848dd4ef6a7ae80ad16f42ff2f24396d21d 0.1s done; #51 exporting config sha256:7da6eaddf76fb3615e233322c260527252b3dc2f879ce6fefc067024abfc69bb; #51 exporting config sha256:7da6eaddf76fb3615e233322c260527252b3dc2f879ce6fefc067024abfc69bb 0.2s done; #51 exporting attestation manifest sha256:99d0c1fade10424e11226abe82e81b7e9bad9641aa00d2a78ef531c7d6f43375; #51 ...; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 0.986 ; #52 0.986 > casestrainer-vue-new@0.6.5 build; #52 0.986 > vite build; #52 0.986 ; #52 1.756 vite v6.3.5 building for production...; #52 2.102 transforming...; #52 8.812 G 139 modules transformed.; #52 ...; ; #51 [backend] exporting to image; #51 exporting attestation manifest sha256:99d0c1fade10424e11226abe82e81b7e9bad9641aa00d2a78ef531c7d6f43375 0.4s done; #51 exporting manifest list sha256:92d028e2540e364b5889d845d950c53d08fa15a4b0f937ba4ab264d3177291e1; #51 exporting manifest list sha256:92d028e2540e364b5889d845d950c53d08fa15a4b0f937ba4ab264d3177291e1 0.2s done; #51 naming to docker.io/library/casestrainer-backend:latest; #51 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #51 unpacking to docker.io/library/casestrainer-backend:latest; #51 ...; ; #53 [rqworker2] exporting to image; #53 exporting layers 5.1s done; #53 exporting manifest sha256:52ff0a19e27d3bb23938f0872f166fdd2aa49e6fb89aa1e32f94ded46c5b9d8f 0.2s done; #53 exporting config sha256:c91b7e5bc9f8a2a138f50f365f6317c4d66cfde6c2af25024766943dd6f19fbc 0.2s done; #53 exporting attestation manifest sha256:be90701633cbb6ba36b500cf9086ef5bd813a47d630822a32f134832f2c6e719 0.4s done; #53 exporting manifest list sha256:5c764f7065bb0f4934f6e73040bf74e3dd1bca393ae3bbb3667e2b3ec4fc31ff 0.2s done; #53 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #53 unpacking to docker.io/library/casestrainer-rqworker2:latest; #53 ...; ; #54 [rqworker1] exporting to image; #54 exporting layers 5.1s done; #54 exporting manifest sha256:c22c10a2ed1fc03bc3fdbae3b323013492be4afb063f435e4ff621ae34bae712 0.2s done; #54 exporting config sha256:84b27bb9d6170b767c9fd2dc354ccbe7395fa8cb3bf8fa2947d47df64c8a7807 0.2s done; #54 exporting attestation manifest sha256:e6f1b9fb41871b593e38842ac9c5521bf3a1252d7e8859c300d5bfa805882b6a 0.5s done; #54 exporting manifest list sha256:4c08d381a09a46b469eb67cc191a8518e38054b4f24d60016cce71b081d4c73b 0.2s done; #54 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #54 unpacking to docker.io/library/casestrainer-rqworker1:latest; #54 ...; ; #55 [rqworker3] exporting to image; #55 exporting layers 5.1s done; #55 exporting manifest sha256:2db1102d37c2e3784b95cd23f2c3ef97239dadeddb821a574c13150771ac6adc 0.1s done; #55 exporting config sha256:f72b9d45cbcbf12bcb5aa046e2cf004b1acd8fb20e0fda8b0d0e708fa4ed21e0 0.2s done; #55 exporting attestation manifest sha256:1545b728f051d955506651960013b93f24dbdf8ce8ea1c6a8e737867ce43fc96 0.5s done; #55 exporting manifest list sha256:db26de2a8c404e4396e30f3505e243efeb4e80ef967728a2cc0a02b140fad9a7 0.2s done; #55 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #55 unpacking to docker.io/library/casestrainer-rqworker3:latest; #55 ...; ; #53 [rqworker2] exporting to image; #53 unpacking to docker.io/library/casestrainer-rqworker2:latest 4.4s done; #53 ...; ; #51 [backend] exporting to image; #51 unpacking to docker.io/library/casestrainer-backend:latest 4.4s done; #51 DONE 11.1s; ; #53 [rqworker2] exporting to image; #53 DONE 11.1s; ; #55 [rqworker3] exporting to image; #55 unpacking to docker.io/library/casestrainer-rqworker3:latest 4.4s done; #55 DONE 11.1s; ; #54 [rqworker1] exporting to image; #54 unpacking to docker.io/library/casestrainer-rqworker1:latest 4.4s done; #54 DONE 11.1s; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 10.49 rendering chunks...; #52 ...; ; #56 [backend] resolving provenance for metadata file; #56 DONE 0.2s; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 ...; ; #57 [rqworker3] resolving provenance for metadata file; #57 DONE 0.6s; ; #58 [rqworker1] resolving provenance for metadata file; #58 DONE 0.3s; ; #59 [rqworker2] resolving provenance for metadata file; #59 DONE 0.1s; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 19.32 computing gzip size...; #52 19.39 dist/index.html                              0.91 kB G gzip:  0.46 kB; #52 19.40 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB G gzip:  0.07 kB; #52 19.40 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB G gzip:  0.07 kB; #52 19.40 dist/assets/NotFound-CrLUfTg_.css            1.01 kB G gzip:  0.45 kB; #52 19.41 dist/assets/Docs-La2G-zWQ.css                1.39 kB G gzip:  0.46 kB; #52 19.41 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB G gzip:  0.57 kB; #52 19.41 dist/assets/index-Uo7NcdYt.css             276.13 kB G gzip: 39.00 kB; #52 19.41 dist/assets/Docs-DkvbEONT.js                 1.01 kB G gzip:  0.56 kB; #52 19.41 dist/assets/WordPlugin-BB8slseK.js           1.20 kB G gzip:  0.72 kB; #52 19.41 dist/assets/BrowserExtension-BIO02tKD.js     1.22 kB G gzip:  0.73 kB; #52 19.41 dist/assets/NotFound-Ds_0PdjP.js             1.89 kB G gzip:  0.92 kB; #52 19.41 dist/assets/ApiDocs-nEvO0o7I.js             23.31 kB G gzip:  4.00 kB; #52 19.42 dist/assets/vendor-C-1G2k3o.js              34.93 kB G gzip: 13.58 kB; #52 19.42 dist/assets/vue-DOX4hRq3.js                 91.40 kB G gzip: 34.95 kB; #52 19.42 dist/assets/index-CKC_Q19W.js              158.82 kB G gzip: 46.93 kB; #52 19.42 G built in 17.58s; #52 DONE 20.3s; ; #60 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #60 DONE 0.7s; ; #7 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #7 CACHED; ; #61 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #61 DONE 0.2s; ; #62 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #62 DONE 0.5s; ; #63 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #63 DONE 0.1s; ; #64 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #64 DONE 0.1s; ; #65 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #65 DONE 0.4s; ; #66 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #66 DONE 0.4s; ; #67 [frontend-prod] exporting to image; #67 exporting layers; #67 exporting layers 0.7s done; #67 exporting manifest sha256:0ab4cbfe3168a840caaa99c1714e1edde2332ebe01e931f7f626a28bba8f9113 0.0s done; #67 exporting config sha256:ddef48f53aa9c5978b2c53f683a4e99f009ce8a8ecbdbd326793b0458d5c9041 0.0s done; #67 exporting attestation manifest sha256:547bf0212cfd4d9bd5004e3a41c054e93662d86a8eca0c4e6d8cd28811448170; #67 exporting attestation manifest sha256:547bf0212cfd4d9bd5004e3a41c054e93662d86a8eca0c4e6d8cd28811448170 0.1s done; #67 exporting manifest list sha256:94a1bc9fbb8d2527d980bf217c3c8823b0ac59ee066654aa180d87c3849768c6 0.0s done; #67 naming to docker.io/library/casestrainer-frontend-prod:latest; #67 naming to docker.io/library/casestrainer-frontend-prod:latest done; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.4s done; #67 DONE 1.4s; ; #68 [frontend-prod] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built
[2025-08-14 21:55:24] [INFO] Docker operation completed successfully: build
[2025-08-14 21:55:24] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 21:55:39] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:55:39] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 21:55:39] [INFO] Docker operation completed successfully: up
[2025-08-14 21:55:39] [INFO] Waiting for containers to stabilize...
[2025-08-14 21:55:50] [INFO] Performing application health check...
[2025-08-14 21:55:50] [INFO] Application health check passed
[2025-08-14 21:55:50] [INFO] Deployment completed successfully!
[2025-08-14 21:55:50] [INFO] Containers running: 7
[2025-08-14 21:55:50] [DEBUG] Launcher execution completed
[2025-08-14 21:57:58] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 21:57:58] [INFO] Environment: Production, Mode: Auto
[2025-08-14 21:57:58] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 21:57:58] [INFO] Checking prerequisites...
[2025-08-14 21:57:58] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 21:57:58] [INFO] Auto-detecting deployment mode...
[2025-08-14 21:57:59] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-14 21:57:59] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 21:57:59] [INFO] Auto-detected mode: Fast
[2025-08-14 21:57:59] [INFO] Starting deployment in Fast mode...
[2025-08-14 21:57:59] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 21:57:59] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 21:58:03] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:58:03] [DEBUG] Docker output:  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 21:58:03] [INFO] Docker operation completed successfully: down
[2025-08-14 21:58:03] [INFO] Recent changes in src - will rebuild images
[2025-08-14 21:58:03] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 21:58:03] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 21:58:31] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:58:31] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [nginx internal] load build definition from Dockerfile; #2 transferring dockerfile: 652B 0.0s done; #2 DONE 0.1s; ; #3 [backend internal] load build definition from Dockerfile; #3 transferring dockerfile: 1.80kB 0.0s done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.1s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [nginx internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B 0.0s done; #7 DONE 0.0s; ; #8 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.1s; ; #9 [nginx internal] load build context; #9 transferring context: 97B 0.0s done; #9 DONE 0.0s; ; #10 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #10 CACHED; ; #11 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #11 CACHED; ; #12 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #12 CACHED; ; #13 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #13 CACHED; ; #14 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #14 CACHED; ; #15 [nginx 2/8] RUN apk add --no-cache curl; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [nginx] exporting to image; #17 exporting layers 0.0s done; #17 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af 0.0s done; #17 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 0.0s done; #17 exporting attestation manifest sha256:9b31a781a718c8d3f2e90eb4d27e84bb03932f398896c75f5e6cba2dd3f08a86; #17 exporting attestation manifest sha256:9b31a781a718c8d3f2e90eb4d27e84bb03932f398896c75f5e6cba2dd3f08a86 0.1s done; #17 exporting manifest list sha256:0a736ab8bc12cd6b3d50052d908cb71dc0329b3a31ba08b74fa7b990f8e1ee35; #17 ...; ; #18 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #18 DONE 0.5s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 0.6s; ; #17 [nginx] exporting to image; #17 exporting manifest list sha256:0a736ab8bc12cd6b3d50052d908cb71dc0329b3a31ba08b74fa7b990f8e1ee35 0.1s done; #17 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #17 unpacking to docker.io/library/casestrainer-nginx:latest; #17 ...; ; #8 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.1s; ; #19 [frontend-prod internal] load .dockerignore; #19 transferring context: 834B 0.0s done; #19 DONE 0.0s; ; #20 [rqworker2 internal] load .dockerignore; #20 transferring context: 908B 0.0s done; #20 DONE 0.0s; ; #21 [frontend-prod internal] load build context; #21 DONE 0.0s; ; #22 [rqworker1 internal] load build context; #22 DONE 0.0s; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #23 DONE 0.1s; ; #17 [nginx] exporting to image; #17 unpacking to docker.io/library/casestrainer-nginx:latest 0.1s done; #17 DONE 0.5s; ; #24 [rqworker3  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #24 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #24 DONE 0.1s; ; #17 [nginx] exporting to image; #17 DONE 0.5s; ; #21 [frontend-prod internal] load build context; #21 transferring context: 69.52kB 0.1s done; #21 DONE 0.1s; ; #25 [frontend-prod build-stage  3/10] COPY package*.json ./; #25 CACHED; ; #26 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #26 CACHED; ; #27 [frontend-prod build-stage  2/10] WORKDIR /app; #27 CACHED; ; #28 [frontend-prod build-stage  5/10] COPY public/ public/; #28 CACHED; ; #29 [frontend-prod build-stage  6/10] COPY src/ src/; #29 DONE 0.3s; ; #22 [backend internal] load build context; #22 transferring context: 273.36kB 0.3s done; #22 DONE 0.4s; ; #30 [rqworker1  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #30 CACHED; ; #31 [rqworker1  2/17] WORKDIR /app; #31 CACHED; ; #32 [rqworker1  3/17] COPY requirements.txt requirements.txt; #32 CACHED; ; #33 [rqworker1  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #33 CACHED; ; #34 [rqworker1  5/17] RUN pip install --no-cache-dir -r requirements.txt; #34 CACHED; ; #35 [rqworker1  7/17] RUN useradd --create-home --shell /bin/bash app; #35 CACHED; ; #36 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #36 ...; ; #37 [frontend-prod build-stage  7/10] COPY index.html .; #37 DONE 0.2s; ; #38 [frontend-prod build-stage  8/10] COPY vite.config.js .; #38 DONE 0.3s; ; #39 [nginx] resolving provenance for metadata file; #39 DONE 0.0s; ; #36 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #36 DONE 0.6s; ; #40 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #40 DONE 0.3s; ; #41 [frontend-prod build-stage  9/10] RUN npm run build; #41 ...; ; #40 [backend  9/17] COPY --chown=app:app app/ /app/app/; #40 DONE 0.3s; ; #42 [backend 10/17] COPY --chown=app:app config/ /app/config/; #42 DONE 0.2s; ; #41 [frontend-prod build-stage  9/10] RUN npm run build; #41 ...; ; #42 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #42 DONE 0.2s; ; #43 [rqworker2 11/17] COPY --chown=app:app templates/ /app/templates/; #43 DONE 0.2s; ; #41 [frontend-prod build-stage  9/10] RUN npm run build; #41 ...; ; #43 [rqworker3 11/17] COPY --chown=app:app templates/ /app/templates/; #43 DONE 0.2s; ; #41 [frontend-prod build-stage  9/10] RUN npm run build; #41 0.870 ; #41 0.870 > casestrainer-vue-new@0.6.5 build; #41 0.870 > vite build; #41 0.870 ; #41 ...; ; #44 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #44 DONE 0.9s; ; #44 [rqworker3 12/17] COPY --chown=app:app static/ /app/static/; #44 DONE 0.9s; ; #41 [frontend-prod build-stage  9/10] RUN npm run build; #41 1.608 vite v6.3.5 building for production...; #41 ...; ; #45 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #45 DONE 0.2s; ; #41 [frontend-prod build-stage  9/10] RUN npm run build; #41 1.956 transforming...; #41 ...; ; #46 [rqworker1 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #46 DONE 0.6s; ; #46 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #46 DONE 0.6s; ; #47 [rqworker2 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #47 DONE 0.5s; ; #41 [frontend-prod build-stage  9/10] RUN npm run build; #41 ...; ; #47 [rqworker3 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #47 DONE 0.5s; ; #48 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #48 DONE 0.7s; ; #41 [frontend-prod build-stage  9/10] RUN npm run build; #41 ...; ; #48 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #48 DONE 0.7s; ; #49 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #49 DONE 0.4s; ; #41 [frontend-prod build-stage  9/10] RUN npm run build; #41 ...; ; #49 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #49 DONE 0.4s; ; #50 [backend] exporting to image; #50 exporting layers; #50 exporting layers 4.8s done; #50 exporting manifest sha256:be6fabc331794839e10bbff1a8c3b1749cb1264ed7cbfa9d53b4c8493325de81; #50 exporting manifest sha256:be6fabc331794839e10bbff1a8c3b1749cb1264ed7cbfa9d53b4c8493325de81 0.2s done; #50 exporting config sha256:16697b4472a8e03249a82f7c6253d98b6df8f02b2e90b6fa4ca810794eb6b96e; #50 exporting config sha256:16697b4472a8e03249a82f7c6253d98b6df8f02b2e90b6fa4ca810794eb6b96e 0.4s done; #50 exporting attestation manifest sha256:3298c758dfeba1951b6ebd4a9f08b3b2f9e652677a3a98f623c3745176f6ac9c; #50 exporting attestation manifest sha256:3298c758dfeba1951b6ebd4a9f08b3b2f9e652677a3a98f623c3745176f6ac9c 0.4s done; #50 exporting manifest list sha256:d501345c32fea1222485545f499b683cf7570507f1529e5fb31fbaa43c489024; #50 exporting manifest list sha256:d501345c32fea1222485545f499b683cf7570507f1529e5fb31fbaa43c489024 0.2s done; #50 naming to docker.io/library/casestrainer-backend:latest; #50 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #50 unpacking to docker.io/library/casestrainer-backend:latest; #50 ...; ; #51 [rqworker1] exporting to image; #51 exporting layers 4.8s done; #51 exporting manifest sha256:d069602920372153a53f67a4e014878c1ce69d611e4ced6a9f5a6e95303a8200 0.3s done; #51 exporting config sha256:a0cc729cc84b024311f367f826409b6007c97905957d137b5517078df88a6d51 0.4s done; #51 exporting attestation manifest sha256:5b04225ef6d2cb4d3e2c7d6af5e5da81808be4d6948997d265a9e0d55ef1437d 0.4s done; #51 exporting manifest list sha256:4c6ed84c8c2903759cef568067e63a7679cd573506ce4db2d9345d7ba2d545d4 0.2s done; #51 naming to docker.io/library/casestrainer-rqworker1:latest 0.2s done; #51 unpacking to docker.io/library/casestrainer-rqworker1:latest 3.6s done; #51 ...; ; #52 [rqworker2] exporting to image; #52 exporting layers 4.8s done; #52 exporting manifest sha256:cd2268f9635b70ab27f638190ce4ea472b4de2044ddd611032f56ff9c63468c3 0.2s done; #52 exporting config sha256:2713b64bde24683ca27420912837abe385367534a8517aea93087d5980a35eca 0.4s done; #52 exporting attestation manifest sha256:c8e44a2b77eff025606dd3502428779b67bd1af59fbfd6f95a7778cb056c0d23 0.4s done; #52 exporting manifest list sha256:5f081507cc87d3565f29a8b407ee84f02c8348b234be0494cb4dbead5d8ee798 0.2s done; #52 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #52 unpacking to docker.io/library/casestrainer-rqworker2:latest 3.7s done; #52 ...; ; #50 [backend] exporting to image; #50 unpacking to docker.io/library/casestrainer-backend:latest 3.7s done; #50 DONE 10.2s; ; #53 [rqworker3] exporting to image; #53 exporting layers 4.8s done; #53 exporting manifest sha256:63f852f620c7c49e3335fef29b72ce592142396dc77316a9aa94eb00f7233af2 0.3s done; #53 exporting config sha256:907fcb62de21357799e56f0344b8d9f287b81b8e666ead906ac0f1e2327c8040 0.3s done; #53 exporting attestation manifest sha256:e0edb76f63be8b3aca008a49166a8a248bb549ccfa7e04884b86d46ae4704276 0.4s done; #53 exporting manifest list sha256:6791bda1d521d299b63956258b6d2b7ffbd8cab25fbec3c652591c22d4d9d94e 0.2s done; #53 naming to docker.io/library/casestrainer-rqworker3:latest 0.2s done; #53 unpacking to docker.io/library/casestrainer-rqworker3:latest 3.6s done; #53 DONE 10.3s; ; #52 [rqworker2] exporting to image; #52 DONE 10.2s; ; #51 [rqworker1] exporting to image; #51 DONE 10.2s; ; #41 [frontend-prod build-stage  9/10] RUN npm run build; #41 8.224 G 139 modules transformed.; #41 9.983 rendering chunks...; #41 ...; ; #54 [backend] resolving provenance for metadata file; #54 DONE 0.3s; ; #41 [frontend-prod build-stage  9/10] RUN npm run build; #41 ...; ; #55 [rqworker2] resolving provenance for metadata file; #55 DONE 0.5s; ; #56 [rqworker3] resolving provenance for metadata file; #56 DONE 0.3s; ; #57 [rqworker1] resolving provenance for metadata file; #57 DONE 0.1s; ; #41 [frontend-prod build-stage  9/10] RUN npm run build; #41 18.20 computing gzip size...; #41 18.24 dist/index.html                              0.91 kB G gzip:  0.45 kB; #41 18.24 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB G gzip:  0.07 kB; #41 18.24 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB G gzip:  0.07 kB; #41 18.24 dist/assets/NotFound-CrLUfTg_.css            1.01 kB G gzip:  0.45 kB; #41 18.24 dist/assets/Docs-La2G-zWQ.css                1.39 kB G gzip:  0.46 kB; #41 18.24 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB G gzip:  0.57 kB; #41 18.24 dist/assets/index-BUWQsEqJ.css             276.13 kB G gzip: 39.00 kB; #41 18.24 dist/assets/Docs-btXFPKEv.js                 1.01 kB G gzip:  0.56 kB; #41 18.24 dist/assets/WordPlugin-91pWiDVX.js           1.20 kB G gzip:  0.71 kB; #41 18.25 dist/assets/BrowserExtension-BBF9AC3U.js     1.22 kB G gzip:  0.73 kB; #41 18.25 dist/assets/NotFound-DUcmx5hI.js             1.89 kB G gzip:  0.92 kB; #41 18.25 dist/assets/ApiDocs-D0niPiuR.js             23.31 kB G gzip:  4.00 kB; #41 18.25 dist/assets/vendor-C-1G2k3o.js              34.93 kB G gzip: 13.58 kB; #41 18.25 dist/assets/vue-DOX4hRq3.js                 91.40 kB G gzip: 34.95 kB; #41 18.25 dist/assets/index-CVge-1Ys.js              159.24 kB G gzip: 47.02 kB; #41 18.25 G built in 16.54s; #41 DONE 18.8s; ; #58 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #58 DONE 0.5s; ; #8 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 CACHED; ; #59 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #59 DONE 0.1s; ; #60 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #60 DONE 0.5s; ; #61 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #61 DONE 0.1s; ; #62 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #62 DONE 0.1s; ; #63 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #63 DONE 0.4s; ; #64 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #64 DONE 0.4s; ; #65 [frontend-prod] exporting to image; #65 exporting layers; #65 exporting layers 0.7s done; #65 exporting manifest sha256:3e87de8a5e2c2b2572552f6d7f1ba4d8b028628235d61b762e0ab223202b6ffd 0.1s done; #65 exporting config sha256:4b7a109f9890816d35f438a9862201b1aa4985e53966f80c26deaa22337b7fdc 0.1s done; #65 exporting attestation manifest sha256:7b8cfab4b76ea1107c526f1d4195611fad7a19ffed41dba1a18e7bbbf80ebdbf 0.1s done; #65 exporting manifest list sha256:a2d979c7241c7857b7da80454e60c47ac4b3161718b1e632bee74739a13b234a; #65 exporting manifest list sha256:a2d979c7241c7857b7da80454e60c47ac4b3161718b1e632bee74739a13b234a 0.0s done; #65 naming to docker.io/library/casestrainer-frontend-prod:latest done; #65 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #65 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.3s done; #65 DONE 1.3s; ; #66 [frontend-prod] resolving provenance for metadata file; #66 DONE 0.0s;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built
[2025-08-14 21:58:31] [INFO] Docker operation completed successfully: build
[2025-08-14 21:58:31] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 21:58:46] [DEBUG] Docker operation exit code: 0
[2025-08-14 21:58:46] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 21:58:46] [INFO] Docker operation completed successfully: up
[2025-08-14 21:58:46] [INFO] Waiting for containers to stabilize...
[2025-08-14 21:58:56] [INFO] Performing application health check...
[2025-08-14 21:58:56] [INFO] Application health check passed
[2025-08-14 21:58:56] [INFO] Deployment completed successfully!
[2025-08-14 21:58:56] [INFO] Containers running: 7
[2025-08-14 21:58:56] [DEBUG] Launcher execution completed
[2025-08-14 22:03:57] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 22:03:57] [INFO] Environment: Production, Mode: Auto
[2025-08-14 22:03:57] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 22:03:57] [INFO] Checking prerequisites...
[2025-08-14 22:03:57] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 22:03:57] [INFO] Auto-detecting deployment mode...
[2025-08-14 22:03:58] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-14 22:03:58] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 22:03:58] [INFO] Auto-detected mode: Fast
[2025-08-14 22:03:58] [INFO] Starting deployment in Fast mode...
[2025-08-14 22:03:58] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 22:03:58] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 22:04:02] [DEBUG] Docker operation exit code: 0
[2025-08-14 22:04:02] [DEBUG] Docker output:  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 22:04:02] [INFO] Docker operation completed successfully: down
[2025-08-14 22:04:02] [INFO] Recent changes in src - will rebuild images
[2025-08-14 22:04:02] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 22:04:02] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 22:04:27] [DEBUG] Docker operation exit code: 0
[2025-08-14 22:04:27] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker3 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.0s; ; #3 [frontend-prod internal] load build definition from Dockerfile.prod; #3 transferring dockerfile: 2.03kB 0.0s done; #3 DONE 0.1s; ; #4 [nginx internal] load build definition from Dockerfile; #4 transferring dockerfile: 652B done; #4 DONE 0.1s; ; #5 [nginx internal] load metadata for docker.io/library/nginx:alpine; #5 DONE 0.1s; ; #6 [auth] library/python:pull token for registry-1.docker.io; #6 DONE 0.0s; ; #7 [auth] library/node:pull token for registry-1.docker.io; #7 DONE 0.0s; ; #8 [nginx internal] load .dockerignore; #8 transferring context: 2B done; #8 DONE 0.0s; ; #9 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #9 ...; ; #10 [nginx internal] load build context; #10 DONE 0.0s; ; #11 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #11 DONE 0.1s; ; #10 [nginx internal] load build context; #10 transferring context: 97B done; #10 DONE 0.0s; ; #12 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #12 CACHED; ; #13 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #13 CACHED; ; #14 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #14 CACHED; ; #15 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #15 CACHED; ; #16 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #16 CACHED; ; #17 [nginx 2/8] RUN apk add --no-cache curl; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:7a43d0ca30867f00b616facb40512e81f3441785dd7c61efecb7e9c7abe92116; #19 exporting attestation manifest sha256:7a43d0ca30867f00b616facb40512e81f3441785dd7c61efecb7e9c7abe92116 0.1s done; #19 exporting manifest list sha256:c66ef5a4812745dfab83a7e3c2114b7ef75b7475bbf4fa879bf82df29d9a0b45 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest; #19 ...; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.7s; ; #19 [nginx] exporting to image; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.1s done; #19 DONE 0.5s; ; #11 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #11 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.1s; ; #9 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #9 DONE 0.9s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #23 [backend internal] load .dockerignore; #23 transferring context: 908B 0.0s done; #23 DONE 0.1s; ; #24 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.2s done; #24 DONE 0.2s; ; #25 [rqworker3 internal] load build context; #25 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 69.63kB 0.0s done; #22 DONE 0.1s; ; #26 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #26 CACHED; ; #27 [frontend-prod build-stage  2/10] WORKDIR /app; #27 CACHED; ; #28 [frontend-prod build-stage  3/10] COPY package*.json ./; #28 CACHED; ; #29 [frontend-prod build-stage  5/10] COPY public/ public/; #29 CACHED; ; #30 [frontend-prod build-stage  6/10] COPY src/ src/; #30 ...; ; #31 [rqworker2  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #31 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.2s done; #31 DONE 0.2s; ; #25 [rqworker2 internal] load build context; #25 ...; ; #30 [frontend-prod build-stage  6/10] COPY src/ src/; #30 DONE 0.4s; ; #25 [rqworker2 internal] load build context; #25 transferring context: 131.80kB 0.5s done; #25 transferring context: 131.80kB 0.5s done; #25 DONE 0.6s; ; #32 [nginx] resolving provenance for metadata file; #32 DONE 0.0s; ; #33 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #33 CACHED; ; #34 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #34 CACHED; ; #35 [backend  9/17] COPY --chown=app:app app/ /app/app/; #35 CACHED; ; #36 [backend  2/17] WORKDIR /app; #36 CACHED; ; #37 [backend  8/17] COPY --chown=app:app src/ /app/src/; #37 CACHED; ; #38 [backend 12/17] COPY --chown=app:app static/ /app/static/; #38 CACHED; ; #39 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #39 CACHED; ; #40 [backend  3/17] COPY requirements.txt requirements.txt; #40 CACHED; ; #41 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #41 CACHED; ; #42 [backend 10/17] COPY --chown=app:app config/ /app/config/; #42 CACHED; ; #43 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #43 CACHED; ; #44 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #44 CACHED; ; #45 [backend  7/17] RUN useradd --create-home --shell /bin/bash app; #45 CACHED; ; #46 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #46 CACHED; ; #47 [backend 11/17] COPY --chown=app:app templates/ /app/templates/; #47 CACHED; ; #48 [backend 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #48 CACHED; ; #36 [rqworker3  2/17] WORKDIR /app; #36 CACHED; ; #44 [rqworker3 13/17] COPY --chown=app:app VERSION /app/VERSION; #44 CACHED; ; #47 [rqworker3 11/17] COPY --chown=app:app templates/ /app/templates/; #47 CACHED; ; #42 [rqworker3 10/17] COPY --chown=app:app config/ /app/config/; #42 CACHED; ; #35 [rqworker3  9/17] COPY --chown=app:app app/ /app/app/; #35 CACHED; ; #40 [rqworker3  3/17] COPY requirements.txt requirements.txt; #40 CACHED; ; #37 [rqworker3  8/17] COPY --chown=app:app src/ /app/src/; #37 CACHED; ; #38 [rqworker3 12/17] COPY --chown=app:app static/ /app/static/; #38 CACHED; ; #41 [rqworker3  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #41 CACHED; ; #34 [rqworker3  5/17] RUN pip install --no-cache-dir -r requirements.txt; #34 CACHED; ; #33 [rqworker3  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #33 CACHED; ; #39 [rqworker3 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #39 CACHED; ; #43 [rqworker3 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #43 CACHED; ; #45 [rqworker3  7/17] RUN useradd --create-home --shell /bin/bash app; #45 CACHED; ; #46 [rqworker3 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #46 CACHED; ; #49 [frontend-prod build-stage  7/10] COPY index.html .; #49 DONE 0.2s; ; #50 [backend] exporting to image; #50 exporting layers 0.0s done; #50 exporting manifest sha256:be6fabc331794839e10bbff1a8c3b1749cb1264ed7cbfa9d53b4c8493325de81 0.0s done; #50 exporting config sha256:16697b4472a8e03249a82f7c6253d98b6df8f02b2e90b6fa4ca810794eb6b96e 0.1s done; #50 exporting attestation manifest sha256:b73b4a1727bdf599c2aaae91c7cd951edd8e4bb753ff1b41f439462107432c9f; #50 ...; ; #51 [frontend-prod build-stage  8/10] COPY vite.config.js .; #51 DONE 0.5s; ; #50 [backend] exporting to image; #50 exporting attestation manifest sha256:b73b4a1727bdf599c2aaae91c7cd951edd8e4bb753ff1b41f439462107432c9f 0.4s done; #50 exporting manifest list sha256:bf562723be43d962be05a3c39526ef8fd58ec07fd9b05134c5ad294a5e9ba9c2; #50 exporting manifest list sha256:bf562723be43d962be05a3c39526ef8fd58ec07fd9b05134c5ad294a5e9ba9c2 0.2s done; #50 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #50 unpacking to docker.io/library/casestrainer-backend:latest 0.0s done; #50 DONE 1.1s; ; #52 [rqworker1] exporting to image; #52 exporting layers 0.0s done; #52 exporting manifest sha256:d069602920372153a53f67a4e014878c1ce69d611e4ced6a9f5a6e95303a8200 done; #52 exporting config sha256:a0cc729cc84b024311f367f826409b6007c97905957d137b5517078df88a6d51 0.0s done; #52 exporting attestation manifest sha256:0285d181b138e8865d534b25beac94ae99beca56bd155a3255a7e0405dab7898 0.3s done; #52 exporting manifest list sha256:91d91490a3d1b79ae6e275e4a840838170c4956d309008da47d82a95497142f2 0.2s done; #52 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #52 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #52 DONE 1.0s; ; #53 [rqworker2] exporting to image; #53 exporting layers 0.0s done; #53 exporting manifest sha256:cd2268f9635b70ab27f638190ce4ea472b4de2044ddd611032f56ff9c63468c3 0.0s done; #53 exporting config sha256:2713b64bde24683ca27420912837abe385367534a8517aea93087d5980a35eca 0.1s done; #53 exporting attestation manifest sha256:4fbcf9ae90c75e6fa6170929c322e6a0382f1d87bcf8aa1fd0117f30b5896e7d 0.3s done; #53 exporting manifest list sha256:b923b8a6233cb9de53658d27a7bc492a29449c01855d9c9b6211d09524b8d46b 0.2s done; #53 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #53 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #53 ...; ; #54 [rqworker3] exporting to image; #54 exporting layers 0.0s done; #54 exporting manifest sha256:63f852f620c7c49e3335fef29b72ce592142396dc77316a9aa94eb00f7233af2 0.0s done; #54 exporting config sha256:907fcb62de21357799e56f0344b8d9f287b81b8e666ead906ac0f1e2327c8040 0.1s done; #54 exporting attestation manifest sha256:8c929ddbcab926e5642cbca453c812f3ceb5b1d1693fe091434bad2cdaa3dc1c 0.3s done; #54 exporting manifest list sha256:854696352a33738b0b3db56653f451f411e3fb9af2ab6a6ec6c9974e55802110 0.2s done; #54 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #54 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #54 DONE 1.2s; ; #53 [rqworker2] exporting to image; #53 DONE 1.2s; ; #55 [frontend-prod build-stage  9/10] RUN npm run build; #55 ...; ; #56 [rqworker1] resolving provenance for metadata file; #56 DONE 0.1s; ; #57 [rqworker3] resolving provenance for metadata file; #57 DONE 0.1s; ; #58 [backend] resolving provenance for metadata file; #58 DONE 0.3s; ; #59 [rqworker2] resolving provenance for metadata file; #59 DONE 0.0s; ; #55 [frontend-prod build-stage  9/10] RUN npm run build; #55 1.693 ; #55 1.693 > casestrainer-vue-new@0.6.5 build; #55 1.693 > vite build; #55 1.693 ; #55 2.820 vite v6.3.5 building for production...; #55 3.700 transforming...; #55 9.732 G 139 modules transformed.; #55 11.15 rendering chunks...; #55 15.95 computing gzip size...; #55 15.98 dist/index.html                              0.91 kB G gzip:  0.45 kB; #55 15.98 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB G gzip:  0.07 kB; #55 15.98 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB G gzip:  0.07 kB; #55 15.98 dist/assets/NotFound-CrLUfTg_.css            1.01 kB G gzip:  0.45 kB; #55 15.98 dist/assets/Docs-La2G-zWQ.css                1.39 kB G gzip:  0.46 kB; #55 15.98 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB G gzip:  0.57 kB; #55 15.98 dist/assets/index-CCzZwolw.css             276.13 kB G gzip: 39.00 kB; #55 15.98 dist/assets/Docs-B2vkD0cw.js                 1.01 kB G gzip:  0.56 kB; #55 15.98 dist/assets/WordPlugin-DHzuTDmM.js           1.20 kB G gzip:  0.71 kB; #55 15.98 dist/assets/BrowserExtension-AdbHPlGc.js     1.22 kB G gzip:  0.73 kB; #55 15.98 dist/assets/NotFound-Cc-Ljqkc.js             1.89 kB G gzip:  0.92 kB; #55 15.98 dist/assets/ApiDocs-DYKV-NOw.js             23.31 kB G gzip:  4.00 kB; #55 15.98 dist/assets/vendor-C-1G2k3o.js              34.93 kB G gzip: 13.58 kB; #55 15.98 dist/assets/vue-DOX4hRq3.js                 91.40 kB G gzip: 34.95 kB; #55 15.98 dist/assets/index-Nj4sdHb1.js              159.34 kB G gzip: 47.05 kB; #55 15.98 G built in 12.79s; #55 DONE 16.3s; ; #60 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #60 DONE 0.4s; ; #11 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 CACHED; ; #61 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #61 DONE 0.1s; ; #62 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #62 DONE 0.5s; ; #63 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #63 DONE 0.2s; ; #64 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #64 DONE 0.1s; ; #65 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #65 DONE 0.4s; ; #66 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #66 DONE 0.4s; ; #67 [frontend-prod] exporting to image; #67 exporting layers; #67 exporting layers 0.6s done; #67 exporting manifest sha256:7f49cf96f9fc5e495e0b7df8ec330cfee29b3834bb3ab9bd58e31112f3f72626 0.0s done; #67 exporting config sha256:8942a7f248d36e93fe77ec1bf8284975a5b6f375aacca4ac049ee7745fcb489e 0.0s done; #67 exporting attestation manifest sha256:a064c994a5e6b2755eb7e311c09b1fbf07372c4219aeadf10f902bd1a727f29d 0.1s done; #67 exporting manifest list sha256:9df8d9845d040a03f94df5aeca16f1f05dcf5f8b0e14cab2cb31f2aa0c8c5961; #67 exporting manifest list sha256:9df8d9845d040a03f94df5aeca16f1f05dcf5f8b0e14cab2cb31f2aa0c8c5961 0.0s done; #67 naming to docker.io/library/casestrainer-frontend-prod:latest done; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.3s done; #67 DONE 1.3s; ; #68 [frontend-prod] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built
[2025-08-14 22:04:27] [INFO] Docker operation completed successfully: build
[2025-08-14 22:04:27] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 22:04:43] [DEBUG] Docker operation exit code: 0
[2025-08-14 22:04:43] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 22:04:43] [INFO] Docker operation completed successfully: up
[2025-08-14 22:04:43] [INFO] Waiting for containers to stabilize...
[2025-08-14 22:04:54] [INFO] Performing application health check...
[2025-08-14 22:04:54] [INFO] Application health check passed
[2025-08-14 22:04:54] [INFO] Deployment completed successfully!
[2025-08-14 22:04:54] [INFO] Containers running: 7
[2025-08-14 22:04:54] [DEBUG] Launcher execution completed
[2025-08-14 22:08:20] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 22:08:20] [INFO] Environment: Production, Mode: Auto
[2025-08-14 22:08:20] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 22:08:20] [INFO] Checking prerequisites...
[2025-08-14 22:08:20] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 22:08:20] [INFO] Auto-detecting deployment mode...
[2025-08-14 22:08:21] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-14 22:08:21] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 22:08:21] [INFO] Auto-detected mode: Fast
[2025-08-14 22:08:21] [INFO] Starting deployment in Fast mode...
[2025-08-14 22:08:21] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 22:08:21] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 22:08:25] [DEBUG] Docker operation exit code: 0
[2025-08-14 22:08:25] [DEBUG] Docker output:  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 22:08:25] [INFO] Docker operation completed successfully: down
[2025-08-14 22:08:25] [INFO] Recent changes in src - will rebuild images
[2025-08-14 22:08:25] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 22:08:25] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 22:08:52] [DEBUG] Docker operation exit code: 0
[2025-08-14 22:08:52] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [nginx internal] load build definition from Dockerfile; #2 transferring dockerfile: 652B 0.0s done; #2 DONE 0.1s; ; #3 [rqworker1 internal] load build definition from Dockerfile; #3 transferring dockerfile: 1.80kB 0.0s done; #3 DONE 0.1s; ; #4 [nginx internal] load metadata for docker.io/library/nginx:alpine; #4 DONE 0.1s; ; #3 [rqworker3 internal] load build definition from Dockerfile; #3 DONE 0.1s; ; #5 [frontend-prod internal] load build definition from Dockerfile.prod; #5 transferring dockerfile: 2.03kB 0.0s done; #5 DONE 0.1s; ; #6 [nginx internal] load .dockerignore; #6 transferring context:; #6 transferring context: 2B 0.0s done; #6 DONE 0.0s; ; #7 [nginx internal] load build context; #7 DONE 0.0s; ; #8 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.1s; ; #9 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #9 ...; ; #8 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 DONE 0.1s; ; #7 [nginx internal] load build context; #7 transferring context: 97B 0.0s done; #7 DONE 0.0s; ; #10 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #10 CACHED; ; #11 [nginx 2/8] RUN apk add --no-cache curl; #11 CACHED; ; #12 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #12 CACHED; ; #13 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #13 CACHED; ; #14 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #14 CACHED; ; #15 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [nginx] exporting to image; #17 exporting layers 0.0s done; #17 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af 0.0s done; #17 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 0.0s done; #17 exporting attestation manifest sha256:0eff4b97c9804adc19b5ee58959466e8c9a358f561616267c79406a76b7a2193; #17 exporting attestation manifest sha256:0eff4b97c9804adc19b5ee58959466e8c9a358f561616267c79406a76b7a2193 0.1s done; #17 exporting manifest list sha256:1e8556cd2702fa1c56db0c5bb599edbc7cfe55d45ab4e73d78b5bfb9757c9230; #17 ...; ; #9 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #9 DONE 0.6s; ; #18 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #18 DONE 0.6s; ; #17 [nginx] exporting to image; #17 exporting manifest list sha256:1e8556cd2702fa1c56db0c5bb599edbc7cfe55d45ab4e73d78b5bfb9757c9230 0.1s done; #17 naming to docker.io/library/casestrainer-nginx:latest; #17 ...; ; #8 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.1s; ; #19 [rqworker3 internal] load .dockerignore; #19 transferring context: 908B 0.0s done; #19 DONE 0.1s; ; #20 [frontend-prod internal] load .dockerignore; #20 transferring context: 834B 0.0s done; #20 DONE 0.1s; ; #21 [backend internal] load build context; #21 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #17 [nginx] exporting to image; #17 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #17 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #17 DONE 0.6s; ; #23 [backend  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #23 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #23 DONE 0.1s; ; #24 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #24 DONE 0.2s; ; #21 [rqworker1 internal] load build context; #21 ...; ; #22 [frontend-prod internal] load build context; #22 transferring context: 69.93kB 0.1s done; #22 DONE 0.2s; ; #25 [frontend-prod build-stage  3/10] COPY package*.json ./; #25 CACHED; ; #26 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #26 CACHED; ; #27 [frontend-prod build-stage  2/10] WORKDIR /app; #27 CACHED; ; #21 [rqworker3 internal] load build context; #21 transferring context: 131.80kB 0.3s done; #21 DONE 0.3s; ; #28 [frontend-prod build-stage  5/10] COPY public/ public/; #28 CACHED; ; #29 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #29 CACHED; ; #30 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #30 CACHED; ; #31 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #31 CACHED; ; #32 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #32 CACHED; ; #33 [backend  7/17] RUN useradd --create-home --shell /bin/bash app; #33 CACHED; ; #34 [backend  8/17] COPY --chown=app:app src/ /app/src/; #34 CACHED; ; #35 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #35 CACHED; ; #36 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #36 CACHED; ; #37 [backend 12/17] COPY --chown=app:app static/ /app/static/; #37 CACHED; ; #38 [backend  9/17] COPY --chown=app:app app/ /app/app/; #38 CACHED; ; #39 [backend 11/17] COPY --chown=app:app templates/ /app/templates/; #39 CACHED; ; #40 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #40 CACHED; ; #41 [backend  2/17] WORKDIR /app; #41 CACHED; ; #42 [backend  3/17] COPY requirements.txt requirements.txt; #42 CACHED; ; #43 [backend 10/17] COPY --chown=app:app config/ /app/config/; #43 CACHED; ; #44 [rqworker2 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #44 CACHED; ; #45 [backend] exporting to image; #45 exporting layers 0.1s done; #45 exporting manifest sha256:be6fabc331794839e10bbff1a8c3b1749cb1264ed7cbfa9d53b4c8493325de81; #45 ...; ; #46 [frontend-prod build-stage  6/10] COPY src/ src/; #46 DONE 0.2s; ; #45 [backend] exporting to image; #45 exporting manifest sha256:be6fabc331794839e10bbff1a8c3b1749cb1264ed7cbfa9d53b4c8493325de81 0.1s done; #45 exporting config sha256:16697b4472a8e03249a82f7c6253d98b6df8f02b2e90b6fa4ca810794eb6b96e; #45 exporting config sha256:16697b4472a8e03249a82f7c6253d98b6df8f02b2e90b6fa4ca810794eb6b96e 0.1s done; #45 exporting attestation manifest sha256:d60eeaf369e38cec646c695c8c3e66092996ff6b64e87fdfcf0e82d3a2116844; #45 ...; ; #47 [frontend-prod build-stage  7/10] COPY index.html .; #47 DONE 1.0s; ; #45 [backend] exporting to image; #45 exporting attestation manifest sha256:d60eeaf369e38cec646c695c8c3e66092996ff6b64e87fdfcf0e82d3a2116844 0.5s done; #45 exporting manifest list sha256:884c4e7b96494e8be4da519e4f8d1364264f58bb2942afcca6b4d55b14c87ef6; #45 exporting manifest list sha256:884c4e7b96494e8be4da519e4f8d1364264f58bb2942afcca6b4d55b14c87ef6 0.3s done; #45 naming to docker.io/library/casestrainer-backend:latest; #45 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #45 unpacking to docker.io/library/casestrainer-backend:latest; #45 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #45 ...; ; #48 [nginx] resolving provenance for metadata file; #48 DONE 0.0s; ; #49 [rqworker1] exporting to image; #49 exporting layers 0.1s done; #49 exporting manifest sha256:d069602920372153a53f67a4e014878c1ce69d611e4ced6a9f5a6e95303a8200 0.1s done; #49 exporting config sha256:a0cc729cc84b024311f367f826409b6007c97905957d137b5517078df88a6d51 0.1s done; #49 exporting attestation manifest sha256:c7af6b6eb36b250456d509bb02859684e5712beb20722942cca582d555c1e2ff 0.5s done; #49 exporting manifest list sha256:59781800ee72fc2b2d49a18a6f4be2b4a1743aef47390475e8e442411264dd66 0.3s done; #49 naming to docker.io/library/casestrainer-rqworker1:latest 0.2s done; #49 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #49 DONE 1.8s; ; #50 [frontend-prod build-stage  8/10] COPY vite.config.js .; #50 DONE 0.6s; ; #45 [backend] exporting to image; #45 DONE 1.8s; ; #51 [rqworker2] exporting to image; #51 exporting layers 0.1s done; #51 exporting manifest sha256:cd2268f9635b70ab27f638190ce4ea472b4de2044ddd611032f56ff9c63468c3 0.1s done; #51 exporting config sha256:2713b64bde24683ca27420912837abe385367534a8517aea93087d5980a35eca 0.1s done; #51 exporting attestation manifest sha256:ae4a8680ad1dfe6c0a02c77ffc8d9c9e0e71f26faf49459f5ccec1f7b94af305 0.5s done; #51 exporting manifest list sha256:33ff115361ae7db334280b8279eae54a1b7347388a48625488bfa05dcc930a03 0.3s done; #51 naming to docker.io/library/casestrainer-rqworker2:latest 0.2s done; #51 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #51 DONE 1.8s; ; #52 [rqworker3] exporting to image; #52 exporting layers 0.1s done; #52 exporting manifest sha256:63f852f620c7c49e3335fef29b72ce592142396dc77316a9aa94eb00f7233af2 0.1s done; #52 exporting config sha256:907fcb62de21357799e56f0344b8d9f287b81b8e666ead906ac0f1e2327c8040 0.1s done; #52 exporting attestation manifest sha256:16e31d1ce695521e16df6a1e45ad179fe2604fac959803b52685cadcc175849f 0.5s done; #52 exporting manifest list sha256:d80a3de4a5c4df4e4566baa9e06a4dbaa82077cb6e68f6c663287a329711a3de 0.3s done; #52 naming to docker.io/library/casestrainer-rqworker3:latest 0.2s done; #52 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #52 DONE 1.8s; ; #53 [frontend-prod build-stage  9/10] RUN npm run build; #53 ...; ; #54 [rqworker1] resolving provenance for metadata file; #54 DONE 0.2s; ; #53 [frontend-prod build-stage  9/10] RUN npm run build; #53 1.343 ; #53 1.343 > casestrainer-vue-new@0.6.5 build; #53 1.343 > vite build; #53 1.343 ; #53 ...; ; #55 [backend] resolving provenance for metadata file; #55 DONE 0.2s; ; #56 [rqworker2] resolving provenance for metadata file; #56 DONE 0.4s; ; #57 [rqworker3] resolving provenance for metadata file; #57 DONE 0.0s; ; #53 [frontend-prod build-stage  9/10] RUN npm run build; #53 2.167 vite v6.3.5 building for production...; #53 2.415 transforming...; #53 8.310 G 139 modules transformed.; #53 9.474 rendering chunks...; #53 14.48 computing gzip size...; #53 14.54 dist/index.html                              0.91 kB G gzip:  0.46 kB; #53 14.54 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB G gzip:  0.07 kB; #53 14.54 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB G gzip:  0.07 kB; #53 14.54 dist/assets/NotFound-CrLUfTg_.css            1.01 kB G gzip:  0.45 kB; #53 14.54 dist/assets/Docs-La2G-zWQ.css                1.39 kB G gzip:  0.46 kB; #53 14.54 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB G gzip:  0.57 kB; #53 14.54 dist/assets/index-BJGmEP7K.css             276.13 kB G gzip: 39.00 kB; #53 14.54 dist/assets/Docs-BXIyjfqB.js                 1.01 kB G gzip:  0.56 kB; #53 14.54 dist/assets/WordPlugin-BR1R6V2V.js           1.20 kB G gzip:  0.71 kB; #53 14.54 dist/assets/BrowserExtension-9BC20Fsc.js     1.22 kB G gzip:  0.73 kB; #53 14.54 dist/assets/NotFound-DZqdLT35.js             1.89 kB G gzip:  0.92 kB; #53 14.54 dist/assets/ApiDocs-DO0nb2zU.js             23.31 kB G gzip:  4.00 kB; #53 14.54 dist/assets/vendor-C-1G2k3o.js              34.93 kB G gzip: 13.58 kB; #53 14.54 dist/assets/vue-DOX4hRq3.js                 91.40 kB G gzip: 34.95 kB; #53 14.54 dist/assets/index-oTQX3duK.js              159.48 kB G gzip: 47.09 kB; #53 14.55 G built in 12.30s; #53 DONE 15.0s; ; #58 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #58 DONE 0.6s; ; #8 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 CACHED; ; #59 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #59 DONE 0.1s; ; #60 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #60 DONE 0.4s; ; #61 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #61 DONE 0.1s; ; #62 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #62 DONE 0.2s; ; #63 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #63 DONE 0.4s; ; #64 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #64 DONE 0.5s; ; #65 [frontend-prod] exporting to image; #65 exporting layers; #65 exporting layers 1.1s done; #65 exporting manifest sha256:2e54b3d4a67bf94c34a2d2b8d8d225d7b62f90cb2999b50f647f9e87885e2882 0.1s done; #65 exporting config sha256:a592091762a88b59052ee4acd1238c3f2a0cc9525bb2a7f5a66721c5af94a38f 0.0s done; #65 exporting attestation manifest sha256:db10de1ad6f8e6998ed91118736eb28770dd9b9db0889b44bc87533cf6bb7e8a 0.1s done; #65 exporting manifest list sha256:d01aacb257f7e0ecf7a8b2aec4e65fef7cec056a903ae6abc70343f162e711a7; #65 exporting manifest list sha256:d01aacb257f7e0ecf7a8b2aec4e65fef7cec056a903ae6abc70343f162e711a7 0.1s done; #65 naming to docker.io/library/casestrainer-frontend-prod:latest done; #65 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #65 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.3s done; #65 DONE 2.0s; ; #66 [frontend-prod] resolving provenance for metadata file; #66 DONE 0.1s;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built
[2025-08-14 22:08:52] [INFO] Docker operation completed successfully: build
[2025-08-14 22:08:52] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 22:09:07] [DEBUG] Docker operation exit code: 0
[2025-08-14 22:09:07] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-backend-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 22:09:07] [INFO] Docker operation completed successfully: up
[2025-08-14 22:09:07] [INFO] Waiting for containers to stabilize...
[2025-08-14 22:09:18] [INFO] Performing application health check...
[2025-08-14 22:09:18] [INFO] Application health check passed
[2025-08-14 22:09:18] [INFO] Deployment completed successfully!
[2025-08-14 22:09:18] [INFO] Containers running: 7
[2025-08-14 22:09:18] [DEBUG] Launcher execution completed
[2025-08-14 22:16:24] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 22:16:24] [INFO] Environment: Production, Mode: Auto
[2025-08-14 22:16:24] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 22:16:24] [INFO] Checking prerequisites...
[2025-08-14 22:16:24] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 22:16:24] [INFO] Auto-detecting deployment mode...
[2025-08-14 22:16:25] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-14 22:16:25] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 22:16:25] [INFO] Auto-detected mode: Fast
[2025-08-14 22:16:25] [INFO] Starting deployment in Fast mode...
[2025-08-14 22:16:25] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 22:16:25] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 22:16:30] [DEBUG] Docker operation exit code: 0
[2025-08-14 22:16:30] [DEBUG] Docker output:  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 22:16:30] [INFO] Docker operation completed successfully: down
[2025-08-14 22:16:30] [INFO] Recent changes in src - will rebuild images
[2025-08-14 22:16:30] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 22:16:30] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 22:16:56] [DEBUG] Docker operation exit code: 0
[2025-08-14 22:16:56] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [backend internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [nginx internal] load build definition from Dockerfile; #3 transferring dockerfile: 652B 0.0s done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.2s; ; #5 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #5 ...; ; #6 [auth] library/node:pull token for registry-1.docker.io; #6 DONE 0.0s; ; #7 [auth] library/python:pull token for registry-1.docker.io; #7 DONE 0.0s; ; #8 [nginx internal] load metadata for docker.io/library/nginx:alpine; #8 DONE 0.1s; ; #9 [nginx internal] load .dockerignore; #9 transferring context: 2B done; #9 DONE 0.0s; ; #10 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #11 [nginx internal] load build context; #11 transferring context: 97B 0.0s done; #11 DONE 0.0s; ; #12 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #12 CACHED; ; #13 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #13 CACHED; ; #14 [nginx 2/8] RUN apk add --no-cache curl; #14 CACHED; ; #15 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #15 CACHED; ; #16 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #16 CACHED; ; #17 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:f4408cd4a91b71454c6fc2153ad0e753d344f1ec334285dd371ac45807a73739; #19 exporting attestation manifest sha256:f4408cd4a91b71454c6fc2153ad0e753d344f1ec334285dd371ac45807a73739 0.1s done; #19 exporting manifest list sha256:1a9d0b462bddac9831db16bb7f13ac9c07ade15a1e28087e44f8ee208a66bcd7 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.3s; ; #20 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #20 ...; ; #5 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #5 DONE 0.7s; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.1s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #23 DONE 0.1s; ; #20 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #20 DONE 0.9s; ; #24 [backend internal] load .dockerignore; #24 transferring context: 908B 0.0s done; #24 DONE 0.1s; ; #25 [rqworker1 internal] load build context; #25 DONE 0.0s; ; #26 [nginx] resolving provenance for metadata file; #26 DONE 0.0s; ; #27 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #27 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #27 ...; ; #22 [frontend-prod internal] load build context; #22 transferring context: 92.52kB 0.1s done; #22 DONE 0.2s; ; #28 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #28 CACHED; ; #29 [frontend-prod build-stage  2/10] WORKDIR /app; #29 CACHED; ; #30 [frontend-prod build-stage  3/10] COPY package*.json ./; #30 CACHED; ; #31 [frontend-prod build-stage  5/10] COPY public/ public/; #31 CACHED; ; #27 [rqworker2  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #27 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.3s done; #27 DONE 0.3s; ; #25 [rqworker1 internal] load build context; #25 ...; ; #32 [frontend-prod build-stage  6/10] COPY src/ src/; #32 DONE 0.2s; ; #25 [rqworker1 internal] load build context; #25 transferring context: 131.80kB 0.2s done; #25 DONE 0.2s; ; #33 [frontend-prod build-stage  7/10] COPY index.html .; #33 DONE 0.2s; ; #34 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #34 CACHED; ; #35 [rqworker2 10/17] COPY --chown=app:app config/ /app/config/; #35 CACHED; ; #36 [rqworker2  3/17] COPY requirements.txt requirements.txt; #36 CACHED; ; #37 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #37 CACHED; ; #38 [rqworker2  2/17] WORKDIR /app; #38 CACHED; ; #39 [rqworker2  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #39 CACHED; ; #40 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #40 CACHED; ; #41 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #41 CACHED; ; #42 [rqworker2 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #42 CACHED; ; #43 [rqworker2 11/17] COPY --chown=app:app templates/ /app/templates/; #43 CACHED; ; #44 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #44 CACHED; ; #45 [rqworker2  5/17] RUN pip install --no-cache-dir -r requirements.txt; #45 CACHED; ; #46 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #46 CACHED; ; #47 [rqworker2  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #47 CACHED; ; #48 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #48 CACHED; ; #49 [rqworker2 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #49 CACHED; ; #50 [rqworker3] exporting to image; #50 exporting layers 0.0s done; #50 exporting manifest sha256:63f852f620c7c49e3335fef29b72ce592142396dc77316a9aa94eb00f7233af2 0.0s done; #50 exporting config sha256:907fcb62de21357799e56f0344b8d9f287b81b8e666ead906ac0f1e2327c8040 0.1s done; #50 exporting attestation manifest sha256:5c2fd0775f7b5593e18ef8fec031251a56809b02dd36310c409ec73066bbe46e; #50 ...; ; #51 [frontend-prod build-stage  8/10] COPY vite.config.js .; #51 DONE 0.4s; ; #52 [rqworker2] exporting to image; #52 exporting layers 0.0s done; #52 exporting manifest sha256:cd2268f9635b70ab27f638190ce4ea472b4de2044ddd611032f56ff9c63468c3 0.1s done; #52 exporting config sha256:2713b64bde24683ca27420912837abe385367534a8517aea93087d5980a35eca 0.1s done; #52 exporting attestation manifest sha256:b298d2e4adf4a2139bb409664f9f958900ce193f792eae95a28bba22a2275db8; #52 exporting attestation manifest sha256:b298d2e4adf4a2139bb409664f9f958900ce193f792eae95a28bba22a2275db8 0.3s done; #52 exporting manifest list sha256:a2cc6abf85b2f4be9f8189caf2b3d6a304cfff0802043cf45b780e796310cafe; #52 exporting manifest list sha256:a2cc6abf85b2f4be9f8189caf2b3d6a304cfff0802043cf45b780e796310cafe 0.1s done; #52 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #52 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #52 DONE 1.2s; ; #53 [rqworker1] exporting to image; #53 exporting layers 0.0s done; #53 exporting manifest sha256:d069602920372153a53f67a4e014878c1ce69d611e4ced6a9f5a6e95303a8200 0.0s done; #53 exporting config sha256:a0cc729cc84b024311f367f826409b6007c97905957d137b5517078df88a6d51 0.0s done; #53 exporting attestation manifest sha256:c4402951b9d2623cdda1201e44e24cb403228aadcbb72f88f6c1ffbca56d41c5 0.4s done; #53 exporting manifest list sha256:789813f08941690392340841543be9605338d4aea282e7919bb35045a4887918 0.2s done; #53 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #53 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #53 DONE 1.1s; ; #50 [rqworker3] exporting to image; #50 exporting attestation manifest sha256:5c2fd0775f7b5593e18ef8fec031251a56809b02dd36310c409ec73066bbe46e 0.4s done; #50 exporting manifest list sha256:a05d46a479fa3a6ce2b803e1ca0de791f32a348c3da8dd0be1df5d7bcc9f2e9b 0.2s done; #50 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #50 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #50 DONE 1.1s; ; #54 [backend] exporting to image; #54 exporting layers 0.0s done; #54 exporting manifest sha256:be6fabc331794839e10bbff1a8c3b1749cb1264ed7cbfa9d53b4c8493325de81 0.0s done; #54 exporting config sha256:16697b4472a8e03249a82f7c6253d98b6df8f02b2e90b6fa4ca810794eb6b96e 0.0s done; #54 exporting attestation manifest sha256:7d6c2d8879422aa944a32a1021671ff2d58da55774e748c8053a0b913208f394 0.4s done; #54 exporting manifest list sha256:3c1f2606c268489d71527952ff6a3f8b5830b2623b061383f08640c356b98535 0.2s done; #54 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #54 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #54 DONE 1.1s; ; #55 [frontend-prod build-stage  9/10] RUN npm run build; #55 ...; ; #56 [rqworker1] resolving provenance for metadata file; #56 DONE 0.2s; ; #57 [rqworker2] resolving provenance for metadata file; #57 DONE 0.0s; ; #58 [backend] resolving provenance for metadata file; #58 DONE 0.1s; ; #59 [rqworker3] resolving provenance for metadata file; #59 DONE 0.3s; ; #55 [frontend-prod build-stage  9/10] RUN npm run build; #55 1.891 ; #55 1.891 > casestrainer-vue-new@0.6.5 build; #55 1.891 > vite build; #55 1.891 ; #55 3.226 vite v6.3.5 building for production...; #55 3.886 transforming...; #55 9.491 G 139 modules transformed.; #55 10.99 rendering chunks...; #55 15.77 computing gzip size...; #55 15.82 dist/index.html                              0.91 kB G gzip:  0.46 kB; #55 15.82 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB G gzip:  0.07 kB; #55 15.82 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB G gzip:  0.07 kB; #55 15.82 dist/assets/NotFound-CrLUfTg_.css            1.01 kB G gzip:  0.45 kB; #55 15.82 dist/assets/Docs-La2G-zWQ.css                1.39 kB G gzip:  0.46 kB; #55 15.82 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB G gzip:  0.57 kB; #55 15.82 dist/assets/index-BJGmEP7K.css             276.13 kB G gzip: 39.00 kB; #55 15.82 dist/assets/Docs-CG-JH6mS.js                 1.01 kB G gzip:  0.56 kB; #55 15.82 dist/assets/WordPlugin-BX-fYhcg.js           1.20 kB G gzip:  0.72 kB; #55 15.82 dist/assets/BrowserExtension-CbJRA56i.js     1.22 kB G gzip:  0.73 kB; #55 15.82 dist/assets/NotFound-Vw0B_nHy.js             1.89 kB G gzip:  0.92 kB; #55 15.82 dist/assets/ApiDocs-DTxOmfrW.js             23.31 kB G gzip:  4.00 kB; #55 15.82 dist/assets/vendor-C-1G2k3o.js              34.93 kB G gzip: 13.58 kB; #55 15.82 dist/assets/vue-DOX4hRq3.js                 91.40 kB G gzip: 34.95 kB; #55 15.82 dist/assets/index-COnXJLFa.js              159.14 kB G gzip: 46.96 kB; #55 15.82 G built in 12.37s; #55 DONE 16.1s; ; #60 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #60 DONE 0.5s; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 CACHED; ; #61 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #61 DONE 0.1s; ; #62 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #62 DONE 0.4s; ; #63 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #63 DONE 0.1s; ; #64 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #64 DONE 0.1s; ; #65 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #65 DONE 0.6s; ; #66 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #66 DONE 0.5s; ; #67 [frontend-prod] exporting to image; #67 exporting layers; #67 exporting layers 0.6s done; #67 exporting manifest sha256:99989e28c969f86a249919c99121b7804448a9293bdfd87b583bd20a5360d884 0.1s done; #67 exporting config sha256:fb4cf02319cdd84b8203c154c2e73c1da06cbf9b1fffd4381bb45583a52585b7 0.0s done; #67 exporting attestation manifest sha256:4cbff23d4ea15eb67919cc95781ea92ba119b1666abbcf49c1d4df5c7850f58e 0.1s done; #67 exporting manifest list sha256:e657f843f88f6112f90ceb63903838b0d5c9262d9df362361bd95578a488db15; #67 exporting manifest list sha256:e657f843f88f6112f90ceb63903838b0d5c9262d9df362361bd95578a488db15 0.0s done; #67 naming to docker.io/library/casestrainer-frontend-prod:latest done; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.4s done; #67 DONE 1.3s; ; #68 [frontend-prod] resolving provenance for metadata file; #68 DONE 0.1s;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built
[2025-08-14 22:16:56] [INFO] Docker operation completed successfully: build
[2025-08-14 22:16:56] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 22:17:12] [DEBUG] Docker operation exit code: 0
[2025-08-14 22:17:12] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 22:17:12] [INFO] Docker operation completed successfully: up
[2025-08-14 22:17:12] [INFO] Waiting for containers to stabilize...
[2025-08-14 22:17:22] [INFO] Performing application health check...
[2025-08-14 22:17:23] [INFO] Application health check passed
[2025-08-14 22:17:23] [INFO] Deployment completed successfully!
[2025-08-14 22:17:23] [INFO] Containers running: 7
[2025-08-14 22:17:23] [DEBUG] Launcher execution completed
[2025-08-14 22:25:28] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 22:25:28] [INFO] Environment: Production, Mode: Auto
[2025-08-14 22:25:28] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 22:25:28] [INFO] Checking prerequisites...
[2025-08-14 22:25:29] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 22:25:29] [INFO] Auto-detecting deployment mode...
[2025-08-14 22:25:29] [INFO] Vue source files are newer than dist files - rebuild needed
[2025-08-14 22:25:29] [INFO] Vue source files are newer than dist - performing build and Fast restart
[2025-08-14 22:25:29] [INFO] Building Vue frontend...
[2025-08-14 22:25:38] [INFO] Auto-detected mode: Fast
[2025-08-14 22:25:38] [INFO] Starting deployment in Fast mode...
[2025-08-14 22:25:38] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 22:25:38] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 22:25:42] [DEBUG] Docker operation exit code: 0
[2025-08-14 22:25:42] [DEBUG] Docker output:  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 22:25:42] [INFO] Docker operation completed successfully: down
[2025-08-14 22:25:42] [INFO] Recent changes in src - will rebuild images
[2025-08-14 22:25:42] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 22:25:42] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 22:25:58] [DEBUG] Docker operation exit code: 0
[2025-08-14 22:25:58] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [frontend-prod internal] load build definition from Dockerfile.prod; #2 transferring dockerfile: 2.03kB 0.0s done; #2 DONE 0.1s; ; #3 [rqworker2 internal] load build definition from Dockerfile; #3 transferring dockerfile: 1.80kB 0.0s done; #3 DONE 0.1s; ; #4 [nginx internal] load build definition from Dockerfile; #4 transferring dockerfile: 652B 0.0s done; #4 DONE 0.1s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [auth] library/node:pull token for registry-1.docker.io; #6 DONE 0.0s; ; #7 [auth] library/python:pull token for registry-1.docker.io; #7 DONE 0.0s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #8 [nginx internal] load metadata for docker.io/library/nginx:alpine; #8 DONE 0.1s; ; #9 [nginx internal] load .dockerignore; #9 transferring context: 2B 0.0s done; #9 DONE 0.1s; ; #10 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #11 [nginx internal] load build context; #11 transferring context: 97B 0.0s done; #11 DONE 0.1s; ; #12 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #12 CACHED; ; #13 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #13 CACHED; ; #14 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #14 CACHED; ; #15 [nginx 2/8] RUN apk add --no-cache curl; #15 CACHED; ; #16 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #16 CACHED; ; #17 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:ab29bd1c378b7394ea40183fe0de67c97ca102f56f963e62fa6be81efd17e10e 0.1s done; #19 exporting manifest list sha256:b6b3731242a1fc394f2660de059dffe007d9f1515fff1049bed46f713d6b5cb7 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.1s done; #19 DONE 0.3s; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.7s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.2s done; #23 DONE 0.2s; ; #5 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 0.9s; ; #24 [rqworker1 internal] load .dockerignore; #24 transferring context: 908B 0.0s done; #24 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 26.74kB 0.0s done; #22 DONE 0.1s; ; #25 [rqworker2 internal] load build context; #25 DONE 0.0s; ; #25 [backend internal] load build context; #25 DONE 0.0s; ; #26 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #26 CACHED; ; #27 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #27 CACHED; ; #28 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #28 CACHED; ; #29 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #29 CACHED; ; #30 [frontend-prod build-stage  7/10] COPY index.html .; #30 CACHED; ; #31 [frontend-prod build-stage  6/10] COPY src/ src/; #31 CACHED; ; #32 [frontend-prod build-stage  5/10] COPY public/ public/; #32 CACHED; ; #33 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #33 CACHED; ; #34 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #34 CACHED; ; #35 [frontend-prod build-stage  2/10] WORKDIR /app; #35 CACHED; ; #36 [frontend-prod build-stage  3/10] COPY package*.json ./; #36 CACHED; ; #37 [frontend-prod build-stage  9/10] RUN npm run build; #37 CACHED; ; #38 [frontend-prod build-stage  8/10] COPY vite.config.js .; #38 CACHED; ; #39 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #39 CACHED; ; #40 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #40 CACHED; ; #41 [frontend-prod] exporting to image; #41 exporting layers 0.0s done; #41 exporting manifest sha256:99989e28c969f86a249919c99121b7804448a9293bdfd87b583bd20a5360d884 0.0s done; #41 exporting config sha256:fb4cf02319cdd84b8203c154c2e73c1da06cbf9b1fffd4381bb45583a52585b7 0.0s done; #41 exporting attestation manifest sha256:6b9f93fed836b64a3b176a38c40254a656a5da2259b03677510fce3e28e1a8de; #41 ...; ; #42 [rqworker3  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #42 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #42 DONE 0.1s; ; #43 [nginx] resolving provenance for metadata file; #43 DONE 0.1s; ; #25 [rqworker3 internal] load build context; #25 transferring context: 160.38kB 0.3s done; #25 DONE 0.3s; ; #41 [frontend-prod] exporting to image; #41 exporting attestation manifest sha256:6b9f93fed836b64a3b176a38c40254a656a5da2259b03677510fce3e28e1a8de 0.2s done; #41 exporting manifest list sha256:3e003022cac1c9341592a6d2262a7709d6b0c5144b9b7afffe322624dd8c733b 0.1s done; #41 naming to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #41 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #41 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #41 DONE 0.6s; ; #44 [rqworker3  2/17] WORKDIR /app; #44 CACHED; ; #45 [rqworker3  3/17] COPY requirements.txt requirements.txt; #45 CACHED; ; #46 [rqworker3  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #46 CACHED; ; #47 [rqworker3  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #47 CACHED; ; #48 [rqworker3  5/17] RUN pip install --no-cache-dir -r requirements.txt; #48 CACHED; ; #49 [rqworker3  7/17] RUN useradd --create-home --shell /bin/bash app; #49 CACHED; ; #50 [rqworker3  8/17] COPY --chown=app:app src/ /app/src/; #50 DONE 0.4s; ; #50 [backend  8/17] COPY --chown=app:app src/ /app/src/; #50 DONE 0.4s; ; #51 [frontend-prod] resolving provenance for metadata file; #51 DONE 0.0s; ; #52 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #52 DONE 0.2s; ; #52 [rqworker3  9/17] COPY --chown=app:app app/ /app/app/; #52 DONE 0.2s; ; #53 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.1s; ; #53 [backend 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.1s; ; #54 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.1s; ; #54 [backend 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.1s; ; #55 [rqworker1 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 1.0s; ; #55 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 1.0s; ; #56 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.2s; ; #56 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.2s; ; #57 [rqworker1 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.5s; ; #57 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.5s; ; #58 [rqworker2 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.5s; ; #58 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.5s; ; #59 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.5s; ; #59 [rqworker1 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.5s; ; #60 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.5s; ; #60 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.5s; ; #61 [rqworker1] exporting to image; #61 exporting layers 3.9s done; #61 exporting manifest sha256:4bce212c5ed7652f34009689772944420e518b39a5b928e767e63475ecedcd00; #61 exporting manifest sha256:4bce212c5ed7652f34009689772944420e518b39a5b928e767e63475ecedcd00 0.1s done; #61 exporting config sha256:7751ccae86599881e4cca024912d7f4fceee933773f56f0afc2a03435cc9c7c2; #61 exporting config sha256:7751ccae86599881e4cca024912d7f4fceee933773f56f0afc2a03435cc9c7c2 0.2s done; #61 exporting attestation manifest sha256:7cf17bf2b0e071ffc159e32839277615be9c9133707c528b32f45c98b8534b74; #61 exporting attestation manifest sha256:7cf17bf2b0e071ffc159e32839277615be9c9133707c528b32f45c98b8534b74 0.3s done; #61 exporting manifest list sha256:3659f6450f457abf478119fbdaae04b934441e5f0c10596475e40ae5103234ba; #61 exporting manifest list sha256:3659f6450f457abf478119fbdaae04b934441e5f0c10596475e40ae5103234ba 0.1s done; #61 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest 3.0s done; #61 ...; ; #62 [backend] exporting to image; #62 exporting layers 3.9s done; #62 exporting manifest sha256:e2d610a548a8d9e4ad91ae0f2cce1a6efaebd54985caab3f8d8b1f5a7e7802ad 0.1s done; #62 exporting config sha256:7fb4961fe7895f347a07c695d316b374eb883ac9b9876ccfef2adace116c8c58 0.2s done; #62 exporting attestation manifest sha256:6f3a4e569ded04ae475a9883b3ac61fda9cdd7962d6f17ce41d7ca10e77e263e 0.3s done; #62 exporting manifest list sha256:a2cb0515f56bf295e55c68ca71c914924d96570618902ff768e9c3a537b876fd 0.1s done; #62 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #62 unpacking to docker.io/library/casestrainer-backend:latest 3.0s done; #62 DONE 7.8s; ; #63 [rqworker3] exporting to image; #63 exporting layers 3.9s done; #63 exporting manifest sha256:8fedfb06a6debab37de40fb22a78003eabf731f2f798d6d2bb3a3efefd8f6e12 0.1s done; #63 exporting config sha256:32bbccfd8951e4e4d0f793b7a238f8663a8ea30b468254954bb54ed9875e8869 0.2s done; #63 exporting attestation manifest sha256:e2b6fcdea7ce5af31f90d9806f9d5a5be744b03fe8b004f29a10676ac4128a6a 0.3s done; #63 exporting manifest list sha256:2da69f288cd02eea268cbe06fbbdbd16ed4d8f86efe494032e1043f234e51f73 0.1s done; #63 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #63 unpacking to docker.io/library/casestrainer-rqworker3:latest 3.0s done; #63 DONE 7.8s; ; #61 [rqworker1] exporting to image; #61 DONE 7.8s; ; #64 [rqworker2] exporting to image; #64 exporting layers 3.9s done; #64 exporting manifest sha256:e3743a9272185c532de144cfc729361fb97ba6ada905cbee9880d74fe5b57cd3 0.2s done; #64 exporting config sha256:21ea496d4f190b61c29f763957f6644e56fef81eaa9334071ab03fd19454f97a 0.1s done; #64 exporting attestation manifest sha256:d717a5d1b03a7760e48b3b4278397bf637d7080d064f6ad8bb62f6df09f91c19 0.3s done; #64 exporting manifest list sha256:bf61c481305e30351894a99f50bf34141171f6375f372f5a94e84c8d2f3d7b9c 0.1s done; #64 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #64 unpacking to docker.io/library/casestrainer-rqworker2:latest 3.0s done; #64 DONE 7.8s; ; #65 [backend] resolving provenance for metadata file; #65 DONE 0.4s; ; #66 [rqworker3] resolving provenance for metadata file; #66 DONE 0.1s; ; #67 [rqworker1] resolving provenance for metadata file; #67 DONE 0.3s; ; #68 [rqworker2] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built
[2025-08-14 22:25:58] [INFO] Docker operation completed successfully: build
[2025-08-14 22:25:58] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 22:26:13] [DEBUG] Docker operation exit code: 0
[2025-08-14 22:26:13] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 22:26:13] [INFO] Docker operation completed successfully: up
[2025-08-14 22:26:13] [INFO] Waiting for containers to stabilize...
[2025-08-14 22:26:24] [INFO] Performing application health check...
[2025-08-14 22:26:24] [INFO] Application health check passed
[2025-08-14 22:26:24] [INFO] Deployment completed successfully!
[2025-08-14 22:26:24] [INFO] Containers running: 7
[2025-08-14 22:26:24] [DEBUG] Launcher execution completed
[2025-08-14 22:29:14] [INFO] CaseStrainer Production Launcher starting...
[2025-08-14 22:29:14] [INFO] Environment: Production, Mode: Auto
[2025-08-14 22:29:14] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-14 22:29:14] [INFO] Checking prerequisites...
[2025-08-14 22:29:14] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-14 22:29:14] [INFO] Auto-detecting deployment mode...
[2025-08-14 22:29:15] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-14 22:29:15] [INFO] Recent code changes detected - recommending Fast start
[2025-08-14 22:29:15] [INFO] Auto-detected mode: Fast
[2025-08-14 22:29:15] [INFO] Starting deployment in Fast mode...
[2025-08-14 22:29:15] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-14 22:29:15] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-14 22:29:18] [DEBUG] Docker operation exit code: 0
[2025-08-14 22:29:18] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-14 22:29:18] [INFO] Docker operation completed successfully: down
[2025-08-14 22:29:18] [INFO] Recent changes in src - will rebuild images
[2025-08-14 22:29:18] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-14 22:29:18] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-14 22:29:24] [DEBUG] Docker operation exit code: 0
[2025-08-14 22:29:24] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [frontend-prod internal] load build definition from Dockerfile.prod; #2 transferring dockerfile: 2.03kB 0.0s done; #2 DONE 0.1s; ; #3 [rqworker2 internal] load build definition from Dockerfile; #3 transferring dockerfile: 1.80kB 0.0s done; #3 DONE 0.1s; ; #4 [nginx internal] load build definition from Dockerfile; #4 transferring dockerfile: 652B 0.0s done; #4 DONE 0.1s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B done; #7 DONE 0.0s; ; #8 [nginx internal] load build context; #8 DONE 0.0s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 DONE 0.1s; ; #8 [nginx internal] load build context; #8 transferring context: 97B done; #8 DONE 0.0s; ; #10 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #10 CACHED; ; #11 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #11 CACHED; ; #12 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #12 CACHED; ; #13 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #13 CACHED; ; #14 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #14 CACHED; ; #15 [nginx 2/8] RUN apk add --no-cache curl; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [nginx] exporting to image; #17 exporting layers 0.0s done; #17 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #17 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #17 exporting attestation manifest sha256:07c63f7b6e6079d82befe7e1dd5734c3b7613962a37d070ff3c1493ab985082b; #17 ...; ; #18 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #18 DONE 0.5s; ; #17 [nginx] exporting to image; #17 exporting attestation manifest sha256:07c63f7b6e6079d82befe7e1dd5734c3b7613962a37d070ff3c1493ab985082b 0.1s done; #17 exporting manifest list sha256:b8ee17626146069f7ef281028926b9c2e5b46a58fcc246dec485a907cd8f6fc3; #17 ...; ; #9 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #19 [frontend-prod internal] load .dockerignore; #19 transferring context: 834B 0.0s done; #19 DONE 0.0s; ; #20 [frontend-prod internal] load build context; #20 DONE 0.0s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 0.5s; ; #21 [rqworker3 internal] load .dockerignore; #21 transferring context: 908B 0.0s done; #21 DONE 0.0s; ; #22 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #22 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #22 DONE 0.1s; ; #17 [nginx] exporting to image; #17 exporting manifest list sha256:b8ee17626146069f7ef281028926b9c2e5b46a58fcc246dec485a907cd8f6fc3 0.0s done; #17 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #17 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #17 DONE 0.4s; ; #23 [backend internal] load build context; #23 DONE 0.0s; ; #20 [frontend-prod internal] load build context; #20 transferring context: 4.14kB 0.0s done; #20 DONE 0.1s; ; #24 [backend  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #24 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #24 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #24 DONE 0.1s; ; #25 [frontend-prod build-stage  5/10] COPY public/ public/; #25 CACHED; ; #26 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #26 CACHED; ; #27 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #27 CACHED; ; #28 [frontend-prod build-stage  3/10] COPY package*.json ./; #28 CACHED; ; #29 [frontend-prod build-stage  6/10] COPY src/ src/; #29 CACHED; ; #30 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #30 CACHED; ; #31 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #31 CACHED; ; #32 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #32 CACHED; ; #33 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #33 CACHED; ; #34 [frontend-prod build-stage  2/10] WORKDIR /app; #34 CACHED; ; #35 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #35 CACHED; ; #36 [frontend-prod build-stage  7/10] COPY index.html .; #36 CACHED; ; #37 [frontend-prod build-stage  9/10] RUN npm run build; #37 CACHED; ; #38 [frontend-prod build-stage  8/10] COPY vite.config.js .; #38 CACHED; ; #39 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #39 CACHED; ; #23 [rqworker1 internal] load build context; #23 transferring context: 160.38kB 0.2s done; #23 DONE 0.2s; ; #40 [frontend-prod] exporting to image; #40 exporting layers 0.0s done; #40 exporting manifest sha256:99989e28c969f86a249919c99121b7804448a9293bdfd87b583bd20a5360d884 done; #40 exporting config sha256:fb4cf02319cdd84b8203c154c2e73c1da06cbf9b1fffd4381bb45583a52585b7 0.0s done; #40 exporting attestation manifest sha256:cac1aeeae6e7466a40e0b6217c440d3538f277f4b3eb314c06f26d4e6c52d10e 0.1s done; #40 exporting manifest list sha256:45cd11cb029abd5976f85d6abc0fd7d694c8ba8bc4a71c88b34a31b79af7858d; #40 ...; ; #41 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #41 CACHED; ; #42 [rqworker2  2/17] WORKDIR /app; #42 CACHED; ; #43 [rqworker2 11/17] COPY --chown=app:app templates/ /app/templates/; #43 CACHED; ; #44 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #44 CACHED; ; #45 [rqworker2  5/17] RUN pip install --no-cache-dir -r requirements.txt; #45 CACHED; ; #46 [rqworker2  3/17] COPY requirements.txt requirements.txt; #46 CACHED; ; #47 [rqworker2 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #47 CACHED; ; #48 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #48 CACHED; ; #49 [rqworker2  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #49 CACHED; ; #50 [rqworker2  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #50 CACHED; ; #51 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #51 CACHED; ; #52 [rqworker2 10/17] COPY --chown=app:app config/ /app/config/; #52 CACHED; ; #53 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #53 CACHED; ; #54 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #54 CACHED; ; #55 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #55 CACHED; ; #56 [rqworker2 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #56 CACHED; ; #40 [frontend-prod] exporting to image; #40 exporting manifest list sha256:45cd11cb029abd5976f85d6abc0fd7d694c8ba8bc4a71c88b34a31b79af7858d 0.1s done; #40 naming to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #40 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #40 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #40 DONE 0.5s; ; #57 [backend] exporting to image; #57 exporting layers 0.0s done; #57 exporting manifest sha256:e2d610a548a8d9e4ad91ae0f2cce1a6efaebd54985caab3f8d8b1f5a7e7802ad 0.0s done; #57 exporting config sha256:7fb4961fe7895f347a07c695d316b374eb883ac9b9876ccfef2adace116c8c58 0.0s done; #57 exporting attestation manifest sha256:e2e6680ef1a85998cb019b84188e3ef830886f58912a3d4a50b0b7c094cad5b7; #57 exporting attestation manifest sha256:e2e6680ef1a85998cb019b84188e3ef830886f58912a3d4a50b0b7c094cad5b7 0.4s done; #57 exporting manifest list sha256:cbef5b05bb2a8ffdeca51f2d0ef6147b41eaa745f7765b636d062c94352583d3; #57 exporting manifest list sha256:cbef5b05bb2a8ffdeca51f2d0ef6147b41eaa745f7765b636d062c94352583d3 0.2s done; #57 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #57 unpacking to docker.io/library/casestrainer-backend:latest; #57 ...; ; #58 [nginx] resolving provenance for metadata file; #58 DONE 0.0s; ; #57 [backend] exporting to image; #57 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #57 DONE 1.0s; ; #59 [frontend-prod] resolving provenance for metadata file; #59 DONE 0.0s; ; #60 [rqworker1] exporting to image; #60 exporting layers 0.0s done; #60 exporting manifest sha256:4bce212c5ed7652f34009689772944420e518b39a5b928e767e63475ecedcd00 0.0s done; #60 exporting config sha256:7751ccae86599881e4cca024912d7f4fceee933773f56f0afc2a03435cc9c7c2 0.0s done; #60 exporting attestation manifest sha256:a2c7d6b1e06ad5f554604ef674c8013917f78a9e9d7bc8a23e39326c1ac40c31 0.3s done; #60 exporting manifest list sha256:67b509999ce11c88242eaeaa2eecff98be5b3f86c21a4d9c552c8b3da9dc5f40 0.2s done; #60 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #60 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #60 DONE 1.0s; ; #61 [rqworker2] exporting to image; #61 exporting layers 0.0s done; #61 exporting manifest sha256:e3743a9272185c532de144cfc729361fb97ba6ada905cbee9880d74fe5b57cd3 0.0s done; #61 exporting config sha256:21ea496d4f190b61c29f763957f6644e56fef81eaa9334071ab03fd19454f97a 0.0s done; #61 exporting attestation manifest sha256:3507d1901d82746e1afab217d7309dd73be0a2896e90e85a36295309c6d5b79f 0.4s done; #61 exporting manifest list sha256:94f330b1467ff813b9866a8230f1c02bcf7b3c095329c81bed08c30118bb9502 0.2s done; #61 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #61 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #61 DONE 1.0s; ; #62 [rqworker3] exporting to image; #62 exporting layers 0.0s done; #62 exporting manifest sha256:8fedfb06a6debab37de40fb22a78003eabf731f2f798d6d2bb3a3efefd8f6e12 0.0s done; #62 exporting config sha256:32bbccfd8951e4e4d0f793b7a238f8663a8ea30b468254954bb54ed9875e8869 0.0s done; #62 exporting attestation manifest sha256:0e5af403fb089942a24865c162531e654d6d63445015b304f3674b41c05b4abe 0.4s done; #62 exporting manifest list sha256:f46cc1e451399b44e10e3eaa6e99a3b23fd82d511f87d74bf2ea6dfb2abf2dfe 0.1s done; #62 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #62 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #62 DONE 1.0s; ; #63 [rqworker1] resolving provenance for metadata file; #63 DONE 0.3s; ; #64 [backend] resolving provenance for metadata file; #64 DONE 0.1s; ; #65 [rqworker2] resolving provenance for metadata file; #65 DONE 0.2s; ; #66 [rqworker3] resolving provenance for metadata file; #66 DONE 0.0s;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built
[2025-08-14 22:29:24] [INFO] Docker operation completed successfully: build
[2025-08-14 22:29:24] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-14 22:29:38] [DEBUG] Docker operation exit code: 0
[2025-08-14 22:29:38] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-14 22:29:38] [INFO] Docker operation completed successfully: up
[2025-08-14 22:29:38] [INFO] Waiting for containers to stabilize...
[2025-08-14 22:29:48] [INFO] Performing application health check...
[2025-08-14 22:29:49] [INFO] Application health check passed
[2025-08-14 22:29:49] [INFO] Deployment completed successfully!
[2025-08-14 22:29:49] [INFO] Containers running: 7
[2025-08-14 22:29:49] [DEBUG] Launcher execution completed
