[2025-08-17 15:18:29] [INFO] CaseStrainer Production Launcher starting...
[2025-08-17 15:18:29] [INFO] Environment: Production, Mode: Auto
[2025-08-17 15:18:29] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-17 15:18:29] [INFO] Checking prerequisites...
[2025-08-17 15:18:29] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-17 15:18:29] [INFO] Auto-detecting deployment mode...
[2025-08-17 15:18:30] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-17 15:18:30] [INFO] Recent code changes detected - recommending Fast start
[2025-08-17 15:18:30] [INFO] Auto-detected mode: Fast
[2025-08-17 15:18:30] [INFO] Starting deployment in Fast mode...
[2025-08-17 15:18:30] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-17 15:18:30] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-17 15:18:48] [DEBUG] Docker operation exit code: 0
[2025-08-17 15:18:48] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-17 15:18:48] [INFO] Docker operation completed successfully: down
[2025-08-17 15:18:48] [INFO] Recent changes in src - will rebuild images
[2025-08-17 15:18:48] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-17 15:18:48] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-17 15:19:08] [DEBUG] Docker operation exit code: 0
[2025-08-17 15:19:08] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [nginx internal] load build definition from Dockerfile; #2 transferring dockerfile: 652B 0.0s done; #2 DONE 0.1s; ; #3 [frontend-prod internal] load build definition from Dockerfile.prod; #3 transferring dockerfile: 2.03kB 0.0s done; #3 DONE 0.1s; ; #4 [backend internal] load build definition from Dockerfile; #4 transferring dockerfile: 1.80kB 0.0s done; #4 DONE 0.1s; ; #5 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [nginx internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B 0.0s done; #7 DONE 0.0s; ; #8 [nginx internal] load build context; #8 DONE 0.0s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 DONE 0.1s; ; #8 [nginx internal] load build context; #8 transferring context: 97B done; #8 DONE 0.0s; ; #10 [nginx 2/8] RUN apk add --no-cache curl; #10 CACHED; ; #11 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #11 CACHED; ; #12 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #12 CACHED; ; #13 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #13 CACHED; ; #14 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #14 CACHED; ; #15 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [auth] library/node:pull token for registry-1.docker.io; #17 DONE 0.0s; ; #18 [auth] library/python:pull token for registry-1.docker.io; #18 DONE 0.0s; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 0.0s done; #19 exporting attestation manifest sha256:b6bc902cfdb2b70774ca93de0eb1fe20343abfba23569fce32f3a59d0597d7dd 0.1s done; #19 exporting manifest list sha256:aff1438512bb2bdf6477cf0a02997037d0e7b6fffeb09b5d2015d796df19e8d6 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.3s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.9s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #9 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.1s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 1.0s; ; #23 [rqworker3 internal] load .dockerignore; #23 transferring context: 908B 0.0s done; #23 DONE 0.0s; ; #24 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #24 DONE 0.1s; ; #25 [rqworker1 internal] load build context; #25 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 4.14kB 0.0s done; #22 DONE 0.0s; ; #26 [nginx] resolving provenance for metadata file; #26 DONE 0.0s; ; #27 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #27 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #27 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #27 DONE 0.1s; ; #25 [rqworker1 internal] load build context; #25 ...; ; #28 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #28 CACHED; ; #29 [frontend-prod build-stage  3/10] COPY package*.json ./; #29 CACHED; ; #30 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #30 CACHED; ; #31 [frontend-prod build-stage  9/10] RUN npm run build; #31 CACHED; ; #32 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #32 CACHED; ; #33 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #33 CACHED; ; #34 [frontend-prod build-stage  8/10] COPY vite.config.js .; #34 CACHED; ; #35 [frontend-prod build-stage  7/10] COPY index.html .; #35 CACHED; ; #36 [frontend-prod build-stage  2/10] WORKDIR /app; #36 CACHED; ; #37 [frontend-prod build-stage  6/10] COPY src/ src/; #37 CACHED; ; #38 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #38 CACHED; ; #39 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #39 CACHED; ; #40 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #40 CACHED; ; #41 [frontend-prod build-stage  5/10] COPY public/ public/; #41 CACHED; ; #42 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #42 CACHED; ; #25 [rqworker2 internal] load build context; #25 transferring context: 297.10kB 0.2s done; #25 DONE 0.3s; ; #43 [frontend-prod] exporting to image; #43 exporting layers 0.0s done; #43 exporting manifest sha256:c1836ea5127fe3358856f58cbc74c4198108ef080705cf95d1c2305c4ffbf6f7 0.0s done; #43 exporting config sha256:cd5585c9e33a62b59500b700963413683d1df872372d8b4428c999a8c03d9350 0.0s done; #43 exporting attestation manifest sha256:b2848bc7ad9eecf14f38a3fcac1e9ab0e3de4f8b292fa228580d12804e607aa4 0.1s done; #43 exporting manifest list sha256:27512ebcc045563f4cf1e62e42aa24c6400d8599203e5952d9deed4c6e1e2e1c 0.1s done; #43 naming to docker.io/library/casestrainer-frontend-prod:latest; #43 ...; ; #44 [rqworker3  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #44 CACHED; ; #45 [rqworker3  3/17] COPY requirements.txt requirements.txt; #45 CACHED; ; #46 [rqworker3  2/17] WORKDIR /app; #46 CACHED; ; #47 [rqworker3  5/17] RUN pip install --no-cache-dir -r requirements.txt; #47 CACHED; ; #48 [rqworker3  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #48 CACHED; ; #49 [rqworker3  7/17] RUN useradd --create-home --shell /bin/bash app; #49 CACHED; ; #43 [frontend-prod] exporting to image; #43 naming to docker.io/library/casestrainer-frontend-prod:latest done; #43 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #43 DONE 0.5s; ; #46 [backend  2/17] WORKDIR /app; #46 CACHED; ; #47 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #47 CACHED; ; #48 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #48 CACHED; ; #44 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #44 CACHED; ; #45 [backend  3/17] COPY requirements.txt requirements.txt; #45 CACHED; ; #49 [backend  7/17] RUN useradd --create-home --shell /bin/bash app; #49 CACHED; ; #50 [backend  8/17] COPY --chown=app:app src/ /app/src/; #50 ...; ; #51 [frontend-prod] resolving provenance for metadata file; #51 DONE 0.0s; ; #50 [backend  8/17] COPY --chown=app:app src/ /app/src/; #50 DONE 1.3s; ; #52 [backend  9/17] COPY --chown=app:app app/ /app/app/; #52 DONE 0.2s; ; #53 [backend 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.2s; ; #54 [rqworker3 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.2s; ; #55 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 2.8s; ; #56 [rqworker1 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.2s; ; #57 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.7s; ; #58 [rqworker3 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.5s; ; #59 [rqworker3 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.5s; ; #60 [rqworker1 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.5s; ; #61 [rqworker1] exporting to image; #61 exporting layers; #61 exporting layers 3.7s done; #61 exporting manifest sha256:7cbbcd0fc9a0fb3ad4ec0ef96b098dbb7ec8589f3f899bf54fde587767b4a6c0; #61 exporting manifest sha256:7cbbcd0fc9a0fb3ad4ec0ef96b098dbb7ec8589f3f899bf54fde587767b4a6c0 0.1s done; #61 exporting config sha256:aa714f6827e22e71117afebf3eeceeb59416167752b263740ed4fc0cba6e422a; #61 exporting config sha256:aa714f6827e22e71117afebf3eeceeb59416167752b263740ed4fc0cba6e422a 0.1s done; #61 exporting attestation manifest sha256:b18e0a650d33f17e3f92de389481d3550dd7959563b43cfe80fe0a9b7d7dcb0d; #61 exporting attestation manifest sha256:b18e0a650d33f17e3f92de389481d3550dd7959563b43cfe80fe0a9b7d7dcb0d 0.2s done; #61 exporting manifest list sha256:4f682003c403f038f606013648e9d50de613d7722e9525869b51835decd8e39f; #61 exporting manifest list sha256:4f682003c403f038f606013648e9d50de613d7722e9525869b51835decd8e39f 0.1s done; #61 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest; #61 ...; ; #62 [rqworker2] exporting to image; #62 exporting layers 3.7s done; #62 exporting manifest sha256:4208ca15af252cec89c3e8ebbb14fd7a5a7622d5995c4486985063dbf4e35090 0.1s done; #62 exporting config sha256:248ada1d2ac8d0bf19bb151e201ccd40c8fd77ab3e05a79bffdcbb4e7b27840f 0.1s done; #62 exporting attestation manifest sha256:a7837170020813370c5792f9086b9898ab3b9baaf27915f54ec4fe33a91bcfa8 0.3s done; #62 exporting manifest list sha256:0f985112c28ba5a8c990d61b9f8292079450f072eeeb94a477d76620fbe6b773 0.1s done; #62 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #62 unpacking to docker.io/library/casestrainer-rqworker2:latest 3.0s done; #62 DONE 7.7s; ; #61 [rqworker1] exporting to image; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest 3.0s done; #61 DONE 7.7s; ; #63 [backend] exporting to image; #63 exporting layers 3.7s done; #63 exporting manifest sha256:f742d923bdcc059f7762bf3152a2eb71403bdb8f610ea9d22035542f83c78ccf 0.1s done; #63 exporting config sha256:4b20dd20d4d99f28d197be34a8efbf985b864cfcc9245cdfb1b4fa05b662e0da 0.1s done; #63 exporting attestation manifest sha256:9cadf343337ec42892d80257b8e1486b8ea7733fe9c3243025fa2f37f892bd59 0.3s done; #63 exporting manifest list sha256:8f81f09d05652f868c916b4454762e65b435b2f5ab95e234d1bfa48c87b80854 0.1s done; #63 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #63 unpacking to docker.io/library/casestrainer-backend:latest 3.1s done; #63 DONE 7.8s; ; #64 [rqworker3] exporting to image; #64 exporting layers 3.7s done; #64 exporting manifest sha256:6ad7b659db4c0fd2b89c28c42cacd5c57cb305fff4daae0754a186f28d97b104 0.1s done; #64 exporting config sha256:e7cca1fc0235d135641f94f722e26d28e5ebd9f95a6ee8bad58ce32b64651648 0.1s done; #64 exporting attestation manifest sha256:83f798bfe610255cd285a2380a56cdad62672b1609f944ee1dd2755eb507671d 0.2s done; #64 exporting manifest list sha256:452455cccd7857ad9f79c7bc63a6d9d844022d5c2495743856c47acd2c0e118c 0.1s done; #64 naming to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #64 unpacking to docker.io/library/casestrainer-rqworker3:latest 3.1s done; #64 DONE 7.8s; ; #65 [rqworker2] resolving provenance for metadata file; #65 DONE 0.4s; ; #66 [rqworker1] resolving provenance for metadata file; #66 DONE 0.4s; ; #67 [backend] resolving provenance for metadata file; #67 DONE 0.1s; ; #68 [rqworker3] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built
[2025-08-17 15:19:08] [INFO] Docker operation completed successfully: build
[2025-08-17 15:19:08] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-17 15:19:28] [DEBUG] Docker operation exit code: 0
[2025-08-17 15:19:28] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-nginx-prod  Created;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-17 15:19:28] [INFO] Docker operation completed successfully: up
[2025-08-17 15:19:28] [INFO] Waiting for containers to stabilize...
[2025-08-17 15:19:38] [INFO] Running post-deployment cleanup...
[2025-08-17 15:19:38] [INFO] Performing system cleanup...
[2025-08-17 15:19:38] [INFO] Clearing stuck Redis jobs...
[2025-08-17 15:19:38] [ERROR] Cleanup failed: Warning: Using a password with '-a' or '-u' option on the command line interface may not be safe.
[2025-08-17 15:19:38] [INFO] Performing application health check...
[2025-08-17 15:19:39] [INFO] Application health check passed
[2025-08-17 15:19:39] [INFO] Deployment completed successfully!
[2025-08-17 15:19:39] [INFO] Containers running: 9
[2025-08-17 15:19:39] [DEBUG] Launcher execution completed
[2025-08-17 15:32:44] [INFO] CaseStrainer Production Launcher starting...
[2025-08-17 15:32:44] [INFO] Environment: Production, Mode: VueBuild
[2025-08-17 15:32:44] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-17 15:32:44] [INFO] Checking prerequisites...
[2025-08-17 15:32:44] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-17 15:32:44] [INFO] Performing Vue build only...
[2025-08-17 15:32:44] [INFO] Building Vue frontend...
[2025-08-17 15:32:52] [INFO] Vue build completed successfully.
[2025-08-17 15:32:52] [INFO] Copying Vue build to production container...
[2025-08-17 15:32:52] [INFO] Vue build copied to production container successfully
[2025-08-17 15:32:52] [INFO] Vue build copied to production successfully.
[2025-08-17 15:32:52] [DEBUG] Launcher execution completed
[2025-08-17 15:33:08] [INFO] CaseStrainer Production Launcher starting...
[2025-08-17 15:33:08] [INFO] Environment: Production, Mode: Auto
[2025-08-17 15:33:08] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-17 15:33:08] [INFO] Checking prerequisites...
[2025-08-17 15:33:08] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-17 15:33:08] [INFO] Auto-detecting deployment mode...
[2025-08-17 15:33:08] [INFO] Vue dist files are older than 7 days - rebuild needed
[2025-08-17 15:33:08] [INFO] Vue build needed - performing build and Fast restart
[2025-08-17 15:33:08] [INFO] Building Vue frontend...
[2025-08-17 15:33:17] [INFO] Vue build successful - copying to production...
[2025-08-17 15:33:17] [INFO] Copying Vue build to production container...
[2025-08-17 15:33:17] [INFO] Vue build copied to production container successfully
[2025-08-17 15:33:17] [INFO] Vue build copied to production - will perform Fast restart
[2025-08-17 15:33:17] [INFO] Auto-detected mode: Fast
[2025-08-17 15:33:17] [INFO] Starting deployment in Fast mode...
[2025-08-17 15:33:17] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-17 15:33:17] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-17 15:33:35] [DEBUG] Docker operation exit code: 0
[2025-08-17 15:33:35] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-17 15:33:35] [INFO] Docker operation completed successfully: down
[2025-08-17 15:33:35] [INFO] Recent changes in src - will rebuild images
[2025-08-17 15:33:35] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-17 15:33:35] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-17 15:33:41] [DEBUG] Docker operation exit code: 0
[2025-08-17 15:33:41] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [backend internal] load build definition from Dockerfile; #2 DONE 0.0s; ; #2 [rqworker3 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.0s; ; #3 [frontend-prod internal] load build definition from Dockerfile.prod; #3 transferring dockerfile: 2.03kB done; #3 DONE 0.1s; ; #4 [nginx internal] load build definition from Dockerfile; #4 transferring dockerfile: 652B done; #4 DONE 0.1s; ; #5 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #5 DONE 0.1s; ; #6 [nginx internal] load .dockerignore; #6 transferring context: 2B done; #6 DONE 0.0s; ; #7 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #7 ...; ; #8 [nginx internal] load build context; #8 DONE 0.0s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #8 [nginx internal] load build context; #8 transferring context: 97B 0.0s done; #8 DONE 0.1s; ; #10 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #10 CACHED; ; #11 [nginx 2/8] RUN apk add --no-cache curl; #11 CACHED; ; #12 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #12 CACHED; ; #13 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #13 CACHED; ; #14 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #14 CACHED; ; #15 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [auth] library/node:pull token for registry-1.docker.io; #17 DONE 0.0s; ; #18 [auth] library/python:pull token for registry-1.docker.io; #18 DONE 0.0s; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:be491991a8e3b5e1688b5bebee1adae95a341c3ed36c0db3a538f3b90df7e2d5; #19 exporting attestation manifest sha256:be491991a8e3b5e1688b5bebee1adae95a341c3ed36c0db3a538f3b90df7e2d5 0.1s done; #19 exporting manifest list sha256:e776704425f20db0b41d58a792ba6e0e08f533ccb7ebfa3520ab7b745a840893 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.3s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.8s; ; #7 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #7 ...; ; #9 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.1s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #7 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #7 DONE 1.0s; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #23 DONE 0.2s; ; #24 [rqworker3 internal] load .dockerignore; #24 transferring context: 908B 0.0s done; #24 DONE 0.0s; ; #25 [rqworker2 internal] load build context; #25 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 4.14kB 0.0s done; #22 DONE 0.1s; ; #26 [nginx] resolving provenance for metadata file; #26 DONE 0.0s; ; #27 [rqworker2  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #27 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #27 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #27 DONE 0.1s; ; #28 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #28 CACHED; ; #29 [frontend-prod build-stage  7/10] COPY index.html .; #29 CACHED; ; #30 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #30 CACHED; ; #31 [frontend-prod build-stage  5/10] COPY public/ public/; #31 CACHED; ; #32 [frontend-prod build-stage  8/10] COPY vite.config.js .; #32 CACHED; ; #33 [frontend-prod build-stage  2/10] WORKDIR /app; #33 CACHED; ; #34 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #34 CACHED; ; #35 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #35 CACHED; ; #36 [frontend-prod build-stage  9/10] RUN npm run build; #36 CACHED; ; #37 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #37 CACHED; ; #38 [frontend-prod build-stage  6/10] COPY src/ src/; #38 CACHED; ; #39 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #39 CACHED; ; #40 [frontend-prod build-stage  3/10] COPY package*.json ./; #40 CACHED; ; #41 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #41 CACHED; ; #42 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #42 CACHED; ; #25 [rqworker1 internal] load build context; #25 transferring context: 139.69kB 0.2s done; #25 DONE 0.2s; ; #43 [frontend-prod] exporting to image; #43 exporting layers 0.0s done; #43 exporting manifest sha256:c1836ea5127fe3358856f58cbc74c4198108ef080705cf95d1c2305c4ffbf6f7 done; #43 exporting config sha256:cd5585c9e33a62b59500b700963413683d1df872372d8b4428c999a8c03d9350 0.0s done; #43 exporting attestation manifest sha256:0a78c0456bfb14924c426f5492df98e925da996073d298c70c751dc5c21c6646; #43 ...; ; #25 [rqworker2 internal] load build context; #25 DONE 0.2s; ; #44 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #44 CACHED; ; #45 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #45 CACHED; ; #46 [rqworker2  5/17] RUN pip install --no-cache-dir -r requirements.txt; #46 CACHED; ; #47 [rqworker2 10/17] COPY --chown=app:app config/ /app/config/; #47 CACHED; ; #48 [rqworker2  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #48 CACHED; ; #49 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #49 CACHED; ; #50 [rqworker2 11/17] COPY --chown=app:app templates/ /app/templates/; #50 CACHED; ; #51 [rqworker2  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #51 CACHED; ; #52 [rqworker2 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #52 CACHED; ; #53 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #53 CACHED; ; #54 [rqworker2  2/17] WORKDIR /app; #54 CACHED; ; #55 [rqworker2  3/17] COPY requirements.txt requirements.txt; #55 CACHED; ; #56 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #56 CACHED; ; #57 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #57 CACHED; ; #58 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #58 CACHED; ; #59 [rqworker2 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 CACHED; ; #43 [frontend-prod] exporting to image; #43 exporting attestation manifest sha256:0a78c0456bfb14924c426f5492df98e925da996073d298c70c751dc5c21c6646 0.1s done; #43 exporting manifest list sha256:3dfbfc63f1f15b596d271323ffa488c0aae1af37fff13763a8b3d8c007025c32 0.1s done; #43 naming to docker.io/library/casestrainer-frontend-prod:latest; #43 naming to docker.io/library/casestrainer-frontend-prod:latest done; #43 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #43 DONE 0.5s; ; #60 [rqworker1] exporting to image; #60 exporting layers 0.0s done; #60 exporting manifest sha256:7cbbcd0fc9a0fb3ad4ec0ef96b098dbb7ec8589f3f899bf54fde587767b4a6c0 0.0s done; #60 exporting config sha256:aa714f6827e22e71117afebf3eeceeb59416167752b263740ed4fc0cba6e422a 0.1s done; #60 exporting attestation manifest sha256:7ebc2a0044d8ce62f56b702f147c23293bce5c66d2b60d734f28e6baa27ff1c6; #60 exporting attestation manifest sha256:7ebc2a0044d8ce62f56b702f147c23293bce5c66d2b60d734f28e6baa27ff1c6 0.4s done; #60 exporting manifest list sha256:dd4a6a8a6df12e80a55ef219c16e0d302162584ca62188c4231b75db265b1b4a; #60 exporting manifest list sha256:dd4a6a8a6df12e80a55ef219c16e0d302162584ca62188c4231b75db265b1b4a 0.2s done; #60 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #60 unpacking to docker.io/library/casestrainer-rqworker1:latest; #60 ...; ; #61 [backend] exporting to image; #61 exporting layers 0.0s done; #61 exporting manifest sha256:f742d923bdcc059f7762bf3152a2eb71403bdb8f610ea9d22035542f83c78ccf 0.0s done; #61 exporting config sha256:4b20dd20d4d99f28d197be34a8efbf985b864cfcc9245cdfb1b4fa05b662e0da 0.0s done; #61 exporting attestation manifest sha256:148ae9ff795a5b46a135bb0ec0f217677681e1293134b4568b39bc9ef29184c0 0.3s done; #61 exporting manifest list sha256:98190d289495afcb974e5c41343a15d5f9973b82c4f7dbc644f38b9121062d85 0.2s done; #61 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #61 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #61 DONE 1.1s; ; #62 [rqworker2] exporting to image; #62 exporting layers 0.0s done; #62 exporting manifest sha256:4208ca15af252cec89c3e8ebbb14fd7a5a7622d5995c4486985063dbf4e35090 0.0s done; #62 exporting config sha256:248ada1d2ac8d0bf19bb151e201ccd40c8fd77ab3e05a79bffdcbb4e7b27840f 0.0s done; #62 exporting attestation manifest sha256:e234bbb68c17b1524f6e6910f14e2c2344097f87afa9eea5c43140eee5024e6b 0.3s done; #62 exporting manifest list sha256:1b5c924fac23d5c31b995f97eea16cd4faa6763d5774529bb52db9d75e01bec1 0.2s done; #62 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #62 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.2s done; #62 DONE 1.2s; ; #60 [rqworker1] exporting to image; #60 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #60 DONE 1.2s; ; #63 [rqworker3] exporting to image; #63 exporting layers 0.0s done; #63 exporting manifest sha256:6ad7b659db4c0fd2b89c28c42cacd5c57cb305fff4daae0754a186f28d97b104 0.0s done; #63 exporting config sha256:e7cca1fc0235d135641f94f722e26d28e5ebd9f95a6ee8bad58ce32b64651648 0.1s done; #63 exporting attestation manifest sha256:ce25769b9e63791ad0611976fd497d813b9d315ff0ac802b0d734dc4ad4336b8 0.4s done; #63 exporting manifest list sha256:17732e15e5230b91383aae2fda837be4e7a010672c3289de68626689081893bf 0.2s done; #63 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #63 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #63 DONE 1.3s; ; #64 [frontend-prod] resolving provenance for metadata file; #64 DONE 0.1s; ; #65 [backend] resolving provenance for metadata file; #65 DONE 0.2s; ; #66 [rqworker2] resolving provenance for metadata file; #66 ...; ; #67 [rqworker1] resolving provenance for metadata file; #67 DONE 0.1s; ; #66 [rqworker2] resolving provenance for metadata file; #66 DONE 0.3s; ; #68 [rqworker3] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built
[2025-08-17 15:33:41] [INFO] Docker operation completed successfully: build
[2025-08-17 15:33:41] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-17 15:33:56] [DEBUG] Docker operation exit code: 0
[2025-08-17 15:33:56] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-17 15:33:56] [INFO] Docker operation completed successfully: up
[2025-08-17 15:33:56] [INFO] Waiting for containers to stabilize...
[2025-08-17 15:34:06] [INFO] Running post-deployment cleanup...
[2025-08-17 15:34:06] [INFO] Performing system cleanup...
[2025-08-17 15:34:06] [INFO] Clearing stuck Redis jobs...
[2025-08-17 15:34:06] [ERROR] Cleanup failed: Warning: Using a password with '-a' or '-u' option on the command line interface may not be safe.
[2025-08-17 15:34:07] [INFO] Performing application health check...
[2025-08-17 15:34:07] [INFO] Application health check passed
[2025-08-17 15:34:07] [INFO] Deployment completed successfully!
[2025-08-17 15:34:07] [INFO] Containers running: 9
[2025-08-17 15:34:07] [DEBUG] Launcher execution completed
[2025-08-17 15:35:14] [INFO] CaseStrainer Production Launcher starting...
[2025-08-17 15:35:14] [INFO] Environment: Production, Mode: VueBuild
[2025-08-17 15:35:14] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-17 15:35:14] [INFO] Checking prerequisites...
[2025-08-17 15:35:14] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-17 15:35:14] [INFO] Performing Vue build only...
[2025-08-17 15:35:14] [INFO] Building Vue frontend...
[2025-08-17 15:35:22] [INFO] Vue build completed successfully.
[2025-08-17 15:35:22] [INFO] Copying Vue build to production container...
[2025-08-17 15:35:22] [INFO] Vue build copied to production container successfully
[2025-08-17 15:35:22] [INFO] Vue build copied to production successfully.
[2025-08-17 15:35:22] [DEBUG] Launcher execution completed
[2025-08-17 15:35:37] [INFO] CaseStrainer Production Launcher starting...
[2025-08-17 15:35:37] [INFO] Environment: Production, Mode: Auto
[2025-08-17 15:35:37] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-17 15:35:37] [INFO] Checking prerequisites...
[2025-08-17 15:35:37] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-17 15:35:37] [INFO] Auto-detecting deployment mode...
[2025-08-17 15:35:37] [INFO] Vue dist files are older than 7 days - rebuild needed
[2025-08-17 15:35:37] [INFO] Vue build needed - performing build and Fast restart
[2025-08-17 15:35:37] [INFO] Building Vue frontend...
[2025-08-17 15:35:45] [INFO] Vue build successful - copying to production...
[2025-08-17 15:35:45] [INFO] Copying Vue build to production container...
[2025-08-17 15:35:45] [INFO] Vue build copied to production container successfully
[2025-08-17 15:35:45] [INFO] Vue build copied to production - will perform Fast restart
[2025-08-17 15:35:45] [INFO] Auto-detected mode: Fast
[2025-08-17 15:35:45] [INFO] Starting deployment in Fast mode...
[2025-08-17 15:35:45] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-17 15:35:45] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-17 15:35:48] [DEBUG] Docker operation exit code: 0
[2025-08-17 15:35:48] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-17 15:35:48] [INFO] Docker operation completed successfully: down
[2025-08-17 15:35:48] [INFO] Recent changes in src - will rebuild images
[2025-08-17 15:35:48] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-17 15:35:48] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-17 15:35:54] [DEBUG] Docker operation exit code: 0
[2025-08-17 15:35:54] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [nginx internal] load build definition from Dockerfile; #2 transferring dockerfile: 652B 0.0s done; #2 DONE 0.1s; ; #3 [rqworker2 internal] load build definition from Dockerfile; #3 transferring dockerfile: 1.80kB 0.0s done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.1s; ; #5 [nginx internal] load metadata for docker.io/library/nginx:alpine; #5 DONE 0.1s; ; #6 [nginx internal] load .dockerignore; #6 transferring context: 2B done; #6 DONE 0.0s; ; #7 [backend internal] load metadata for docker.io/library/python:3.10-slim; #7 ...; ; #8 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.1s; ; #9 [nginx internal] load build context; #9 transferring context: 97B 0.0s done; #9 DONE 0.1s; ; #10 [nginx 2/8] RUN apk add --no-cache curl; #10 CACHED; ; #11 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #11 CACHED; ; #12 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #12 CACHED; ; #13 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #13 CACHED; ; #14 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #14 CACHED; ; #15 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [nginx] exporting to image; #17 exporting layers 0.0s done; #17 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #17 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #17 exporting attestation manifest sha256:a3cd4348ff0dd54a498a8885d84e1e0e38624504cd72fe7887b8a0ec4e1346d4 0.1s done; #17 exporting manifest list sha256:8c0e898cd085f74fd3c86a9db0036bf2589cf1cdcbdcb9299cbb89a204326fa2; #17 ...; ; #18 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #18 DONE 0.5s; ; #7 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #7 DONE 0.6s; ; #19 [frontend-prod internal] load .dockerignore; #19 transferring context: 834B done; #19 DONE 0.1s; ; #17 [nginx] exporting to image; #17 exporting manifest list sha256:8c0e898cd085f74fd3c86a9db0036bf2589cf1cdcbdcb9299cbb89a204326fa2 0.1s done; #17 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #17 unpacking to docker.io/library/casestrainer-nginx:latest; #17 ...; ; #8 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.1s; ; #20 [frontend-prod internal] load build context; #20 DONE 0.0s; ; #21 [rqworker3 internal] load .dockerignore; #21 transferring context: 908B 0.0s done; #21 DONE 0.1s; ; #22 [rqworker1 internal] load build context; #22 DONE 0.0s; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 ...; ; #17 [nginx] exporting to image; #17 unpacking to docker.io/library/casestrainer-nginx:latest 0.1s done; #17 DONE 0.5s; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #23 DONE 0.1s; ; #24 [backend  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #24 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #24 DONE 0.1s; ; #20 [frontend-prod internal] load build context; #20 transferring context: 4.14kB 0.0s done; #20 DONE 0.1s; ; #22 [backend internal] load build context; #22 ...; ; #25 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #25 CACHED; ; #26 [frontend-prod build-stage  8/10] COPY vite.config.js .; #26 CACHED; ; #27 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #27 CACHED; ; #28 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #28 CACHED; ; #29 [frontend-prod build-stage  6/10] COPY src/ src/; #29 CACHED; ; #30 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #30 CACHED; ; #31 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #31 CACHED; ; #32 [frontend-prod build-stage  3/10] COPY package*.json ./; #32 CACHED; ; #33 [frontend-prod build-stage  9/10] RUN npm run build; #33 CACHED; ; #34 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #34 CACHED; ; #35 [frontend-prod build-stage  5/10] COPY public/ public/; #35 CACHED; ; #36 [frontend-prod build-stage  7/10] COPY index.html .; #36 CACHED; ; #37 [frontend-prod build-stage  2/10] WORKDIR /app; #37 CACHED; ; #38 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #38 CACHED; ; #39 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #39 CACHED; ; #22 [rqworker2 internal] load build context; #22 transferring context: 132.13kB 0.2s done; #22 DONE 0.3s; ; #40 [rqworker1  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #40 CACHED; ; #41 [rqworker1  5/17] RUN pip install --no-cache-dir -r requirements.txt; #41 CACHED; ; #42 [rqworker1  2/17] WORKDIR /app; #42 CACHED; ; #43 [rqworker1 13/17] COPY --chown=app:app VERSION /app/VERSION; #43 CACHED; ; #44 [rqworker1 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #44 CACHED; ; #45 [rqworker1  7/17] RUN useradd --create-home --shell /bin/bash app; #45 CACHED; ; #46 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #46 CACHED; ; #47 [rqworker1 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #47 CACHED; ; #48 [rqworker1  9/17] COPY --chown=app:app app/ /app/app/; #48 CACHED; ; #49 [rqworker1  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #49 CACHED; ; #50 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #50 CACHED; ; #51 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #51 CACHED; ; #52 [rqworker1  3/17] COPY requirements.txt requirements.txt; #52 CACHED; ; #53 [rqworker1 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #53 CACHED; ; #54 [rqworker1 12/17] COPY --chown=app:app static/ /app/static/; #54 CACHED; ; #55 [rqworker1 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #55 CACHED; ; #56 [rqworker2] exporting to image; #56 exporting layers 0.0s done; #56 exporting manifest sha256:4208ca15af252cec89c3e8ebbb14fd7a5a7622d5995c4486985063dbf4e35090 0.0s done; #56 exporting config sha256:248ada1d2ac8d0bf19bb151e201ccd40c8fd77ab3e05a79bffdcbb4e7b27840f; #56 exporting config sha256:248ada1d2ac8d0bf19bb151e201ccd40c8fd77ab3e05a79bffdcbb4e7b27840f 0.1s done; #56 exporting attestation manifest sha256:70fc47650bd93f16475939ec75a551d44db081f29cb8dbaaaf193c6565e78e9d; #56 ...; ; #57 [frontend-prod] exporting to image; #57 exporting layers 0.0s done; #57 exporting manifest sha256:c1836ea5127fe3358856f58cbc74c4198108ef080705cf95d1c2305c4ffbf6f7 0.0s done; #57 exporting config sha256:cd5585c9e33a62b59500b700963413683d1df872372d8b4428c999a8c03d9350 0.0s done; #57 exporting attestation manifest sha256:81400eb87f59f13bf89233cb39a2b7460b7b277c708e9943168964721fc37ebc 0.1s done; #57 exporting manifest list sha256:756726c0de0792524e1b1ed421e5aef0084e174566dbee8e274ae43618901cad 0.2s done; #57 naming to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #57 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #57 DONE 0.8s; ; #56 [rqworker2] exporting to image; #56 exporting attestation manifest sha256:70fc47650bd93f16475939ec75a551d44db081f29cb8dbaaaf193c6565e78e9d 0.3s done; #56 exporting manifest list sha256:a80e7f77050c9db8a50aa751c92b967f1c71c5a910d7cc2b4940310ea33cdaa1; #56 exporting manifest list sha256:a80e7f77050c9db8a50aa751c92b967f1c71c5a910d7cc2b4940310ea33cdaa1 0.2s done; #56 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #56 unpacking to docker.io/library/casestrainer-rqworker2:latest; #56 ...; ; #58 [backend] exporting to image; #58 exporting layers 0.0s done; #58 exporting manifest sha256:f742d923bdcc059f7762bf3152a2eb71403bdb8f610ea9d22035542f83c78ccf 0.0s done; #58 exporting config sha256:4b20dd20d4d99f28d197be34a8efbf985b864cfcc9245cdfb1b4fa05b662e0da 0.0s done; #58 exporting attestation manifest sha256:4fc5443501847f190b487d374f88f485cf9e3cc989e81a0de2a4a2d1c93f4299 0.3s done; #58 exporting manifest list sha256:2a2bbf273e4f475ef5ed64028fab5a416778b524149f1f133de7380a918512a5 0.2s done; #58 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #58 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #58 DONE 1.2s; ; #56 [rqworker2] exporting to image; #56 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #56 DONE 1.3s; ; #59 [rqworker3] exporting to image; #59 exporting layers 0.0s done; #59 exporting manifest sha256:6ad7b659db4c0fd2b89c28c42cacd5c57cb305fff4daae0754a186f28d97b104 0.0s done; #59 exporting config sha256:e7cca1fc0235d135641f94f722e26d28e5ebd9f95a6ee8bad58ce32b64651648 0.0s done; #59 exporting attestation manifest sha256:9b8dc2a2c0552f5d293846097bba90d51fada31bec52ca8ea630784a771530a7 0.3s done; #59 exporting manifest list sha256:f68d106823402a4ae664095d6d5c8947294b3a9ba3598c50eafb27af599846af 0.2s done; #59 naming to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #59 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #59 DONE 1.2s; ; #60 [rqworker1] exporting to image; #60 exporting layers 0.0s done; #60 exporting manifest sha256:7cbbcd0fc9a0fb3ad4ec0ef96b098dbb7ec8589f3f899bf54fde587767b4a6c0 0.0s done; #60 exporting config sha256:aa714f6827e22e71117afebf3eeceeb59416167752b263740ed4fc0cba6e422a 0.1s done; #60 exporting attestation manifest sha256:fc265531e4159f47fd4350ca3df61dce9d53943612478a3f57cf291dd2359b7b 0.3s done; #60 exporting manifest list sha256:a7b291dbd74874f441d1b992e1df7662ed3e3bf397c7e4a215d7739171572f6c 0.2s done; #60 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #60 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #60 DONE 1.2s; ; #61 [nginx] resolving provenance for metadata file; #61 DONE 0.1s; ; #62 [frontend-prod] resolving provenance for metadata file; #62 DONE 0.1s; ; #63 [rqworker1] resolving provenance for metadata file; #63 DONE 0.2s; ; #64 [backend] resolving provenance for metadata file; #64 DONE 0.3s; ; #65 [rqworker2] resolving provenance for metadata file; #65 DONE 0.2s; ; #66 [rqworker3] resolving provenance for metadata file; #66 DONE 0.1s;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built
[2025-08-17 15:35:54] [INFO] Docker operation completed successfully: build
[2025-08-17 15:35:54] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-17 15:36:09] [DEBUG] Docker operation exit code: 0
[2025-08-17 15:36:09] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-nginx-prod  Created;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-17 15:36:09] [INFO] Docker operation completed successfully: up
[2025-08-17 15:36:09] [INFO] Waiting for containers to stabilize...
[2025-08-17 15:36:19] [INFO] Running post-deployment cleanup...
[2025-08-17 15:36:19] [INFO] Performing system cleanup...
[2025-08-17 15:36:19] [INFO] Clearing stuck Redis jobs...
[2025-08-17 15:36:20] [ERROR] Cleanup failed: Warning: Using a password with '-a' or '-u' option on the command line interface may not be safe.
[2025-08-17 15:36:20] [INFO] Performing application health check...
[2025-08-17 15:36:20] [INFO] Application health check passed
[2025-08-17 15:36:20] [INFO] Deployment completed successfully!
[2025-08-17 15:36:20] [INFO] Containers running: 9
[2025-08-17 15:36:20] [DEBUG] Launcher execution completed
[2025-08-17 15:57:42] [INFO] CaseStrainer Production Launcher starting...
[2025-08-17 15:57:42] [INFO] Environment: Production, Mode: Auto
[2025-08-17 15:57:42] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-17 15:57:42] [INFO] Checking prerequisites...
[2025-08-17 15:57:42] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-17 15:57:42] [INFO] Auto-detecting deployment mode...
[2025-08-17 15:57:42] [INFO] Vue dist files are older than 7 days - rebuild needed
[2025-08-17 15:57:42] [INFO] Vue build needed - performing build and Fast restart
[2025-08-17 15:57:42] [INFO] Building Vue frontend...
[2025-08-17 15:57:50] [INFO] Vue build successful - copying to production...
[2025-08-17 15:57:50] [INFO] Copying Vue build to production container...
[2025-08-17 15:57:51] [INFO] Vue build copied to production container successfully
[2025-08-17 15:57:51] [INFO] Vue build copied to production - will perform Fast restart
[2025-08-17 15:57:51] [INFO] Auto-detected mode: Fast
[2025-08-17 15:57:51] [INFO] Starting deployment in Fast mode...
[2025-08-17 15:57:51] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-17 15:57:51] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-17 15:57:54] [DEBUG] Docker operation exit code: 0
[2025-08-17 15:57:54] [DEBUG] Docker output:  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-17 15:57:54] [INFO] Docker operation completed successfully: down
[2025-08-17 15:57:54] [INFO] Recent changes in src - will rebuild images
[2025-08-17 15:57:54] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-17 15:57:54] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-17 15:58:10] [DEBUG] Docker operation exit code: 0
[2025-08-17 15:58:10] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker2 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [frontend-prod internal] load build definition from Dockerfile.prod; #3 transferring dockerfile: 2.03kB 0.0s done; #3 DONE 0.1s; ; #4 [nginx internal] load build definition from Dockerfile; #4 transferring dockerfile: 652B 0.0s done; #4 DONE 0.1s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [nginx internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B 0.0s done; #7 DONE 0.0s; ; #8 [nginx internal] load build context; #8 DONE 0.0s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 DONE 0.1s; ; #8 [nginx internal] load build context; #8 transferring context: 97B 0.0s done; #8 DONE 0.1s; ; #10 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #10 CACHED; ; #11 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #11 CACHED; ; #12 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #12 CACHED; ; #13 [nginx 2/8] RUN apk add --no-cache curl; #13 CACHED; ; #14 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #14 CACHED; ; #15 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [auth] library/python:pull token for registry-1.docker.io; #17 DONE 0.0s; ; #18 [auth] library/node:pull token for registry-1.docker.io; #18 DONE 0.0s; ; #19 [nginx] exporting to image; #19 exporting layers done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:180ec674555e26b45a4ffbe12cba2184b33ec31e5cdbee984a5df2818bf6faa1 0.1s done; #19 exporting manifest list sha256:e0da502f74bd700f7c461541b68e4c08b47c5c5352dc14f6dffa72a6d07aee1a; #19 exporting manifest list sha256:e0da502f74bd700f7c461541b68e4c08b47c5c5352dc14f6dffa72a6d07aee1a 0.1s done; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.3s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.8s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #9 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 0.9s; ; #23 [rqworker1 internal] load .dockerignore; #23 transferring context: 908B 0.0s done; #23 DONE 0.1s; ; #24 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #24 DONE 0.2s; ; #25 [rqworker2 internal] load build context; #25 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 4.14kB 0.0s done; #22 DONE 0.1s; ; #26 [nginx] resolving provenance for metadata file; #26 DONE 0.0s; ; #27 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #27 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #27 DONE 0.1s; ; #28 [frontend-prod build-stage  8/10] COPY vite.config.js .; #28 CACHED; ; #29 [frontend-prod build-stage  9/10] RUN npm run build; #29 CACHED; ; #30 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #30 CACHED; ; #31 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #31 CACHED; ; #32 [frontend-prod build-stage  3/10] COPY package*.json ./; #32 CACHED; ; #33 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #33 CACHED; ; #34 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #34 CACHED; ; #35 [frontend-prod build-stage  2/10] WORKDIR /app; #35 CACHED; ; #36 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #36 CACHED; ; #37 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #37 CACHED; ; #38 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #38 CACHED; ; #39 [frontend-prod build-stage  6/10] COPY src/ src/; #39 CACHED; ; #40 [frontend-prod build-stage  7/10] COPY index.html .; #40 CACHED; ; #41 [frontend-prod build-stage  5/10] COPY public/ public/; #41 CACHED; ; #42 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #42 CACHED; ; #25 [backend internal] load build context; #25 transferring context: 729.50kB 0.3s done; #25 DONE 0.4s; ; #43 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #43 CACHED; ; #44 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #44 CACHED; ; #45 [backend  3/17] COPY requirements.txt requirements.txt; #45 CACHED; ; #46 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #46 CACHED; ; #47 [backend 10/17] COPY --chown=app:app config/ /app/config/; #47 CACHED; ; #48 [backend  2/17] WORKDIR /app; #48 CACHED; ; #49 [backend  8/17] COPY --chown=app:app src/ /app/src/; #49 CACHED; ; #50 [backend  9/17] COPY --chown=app:app app/ /app/app/; #50 CACHED; ; #51 [backend  7/17] RUN useradd --create-home --shell /bin/bash app; #51 CACHED; ; #52 [backend 11/17] COPY --chown=app:app templates/ /app/templates/; #52 CACHED; ; #53 [backend 12/17] COPY --chown=app:app static/ /app/static/; #53 ...; ; #54 [frontend-prod] exporting to image; #54 exporting layers 0.0s done; #54 exporting manifest sha256:c1836ea5127fe3358856f58cbc74c4198108ef080705cf95d1c2305c4ffbf6f7 done; #54 exporting config sha256:cd5585c9e33a62b59500b700963413683d1df872372d8b4428c999a8c03d9350 done; #54 exporting attestation manifest sha256:ca89ab849899f64b86172de73db427e54003a7cda49fcc0eee99abde1471c5e4 0.2s done; #54 exporting manifest list sha256:d238e6f61d190d337bd147a47cfd41208250121e05426bc685d4534b41e25117 0.1s done; #54 naming to docker.io/library/casestrainer-frontend-prod:latest done; #54 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #54 DONE 0.5s; ; #53 [backend 12/17] COPY --chown=app:app static/ /app/static/; #53 ...; ; #55 [frontend-prod] resolving provenance for metadata file; #55 DONE 0.0s; ; #53 [backend 12/17] COPY --chown=app:app static/ /app/static/; #53 DONE 1.6s; ; #56 [rqworker1 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.2s; ; #57 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.6s; ; #58 [rqworker3 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.4s; ; #59 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.5s; ; #60 [rqworker2 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.5s; ; #61 [rqworker1] exporting to image; #61 exporting layers 3.6s done; #61 exporting manifest sha256:5affa69eaf21b59b8f15b3c38818a9ac34eb4e1ddd2c3d53dfe5af7aa6973043; #61 exporting manifest sha256:5affa69eaf21b59b8f15b3c38818a9ac34eb4e1ddd2c3d53dfe5af7aa6973043 0.1s done; #61 exporting config sha256:175492060fae8c4a014514bd944ee93f76a68de524c9ee3c3533b414f5b74cfc; #61 exporting config sha256:175492060fae8c4a014514bd944ee93f76a68de524c9ee3c3533b414f5b74cfc 0.1s done; #61 exporting attestation manifest sha256:da5110731572c71b62cada5f43124d153cc78fd1e325c1fd148c351d4f52e1be; #61 exporting attestation manifest sha256:da5110731572c71b62cada5f43124d153cc78fd1e325c1fd148c351d4f52e1be 0.3s done; #61 exporting manifest list sha256:02319dffe58f98b4a6df780acdb16eb17730aa253be743bd1e8909db1e6a483e; #61 exporting manifest list sha256:02319dffe58f98b4a6df780acdb16eb17730aa253be743bd1e8909db1e6a483e 0.1s done; #61 naming to docker.io/library/casestrainer-rqworker1:latest; #61 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest 2.1s done; #61 DONE 6.7s; ; #62 [backend] exporting to image; #62 exporting layers 3.6s done; #62 exporting manifest sha256:9e6b603f3c68e931f3f0131c6a001fe7c240823de8b91f6d1e4b30efc547b82f 0.1s done; #62 exporting config sha256:95a350a1b0e2c4600532a0a5027426e13136c05b55bef935d175eaad04384bd1 0.1s done; #62 exporting attestation manifest sha256:cfe2a9d82131d0d27549e4b8c735062a2993e41ef3b82aadd17db645574a637a 0.2s done; #62 exporting manifest list sha256:f02af9641e5998ee360f7f4ae83f40f4199edcbd34f58b42ec9ecbe8370a97d5 0.2s done; #62 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #62 unpacking to docker.io/library/casestrainer-backend:latest 2.2s done; #62 DONE 6.8s; ; #63 [rqworker3] exporting to image; #63 exporting layers 3.6s done; #63 exporting manifest sha256:e94fad87caf44f7feb7839abbfa35ef1797de2c631593ab4740cd8923fdfda82 0.1s done; #63 exporting config sha256:5d76604b764e22472ad47484cc5ffc787cc41fdbc39fbf6bff626222810c5a77 0.1s done; #63 exporting attestation manifest sha256:86cdbbd38b827a6e3ec27f006b4ba4cb55955a96ad69ee052ba7e0b7f10e4bdd 0.3s done; #63 exporting manifest list sha256:181d9ed1566f4513c12b6943ec2b71f8471b8ed65a018cdf39acba8752766bde 0.1s done; #63 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #63 unpacking to docker.io/library/casestrainer-rqworker3:latest 2.1s done; #63 DONE 6.8s; ; #64 [rqworker2] exporting to image; #64 exporting layers 3.7s done; #64 exporting manifest sha256:42e1549bde92650f6de93e613eedebc97b6ade6474b0338b7605e4f770290a16 0.1s done; #64 exporting config sha256:16b3280c1d702797b8a720ad0add4f2190b15dd7480d47977bfd19bdd6332f2d 0.1s done; #64 exporting attestation manifest sha256:2b090ddd91cad1a1ba98a265a703bb980ca964b198fc920b5df73c1074b24fe5 0.2s done; #64 exporting manifest list sha256:765292813ee21948e56af3f97ca7ecf127f2dd33d9a279e13bb5643e09f5a732 0.1s done; #64 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #64 unpacking to docker.io/library/casestrainer-rqworker2:latest 2.2s done; #64 DONE 6.8s; ; #65 [rqworker1] resolving provenance for metadata file; #65 DONE 0.2s; ; #66 [rqworker2] resolving provenance for metadata file; #66 ...; ; #67 [rqworker3] resolving provenance for metadata file; #67 DONE 0.1s; ; #66 [rqworker2] resolving provenance for metadata file; #66 DONE 0.3s; ; #68 [backend] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built
[2025-08-17 15:58:10] [INFO] Docker operation completed successfully: build
[2025-08-17 15:58:10] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-17 15:58:28] [DEBUG] Docker operation exit code: 0
[2025-08-17 15:58:28] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-17 15:58:28] [INFO] Docker operation completed successfully: up
[2025-08-17 15:58:28] [INFO] Waiting for containers to stabilize...
[2025-08-17 15:58:38] [INFO] Running post-deployment cleanup...
[2025-08-17 15:58:38] [INFO] Performing system cleanup...
[2025-08-17 15:58:38] [INFO] Clearing stuck Redis jobs...
[2025-08-17 15:58:39] [ERROR] Cleanup failed: Warning: Using a password with '-a' or '-u' option on the command line interface may not be safe.
[2025-08-17 15:58:39] [INFO] Performing application health check...
[2025-08-17 15:58:39] [INFO] Application health check passed
[2025-08-17 15:58:39] [INFO] Deployment completed successfully!
[2025-08-17 15:58:39] [INFO] Containers running: 9
[2025-08-17 15:58:39] [DEBUG] Launcher execution completed
[2025-08-17 16:02:42] [INFO] CaseStrainer Production Launcher starting...
[2025-08-17 16:02:42] [INFO] Environment: Production, Mode: Auto
[2025-08-17 16:02:42] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-17 16:02:42] [INFO] Checking prerequisites...
[2025-08-17 16:02:42] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-17 16:02:42] [INFO] Auto-detecting deployment mode...
[2025-08-17 16:02:43] [INFO] Vue dist files are older than 7 days - rebuild needed
[2025-08-17 16:02:43] [INFO] Vue build needed - performing build and Fast restart
[2025-08-17 16:02:43] [INFO] Building Vue frontend...
[2025-08-17 16:02:51] [INFO] Vue build successful - copying to production...
[2025-08-17 16:02:51] [INFO] Copying Vue build to production container...
[2025-08-17 16:02:52] [INFO] Vue build copied to production container successfully
[2025-08-17 16:02:52] [INFO] Vue build copied to production - will perform Fast restart
[2025-08-17 16:02:52] [INFO] Auto-detected mode: Fast
[2025-08-17 16:02:52] [INFO] Starting deployment in Fast mode...
[2025-08-17 16:02:52] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-17 16:02:52] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-17 16:02:55] [DEBUG] Docker operation exit code: 0
[2025-08-17 16:02:55] [DEBUG] Docker output:  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-17 16:02:55] [INFO] Docker operation completed successfully: down
[2025-08-17 16:02:55] [INFO] Recent changes in src - will rebuild images
[2025-08-17 16:02:55] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-17 16:02:55] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-17 16:03:01] [DEBUG] Docker operation exit code: 0
[2025-08-17 16:03:01] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [nginx internal] load build definition from Dockerfile; #2 transferring dockerfile: 652B 0.0s done; #2 DONE 0.1s; ; #3 [rqworker3 internal] load build definition from Dockerfile; #3 transferring dockerfile: 1.80kB 0.0s done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.1s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [nginx internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B done; #7 DONE 0.0s; ; #8 [auth] library/python:pull token for registry-1.docker.io; #8 DONE 0.0s; ; #9 [auth] library/node:pull token for registry-1.docker.io; #9 DONE 0.0s; ; #10 [nginx internal] load build context; #10 DONE 0.0s; ; #11 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #11 DONE 0.1s; ; #10 [nginx internal] load build context; #10 transferring context: 97B done; #10 DONE 0.0s; ; #12 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #12 CACHED; ; #13 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #13 CACHED; ; #14 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #14 CACHED; ; #15 [nginx 2/8] RUN apk add --no-cache curl; #15 CACHED; ; #16 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #16 CACHED; ; #17 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [nginx] exporting to image; #19 exporting layers done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:a3429f7adfee61553daccf96f27bfcca4d350b78385982290cfb25248fb2e8ec; #19 exporting attestation manifest sha256:a3429f7adfee61553daccf96f27bfcca4d350b78385982290cfb25248fb2e8ec 0.1s done; #19 exporting manifest list sha256:4b5721f222e6c08237ffd997a01a280ec0a064f869f7d20ab65e9d9c4fd08936 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.3s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.7s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #11 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #11 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #11 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.1s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #5 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 0.9s; ; #23 [rqworker3 internal] load .dockerignore; #23 transferring context: 908B done; #23 DONE 0.0s; ; #24 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #24 DONE 0.1s; ; #25 [rqworker2 internal] load build context; #25 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 4.14kB 0.0s done; #22 DONE 0.1s; ; #26 [nginx] resolving provenance for metadata file; #26 DONE 0.0s; ; #27 [rqworker2  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #27 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #27 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #27 DONE 0.1s; ; #28 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #28 CACHED; ; #29 [frontend-prod build-stage  9/10] RUN npm run build; #29 CACHED; ; #30 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #30 CACHED; ; #31 [frontend-prod build-stage  3/10] COPY package*.json ./; #31 CACHED; ; #32 [frontend-prod build-stage  5/10] COPY public/ public/; #32 CACHED; ; #33 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #33 CACHED; ; #34 [frontend-prod build-stage  6/10] COPY src/ src/; #34 CACHED; ; #35 [frontend-prod build-stage  7/10] COPY index.html .; #35 CACHED; ; #36 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #36 CACHED; ; #37 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #37 CACHED; ; #38 [frontend-prod build-stage  8/10] COPY vite.config.js .; #38 CACHED; ; #39 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #39 CACHED; ; #40 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #40 CACHED; ; #41 [frontend-prod build-stage  2/10] WORKDIR /app; #41 CACHED; ; #42 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #42 CACHED; ; #25 [rqworker2 internal] load build context; #25 transferring context: 736.42kB 0.5s done; #25 transferring context: 736.42kB 0.5s done; #25 DONE 0.6s; ; #43 [frontend-prod] exporting to image; #43 exporting layers 0.1s done; #43 exporting manifest sha256:c1836ea5127fe3358856f58cbc74c4198108ef080705cf95d1c2305c4ffbf6f7 0.1s done; #43 exporting config sha256:cd5585c9e33a62b59500b700963413683d1df872372d8b4428c999a8c03d9350 0.0s done; #43 exporting attestation manifest sha256:e1dcc5289fa0518ff74f2119537f387e9aa419657c1a752056ccba8de3af37a4 0.1s done; #43 exporting manifest list sha256:44f9eece63fb6caabf0b763d0bbcc1765cde0a7433921fb8f7831b6c1ba57957 0.1s done; #43 naming to docker.io/library/casestrainer-frontend-prod:latest; #43 ...; ; #44 [backend 11/17] COPY --chown=app:app templates/ /app/templates/; #44 CACHED; ; #45 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #45 CACHED; ; #46 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #46 CACHED; ; #47 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #47 CACHED; ; #48 [backend  2/17] WORKDIR /app; #48 CACHED; ; #49 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #49 CACHED; ; #50 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #50 CACHED; ; #51 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #51 CACHED; ; #52 [backend  9/17] COPY --chown=app:app app/ /app/app/; #52 CACHED; ; #53 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #53 CACHED; ; #54 [backend 10/17] COPY --chown=app:app config/ /app/config/; #54 CACHED; ; #55 [backend  7/17] RUN useradd --create-home --shell /bin/bash app; #55 CACHED; ; #56 [backend  8/17] COPY --chown=app:app src/ /app/src/; #56 CACHED; ; #57 [backend 12/17] COPY --chown=app:app static/ /app/static/; #57 CACHED; ; #58 [backend  3/17] COPY requirements.txt requirements.txt; #58 CACHED; ; #59 [backend 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 CACHED; ; #43 [frontend-prod] exporting to image; #43 naming to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #43 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #43 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #43 DONE 0.9s; ; #60 [rqworker1] exporting to image; #60 exporting layers 0.1s done; #60 exporting manifest sha256:5affa69eaf21b59b8f15b3c38818a9ac34eb4e1ddd2c3d53dfe5af7aa6973043 done; #60 exporting config sha256:175492060fae8c4a014514bd944ee93f76a68de524c9ee3c3533b414f5b74cfc 0.1s done; #60 exporting attestation manifest sha256:45d767ef689dc531d2da70120ae59484771a46d415a04e8e5123f52d1fb83d76; #60 exporting attestation manifest sha256:45d767ef689dc531d2da70120ae59484771a46d415a04e8e5123f52d1fb83d76 0.4s done; #60 exporting manifest list sha256:559319b996d2d613cc44ac45d8116093db54c16c833bc7cd4f0ddb8f71c4f985; #60 exporting manifest list sha256:559319b996d2d613cc44ac45d8116093db54c16c833bc7cd4f0ddb8f71c4f985 0.2s done; #60 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #60 unpacking to docker.io/library/casestrainer-rqworker1:latest; #60 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #60 DONE 1.3s; ; #61 [rqworker2] exporting to image; #61 exporting layers 0.1s done; #61 exporting manifest sha256:42e1549bde92650f6de93e613eedebc97b6ade6474b0338b7605e4f770290a16 0.0s done; #61 exporting config sha256:16b3280c1d702797b8a720ad0add4f2190b15dd7480d47977bfd19bdd6332f2d done; #61 exporting attestation manifest sha256:56222ce37e10251833574ce1415830fe6fb16ecf335ddf3b1c3ab9b6eb220dbc 0.4s done; #61 exporting manifest list sha256:e1ac269e8fdcfcfe120f0827ee35c309fd6e1066b5dde5da04414c92cd0cadfc 0.3s done; #61 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #61 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #61 DONE 1.2s; ; #62 [backend] exporting to image; #62 exporting layers 0.1s done; #62 exporting manifest sha256:9e6b603f3c68e931f3f0131c6a001fe7c240823de8b91f6d1e4b30efc547b82f 0.1s done; #62 exporting config sha256:95a350a1b0e2c4600532a0a5027426e13136c05b55bef935d175eaad04384bd1 0.0s done; #62 exporting attestation manifest sha256:0c5c31590c8dc52e2d196fb73a010020826b0aad907f8cd8904a9b18121ca5e3 0.5s done; #62 exporting manifest list sha256:5bc153b49b4c1b68191e9cd1db845b475a90b834df36784c96151059ba3ce451 0.2s done; #62 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #62 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #62 DONE 1.3s; ; #63 [frontend-prod] resolving provenance for metadata file; #63 DONE 0.0s; ; #64 [rqworker3] exporting to image; #64 exporting layers 0.1s done; #64 exporting manifest sha256:e94fad87caf44f7feb7839abbfa35ef1797de2c631593ab4740cd8923fdfda82 0.0s done; #64 exporting config sha256:5d76604b764e22472ad47484cc5ffc787cc41fdbc39fbf6bff626222810c5a77 0.1s done; #64 exporting attestation manifest sha256:6d582e9983e8b8a438b06f8cb7de2ed71f030c726ae75a972a59697289c89cad 0.5s done; #64 exporting manifest list sha256:307fc8ce298a75462a16d2e64535012294ab81f1f651b0610374f7b4fae0a1e7 0.2s done; #64 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #64 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #64 DONE 1.4s; ; #65 [rqworker2] resolving provenance for metadata file; #65 DONE 0.1s; ; #66 [backend] resolving provenance for metadata file; #66 DONE 0.2s; ; #67 [rqworker1] resolving provenance for metadata file; #67 DONE 0.3s; ; #68 [rqworker3] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built
[2025-08-17 16:03:01] [INFO] Docker operation completed successfully: build
[2025-08-17 16:03:01] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-17 16:03:16] [DEBUG] Docker operation exit code: 0
[2025-08-17 16:03:16] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-17 16:03:16] [INFO] Docker operation completed successfully: up
[2025-08-17 16:03:16] [INFO] Waiting for containers to stabilize...
[2025-08-17 16:03:26] [INFO] Running post-deployment cleanup...
[2025-08-17 16:03:26] [INFO] Performing system cleanup...
[2025-08-17 16:03:26] [INFO] Clearing stuck Redis jobs...
[2025-08-17 16:03:26] [ERROR] Cleanup failed: Warning: Using a password with '-a' or '-u' option on the command line interface may not be safe.
[2025-08-17 16:03:27] [INFO] Performing application health check...
[2025-08-17 16:03:27] [INFO] Application health check passed
[2025-08-17 16:03:27] [INFO] Deployment completed successfully!
[2025-08-17 16:03:27] [INFO] Containers running: 9
[2025-08-17 16:03:27] [DEBUG] Launcher execution completed
[2025-08-17 16:10:07] [INFO] CaseStrainer Production Launcher starting...
[2025-08-17 16:10:07] [INFO] Environment: Production, Mode: Auto
[2025-08-17 16:10:07] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-17 16:10:07] [INFO] Checking prerequisites...
[2025-08-17 16:10:07] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-17 16:10:07] [INFO] Auto-detecting deployment mode...
[2025-08-17 16:10:08] [INFO] Vue dist files are older than 7 days - rebuild needed
[2025-08-17 16:10:08] [INFO] Vue build needed - performing build and Fast restart
[2025-08-17 16:10:08] [INFO] Building Vue frontend...
[2025-08-17 16:10:16] [INFO] Vue build successful - copying to production...
[2025-08-17 16:10:16] [INFO] Copying Vue build to production container...
[2025-08-17 16:10:17] [INFO] Vue build copied to production container successfully
[2025-08-17 16:10:17] [INFO] Vue build copied to production - will perform Fast restart
[2025-08-17 16:10:17] [INFO] Auto-detected mode: Fast
[2025-08-17 16:10:17] [INFO] Starting deployment in Fast mode...
[2025-08-17 16:10:17] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-17 16:10:17] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-17 16:10:20] [DEBUG] Docker operation exit code: 0
[2025-08-17 16:10:20] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-17 16:10:20] [INFO] Docker operation completed successfully: down
[2025-08-17 16:10:20] [INFO] Recent changes in src - will rebuild images
[2025-08-17 16:10:20] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-17 16:10:20] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-17 16:10:26] [DEBUG] Docker operation exit code: 0
[2025-08-17 16:10:26] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [backend internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [frontend-prod internal] load build definition from Dockerfile.prod; #3 transferring dockerfile: 2.03kB 0.0s done; #3 DONE 0.0s; ; #4 [nginx internal] load build definition from Dockerfile; #4 transferring dockerfile: 652B 0.0s done; #4 DONE 0.1s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [nginx internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [auth] library/python:pull token for registry-1.docker.io; #7 DONE 0.0s; ; #8 [auth] library/node:pull token for registry-1.docker.io; #8 DONE 0.0s; ; #9 [nginx internal] load .dockerignore; #9 transferring context: 2B done; #9 DONE 0.0s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #10 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #11 [nginx internal] load build context; #11 transferring context: 97B done; #11 DONE 0.0s; ; #12 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #12 CACHED; ; #13 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #13 CACHED; ; #14 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #14 CACHED; ; #15 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #15 CACHED; ; #16 [nginx 2/8] RUN apk add --no-cache curl; #16 CACHED; ; #17 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:187dddedeb7e3fe23465f989c5c923d498fd638e825e020d6ba5744271f3e5ab 0.1s done; #19 exporting manifest list sha256:64fddb10ac22b9927633787859e12a14026756bd6f9c556b0c5842dbf0b75fd2; #19 exporting manifest list sha256:64fddb10ac22b9927633787859e12a14026756bd6f9c556b0c5842dbf0b75fd2 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.3s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.7s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.1s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 0.9s; ; #23 [rqworker3 internal] load .dockerignore; #23 transferring context: 908B done; #23 DONE 0.0s; ; #24 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #24 DONE 0.1s; ; #25 [rqworker1 internal] load build context; #25 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 4.14kB 0.0s done; #22 DONE 0.0s; ; #26 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #26 CACHED; ; #27 [frontend-prod build-stage  7/10] COPY index.html .; #27 CACHED; ; #28 [frontend-prod build-stage  8/10] COPY vite.config.js .; #28 CACHED; ; #29 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #29 CACHED; ; #30 [frontend-prod build-stage  9/10] RUN npm run build; #30 CACHED; ; #31 [frontend-prod build-stage  2/10] WORKDIR /app; #31 CACHED; ; #32 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #32 CACHED; ; #33 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #33 CACHED; ; #34 [frontend-prod build-stage  6/10] COPY src/ src/; #34 CACHED; ; #35 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #35 CACHED; ; #36 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #36 CACHED; ; #37 [frontend-prod build-stage  5/10] COPY public/ public/; #37 CACHED; ; #38 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #38 CACHED; ; #39 [frontend-prod build-stage  3/10] COPY package*.json ./; #39 CACHED; ; #40 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #40 CACHED; ; #41 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #41 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #41 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #41 DONE 0.1s; ; #42 [nginx] resolving provenance for metadata file; #42 DONE 0.0s; ; #25 [rqworker3 internal] load build context; #25 transferring context: 728.62kB 0.2s done; #25 DONE 0.2s; ; #43 [backend  8/17] COPY --chown=app:app src/ /app/src/; #43 CACHED; ; #44 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #44 CACHED; ; #45 [backend  3/17] COPY requirements.txt requirements.txt; #45 CACHED; ; #46 [backend  9/17] COPY --chown=app:app app/ /app/app/; #46 CACHED; ; #47 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #47 CACHED; ; #48 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #48 CACHED; ; #49 [backend  2/17] WORKDIR /app; #49 CACHED; ; #50 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #50 CACHED; ; #51 [backend 10/17] COPY --chown=app:app config/ /app/config/; #51 CACHED; ; #52 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #52 CACHED; ; #53 [backend  7/17] RUN useradd --create-home --shell /bin/bash app; #53 CACHED; ; #54 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #54 CACHED; ; #55 [backend 11/17] COPY --chown=app:app templates/ /app/templates/; #55 CACHED; ; #56 [backend 12/17] COPY --chown=app:app static/ /app/static/; #56 CACHED; ; #57 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 CACHED; ; #58 [backend 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #58 CACHED; ; #59 [rqworker2] exporting to image; #59 exporting layers 0.0s done; #59 exporting manifest sha256:42e1549bde92650f6de93e613eedebc97b6ade6474b0338b7605e4f770290a16 0.0s done; #59 exporting config sha256:16b3280c1d702797b8a720ad0add4f2190b15dd7480d47977bfd19bdd6332f2d; #59 ...; ; #60 [frontend-prod] exporting to image; #60 exporting layers 0.0s done; #60 exporting manifest sha256:c1836ea5127fe3358856f58cbc74c4198108ef080705cf95d1c2305c4ffbf6f7 done; #60 exporting config sha256:cd5585c9e33a62b59500b700963413683d1df872372d8b4428c999a8c03d9350 done; #60 exporting attestation manifest sha256:b75e1f18dba8d97d08ea3231ccd244dbddbe7efdafeb589c2c930f15d9522b9e 0.1s done; #60 exporting manifest list sha256:0e57405cfdf6f53af31f1c01d38782d85dc872a526f42469cfb3632048af7fea 0.0s done; #60 naming to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #60 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #60 DONE 0.5s; ; #59 [rqworker2] exporting to image; #59 exporting config sha256:16b3280c1d702797b8a720ad0add4f2190b15dd7480d47977bfd19bdd6332f2d 0.1s done; #59 exporting attestation manifest sha256:0113a238d1acd147c45a4f0fc3204cb1640e6c00c846400f39c41423eba18135; #59 exporting attestation manifest sha256:0113a238d1acd147c45a4f0fc3204cb1640e6c00c846400f39c41423eba18135 0.3s done; #59 exporting manifest list sha256:c8b5232c76946e0745fd3d8c3deb46ec9a9a3ea5fbf381f872de974bd6f02fd0; #59 exporting manifest list sha256:c8b5232c76946e0745fd3d8c3deb46ec9a9a3ea5fbf381f872de974bd6f02fd0 0.2s done; #59 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #59 unpacking to docker.io/library/casestrainer-rqworker2:latest; #59 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #59 ...; ; #61 [rqworker1] exporting to image; #61 exporting layers 0.0s done; #61 exporting manifest sha256:5affa69eaf21b59b8f15b3c38818a9ac34eb4e1ddd2c3d53dfe5af7aa6973043 done; #61 exporting config sha256:175492060fae8c4a014514bd944ee93f76a68de524c9ee3c3533b414f5b74cfc 0.0s done; #61 exporting attestation manifest sha256:6c6cb05c6287458ad35f8287dc06c5d93e90007d6d32ee4e3edbfb25232aa659 0.3s done; #61 exporting manifest list sha256:7ae3baded1b94357c19f4830b1ab96f748793e292c645e4a2a76b614c9e8b2bc 0.2s done; #61 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #61 DONE 1.0s; ; #62 [frontend-prod] resolving provenance for metadata file; #62 DONE 0.0s; ; #63 [backend] exporting to image; #63 exporting layers 0.0s done; #63 exporting manifest sha256:9e6b603f3c68e931f3f0131c6a001fe7c240823de8b91f6d1e4b30efc547b82f done; #63 exporting config sha256:95a350a1b0e2c4600532a0a5027426e13136c05b55bef935d175eaad04384bd1 0.0s done; #63 exporting attestation manifest sha256:7f8c07189889184a978f35e18e8439692479987a7d3fd8940242ab031c7acc22 0.3s done; #63 exporting manifest list sha256:98a07cbb3ef1c3412cc8edb6c73ccf0c520ac2d5d7bfdf820e443ae648e79ac4 0.2s done; #63 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #63 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #63 DONE 1.1s; ; #64 [rqworker3] exporting to image; #64 exporting layers 0.0s done; #64 exporting manifest sha256:e94fad87caf44f7feb7839abbfa35ef1797de2c631593ab4740cd8923fdfda82 0.0s done; #64 exporting config sha256:5d76604b764e22472ad47484cc5ffc787cc41fdbc39fbf6bff626222810c5a77 0.1s done; #64 exporting attestation manifest sha256:f12beab4a0df5d886c42f0c2757975499cbfa1215caad233cd721bb5f61dd9fe 0.3s done; #64 exporting manifest list sha256:ca20dbefd1079d310389ffe22fcbd225e54857e041d907da18e5a5758221268b 0.2s done; #64 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #64 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #64 DONE 1.1s; ; #59 [rqworker2] exporting to image; #59 DONE 1.1s; ; #65 [backend] resolving provenance for metadata file; #65 DONE 0.1s; ; #66 [rqworker1] resolving provenance for metadata file; #66 DONE 0.3s; ; #67 [rqworker2] resolving provenance for metadata file; #67 DONE 0.1s; ; #68 [rqworker3] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built
[2025-08-17 16:10:26] [INFO] Docker operation completed successfully: build
[2025-08-17 16:10:26] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-17 16:10:40] [DEBUG] Docker operation exit code: 0
[2025-08-17 16:10:40] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-17 16:10:40] [INFO] Docker operation completed successfully: up
[2025-08-17 16:10:40] [INFO] Waiting for containers to stabilize...
[2025-08-17 16:10:50] [INFO] Running post-deployment cleanup...
[2025-08-17 16:10:50] [INFO] Performing system cleanup...
[2025-08-17 16:10:50] [INFO] Clearing stuck Redis jobs...
[2025-08-17 16:10:51] [ERROR] Cleanup failed: Warning: Using a password with '-a' or '-u' option on the command line interface may not be safe.
[2025-08-17 16:10:51] [INFO] Performing application health check...
[2025-08-17 16:10:51] [INFO] Application health check passed
[2025-08-17 16:10:51] [INFO] Deployment completed successfully!
[2025-08-17 16:10:51] [INFO] Containers running: 9
[2025-08-17 16:10:51] [DEBUG] Launcher execution completed
