**********************
Windows PowerShell transcript start
Start time: 20250802234037
Username: NETID\jafrank
RunAs User: NETID\jafrank
Configuration Name: 
Machine: HAUMEA (Microsoft Windows NT 10.0.20348.0)
Host Application: C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -noexit -command try { . "c:\Users\jafrank\AppData\Local\Programs\cursor\resources\app\out\vs\workbench\contrib\terminal\common\scripts\shellIntegration.ps1" } catch {}
Process ID: 9912
PSVersion: 5.1.20348.3932
PSEdition: Desktop
PSCompatibleVersions: 1.0, 2.0, 3.0, 4.0, 5.0, 5.1.20348.3932
BuildVersion: 10.0.20348.3932
CLRVersion: 4.0.30319.42000
WSManStackVersion: 3.0
PSRemotingProtocolVersion: 2.3
SerializationVersion: 1.1.0.1
**********************
Transcript started, output file is D:\dev\casestrainer\logs\script_20250802_234037.log

=== Checking Docker Availability ===
[OK] Docker CLI is available: Docker version 28.3.2, build 578ccf6
[INFO] Docker is running in Linux containers mode
[OK] Docker Compose is available: Docker Compose version v2.38.2-desktop.1
[cslaunch] Starting interactive menu...

========================================
 Enhanced CaseStrainer Docker Launcher
                v1.3 (ENHANCED)
========================================

 1.  Quick Production Start (FASTEST)
    - Minimal checks, maximum speed

 2.  Smart Production Start (RECOMMENDED)
    - Intelligent build detection, balanced speed

 3.  Force Full Rebuild
    - Complete rebuild, use when needed

 4.   Advanced Diagnostics
 5.   Cache Management
 6.   Stop All Services
 7.  Quick Status Check
 8.  Run Production Server Test
 0.  Exit

TIP: Use option 1 for fastest startup!

Deleting all .pyc files and __pycache__ directories to prevent stale bytecode...

=== Starting Docker Production Mode ===
Checking if Vue build is needed...
Force flag specified - Vue build required
OK Docker is running
OK Sufficient disk space (51.53 GB free)
Processing Vue frontend build...
Vue build needed: True, ForceRebuild: True
Building Vue frontend (ForceRebuild: True)...
Force rebuild mode: Clearing Vue caches...
Removing existing dist directory...
Removing node_modules for clean install...
Removing package-lock.json for clean dependency resolution...
Clearing npm cache...
npm cache cleared
Vue directory: D:\dev\casestrainer\casestrainer-vue-new
Checking Node.js and npm...
OK Node.js v22.15.0, npm 8.19.2
Using npm at: npm
Installing npm dependencies...
Force rebuild: Running clean npm install...
Running: npm install
OK npm dependencies installed
Building Vue frontend...
Force rebuild: Building from clean state...
Running: npm run build
OK Vue frontend built successfully (0.61 MB)
Copying Vue build assets to static/assets...
Assets copied to D:\dev\casestrainer\static\assets
Stopping existing Docker containers...
Force rebuild: Removing all CaseStrainer containers...
Removing all CaseStrainer containers...
Found 7 CaseStrainer containers to remove
  - casestrainer-nginx-prod
  - casestrainer-rqworker3-prod
  - casestrainer-backend-prod
  - casestrainer-rqworker-prod
  - casestrainer-rqworker2-prod
  - casestrainer-redis-prod
  - casestrainer-frontend-prod
Stopping casestrainer-nginx-prod...
Stopping casestrainer-rqworker3-prod...
Stopping casestrainer-backend-prod...
Stopping casestrainer-rqworker-prod...
Stopping casestrainer-rqworker2-prod...
Stopping casestrainer-redis-prod...
Stopping casestrainer-frontend-prod...
Removing casestrainer-nginx-prod...
Removing casestrainer-rqworker3-prod...
Removing casestrainer-backend-prod...
Removing casestrainer-rqworker-prod...
Removing casestrainer-rqworker2-prod...
Removing casestrainer-redis-prod...
Removing casestrainer-frontend-prod...
Successfully removed 7 CaseStrainer containers
Force rebuild: Removing volumes and orphaned containers...
Running: docker-compose -f D:\dev\casestrainer\docker-compose.prod.yml down --timeout 30 --volumes --remove-orphans
Containers stopped successfully
Checking for any remaining 'casestrainer' containers...
No remaining 'casestrainer' containers found.

Starting Docker containers...
Force rebuild: Building all images from scratch with --no-cache...
Running: docker-compose -f D:\dev\casestrainer\docker-compose.prod.yml build --no-cache
Docker compose command: docker-compose -f D:\dev\casestrainer\docker-compose.prod.yml up -d
OK Docker containers started successfully
Waiting for containers to initialize...

Waiting for services to become healthy (timeout: 10 minutes, requires 2 consecutive healthy checks)...
âœ… All services report healthy (1/2)...
No status change detected, waiting...
âœ… All services are ready and stable
  Backend: HEALTHY, Redis: HEALTHY, Worker: HEALTHY
âœ… API endpoint is responding: {"message":"Vue API is running","status":"ok","timestamp":"2025-08-03T06:50:08.996271"}

=== Docker Production Mode Ready ===
INFO Production Site:  https://wolf.law.uw.edu/casestrainer

Local Development URLs:
Backend API:    http://localhost:5001/casestrainer/api/
Frontend Prod:  http://localhost:8080/
Nginx (HTTP):   http://localhost:80/
Nginx (HTTPS):  https://localhost:443/
Local Frontend: https://localhost/casestrainer/
API Health:     https://localhost/casestrainer/api/health

Docker Commands:
  View logs:    docker-compose -f docker-compose.prod.yml logs [service]
  Stop all:     docker-compose -f docker-compose.prod.yml down
  Restart:      docker-compose -f docker-compose.prod.yml restart [service]

Running adaptive learning pipeline...
Starting adaptive learning pipeline...
Using enhanced adaptive learning pipeline...
Running adaptive learning pipeline...
âœ… Adaptive learning pipeline completed successfully
âœ… Adaptive learning completed successfully

Running post-startup validation...
  Testing API endpoints...
  âœ… API health check passed
  âœ… Text processing test passed
OK Post-startup validation passed
Running production test suite...
[2025-08-02 23:50:11] âœ… All production tests passed!
PS>TerminatingError(): "System error."
pytest.exe : D:\Python\Lib\site-packages\pytest_asyncio\plugin.py:208: PytestDeprecationWarning:
The configuration option "asyncio_default_fixture_loop_scope" is unset.
At D:\dev\casestrainer\cslaunch.ps1:2453 char:17
+ ...             & pytest test_production_server.py -v --maxfail=1 --disab ...
+                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (D:\Python\Lib\s...cope" is unset.:String) [], Remote
   Exception
    + FullyQualifiedErrorId : NativeCommandError

The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future
versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function
scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the
future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))
============================= test session starts =============================
platform win32 -- Python 3.13.3, pytest-8.3.5, pluggy-1.6.0 -- D:\Python\python.exe
cachedir: .pytest_cache
metadata: {'Python': '3.13.3', 'Platform': 'Windows-2022Server-10.0.20348-SP0', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'asyncio': '1.0.0', 'cov': '6.1.1', 'html': '4.1.1', 'httpx': '0.35.0', 'metadata': '3.1.1', 'mock': '3.14.1', 'timeout': '2.4.0', 'xdist': '3.7.0'}}
rootdir: D:\dev\casestrainer
configfile: pytest.ini
plugins: anyio-4.9.0, asyncio-1.0.0, cov-6.1.1, html-4.1.1, httpx-0.35.0, metadata-3.1.1, mock-3.14.1, timeout-2.4.0, xdist-3.7.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 6 items

test_production_server.py::TestProductionServer::test_health_check PASSED [ 16%]
test_production_server.py::TestProductionServer::test_text_analysis_sync PASSED [ 33%]
test_production_server.py::TestProductionServer::test_url_analysis PASSED [ 50%]
test_production_server.py::TestProductionServer::test_processing_progress_endpoint PASSED [ 66%]
test_production_server.py::test_production_server_basic PASSED           [ 83%]
test_production_server.py::test_production_server_connectivity PASSED    [100%]

============================= 6 passed in 27.40s ==============================
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker ps

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker images | Select-String "casestrainer"

casestrainer-rqworker2       latest     b68a388d986e   4 minutes ago   2.13GB
casestrainer-backend         latest     7a5591bb14f8   4 minutes ago   2.13GB
casestrainer-rqworker3       latest     d07222750488   4 minutes ago   2.13GB
casestrainer-rqworker        latest     748dc1e2598a   4 minutes ago   2.13GB
casestrainer-frontend-prod   latest     b962ee00c9a6   6 minutes ago   80.1MB


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Image}}\t{{.CreatedAt}}"

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod head -20 /app/src/unified_citation_processor_v2.py | Select-String "async def _verify_citations_with_legal_websearch"
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod sed -n '420,425p' /app/src/unified_citation_processor_v2.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod grep -A 10 "location.*casestrainer/api" /etc/nginx/nginx.conf

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "http://localhost:8080/casestrainer/api/health" -Method GET


StatusCode        : 200
StatusDescription : OK
Content           : {"message":"Vue API is
                    running","status":"ok","timestamp":"2025-08-03T06:50:58.647727"}

RawContent        : HTTP/1.1 200 OK
                    Connection: keep-alive
                    Access-Control-Allow-Credentials: true,true
                    Access-Control-Allow-Origin: http://localhost:5000,*
                    Access-Control-Expose-Headers: Content-Disposition, Content-...
Forms             : {}
Headers           : {[Connection, keep-alive], [Access-Control-Allow-Credentials, true,true],
                    [Access-Control-Allow-Origin, http://localhost:5000,*],
                    [Access-Control-Expose-Headers, Content-Disposition, Content-Type]...}
Images            : {}
InputFields       : {}
Links             : {}
ParsedHtml        : System.__ComObject
RawContentLength  : 88



]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-rqworker-prod --tail 10

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-backend-prod --tail 30

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-rqworker-prod --tail 20

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-rqworker-prod --tail 50 | Select-String "ERROR\|FAILED\|Exception\|Traceback"
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod head -20 /app/src/app_final_vue.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod grep -n "vue_api" /app/src/app_final_vue.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod grep -n "register_blueprint" /app/src/app_final_vue.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod ls -la /app/src/ | Select-String "vue_api"

-rwxr-xr-x  1 app  app     9692 Aug  2 09:40 vue_api.py
-rwxr-xr-x  1 app  app    13947 Aug  3 05:07 vue_api_endpoints.py
-rwxr-xr-x  1 app  app    43594 Aug  2 10:37 vue_api_endpoints_updated.py


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod grep -n "processing_progress" /app/src/vue_api_endpoints.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod sed -n '275,300p' /app/src/vue_api_endpoints.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod grep -n "def task_status" -A 5 /app/src/vue_api_endpoints_updated.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod grep -n "def " /app/src/vue_api_endpoints_updated.py | Select-String -Pattern "def " | Select-Object -Skip 10

977:async def _handle_form_input(service, request_id):
1011:async def _process_text_input(service, request_id, text, source_name="form-input"):
1034:async def _process_url_input(url):


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod sed -n '600,620p' /app/src/vue_api_endpoints_updated.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml build backend

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml up -d backend

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "http://localhost:8080/casestrainer/api/processing_progress?task_id=test-task-id" -Method GET
>> TerminatingError(Invoke-WebRequest): "⚠️
500
Server Error
We're experiencing technical difficulties. Our team has been notified and is working to resolve the issue. 
Please try again in a few minutes, or contact us if the problem persists. 
Return to CaseStrainer "
Invoke-WebRequest : ⚠️
500
Server Error
We're experiencing technical difficulties. Our team has been notified and is working to resolve the issue. 
Please try again in a few minutes, or contact us if the problem persists. 
Return to CaseStrainer 
At line:1 char:1
+ Invoke-WebRequest -Uri "http://localhost:8080/casestrainer/api/proces ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-WebRequest], 
WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
Invoke-WebRequest : ⚠️
500
Server Error
We're experiencing technical difficulties. Our team has been notified and is working to resolve the issue.
Please try again in a few minutes, or contact us if the problem persists.
Return to CaseStrainer
At line:1 char:1
+ Invoke-WebRequest -Uri "http://localhost:8080/casestrainer/api/proces ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-WebRequest], WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-backend-prod --tail 20

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod sed -n '675,680p' /app/src/vue_api_endpoints_updated.py

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Get-Content src/vue_api_endpoints_updated.py | Select-Object -Skip 674 -First 6

        if file_ext not in allowed_extensions:
            error_msg = f'File type not allowed. Allowed types: {', '.join(allowed_extensions)}. Got: {file_ext}'
            logger.error(f"[File Upload {request_id}] {error_msg}")
            return {
                'error': error_msg,
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml build backend

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml up -d backend

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "http://localhost:8080/casestrainer/api/processing_progress?task_id=test-task-id" -Method GET
>> TerminatingError(Invoke-WebRequest): "{"citations":[],"clusters":[],"error":"Task not found","task_id":"test-task-id"}"
Invoke-WebRequest : {"citations":[],"clusters":[],"error":"Task not found","task_id":"test-task-id"}
At line:1 char:1
+ Invoke-WebRequest -Uri "http://localhost:8080/casestrainer/api/proces ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-WebRequest], 
WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
Invoke-WebRequest : {"citations":[],"clusters":[],"error":"Task not
found","task_id":"test-task-id"}
At line:1 char:1
+ Invoke-WebRequest -Uri "http://localhost:8080/casestrainer/api/proces ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invok
   e-WebRequest], WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeW
   ebRequestCommand
]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "http://localhost:8080/casestrainer/api/health" -Method GET


StatusCode        : 200
StatusDescription : OK
Content           : {"components":{"citation_processor":"healthy","database":"healthy","upload_dir
                    ectory":"healthy"},"database_stats":{"path":"/app/data/citations.db","size_mb"
                    :0.11,"tables":4},"endpoints":{"alias":"/hea...
RawContent        : HTTP/1.1 200 OK
                    Connection: keep-alive
                    Access-Control-Allow-Credentials: true,true
                    Access-Control-Allow-Origin: http://localhost:5000,*
                    Access-Control-Expose-Headers: Content-Disposition, Content-...
Forms             : {}
Headers           : {[Connection, keep-alive], [Access-Control-Allow-Credentials, true,true],
                    [Access-Control-Allow-Origin, http://localhost:5000,*],
                    [Access-Control-Expose-Headers, Content-Disposition, Content-Type]...}
Images            : {}
InputFields       : {}
Links             : {}
ParsedHtml        : System.__ComObject
RawContentLength  : 444



]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>python test_production_server.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-backend-prod --tail 30

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml build backend

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml up -d backend

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "http://localhost:8080/casestrainer/api/health" -Method GET


StatusCode        : 200
StatusDescription : OK
Content           : {"components":{"citation_processor":"healthy","database":"healthy","upload_dir
                    ectory":"healthy"},"database_stats":{"path":"/app/data/citations.db","size_mb"
                    :0.11,"tables":4},"endpoints":{"alias":"/hea...
RawContent        : HTTP/1.1 200 OK
                    Connection: keep-alive
                    Access-Control-Allow-Credentials: true,true
                    Access-Control-Allow-Origin: http://localhost:5000,*
                    Access-Control-Expose-Headers: Content-Disposition, Content-...
Forms             : {}
Headers           : {[Connection, keep-alive], [Access-Control-Allow-Credentials, true,true],
                    [Access-Control-Allow-Origin, http://localhost:5000,*],
                    [Access-Control-Expose-Headers, Content-Disposition, Content-Type]...}
Images            : {}
InputFields       : {}
Links             : {}
ParsedHtml        : System.__ComObject
RawContentLength  : 444



]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>$body = @{text="Test citation: Brown v. Board of Education, 347 U.S. 483 (1954)"; type="text"} | ConvertTo-Json; Invoke-WebRequest -Uri "http://localhost:8080/casestrainer/api/analyze" -Method POST -Body $body -ContentType "application/json"


StatusCode        : 200
StatusDescription : OK
Content           : {"citations":[],"clusters":[],"metadata":{"content_type":"application/json","e
                    ndpoint":"/analyze","has_json_data":true,"input_size":106,"input_type":"json",
                    "processing_mode":"unknown","processing_time...
RawContent        : HTTP/1.1 200 OK
                    Connection: keep-alive
                    Access-Control-Allow-Credentials: true,true
                    Access-Control-Allow-Origin: http://localhost:5000,*
                    Access-Control-Expose-Headers: Content-Disposition, Content-...
Forms             : {}
Headers           : {[Connection, keep-alive], [Access-Control-Allow-Credentials, true,true],
                    [Access-Control-Allow-Origin, http://localhost:5000,*],
                    [Access-Control-Expose-Headers, Content-Disposition, Content-Type]...}
Images            : {}
InputFields       : {}
Links             : {}
ParsedHtml        : System.__ComObject
RawContentLength  : 444



]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>python test_production_server.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>$body = @{text="Test citation: Brown v. Board of Education, 347 U.S. 483 (1954)"; type="text"} | ConvertTo-Json; $response = Invoke-WebRequest -Uri "http://localhost:8080/casestrainer/api/analyze" -Method POST -Body $body -ContentType "application/json"; $response.Content | ConvertFrom-Json | ConvertTo-Json -Depth 10
{
    "citations":  [

                  ],
    "clusters":  [

                 ],
    "metadata":  {
                     "content_type":  "application/json",
                     "endpoint":  "/analyze",
                     "has_json_data":  true,
                     "input_size":  106,
                     "input_type":  "json",
                     "processing_mode":  "unknown",
                     "processing_time_ms":  56,
                     "request_id":  "ddc3b383-195b-471d-a941-328d29195361",
                     "source":  "direct_api",
                     "status":  "completed",
                     "success":  true,
                     "timestamp":  "2025-08-03T07:02:05.878938"
                 },
    "request_id":  "ddc3b383-195b-471d-a941-328d29195361",
    "statistics":  {

                   },
    "success":  true
}
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml build backend

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml up -d backend

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>$body = @{text="Test citation: Brown v. Board of Education, 347 U.S. 483 (1954)"; type="text"} | ConvertTo-Json; $response = Invoke-WebRequest -Uri "http://localhost:8080/casestrainer/api/analyze" -Method POST -Body $body -ContentType "application/json"; $response.Content | ConvertFrom-Json | ConvertTo-Json -Depth 10
{
    "metadata":  {
                     "content_type":  "application/json",
                     "endpoint":  "/analyze",
                     "has_json_data":  true,
                     "input_size":  106,
                     "input_type":  "json",
                     "processing_mode":  "unknown",
                     "processing_time_ms":  42,
                     "request_id":  "5926d974-ef99-496d-b529-23ed7146fece",
                     "source":  "direct_api",
                     "status":  "completed",
                     "success":  true,
                     "timestamp":  "2025-08-03T07:02:58.779251"
                 },
    "request_id":  "5926d974-ef99-496d-b529-23ed7146fece",
    "result":  {
                   "citations":  [

                                 ],
                   "clusters":  [

                                ],
                   "statistics":  {

                                  }
               },
    "success":  true
}
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>python test_production_server.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-backend-prod --tail 20

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml build backend

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml up -d backend

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>$body = @{text="We review a trial court's parenting plan for abuse of discretion. In re Marriage of Chandola, 180 Wn.2d 632, 642, 327 P.3d 644 (2014). A court abuses its discretion if its decision is manifestly unreasonable or based on untenable grounds or reasons. In re Marriage of Littlefield, 133 Wn.2d 39, 46-47, 940 P.2d 1362 (1997)."; type="text"} | ConvertTo-Json; $response = Invoke-WebRequest -Uri "http://localhost:8080/casestrainer/api/analyze" -Method POST -Body $body -ContentType "application/json"; $response.Content | ConvertFrom-Json | ConvertTo-Json -Depth 10
{
    "metadata":  {
                     "content_type":  "application/json",
                     "endpoint":  "/analyze",
                     "has_json_data":  true,
                     "input_size":  371,
                     "input_type":  "json",
                     "processing_mode":  "unknown",
                     "processing_time_ms":  34,
                     "request_id":  "084e4de0-0183-4612-b375-d7400700a934",
                     "source":  "direct_api",
                     "status":  "completed",
                     "success":  true,
                     "timestamp":  "2025-08-03T07:04:11.001939"
                 },
    "request_id":  "084e4de0-0183-4612-b375-d7400700a934",
    "result":  {
                   "citations":  [

                                 ],
                   "clusters":  [

                                ],
                   "statistics":  {

                                  }
               },
    "success":  true
}
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-backend-prod --tail 30

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml build backend

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml up -d backend

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>$body = @{text="We review a trial court's parenting plan for abuse of discretion. In re Marriage of Chandola, 180 Wn.2d 632, 642, 327 P.3d 644 (2014). A court abuses its discretion if its decision is manifestly unreasonable or based on untenable grounds or reasons. In re Marriage of Littlefield, 133 Wn.2d 39, 46-47, 940 P.2d 1362 (1997)."; type="text"} | ConvertTo-Json; $response = Invoke-WebRequest -Uri "http://localhost:8080/casestrainer/api/analyze" -Method POST -Body $body -ContentType "application/json"; $response.Content | ConvertFrom-Json | ConvertTo-Json -Depth 10
{
    "metadata":  {
                     "content_type":  "application/json",
                     "endpoint":  "/analyze",
                     "has_json_data":  true,
                     "input_size":  371,
                     "input_type":  "json",
                     "processing_mode":  "unknown",
                     "processing_time":  1754204702.6854408,
                     "processing_time_ms":  5796,
                     "request_id":  "c7a86174-410d-4363-aa2a-a84d2373c2a1",
                     "source":  "direct_api",
                     "status":  "completed",
                     "success":  true,
                     "text_length":  323,
                     "timestamp":  "2025-08-03T07:04:56.891069"
                 },
    "request_id":  "c7a86174-410d-4363-aa2a-a84d2373c2a1",
    "result":  {
                   "citations":  [
                                     {
                                         "canonical_date":  "2014-06-19",
                                         "canonical_name":  "In re the Marriage of Chandola",
                                         "case_history":  [

                                                          ],
                                         "citation":  "180 Wn. 2d 632",
                                         "cluster_id":  "cluster_1",
                                         "cluster_members":  [
                                                                 "327 P.3d 644"
                                                             ],
                                         "confidence":  1.0,
                                         "context":  "We review a trial court\u0027s parenting plan for abuse of discretion. In re Marriage of Chandola, 180 Wn.2d 632, 642, 327 P.3d 644 (2014)",
                                         "court":  null,
                                         "docket_number":  null,
                                         "docket_numbers":  [

                                                            ],
                                         "end_index":  107,
                                         "error":  null,
                                         "extracted_case_name":  "In re the Marriage of Chandola",
                                         "extracted_date":  "2014",
                                         "is_cluster":  false,
                                         "is_parallel":  true,
                                         "metadata":  {
                                                          "cluster_id":  "fallback_parallel_180 Wn. 2d 632_327 P.3d 644",
                                                          "courtlistener_source":  "CourtListener-lookup-validated",
                                                          "is_in_cluster":  true
                                                      },
                                         "method":  "regex",
                                         "parallel_citations":  [
                                                                    "327 P.3d 644"
                                                                ],
                                         "pattern":  "parallel_citation_cluster",
                                         "pinpoint_pages":  [

                                                            ],
                                         "publication_status":  null,
                                         "source":  "CourtListener-lookup-validated",
                                         "start_index":  94,
                                         "url":  "https://www.courtlistener.com/opinion/4906942/in-re-the-marriage-of-chandola/",
                                         "verified":  true
                                     },
                                     {
                                         "canonical_date":  "2014-06-19",
                                         "canonical_name":  "In re the Marriage of Chandola",
                                         "case_history":  [

                                                          ],
                                         "citation":  "327 P.3d 644",
                                         "cluster_id":  "cluster_1",
                                         "cluster_members":  [
                                                                 "180 Wn. 2d 632"
                                                             ],
                                         "confidence":  1.0,
                                         "context":  "We review a trial court\u0027s parenting plan for abuse of discretion. In re Marriage of Chandola, 180 Wn.2d 632, 642, 327 P.3d 644 (2014)",
                                         "court":  null,
                                         "docket_number":  null,
                                         "docket_numbers":  [

                                                            ],
                                         "end_index":  126,
                                         "error":  null,
                                         "extracted_case_name":  null,
                                         "extracted_date":  "2014",
                                         "is_cluster":  false,
                                         "is_parallel":  true,
                                         "metadata":  {
                                                          "canonical_date_propagated_from":  "180 Wn. 2d 632",
                                                          "canonical_name_propagated_from":  "180 Wn. 2d 632",
                                                          "cluster_id":  "fallback_parallel_180 Wn. 2d 632_327 P.3d 644",
                                                          "is_in_cluster":  true
                                                      },
                                         "method":  "regex",
                                         "parallel_citations":  [
                                                                    "180 Wn. 2d 632"
                                                                ],
                                         "pattern":  "flexible_p3d",
                                         "pinpoint_pages":  [

                                                            ],
                                         "publication_status":  null,
                                         "source":  "fallback",
                                         "start_index":  114,
                                         "url":  null,
                                         "verified":  false
                                     },
                                     {
                                         "canonical_date":  "1997-08-07",
                                         "canonical_name":  "In re the Marriage of Littlefield",
                                         "case_history":  [

                                                          ],
                                         "citation":  "133 Wn. 2d 39",
                                         "cluster_id":  "cluster_2",
                                         "cluster_members":  [
                                                                 "940 P.2d 1362"
                                                             ],
                                         "confidence":  1.0,
                                         "context":  "4). A court abuses its discretion if its decision is manifestly unreasonable or based on untenable grounds or reasons. In re Marriage of Littlefield, 133 Wn.2d 39, 46-47, 940 P.2d 1362 (1997)",
                                         "court":  null,
                                         "docket_number":  null,
                                         "docket_numbers":  [

                                                            ],
                                         "end_index":  293,
                                         "error":  null,
                                         "extracted_case_name":  "In re the Marriage of Littlefield",
                                         "extracted_date":  "1997",
                                         "is_cluster":  false,
                                         "is_parallel":  true,
                                         "metadata":  {
                                                          "cluster_id":  "fallback_parallel_133 Wn. 2d 39_940 P.2d 1362",
                                                          "courtlistener_source":  "CourtListener-lookup-validated",
                                                          "is_in_cluster":  true
                                                      },
                                         "method":  "regex",
                                         "parallel_citations":  [
                                                                    "940 P.2d 1362"
                                                                ],
                                         "pattern":  "parallel_citation_cluster",
                                         "pinpoint_pages":  [

                                                            ],
                                         "publication_status":  null,
                                         "source":  "CourtListener-lookup-validated",
                                         "start_index":  281,
                                         "url":  "https://www.courtlistener.com/opinion/4907273/in-re-the-marriage-of-littlefield/",
                                         "verified":  true
                                     },
                                     {
                                         "canonical_date":  "1997-08-07",
                                         "canonical_name":  "In Re Marriage of Littlefield",
                                         "case_history":  [

                                                          ],
                                         "citation":  "940 P.2d 1362",
                                         "cluster_id":  "cluster_2",
                                         "cluster_members":  [
                                                                 "133 Wn. 2d 39"
                                                             ],
                                         "confidence":  1.0,
                                         "context":  "s discretion if its decision is manifestly unreasonable or based on untenable grounds or reasons. In re Marriage of Littlefield, 133 Wn.2d 39, 46-47, 940 P.2d 1362 (1997)",
                                         "court":  null,
                                         "docket_number":  null,
                                         "docket_numbers":  [

                                                            ],
                                         "end_index":  315,
                                         "error":  null,
                                         "extracted_case_name":  "In Re Marriage of Littlefield",
                                         "extracted_date":  "1997",
                                         "is_cluster":  false,
                                         "is_parallel":  true,
                                         "metadata":  {
                                                          "cluster_id":  "fallback_parallel_133 Wn. 2d 39_940 P.2d 1362",
                                                          "courtlistener_source":  "CourtListener-search-validated",
                                                          "is_in_cluster":  true
                                                      },
                                         "method":  "regex",
                                         "parallel_citations":  [
                                                                    "133 Wn. 2d 39"
                                                                ],
                                         "pattern":  "flexible_p2d",
                                         "pinpoint_pages":  [

                                                            ],
                                         "publication_status":  null,
                                         "source":  "CourtListener-search-validated",
                                         "start_index":  302,
                                         "url":  "https://www.courtlistener.com/opinion/1172595/in-re-marriage-of-littlefield/",
                                         "verified":  true
                                     }
                                 ],
                   "clusters":  [
                                    {
                                        "canonical_date":  "2014-06-19",
                                        "canonical_name":  "In re the Marriage of Chandola",
                                        "citations":  [
                                                          {
                                                              "canonical_date":  "2014-06-19",
                                                              "canonical_name":  "In re the Marriage of Chandola",
                                                              "citation":  "180 Wn. 2d 632",
                                                              "confidence":  1.0,
                                                              "context":  "We review a trial court\u0027s parenting plan for abuse of discretion. In re Marriage of Chandola, 180 Wn.2d 632, 642, 327 P.3d 644 (2014)",
                                                              "court":  null,
                                                              "extracted_case_name":  "In re the Marriage of Chandola",
                                                              "extracted_date":  "2014",
                                                              "parallel_citations":  [
                                                                                         "327 P.3d 644"
                                                                                     ],
                                                              "source":  "CourtListener-lookup-validated",
                                                              "url":  "https://www.courtlistener.com/opinion/4906942/in-re-the-marriage-of-chandola/",
                                                              "verified":  true
                                                          },
                                                          {
                                                              "canonical_date":  "2014-06-19",
                                                              "canonical_name":  "In re the Marriage of Chandola",
                                                              "citation":  "327 P.3d 644",
                                                              "confidence":  1.0,
                                                              "context":  "We review a trial court\u0027s parenting plan for abuse of discretion. In re Marriage of Chandola, 180 Wn.2d 632, 642, 327 P.3d 644 (2014)",
                                                              "court":  null,
                                                              "extracted_case_name":  "N/A",
                                                              "extracted_date":  "2014",
                                                              "parallel_citations":  [
                                                                                         "180 Wn. 2d 632"
                                                                                     ],
                                                              "source":  "fallback",
                                                              "true_by_parallel":  true,
                                                              "url":  null,
                                                              "verified":  false
                                                          }
                                                      ],
                                        "cluster_id":  "fallback_parallel_180 Wn. 2d 632_327 P.3d 644",
                                        "extracted_case_name":  "In re the Marriage of Chandola",
                                        "extracted_date":  "2014",
                                        "has_parallel_citations":  true,
                                        "size":  2,
                                        "source":  "citation_clustering",
                                        "url":  "https://www.courtlistener.com/opinion/4906942/in-re-the-marriage-of-chandola/"
                                    },
                                    {
                                        "canonical_date":  "1997-08-07",
                                        "canonical_name":  "In re the Marriage of Littlefield",
                                        "citations":  [
                                                          {
                                                              "canonical_date":  "1997-08-07",
                                                              "canonical_name":  "In re the Marriage of Littlefield",
                                                              "citation":  "133 Wn. 2d 39",
                                                              "confidence":  1.0,
                                                              "context":  "4). A court abuses its discretion if its decision is manifestly unreasonable or based on untenable grounds or reasons. In re Marriage of Littlefield, 133 Wn.2d 39, 46-47, 940 P.2d 1362 (1997)",
                                                              "court":  null,
                                                              "extracted_case_name":  "In re the Marriage of Littlefield",
                                                              "extracted_date":  "1997",
                                                              "parallel_citations":  [
                                                                                         "940 P.2d 1362"
                                                                                     ],
                                                              "source":  "CourtListener-lookup-validated",
                                                              "url":  "https://www.courtlistener.com/opinion/4907273/in-re-the-marriage-of-littlefield/",
                                                              "verified":  true
                                                          },
                                                          {
                                                              "canonical_date":  "1997-08-07",
                                                              "canonical_name":  "In Re Marriage of Littlefield",
                                                              "citation":  "940 P.2d 1362",
                                                              "confidence":  1.0,
                                                              "context":  "s discretion if its decision is manifestly unreasonable or based on untenable grounds or reasons. In re Marriage of Littlefield, 133 Wn.2d 39, 46-47, 940 P.2d 1362 (1997)",
                                                              "court":  null,
                                                              "extracted_case_name":  "In Re Marriage of Littlefield",
                                                              "extracted_date":  "1997",
                                                              "parallel_citations":  [
                                                                                         "133 Wn. 2d 39"
                                                                                     ],
                                                              "source":  "CourtListener-search-validated",
                                                              "url":  "https://www.courtlistener.com/opinion/1172595/in-re-marriage-of-littlefield/",
                                                              "verified":  true
                                                          }
                                                      ],
                                        "cluster_id":  "fallback_parallel_133 Wn. 2d 39_940 P.2d 1362",
                                        "extracted_case_name":  "In re the Marriage of Littlefield",
                                        "extracted_date":  "1997",
                                        "has_parallel_citations":  true,
                                        "size":  2,
                                        "source":  "citation_clustering",
                                        "url":  "https://www.courtlistener.com/opinion/4907273/in-re-the-marriage-of-littlefield/"
                                    }
                                ],
                   "statistics":  {

                                  }
               },
    "success":  true
}
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>python test_production_server.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker ps

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod grep -n "async def _verify_citations_with_legal_websearch" /app/src/unified_citation_processor_v2.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod grep -n "Flask\[async\]" /app/requirements.txt

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>python test_production_server.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml build frontend-prod

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml up -d frontend-prod

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "http://localhost:8080/casestrainer/api/health" -Method GET


StatusCode        : 200
StatusDescription : OK
Content           : {"components":{"citation_processor":"healthy","database":"healthy","upload_dir
                    ectory":"healthy"},"database_stats":{"path":"/app/data/citations.db","size_mb"
                    :0.11,"tables":4},"endpoints":{"alias":"/hea...
RawContent        : HTTP/1.1 200 OK
                    Connection: keep-alive
                    Access-Control-Allow-Credentials: true,true
                    Access-Control-Allow-Origin: http://localhost:5000,*
                    Access-Control-Expose-Headers: Content-Disposition, Content-...
Forms             : {}
Headers           : {[Connection, keep-alive], [Access-Control-Allow-Credentials, true,true],
                    [Access-Control-Allow-Origin, http://localhost:5000,*],
                    [Access-Control-Expose-Headers, Content-Disposition, Content-Type]...}
Images            : {}
InputFields       : {}
Links             : {}
ParsedHtml        : System.__ComObject
RawContentLength  : 444



]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>$body = @{text="We review a trial court's parenting plan for abuse of discretion. In re Marriage of Chandola, 180 Wn.2d 632, 642, 327 P.3d 644 (2014). A court abuses its discretion if its decision is manifestly unreasonable or based on untenable grounds or reasons. In re Marriage of Littlefield, 133 Wn.2d 39, 46-47, 940 P.2d 1362 (1997)."; type="text"} | ConvertTo-Json; $response = Invoke-WebRequest -Uri "http://localhost:8080/casestrainer/api/analyze" -Method POST -Body $body -ContentType "application/json"; $response.Content | ConvertFrom-Json | ConvertTo-Json -Depth 3
{
    "metadata":  {
                     "content_type":  "application/json",
                     "endpoint":  "/analyze",
                     "has_json_data":  true,
                     "input_size":  371,
                     "input_type":  "json",
                     "processing_mode":  "unknown",
                     "processing_time":  1754205181.7201881,
                     "processing_time_ms":  2927,
                     "request_id":  "703b2255-26c5-4135-81af-7532f25dbb14",
                     "source":  "direct_api",
                     "status":  "completed",
                     "success":  true,
                     "text_length":  323,
                     "timestamp":  "2025-08-03T07:12:58.795772"
                 },
    "request_id":  "703b2255-26c5-4135-81af-7532f25dbb14",
    "result":  {
                   "citations":  [
                                     {
                                         "canonical_date":  "2014-06-19",
                                         "canonical_name":  "In re the Marriage of Chandola",
                                         "case_history":  "",
                                         "citation":  "180 Wn. 2d 632",
                                         "cluster_id":  "cluster_1",
                                         "cluster_members":  "327 P.3d 644",
                                         "confidence":  1.0,
                                         "context":  "We review a trial court\u0027s parenting plan for abuse of discretion. In re Marriage of Chandola, 180 Wn.2d 632, 642, 327 P.3d 644 (2014)",
                                         "court":  null,
                                         "docket_number":  null,
                                         "docket_numbers":  "",
                                         "end_index":  107,
                                         "error":  null,
                                         "extracted_case_name":  "In re the Marriage of Chandola",
                                         "extracted_date":  "2014",
                                         "is_cluster":  false,
                                         "is_parallel":  true,
                                         "metadata":  "@{cluster_id=fallback_parallel_180 Wn. 2d 632_327 P.3d 644; courtlistener_source=CourtListener-lookup-validated; is_in_cluster=True}",
                                         "method":  "regex",
                                         "parallel_citations":  "327 P.3d 644",
                                         "pattern":  "parallel_citation_cluster",
                                         "pinpoint_pages":  "",
                                         "publication_status":  null,
                                         "source":  "CourtListener-lookup-validated",
                                         "start_index":  94,
                                         "url":  "https://www.courtlistener.com/opinion/4906942/in-re-the-marriage-of-chandola/",
                                         "verified":  true
                                     },
                                     {
                                         "canonical_date":  "2014-06-19",
                                         "canonical_name":  "In re the Marriage of Chandola",
                                         "case_history":  "",
                                         "citation":  "327 P.3d 644",
                                         "cluster_id":  "cluster_1",
                                         "cluster_members":  "180 Wn. 2d 632",
                                         "confidence":  1.0,
                                         "context":  "We review a trial court\u0027s parenting plan for abuse of discretion. In re Marriage of Chandola, 180 Wn.2d 632, 642, 327 P.3d 644 (2014)",
                                         "court":  null,
                                         "docket_number":  null,
                                         "docket_numbers":  "",
                                         "end_index":  126,
                                         "error":  null,
                                         "extracted_case_name":  null,
                                         "extracted_date":  "2014",
                                         "is_cluster":  false,
                                         "is_parallel":  true,
                                         "metadata":  "@{canonical_date_propagated_from=180 Wn. 2d 632; canonical_name_propagated_from=180 Wn. 2d 632; cluster_id=fallback_parallel_180 Wn. 2d 632_327 P.3d 644; is_in_cluster=True}",
                                         "method":  "regex",
                                         "parallel_citations":  "180 Wn. 2d 632",
                                         "pattern":  "flexible_p3d",
                                         "pinpoint_pages":  "",
                                         "publication_status":  null,
                                         "source":  "fallback",
                                         "start_index":  114,
                                         "url":  null,
                                         "verified":  false
                                     },
                                     {
                                         "canonical_date":  "1997-08-07",
                                         "canonical_name":  "In re the Marriage of Littlefield",
                                         "case_history":  "",
                                         "citation":  "133 Wn. 2d 39",
                                         "cluster_id":  "cluster_2",
                                         "cluster_members":  "940 P.2d 1362",
                                         "confidence":  1.0,
                                         "context":  "4). A court abuses its discretion if its decision is manifestly unreasonable or based on untenable grounds or reasons. In re Marriage of Littlefield, 133 Wn.2d 39, 46-47, 940 P.2d 1362 (1997)",
                                         "court":  null,
                                         "docket_number":  null,
                                         "docket_numbers":  "",
                                         "end_index":  293,
                                         "error":  null,
                                         "extracted_case_name":  "In re the Marriage of Littlefield",
                                         "extracted_date":  "1997",
                                         "is_cluster":  false,
                                         "is_parallel":  true,
                                         "metadata":  "@{cluster_id=fallback_parallel_133 Wn. 2d 39_940 P.2d 1362; courtlistener_source=CourtListener-lookup-validated; is_in_cluster=True}",
                                         "method":  "regex",
                                         "parallel_citations":  "940 P.2d 1362",
                                         "pattern":  "parallel_citation_cluster",
                                         "pinpoint_pages":  "",
                                         "publication_status":  null,
                                         "source":  "CourtListener-lookup-validated",
                                         "start_index":  281,
                                         "url":  "https://www.courtlistener.com/opinion/4907273/in-re-the-marriage-of-littlefield/",
                                         "verified":  true
                                     },
                                     {
                                         "canonical_date":  "1997-08-07",
                                         "canonical_name":  "In Re Marriage of Littlefield",
                                         "case_history":  "",
                                         "citation":  "940 P.2d 1362",
                                         "cluster_id":  "cluster_2",
                                         "cluster_members":  "133 Wn. 2d 39",
                                         "confidence":  1.0,
                                         "context":  "s discretion if its decision is manifestly unreasonable or based on untenable grounds or reasons. In re Marriage of Littlefield, 133 Wn.2d 39, 46-47, 940 P.2d 1362 (1997)",
                                         "court":  null,
                                         "docket_number":  null,
                                         "docket_numbers":  "",
                                         "end_index":  315,
                                         "error":  null,
                                         "extracted_case_name":  "In Re Marriage of Littlefield",
                                         "extracted_date":  "1997",
                                         "is_cluster":  false,
                                         "is_parallel":  true,
                                         "metadata":  "@{cluster_id=fallback_parallel_133 Wn. 2d 39_940 P.2d 1362; courtlistener_source=CourtListener-search-validated; is_in_cluster=True}",
                                         "method":  "regex",
                                         "parallel_citations":  "133 Wn. 2d 39",
                                         "pattern":  "flexible_p2d",
                                         "pinpoint_pages":  "",
                                         "publication_status":  null,
                                         "source":  "CourtListener-search-validated",
                                         "start_index":  302,
                                         "url":  "https://www.courtlistener.com/opinion/1172595/in-re-marriage-of-littlefield/",
                                         "verified":  true
                                     }
                                 ],
                   "clusters":  [
                                    {
                                        "canonical_date":  "2014-06-19",
                                        "canonical_name":  "In re the Marriage of Chandola",
                                        "citations":  " ",
                                        "cluster_id":  "fallback_parallel_180 Wn. 2d 632_327 P.3d 644",
                                        "extracted_case_name":  "In re the Marriage of Chandola",
                                        "extracted_date":  "2014",
                                        "has_parallel_citations":  true,
                                        "size":  2,
                                        "source":  "citation_clustering",
                                        "url":  "https://www.courtlistener.com/opinion/4906942/in-re-the-marriage-of-chandola/"
                                    },
                                    {
                                        "canonical_date":  "1997-08-07",
                                        "canonical_name":  "In re the Marriage of Littlefield",
                                        "citations":  " ",
                                        "cluster_id":  "fallback_parallel_133 Wn. 2d 39_940 P.2d 1362",
                                        "extracted_case_name":  "In re the Marriage of Littlefield",
                                        "extracted_date":  "1997",
                                        "has_parallel_citations":  true,
                                        "size":  2,
                                        "source":  "citation_clustering",
                                        "url":  "https://www.courtlistener.com/opinion/4907273/in-re-the-marriage-of-littlefield/"
                                    }
                                ],
                   "statistics":  {

                                  }
               },
    "success":  true
}
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>python test_production_server.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod grep -n "responseData.result" /usr/share/nginx/html/assets/*.js

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod ls -la /usr/share/nginx/html/

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod ls -la /usr/share/nginx/html/assets/

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod grep -n "responseData.result" /usr/share/nginx/html/assets/EnhancedValidator-BFiffIvJ.js

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker ps --format "table {{.Names}}\t{{.Status}}\t{{.CreatedAt}}"

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml build --no-cache frontend-prod

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml up -d frontend-prod

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod grep -n "responseData.result" /usr/share/nginx/html/assets/EnhancedValidator-*.js

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod ls -la /usr/share/nginx/html/assets/ | grep EnhancedValidator
grep : The term 'grep' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the 
spelling of the name, or if a path was included, verify that the path is correct and try again.
At line:1 char:79
+ ... ner-frontend-prod ls -la /usr/share/nginx/html/assets/ | grep Enhance ...
+                                                              ~~~~
    + CategoryInfo          : ObjectNotFound: (grep:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException
grep : The term 'grep' is not recognized as the name of a cmdlet, function, script file, or
operable program. Check the spelling of the name, or if a path was included, verify that the path
is correct and try again.
At line:1 char:79
+ ... ner-frontend-prod ls -la /usr/share/nginx/html/assets/ | grep Enhance ...
+                                                              ~~~~
    + CategoryInfo          : ObjectNotFound: (grep:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod ls -la /usr/share/nginx/html/assets/

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker ps --format "table {{.Names}}\t{{.Status}}\t{{.CreatedAt}}\t{{.Image}}"

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod cat /usr/share/nginx/html/assets/EnhancedValidator-BFiffIvJ.js | Select-String "responseData.result"
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-frontend-prod --tail 20

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml build frontend-prod

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml up -d frontend-prod

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod cat /usr/share/nginx/html/assets/EnhancedValidator-*.js | Select-String "responseData.result"
]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod ls -la /usr/share/nginx/html/assets/ | findstr EnhancedValidator

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod cat /usr/share/nginx/html/assets/EnhancedValidator-BFiffIvJ.js | Select-String "responseData.result"
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "http://localhost:8080/casestrainer/api/health" -Method GET


StatusCode        : 200
StatusDescription : OK
Content           : {"components":{"citation_processor":"healthy","database":"healthy","upload_dir
                    ectory":"healthy"},"database_stats":{"path":"/app/data/citations.db","size_mb"
                    :0.11,"tables":4},"endpoints":{"alias":"/hea...
RawContent        : HTTP/1.1 200 OK
                    Connection: keep-alive
                    Access-Control-Allow-Credentials: true,true
                    Access-Control-Allow-Origin: http://localhost:5000,*
                    Access-Control-Expose-Headers: Content-Disposition, Content-...
Forms             : {}
Headers           : {[Connection, keep-alive], [Access-Control-Allow-Credentials, true,true],
                    [Access-Control-Allow-Origin, http://localhost:5000,*],
                    [Access-Control-Expose-Headers, Content-Disposition, Content-Type]...}
Images            : {}
InputFields       : {}
Links             : {}
ParsedHtml        : System.__ComObject
RawContentLength  : 444



]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>netstat -an | findstr :8080

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "http://localhost:8080" -Method GET
>> TerminatingError(Invoke-WebRequest): "The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel."
Invoke-WebRequest : The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure 
channel.
At line:1 char:1
+ Invoke-WebRequest -Uri "http://localhost:8080" -Method GET
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-WebRequest], 
WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
Invoke-WebRequest : The underlying connection was closed: Could not establish trust relationship
for the SSL/TLS secure channel.
At line:1 char:1
+ Invoke-WebRequest -Uri "http://localhost:8080" -Method GET
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invok
   e-WebRequest], WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeW
   ebRequestCommand

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod head -50 /usr/share/nginx/html/assets/EnhancedValidator-BFiffIvJ.js

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>.\cslaunch.ps1
Transcript started, output file is D:\dev\casestrainer\logs\script_20250803_003217.log

=== Checking Docker Availability ===
[OK] Docker CLI is available: Docker version 28.3.2, build 578ccf6
[INFO] Docker is running in Linux containers mode
[OK] Docker Compose is available: Docker Compose version v2.38.2-desktop.1
[cslaunch] Starting interactive menu...

========================================
 Enhanced CaseStrainer Docker Launcher
                v1.3 (ENHANCED)
========================================

 1.  Quick Production Start (FASTEST)
    - Minimal checks, maximum speed

 2.  Smart Production Start (RECOMMENDED)
    - Intelligent build detection, balanced speed

 3.  Force Full Rebuild
    - Complete rebuild, use when needed

 4.   Advanced Diagnostics
 5.   Cache Management
 6.   Stop All Services
 7.  Quick Status Check
 8.  Run Production Server Test
 0.  Exit

TIP: Use option 1 for fastest startup!

PS>TerminatingError(): "The pipeline has been stopped."
>> TerminatingError(): "The pipeline has been stopped."
PS>TerminatingError(): "The pipeline has been stopped."
>> TerminatingError(): "The pipeline has been stopped."
]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker ps

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-nginx-prod --tail 20

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-backend-prod --tail 10

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker inspect casestrainer-nginx-prod --format='{{range $net, $config := .NetworkSettings.Networks}}{{$net}} {{end}}'

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker inspect casestrainer-backend-prod --format='{{range $net, $config := .NetworkSettings.Networks}}{{$net}} {{end}}'

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod nslookup backend

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod ping -c 1 backend

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker inspect casestrainer-backend-prod --format='{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker restart casestrainer-nginx-prod

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker ps --filter name=casestrainer-nginx-prod

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Start-Sleep 5; curl -k https://wolf.law.uw.edu/casestrainer/api/health
PS>TerminatingError(Invoke-WebRequest): "A parameter cannot be found that matches parameter name 'k'."
Invoke-WebRequest : A parameter cannot be found that matches parameter name 'k'.
At line:1 char:21
+ Start-Sleep 5; curl -k https://wolf.law.uw.edu/casestrainer/api/healt ...
+                     ~~
    + CategoryInfo          : InvalidArgument: (:) [Invoke-WebRequest], ParameterBindingException
    + FullyQualifiedErrorId : NamedParameterNotFound,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
Invoke-WebRequest : A parameter cannot be found that matches parameter name 'k'.
At line:1 char:21
+ Start-Sleep 5; curl -k https://wolf.law.uw.edu/casestrainer/api/healt ...
+                     ~~
    + CategoryInfo          : InvalidArgument: (:) [Invoke-WebRequest], ParameterBindingException
    + FullyQualifiedErrorId : NamedParameterNotFound,Microsoft.PowerShell.Commands.InvokeWebRequestCo
   mmand

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/health" -SkipCertificateCheck
>> TerminatingError(Invoke-WebRequest): "A parameter cannot be found that matches parameter name 'SkipCertificateCheck'."
Invoke-WebRequest : A parameter cannot be found that matches parameter name 'SkipCertificateCheck'.
At line:1 char:74
+ ... ttps://wolf.law.uw.edu/casestrainer/api/health" -SkipCertificateCheck
+                                                     ~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidArgument: (:) [Invoke-WebRequest], ParameterBindingException
    + FullyQualifiedErrorId : NamedParameterNotFound,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
Invoke-WebRequest : A parameter cannot be found that matches parameter name 'SkipCertificateCheck'.
At line:1 char:74
+ ... ttps://wolf.law.uw.edu/casestrainer/api/health" -SkipCertificateCheck
+                                                     ~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidArgument: (:) [Invoke-WebRequest], ParameterBindingException
    + FullyQualifiedErrorId : NamedParameterNotFound,Microsoft.PowerShell.Commands.InvokeWebRequestCo
   mmand

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "http://localhost/casestrainer/api/health"
>> TerminatingError(Invoke-WebRequest): "The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel."
Invoke-WebRequest : The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure 
channel.
At line:1 char:1
+ Invoke-WebRequest -Uri "http://localhost/casestrainer/api/health"
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-WebRequest], 
WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
Invoke-WebRequest : The underlying connection was closed: Could not establish trust relationship for
the SSL/TLS secure channel.
At line:1 char:1
+ Invoke-WebRequest -Uri "http://localhost/casestrainer/api/health"
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-We
   bRequest], WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRe
   questCommand

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-nginx-prod --tail 5

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker restart casestrainer-nginx-prod

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Start-Sleep 3; docker logs casestrainer-nginx-prod --tail 3

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod cat /etc/nginx/conf.d/casestrainer.conf | grep -A 5 -B 5 "location = /casestrainer/api/health"
grep : The term 'grep' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the 
spelling of the name, or if a path was included, verify that the path is correct and try again.
At line:1 char:79
+ ... ner-nginx-prod cat /etc/nginx/conf.d/casestrainer.conf | grep -A 5 -B ...
+                                                              ~~~~
    + CategoryInfo          : ObjectNotFound: (grep:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException
grep : The term 'grep' is not recognized as the name of a cmdlet, function, script file, or operable
program. Check the spelling of the name, or if a path was included, verify that the path is correct
and try again.
At line:1 char:79
+ ... ner-nginx-prod cat /etc/nginx/conf.d/casestrainer.conf | grep -A 5 -B ...
+                                                              ~~~~
    + CategoryInfo          : ObjectNotFound: (grep:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker restart casestrainer-nginx-prod

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Start-Sleep 3; Invoke-WebRequest -Uri "http://localhost/casestrainer/api/health"
PS>TerminatingError(Invoke-WebRequest): "The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel."
Invoke-WebRequest : The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure 
channel.
At line:1 char:16
+ ... rt-Sleep 3; Invoke-WebRequest -Uri "http://localhost/casestrainer/api ...
+                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-WebRequest], 
WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
Invoke-WebRequest : The underlying connection was closed: Could not establish trust relationship for
the SSL/TLS secure channel.
At line:1 char:16
+ ... rt-Sleep 3; Invoke-WebRequest -Uri "http://localhost/casestrainer/api ...
+                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-We
   bRequest], WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRe
   questCommand

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-nginx-prod --tail 5

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod cat /etc/nginx/conf.d/casestrainer.conf | Select-String -Pattern "location = /casestrainer/api/health" -Context 3

      server_name localhost wolf.law.uw.edu;  # Added localhost for testing

      # Health check endpoint - allow HTTP access
>     location = /casestrainer/api/health {
          access_log off;
          add_header Content-Type application/json;
          return 200 '{"status": "healthy"}';
      client_max_body_size 100M;

      # Health check endpoint
>     location = /casestrainer/api/health {
          access_log off;
          add_header Content-Type application/json;
          return 200 '{"status": "healthy"}';


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker restart casestrainer-nginx-prod

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Start-Sleep 3; Invoke-WebRequest -Uri "http://localhost/casestrainer/api/health"
PS>TerminatingError(Invoke-WebRequest): "The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel."
Invoke-WebRequest : The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure 
channel.
At line:1 char:16
+ ... rt-Sleep 3; Invoke-WebRequest -Uri "http://localhost/casestrainer/api ...
+                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-WebRequest], 
WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
Invoke-WebRequest : The underlying connection was closed: Could not establish trust relationship for
the SSL/TLS secure channel.
At line:1 char:16
+ ... rt-Sleep 3; Invoke-WebRequest -Uri "http://localhost/casestrainer/api ...
+                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-We
   bRequest], WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRe
   questCommand

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-nginx-prod --tail 3

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod nginx -t

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod ls -la /etc/nginx/conf.d/

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod cat /etc/nginx/conf.d/default.conf

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod mv /etc/nginx/conf.d/default.conf /etc/nginx/conf.d/default.conf.disabled

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod nginx -s reload

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "http://localhost/casestrainer/api/health"
>> TerminatingError(Invoke-WebRequest): "The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel."
Invoke-WebRequest : The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure 
channel.
At line:1 char:1
+ Invoke-WebRequest -Uri "http://localhost/casestrainer/api/health"
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-WebRequest], 
WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
Invoke-WebRequest : The underlying connection was closed: Could not establish trust relationship for
the SSL/TLS secure channel.
At line:1 char:1
+ Invoke-WebRequest -Uri "http://localhost/casestrainer/api/health"
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-We
   bRequest], WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRe
   questCommand

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-nginx-prod --tail 3

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod nginx -T | Select-String -Pattern "location.*health" -Context 2


      # Health check endpoint - allow HTTP access
>     location = /casestrainer/api/health {
          access_log off;
          add_header Content-Type application/json;


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod curl -H "Host: localhost" http://localhost/casestrainer/api/health

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod nginx -T | Select-String -Pattern "server.*80" -Context 5
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod curl -H "Host: wolf.law.uw.edu" http://casestrainer-backend-prod:5000/casestrainer/api/health

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod curl -X POST -H "Host: wolf.law.uw.edu" -H "Content-Type: application/json" -d '{"text":"test"}' http://casestrainer-backend-prod:5000/casestrainer/api/analyze

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod nginx -T | Select-String -Pattern "listen 443" -Context 10

      add_header X-Content-Type-Options "nosniff" always;
      add_header X-XSS-Protection "1; mode=block" always;
      add_header Referrer-Policy "strict-origin" always;

      # Redirect all other HTTP to HTTPS
      return 301 https://$host$request_uri;
  }

  # Main HTTPS server
  server {
>     listen 443 ssl;
      http2 on;  # Moved http2 to its own directive
      server_name localhost wolf.law.uw.edu;  # Added localhost for testing

      # SSL Configuration
      ssl_certificate     /etc/nginx/ssl/WolfCertBundle.crt;
      ssl_certificate_key /etc/nginx/ssl/wolf.law.uw.edu.key;

      # SSL Protocols and Ciphers
      ssl_protocols TLSv1.2 TLSv1.3;
      ssl_ciphers 'ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SH
A384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES
128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384';


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod nginx -s reload

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod curl -k -H "Host: wolf.law.uw.edu" https://localhost/casestrainer/api/health

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod curl -k -H "Host: wolf.law.uw.edu" -H "Content-Type: application/json" -d '{"text":"test"}' https://localhost/casestrainer/api/analyze

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker restart casestrainer-nginx-prod

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker ps --filter name=casestrainer-nginx-prod

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-backend-prod --tail 20

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod ls -la /usr/share/nginx/html/assets/ | grep EnhancedValidator
grep : The term 'grep' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the 
spelling of the name, or if a path was included, verify that the path is correct and try again.
At line:1 char:79
+ ... ner-frontend-prod ls -la /usr/share/nginx/html/assets/ | grep Enhance ...
+                                                              ~~~~
    + CategoryInfo          : ObjectNotFound: (grep:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException
grep : The term 'grep' is not recognized as the name of a cmdlet, function, script file, or operable
program. Check the spelling of the name, or if a path was included, verify that the path is correct
and try again.
At line:1 char:79
+ ... ner-frontend-prod ls -la /usr/share/nginx/html/assets/ | grep Enhance ...
+                                                              ~~~~
    + CategoryInfo          : ObjectNotFound: (grep:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod ls -la /usr/share/nginx/html/assets/ | Select-String EnhancedValidator

-rwxrwxrwx    1 root     root         65987 Aug  3 06:41 EnhancedValidator-BFiffIvJ.js
-rwxrwxrwx    1 root     root         42964 Aug  3 06:41 EnhancedValidator-SI8tMCCk.css


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
]633;D]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml build --no-cache frontend

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml build --no-cache frontend-prod

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml up -d frontend-prod

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod ls -la /usr/share/nginx/html/assets/ | Select-String EnhancedValidator

-rwxrwxrwx    1 root     root         65987 Aug  3 06:41 EnhancedValidator-BFiffIvJ.js
-rwxrwxrwx    1 root     root         42964 Aug  3 06:41 EnhancedValidator-SI8tMCCk.css


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>cd casestrainer-vue-new && npm run build
At line:1 char:25
+ cd casestrainer-vue-new && npm run build
+                         ~~
The token '&&' is not a valid statement separator in this version.
At line:1 char:25
+ cd casestrainer-vue-new && npm run build
+                         ~~
The token '&&' is not a valid statement separator in this version.
    + CategoryInfo          : ParserError: (:) [], ParentContainsErrorRecordException
    + FullyQualifiedErrorId : InvalidEndOfLine

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>cd casestrainer-vue-new
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainer\x5ccasestrainer-vue-newPS D:\dev\casestrainer\casestrainer-vue-new> ]633;B
PS>npm run build

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainer\x5ccasestrainer-vue-newPS D:\dev\casestrainer\casestrainer-vue-new> ]633;B
PS>cd ..
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker-compose -f docker-compose.prod.yml restart frontend-prod

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod ls -la /usr/share/nginx/html/assets/ | Select-String EnhancedValidator

-rwxrwxrwx    1 root     root         66233 Aug  3 08:00 EnhancedValidator-CIk_aGdi.js
-rwxrwxrwx    1 root     root         42964 Aug  3 08:00 EnhancedValidator-CTj-VJEI.css


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker ps

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod ls -la /usr/share/nginx/html/assets/ | Select-String EnhancedValidator

-rwxrwxrwx    1 root     root         66233 Aug  3 08:00 EnhancedValidator-CIk_aGdi.js
-rwxrwxrwx    1 root     root         42964 Aug  3 08:00 EnhancedValidator-CTj-VJEI.css


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod cat /usr/share/nginx/html/assets/EnhancedValidator-CIk_aGdi.js | Select-String -Pattern "true_by_parallel" -Context 2

> import{r as e,D as t,p as a,E as s,c as l,o as i,b as n,l as r,B as o,t as c,x as u,F as d,n as p,g as v,G as
m,h as g,v as f,y,z as h,A as b,H as k,w as _,T as x,f as w,d as S,s as C,u as T,C as A,I as
P}from"./vendor-DMY3h6i6.js";import{c as R,_ as L}from"./index-CyOEC7o4.js";import{b as I,a as
N}from"./api-Ce0WCVD6.js";const z=e(!1),E=e("Loading...");const D=s({isActive:!1,taskId:null,startTime:null,estima
tedTotalTime:0,currentStep:"",stepProgress:0,totalProgress:0,processingSteps:[],actualTimes:{},citationInfo:null,r
ateLimitInfo:null,processingError:null,canRetry:!1,uploadType:null,uploadData:null,hasResults:!1,resultData:null})
;function M(){const e=a(()=>D.startTime?(Date.now()-D.startTime)/1e3:0),t=a(()=>D.estimatedTotalTime?Math.max(0,D.
estimatedTotalTime-e.value):0),s=a(()=>D.estimatedTotalTime?Math.min(100,e.value/D.estimatedTotalTime*100):0),l=a(
()=>{if(!D.processingSteps.length)return 0;const
t=D.processingSteps.findIndex(e=>e.step===D.currentStep);if(-1===t)return 0;const
a=D.processingSteps[t],s=e.value-(a.startTime||0);return Math.min(100,s/a.estimated_time*100)}),i=a(()=>D.processi
ngError?"bg-danger":s.value>=90?"bg-success":s.value>=60?"bg-info":s.value>=30?"bg-warning":"bg-primary"),n=(e,t,a
=30)=>{Object.assign(D,{isActive:!0,taskId:null,startTime:Date.now(),estimatedTotalTime:a,currentStep:"Initializin
g...",stepProgress:0,totalProgress:0,processingSteps:[],actualTimes:{},citationInfo:null,rateLimitInfo:null,proces
singError:null,canRetry:!1,uploadType:e,uploadData:t,hasResults:!1,resultData:null})},r=a(()=>D.isActive||D.proces
singError),o=a(()=>({isActive:D.isActive,hasError:!!D.processingError,hasResults:D.hasResults,uploadType:D.uploadT
ype,currentStep:D.currentStep,progress:s.value,elapsedTime:e.value,remainingTime:t.value}));return{progressState:D
,elapsedTime:e,remainingTime:t,progressPercent:s,currentStepProgress:l,progressBarClass:i,shouldShowProgress:r,get
ProgressSummary:o,formatTime:e=>{if(e<60)return`${Math.round(e)}s`;return`${Math.floor(e/60)}m ${Math.round(e%60)}
s`},startProgress:n,setTaskId:e=>{D.taskId=e},setSteps:e=>{D.processingSteps=e.map((e,t)=>({...e,index:t,startTime
:null,completed:!1}))},updateProgress:t=>{if(t.step){D.currentStep=t.step;const a=D.processingSteps.findIndex(e=>e
.step===t.step);-1===a||D.processingSteps[a].startTime||(D.processingSteps[a].startTime=e.value)}void
0!==t.progress&&(D.stepProgress=t.progress),void 0!==t.total_progress&&(D.totalProgress=t.total_progress),t.citati
on_info&&(D.citationInfo=t.citation_info),t.rate_limit_info&&(D.rateLimitInfo=t.rate_limit_info),t.estimated_total
_time&&(D.estimatedTotalTime=t.estimated_total_time)},setError:e=>{D.processingError=e,D.canRetry=!0,D.isActive=!1
},completeProgress:(e=null)=>{D.isActive=!1,D.currentStep="Completed",D.totalProgress=100,D.hasResults=!!e,D.resul
tData=e,D.processingSteps.forEach(e=>{e.completed=!0})},resetProgress:()=>{Object.assign(D,{isActive:!1,taskId:nul
l,startTime:null,estimatedTotalTime:0,currentStep:"",stepProgress:0,totalProgress:0,processingSteps:[],actualTimes
:{},citationInfo:null,rateLimitInfo:null,processingError:null,canRetry:!1,uploadType:null,uploadData:null,hasResul
ts:!1,resultData:null})},retryProgress:()=>!(!D.canRetry||!D.uploadData)&&(D.processingError=null,D.canRetry=!1,n(
D.uploadType,D.uploadData,D.estimatedTotalTime),!0)}}M();const U={name:"ProcessingProgress",props:{elapsedTime:{ty
pe:Number,required:!0},remainingTime:{type:Number,required:!0},totalProgress:{type:Number,required:!0},currentStep
:{type:String,default:""},currentStepProgress:{type:Number,default:0},processingSteps:{type:Array,default:()=>[]},
actualTimes:{type:Object,default:()=>({})},citationInfo:{type:Object,default:null},rateLimitInfo:{type:Object,defa
ult:null},error:{type:String,default:""},canRetry:{type:Boolean,default:!1},timeout:{type:Number,default:null}},mo
unted(){},watch:{totalProgress(e){},remainingTime(e){}},computed:{currentStepElapsed(){const
e=this.processingSteps.find(e=>e.step===this.currentStep);return
e?Date.now()/1e3-e.start_time:0},currentStepRemaining(){const
e=this.processingSteps.find(e=>e.step===this.currentStep);return e&&e.estimated_time?Math.max(0,e.estimated_time-t
his.currentStepElapsed):0},isTimeoutWarning(){if(!this.timeout)return!1;return
this.timeout-this.elapsedTime<60}},methods:{formatTime(e){if(e<0)return"0s";const
t=Math.floor(e/60),a=Math.round(e%60);return t>0?`${t}m ${a}s`:`${a}s`},getStepClass(e){return 100===e.progress?"c
ompleted":e.step===this.currentStep?"current":e.progress>0?"in-progress":"pending"},getStepStatus(e){return
100===e.progress?"Completed":e.step===this.currentStep?"In Progress":e.progress>0?`${e.progress}%`:"Pending"},form
atProcessingRate(e){if(!e.processed||!this.elapsedTime)return"0/min";const t=e.processed/this.elapsedTime*60;retur
n`${Math.round(t)}/min`}}},q={class:"processing-progress"},$={class:"progress-section"},F={class:"progress-bar"},O
={class:"time-info"},B={key:0,class:"citation-section"},V={class:"citation-stats"},j={class:"stat"},G={class:"valu
e"},H={class:"stat"},J={class:"value"},W={class:"stat"},X={class:"value"},K={key:0,class:"stat"},Q={class:"value"}
,Y={key:0,class:"rate-limit-info"},Z={class:"stat"},ee={class:"value"},te={key:0,class:"stat"},ae={class:"value"},
se={key:1,class:"current-step"},le={class:"step-info"},ie={class:"step-name"},ne={class:"progress-bar"},re={class:
"time-info"},oe={class:"steps-section"},ce={class:"steps-list"},ue={class:"step-header"},de={class:"step-name"},pe
={class:"step-status"},ve={key:0,class:"progress-bar"},me={key:1,class:"time-info"},ge={key:0},fe={key:2,class:"er
ror-section"},ye={class:"error-message"};const he=L(U,[["render",function(e,t,a,s,m,g){return
i(),l("div",q,[n("div",$,[t[1]||(t[1]=n("h3",null,"Overall Progress",-1)),n("div",F,[n("div",{class:"progress-fill
",style:o({width:`${a.totalProgress}%`})},null,4)]),n("div",O,[n("span",null,"Elapsed:
"+c(g.formatTime(a.elapsedTime)),1),n("span",null,"Remaining: "+c(g.formatTime(a.remainingTime)),1),a.timeout?(i()
,l("span",{key:0,class:u(["timeout-info",{warning:g.isTimeoutWarning}])}," Timeout: "+c(g.formatTime(a.timeout-a.e
lapsedTime)),3)):r("",!0)])]),a.citationInfo?(i(),l("div",B,[t[8]||(t[8]=n("h3",null,"Citation
Processing",-1)),n("div",V,[n("div",j,[t[2]||(t[2]=n("span",{class:"label"},"Total
Citations:",-1)),n("span",G,c(a.citationInfo.total),1)]),n("div",H,[t[3]||(t[3]=n("span",{class:"label"},"Unique C
itations:",-1)),n("span",J,c(a.citationInfo.unique),1)]),n("div",W,[t[4]||(t[4]=n("span",{class:"label"},"Processe
d:",-1)),n("span",X,c(a.citationInfo.processed),1)]),a.citationInfo.unique?(i(),l("div",K,[t[5]||(t[5]=n("span",{c
lass:"label"},"Processing Rate:",-1)),n("span",Q,c(g.formatProcessingRate(a.citationInfo)),1)])):r("",!0)]),a.rate
LimitInfo?(i(),l("div",Y,[n("div",Z,[t[6]||(t[6]=n("span",{class:"label"},"API Rate Limit:",-1)),n("span",ee,c(a.r
ateLimitInfo.remaining)+"/"+c(a.rateLimitInfo.limit),1)]),a.rateLimitInfo.resetTime?(i(),l("div",te,[t[7]||(t[7]=n
("span",{class:"label"},"Reset in:",-1)),n("span",ae,c(g.formatTime(a.rateLimitInfo.resetTime-Date.now()/1e3)),1)]
)):r("",!0)])):r("",!0)])):r("",!0),a.currentStep?(i(),l("div",se,[t[9]||(t[9]=n("h3",null,"Current Step",-1)),n("
div",le,[n("span",ie,c(a.currentStep),1),n("div",ne,[n("div",{class:"progress-fill",style:o({width:`${a.currentSte
pProgress}%`})},null,4)]),n("div",re,[n("span",null,"Elapsed:
"+c(g.formatTime(g.currentStepElapsed)),1),n("span",null,"Remaining:
"+c(g.formatTime(g.currentStepRemaining)),1)])])])):r("",!0),n("div",oe,[t[10]||(t[10]=n("h3",null,"Processing Ste
ps",-1)),n("div",ce,[(i(!0),l(d,null,p(a.processingSteps,e=>(i(),l("div",{key:e.step,class:u(["step",g.getStepClas
s(e)])},[n("div",ue,[n("span",de,c(e.step),1),n("span",pe,c(g.getStepStatus(e)),1)]),void 0!==e.progress?(i(),l("d
iv",ve,[n("div",{class:"progress-fill",style:o({width:`${e.progress}%`})},null,4)])):r("",!0),e.estimated_time?(i(
),l("div",me,[n("span",null,"Estimated:
"+c(g.formatTime(e.estimated_time)),1),e.actual_time?(i(),l("span",ge,"Actual: "+c(g.formatTime(e.actual_time)),1)
):r("",!0)])):r("",!0)],2))),128))])]),a.error?(i(),l("div",fe,[n("div",ye,[t[11]||(t[11]=n("i",{class:"fas
fa-exclamation-circle"},null,-1)),v(" "+c(a.error),1)]),a.canRetry?(i(),l("button",{key:0,onClick:t[0]||(t[0]=t=>e
.$emit("retry")),class:"retry-button"}," Retry Processing ")):r("",!0)])):r("",!0)])}],["__scopeId","data-v-c1475d
ed"]]),be={key:0,class:"loading-state"},ke={key:1,class:"error-state"},_e={key:2,class:"no-citations-found
text-center my-5"},xe={class:"lead"},we=["href"],Se={key:3,class:"citation-results"},Ce={key:0,class:"prominent-ci
tations-section"},Te={class:"citations-summary"},Ae={key:0},Pe={class:"attention-filter-btns"},Re={class:"citation
s-grid"},Le={class:"citation-row",style:{color:"#dc3545","font-weight":"bold","font-size":"1.15rem"}},Ie={class:"c
itation-row flex-names-row"},Ne={key:0},ze={key:1},Ee={class:"citation-row flex-names-row"},De={key:0},Me={key:1},
Ue={class:"citations-list-vertical"},qe={class:"citation-text"},$e={key:1,class:"perfect-score-celebration"},Fe={k
ey:1,class:"results-content"},Oe={class:"results-header"},Be={class:"header-content"},Ve={class:"summary-stats"},j
e={class:"stat-item verified"},Ge={class:"stat-number"},He={class:"stat-item
invalid"},Je={class:"stat-number"},We={class:"stat-item total"},Xe={class:"stat-number"},Ke={class:"filter-section
"},Qe={class:"filter-controls"},Ye=["onClick"],Ze={class:"search-box"},et={class:"citations-list"},tt={class:"cano
nical-only-clusters"},at={class:"cluster-main-content"},st={class:"canonical-line"},lt={key:1,class:"canonical-dat
e missing"},it={key:1,class:"canonical-name missing"},nt={class:"extracted-line"},rt={key:1,class:"extracted-date
missing"},ot={key:1,class:"extracted-name missing"},ct={class:"citations-section"},ut={class:"citations-list-verti
cal"},dt=["href"],pt={key:1,class:"citation-text"},vt={class:"expand-section"},mt=["onClick"],gt={class:"expand-te
xt"},ft={key:0,class:"cluster-details"},yt={class:"details-content"},ht={class:"detail-section"},bt={class:"detail
-grid"},kt={class:"detail-item"},_t={class:"detail-value"},xt={class:"detail-item"},wt={class:"detail-value"},St={
key:0,class:"detail-item"},Ct=["href"],Tt={class:"detail-section"},At={class:"citation-detail-header"},Pt={class:"
citation-detail-title"},Rt={class:"citation-detail-content"},Lt={class:"detail-grid"},It={class:"detail-item"},Nt=
{class:"detail-value"},zt={class:"detail-item"},Et={class:"detail-value"},Dt={class:"detail-item"},Mt={class:"deta
il-value"},Ut={key:0,class:"detail-item"},qt={class:"detail-value error-text"},$t={key:1,class:"detail-item"},Ft=[
"href"],Ot={key:2,class:"results-content"},Bt={class:"results-header"},Vt={class:"header-content"},jt={class:"summ
ary-stats"},Gt={class:"stat-item verified"},Ht={class:"stat-number"},Jt={class:"stat-item
invalid"},Wt={class:"stat-number"},Xt={class:"stat-item total"},Kt={class:"stat-number"},Qt={class:"filter-section
"},Yt={class:"filter-controls"},Zt=["onClick"],ea={class:"search-box"},ta={class:"citations-list"},aa={class:"cita
tion-row citation-row-canonical flex-names-row"},sa={key:0},la={key:1,class:"canonical-date
missing"},ia={key:1,class:"canonical-name missing"},na={class:"citation-row citation-row-extracted
flex-names-row"},ra={key:0},oa={key:1,class:"extracted-date missing"},ca={key:1,class:"extracted-name
missing"},ua={class:"citation-row citation-row-citations"},da={class:"citation-text"},pa={class:"detail-row"},va={
key:3,class:"no-results-state"},ma=L({__name:"CitationResults",props:{results:{type:Object,default:null},showLoadi
ng:{type:Boolean,default:!1},error:{type:String,default:""},elapsedTime:{type:Number,default:0},remainingTime:{typ
e:Number,default:0},totalProgress:{type:Number,default:0},currentStep:{type:String,default:""},currentStepProgress
:{type:Number,default:0},processingSteps:{type:Array,default:()=>[]},citationInfo:{type:Object,default:null},rateL
imitInfo:{type:Object,default:null},processingError:{type:String,default:""},canRetry:{type:Boolean,default:!1},ti
meout:{type:Number,default:null}},emits:["copy-results","download-results","toast"],setup(t,{emit:s}){const
o=t,b=s,k=e("all"),_=e(""),x=e(1);e(new Set);const w=e(new Set),S=e(0),C=e(null);e(!1),e("canonical-only");const
T=e("all"),A=e(!1);function P(e){return e.citations.every(e=>"unverified"===Q(e))}function R(e){return
e.citations.some(e=>!Y(B(e),V(e)))}function L(e){return
e.citations.some(e=>!Z(j(e),G(e)))}m(()=>o.results,e=>{},{immediate:!0,deep:!0});const I=a(()=>{var e,t;return
A.value?(null==(e=o.results)?void
0:e.clusters)&&o.results.clusters.length>0?o.results.clusters:(null==(t=o.results)?void 0:t.citations)?[{citations
:o.results.citations}]:[]:"unverified"===T.value?U.value.filter(P):"name"===T.value?U.value.filter(R):"date"===T.v
alue?U.value.filter(L):U.value});m(()=>o.results,(e,t)=>{e&&"number"==typeof
e.progress&&(S.value=e.progress,C.value=e.eta_seconds)},{immediate:!0,deep:!0});const
N=a(()=>o.showLoading),z=a(()=>{var e,t;return(null==(e=o.results)?void 0:e.clusters)&&o.results.clusters.length>0
?o.results.clusters.reduce((e,t)=>e+t.citations.filter(e=>"true"===e.verified||!0===e.verified).length,0):(null==(
t=o.results)?void
0:t.citations)?o.results.citations.filter(e=>"true"===e.verified||!0===e.verified).length:0}),E=a(()=>{var
e,t;return(null==(e=o.results)?void 0:e.clusters)&&o.results.clusters.length>0?o.results.clusters.reduce((e,t)=>e+
t.citations.filter(e=>"false"===e.verified||!1===e.verified).length,0):(null==(t=o.results)?void
0:t.citations)?o.results.citations.filter(e=>"false"===e.verified||!1===e.verified).length:0}),D=a(()=>{var
e;return(null==(e=o.results)?void 0:e.clusters)&&0!==o.results.clusters.length?o.results.clusters.map(e=>{let t=e.
citations.filter(e=>!$(e));if("verified"===k.value?t=t.filter(e=>"true"===e.verified||!0===e.verified):"invalid"==
=k.value&&(t=t.filter(e=>"false"===e.verified||!1===e.verified)),_.value.trim()){const e=_.value.toLowerCase();t=t
.filter(t=>t.citation&&t.citation.toLowerCase().includes(e)||t.canonical_citation&&t.canonical_citation.toLowerCas
e().includes(e)||t.primary_citation&&t.primary_citation.toLowerCase().includes(e)||O(t)&&O(t).toLowerCase().includ
es(e))}return t.length>0?{...e,citations:t,size:t.length}:null}).filter(e=>null!==e):[]});a(()=>{var
e,t;return(null==(e=o.results)?void
0:e.clusters)&&o.results.clusters.length>0?o.results.clusters.flatMap(e=>e.citations):(null==(t=o.results)?void
0:t.citations)?o.results.citations.filter(e=>!$(e)):[]});const M=e=>{let
t=0;e.canonical_name&&"N/A"!==e.canonical_name&&(t+=2);const a=e.canonical_name,s=e.extracted_case_name;return a&&
"N/A"!==a&&s&&"N/A"!==s&&Y(a,s)&&(t+=1),e.canonical_date&&"N/A"!==e.canonical_date&&(t+=1),e.url&&""!==e.url&&(t+=
1),t},U=a(()=>{var e,t;if((null==(e=o.results)?void 0:e.clusters)&&o.results.clusters.length>0)return
o.results.clusters.filter(e=>e.citations.some(e=>M(e)<4));if(null==(t=o.results)?void 0:t.citations){const
e=o.results.citations.filter(e=>M(e)<4),t={};return e.forEach(e=>{const a=`${e.extracted_case_name||"N/A"}||${e.ex
tracted_date||"N/A"}`;t[a]||(t[a]=[]),t[a].push(e)}),Object.values(t).map(e=>({citations:e}))}return[]}),q=a(()=>{
var e,t;if((null==(e=o.results)?void 0:e.clusters)&&o.results.clusters.length>0)return
D.value.flatMap(e=>e.citations);if(!(null==(t=o.results)?void 0:t.citations))return[];let a=o.results.citations;if
(a=a.filter(e=>!$(e)),"verified"===k.value?a=a.filter(e=>"true"===e.verified||!0===e.verified):"invalid"===k.value
&&(a=a.filter(e=>"false"===e.verified||!1===e.verified)),_.value.trim()){const e=_.value.toLowerCase();a=a.filter(
t=>t.citation&&t.citation.toLowerCase().includes(e)||t.canonical_citation&&t.canonical_citation.toLowerCase().incl
udes(e)||t.primary_citation&&t.primary_citation.toLowerCase().includes(e)||O(t)&&O(t).toLowerCase().includes(e))}r
eturn a}),$=e=>{const t=(e.citation||e.canonical_citation||e.primary_citation||"").toUpperCase();return!!(t.includ
es("U.S.C.")||t.includes("USC")||t.includes("C.F.R.")||t.includes("CFR")||t.includes("UNITED STATES
CODE")||t.includes("CODE OF FEDERAL REGULATIONS"))||(/\d+\s+U\.?\s*S\.?\s*C\.?\s*[§]?\s*\d+/i.test(t)||/\d+\s+C\.?
\s*F\.?\s*R\.?\s*[§]?\s*\d+/i.test(t))},F=a(()=>[{value:"all",label:"All",count:q.value.length},{value:"verified",
label:"Verified",count:z.value},{value:"invalid",label:"Invalid",count:E.value}]),O=e=>e.canonical_name||e.extract
ed_case_name||null,B=e=>e.canonical_name||null,V=e=>{const t=e.extracted_case_name;return
t&&"N/A"!==t?t:null},j=e=>e.canonical_date||null,G=e=>{const t=e.extracted_date;return t&&"N/A"!==t?t:null},H=e=>e
.citation||e.canonical_citation||e.primary_citation||"N/A",J=e=>e.url||null,W=e=>e.source||"Unknown",X=e=>e.confid
ence||e.likelihood_score||"N/A",K=e=>e.error||e.explanation||null,Q=e=>"true"===e.verified||!0===e.verified?"verif
ied":"true_by_parallel"===e.verified?"true_by_parallel":"unverified",Y=(e,t)=>{if(!e||!t)return!1;if("N/A"===e||"N
/A"===t)return!1;const a=e=>e.toLowerCase().replace(/[^\w\s]/g," ").replace(/\s+/g," ").trim(),s=e=>e.toLowerCase(
).replace(/\bcnty\.?\b/g,"county").replace(/\bco\.?\b/g,"company").replace(/\bcorp\.?\b/g,"corporation").replace(/
\binc\.?\b/g,"incorporated").replace(/\bllc\.?\b/g,"limited liability
company").replace(/\bltd\.?\b/g,"limited").replace(/\bdept?\.?\b/g,"department").replace(/\bex\s+rel\.?\b/g,"ex
rel").replace(/\bv\.?\s+/g,"v ").replace(/\bvs\.?\s+/g,"v ").replace(/[^\w\s]/g," ").replace(/\s+/g,"
").trim();if(a(e)===a(t))return!0;const l=s(e),i=s(t);if(l===i)return!0;const n=l.split("
").filter(e=>e.length>1),r=i.split(" ").filter(e=>e.length>1);return
n.filter(e=>r.includes(e)&&e.length>1).length/Math.min(n.length,r.length)>=.5},Z=(e,t)=>{if(!e||!t)return!1;const
a=e=>{const t=e.match(/\d{4}/);return t?t[0]:null},s=a(e),l=a(t);return s&&l&&s===l},ee=e=>{const
t=B(e),a=V(e);return Y(t,a)?"name-similar":"name-different"},te=e=>{const t=j(e),a=G(e);return Z(t,a)?"date-simila
r":"date-different"},ae=a(()=>{if(!o.results)return!0;if(o.results.clusters&&o.results.clusters.length>0){if(o.res
ults.clusters.reduce((e,t)=>e+(t.citations?t.citations.length:0),0)>0)return!1}return!(o.results.citations&&o.resu
lts.citations.length>0)&&!(o.results.total_citations&&o.results.total_citations>0)}),se=a(()=>"text"),le=a(()=>"")
,ie=e=>{if(!e)return null;const t=e.match(/\d{4}/);return t?t[0]:e},ne=()=>{x.value=1};function re(e,t,a){const
s=new Set,l=[];for(const i of e){const e=t(i),n=a(i);if(!e&&!n)continue;const
r=`${e||""}||${n||""}`;s.has(r)||(s.add(r),l.push({name:e,year:n,citation:i}))}return l}function oe(e){const
t=B(e),a=V(e),s=j(e),l=G(e);return(e=>{const
t=Q(e);return"verified"===t||"true_by_parallel"===t})(e)?t&&a&&!Y(t,a)?"Name mismatch":s&&l&&!Z(s,l)?"Date
mismatch":"":"Unverified"}function ce(){var e,t;let a=[];return(null==(e=o.results)?void 0:e.clusters)&&o.results.
clusters.length>0?o.results.clusters.forEach(e=>{a.push(...e.citations)}):(null==(t=o.results)?void
0:t.citations)&&(a=o.results.citations),a}function ue(){const e=ce().map(e=>`${H(e)}\nExtracted Name:
${V(e)||"N/A"}\nCanonical Name: ${B(e)||"N/A"}\nExtracted Date: ${G(e)||"N/A"}\nCanonical Date:
${j(e)||"N/A"}\nStatus: ${Q(e)}\nMismatch Reason: ${oe(e)}\nSource: ${W(e)}\nConfidence: ${X(e)}\nError:
${K(e)||""}\n---`).join("\n");navigator.clipboard.writeText(e),b("toast",{type:"success",message:"All citation
data copied!"})}function de(){const e=ce().map(e=>({citation:H(e),extracted_name:V(e),canonical_name:B(e),extracte
d_date:G(e),canonical_date:j(e),status:Q(e),mismatch_reason:oe(e),source:W(e),confidence:X(e),error:K(e)})),t=new
Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),s=document.createElement("a");
s.href=a,s.download="all_citations.json",s.click(),URL.revokeObjectURL(a),b("toast",{type:"success",message:"All
citation data downloaded!"})}return m(k,ne),m(_,ne),(e,a)=>t.showLoading?(i(),l("div",be,[a[6]||(a[6]=n("div",{cla
ss:"loading-spinner"},null,-1)),a[7]||(a[7]=n("p",null,"Processing citations...",-1)),N.value?(i(),g(he,{key:0,"el
apsed-time":o.elapsedTime,"remaining-time":o.remainingTime,"total-progress":o.totalProgress,"current-step":o.curre
ntStep,"current-step-progress":o.currentStepProgress,"processing-steps":o.processingSteps,"citation-info":o.citati
onInfo,"rate-limit-info":o.rateLimitInfo,error:o.processingError,"can-retry":o.canRetry,timeout:o.timeout},null,8,
["elapsed-time","remaining-time","total-progress","current-step","current-step-progress","processing-steps","citat
ion-info","rate-limit-info","error","can-retry","timeout"])):r("",!0)])):t.error?(i(),l("div",ke,[a[8]||(a[8]=n("d
iv",{class:"error-icon"},"⚠️",-1)),a[9]||(a[9]=n("h3",null,"Error Processing Citations",-1)),n("p",null,c(t.error)
,1)])):ae.value?(i(),l("div",_e,[a[10]||(a[10]=n("img",{src:"/casestrainer/no-results.svg",alt:"No citations
found",style:{width:"120px",margin:"20px 0"}},null,-1)),n("p",xe,"No case citations found in your "+c(se.value)+".
",1),n("a",{href:`mailto:jafrank@uw.edu?subject=CaseStrainer%20feedback&body=I%20submitted%20the%20following%20${s
e.value}:%0A${encodeURIComponent(le.value)}%0Aand%20no%20citations%20were%20found.`,class:"btn
btn-outline-primary mt-2"}," Report a possible extraction error ",8,we)])):(i(),l("div",Se,[t.results&&(t.results.
clusters||t.results.citations)?(i(),l("div",Ce,[n("div",Te,[U.value.length>0?(i(),l("div",Ae,[a[14]||(a[14]=n("h3"
,null,"Citations That Need Attention",-1)),n("div",Pe,[n("button",{class:u(["attention-filter-btn",{active:"all"==
=T.value}]),onClick:a[0]||(a[0]=e=>T.value="all")},"All",2),n("button",{class:u(["attention-filter-btn",{active:"u
nverified"===T.value}]),onClick:a[1]||(a[1]=e=>T.value="unverified")},"Unverified",2),n("button",{class:u(["attent
ion-filter-btn",{active:"name"===T.value}]),onClick:a[2]||(a[2]=e=>T.value="name")},"Name Mismatch",2),n("button",
{class:u(["attention-filter-btn",{active:"date"===T.value}]),onClick:a[3]||(a[3]=e=>T.value="date")},"Date Mismatc
h",2)]),n("div",Re,[(i(!0),l(d,null,p(I.value,e=>(i(),l("div",{key:e.cluster_id||H(e.citations[0]),class:"citation
-comparison-card"},[e.citations.every(e=>"unverified"===Q(e))&&0===re(e.citations,B,e=>ie(j(e))).length&&0===re(e.
citations,V,e=>ie(G(e))).length?(i(),l(d,{key:0},[n("div",Le,c(H(e.citations[0])),1),a[11]||(a[11]=f('<div
class="citation-row flex-names-row" data-v-4767a1a3><span class="row-label"
data-v-4767a1a3>Canonical:</span><span style="color:#dc3545;font-weight:bold;" data-v-4767a1a3>N/A
(N/A)</span></div><div class="citation-row flex-names-row" data-v-4767a1a3><span class="row-label"
data-v-4767a1a3>Extracted:</span><span style="color:#dc3545;font-weight:bold;" data-v-4767a1a3>N/A
(N/A)</span></div>',2))],64)):(i(),l(d,{key:1},[n("div",Ie,[a[12]||(a[12]=n("span",{class:"row-label"},"Verifying
Source:",-1)),n("span",null,[B(e.citations[0])&&"N/A"!==B(e.citations[0])?(i(),l(d,{key:0},[v(c(B(e.citations[0]))
+" ",1),j(e.citations[0])?(i(),l("span",Ne," ("+c(ie(j(e.citations[0])))+")",1)):(i(),l("span",ze,"
(N/A)"))],64)):(i(),l(d,{key:1},[v(" N/A (N/A)
")],64))])]),n("div",Ee,[a[13]||(a[13]=n("span",{class:"row-label"},"From Document:",-1)),n("span",null,[V(e.citat
ions[0])&&"N/A"!==V(e.citations[0])?(i(),l(d,{key:0},[v(c(V(e.citations[0]))+"
",1),G(e.citations[0])?(i(),l("span",De," ("+c(ie(G(e.citations[0])))+")",1)):(i(),l("span",Me,"
(N/A)"))],64)):(i(),l(d,{key:1},[v(" N/A (N/A) ")],64))])]),n("div",Ue,[(i(!0),l(d,null,p(e.citations,(e,t)=>(i(),
l("div",{key:t,class:"citation-row-item"},[n("span",qe,c(H(e)),1),n("span",{class:u(["verification-badge",Q(e)])},
["verified"===Q(e)?(i(),l(d,{key:0},[v("VERIFIED")],64)):"true_by_parallel"===Q(e)?(i(),l(d,{key:1},[v("verified
by parallel citation")],64)):(i(),l(d,{key:2},[v("UNVERIFIED")],64))],2)]))),128))])],64))]))),128))])])):(i(),l("
div",$e,a[15]||(a[15]=[f('<div class="celebration-content" data-v-4767a1a3><div class="celebration-icon"
data-v-4767a1a3>🎉</div><h3 class="celebration-title" data-v-4767a1a3>Perfect Score! 🏆</h3><p
class="celebration-message" data-v-4767a1a3>All citations are verified and complete! Great job on your legal
research.</p><div class="celebration-stats" data-v-4767a1a3><span class="stat-badge" data-v-4767a1a3>✅ All
Verified</span><span class="stat-badge" data-v-4767a1a3>📋 Complete Data</span><span class="stat-badge"
data-v-4767a1a3>🔗 Links Available</span></div></div>',1)])))])])):r("",!0),t.results&&t.results.clusters&&t.resul
ts.clusters.length>0?(i(),l("div",Fe,[n("div",Oe,[n("div",Be,[a[19]||(a[19]=n("h2",null,"Citation Verification
Results (Clustered)",-1)),n("div",Ve,[n("div",je,[n("span",Ge,c(z.value),1),a[16]||(a[16]=n("span",{class:"stat-la
bel"},"Verified",-1))]),n("div",He,[n("span",Je,c(E.value),1),a[17]||(a[17]=n("span",{class:"stat-label"},"Invalid
",-1))]),n("div",We,[n("span",Xe,c(D.value.length),1),a[18]||(a[18]=n("span",{class:"stat-label"},"Clusters",-1))]
)])]),n("div",{class:"action-buttons"},[n("button",{class:"action-btn copy-btn",onClick:ue}," Copy Results
"),n("button",{class:"action-btn download-btn",onClick:de}," Download ")])]),n("div",Ke,[n("div",Qe,[(i(!0),l(d,nu
ll,p(F.value,e=>(i(),l("button",{key:e.value,class:u(["filter-btn",{active:k.value===e.value}]),onClick:t=>k.value
=e.value},c(e.label)+" ("+c(e.count)+") ",11,Ye))),128))]),n("div",Ze,[y(n("input",{"onUpdate:modelValue":a[4]||(a
[4]=e=>_.value=e),type:"text",placeholder:"Search citations...",class:"search-input"},null,512),[[h,_.value]])])])
,n("div",et,[n("div",tt,[(i(!0),l(d,null,p(D.value,e=>(i(),l("div",{key:e.cluster_id,class:"canonical-only-card"},
[n("div",at,[n("div",st,[a[20]||(a[20]=n("span",{class:"canonical-label"},"Verifying Source:",-1)),B(e.citations[0
])&&"N/A"!==B(e.citations[0])?(i(),l("span",{key:0,class:u(["canonical-name",ee(e.citations[0])])},[v(c(B(e.citati
ons[0]))+" ",1),j(e.citations[0])?(i(),l("span",{key:0,class:u(["canonical-date",te(e.citations[0])])},"
("+c(ie(j(e.citations[0])))+") ",3)):(i(),l("span",lt,"(no date)"))],2)):(i(),l("span",it,"No canonical
name"))]),n("div",nt,[a[21]||(a[21]=n("span",{class:"extracted-label"},"From Document:",-1)),V(e.citations[0])&&"N
/A"!==V(e.citations[0])?(i(),l("span",{key:0,class:u(["extracted-name",ee(e.citations[0])])},[v(c(V(e.citations[0]
))+" ",1),G(e.citations[0])?(i(),l("span",{key:0,class:u(["extracted-date",te(e.citations[0])])},"
("+c(ie(G(e.citations[0])))+") ",3)):(i(),l("span",rt,"(no date)"))],2)):(i(),l("span",ot,"No extracted name or ye
ar"))]),n("div",ct,[a[22]||(a[22]=n("span",{class:"citations-label"},null,-1)),n("div",ut,[(i(!0),l(d,null,p(e.cit
ations,(e,t)=>(i(),l("div",{key:t,class:"citation-row-item"},["verified"===Q(e)&&J(e)?(i(),l("a",{key:0,href:J(e),
target:"_blank",class:"citation-link-verified"},c(H(e)),9,dt)):(i(),l("span",pt,c(H(e)),1)),n("span",{class:u(["ve
rification-badge",Q(e)])},c(Q(e).replace("_"," ")),3)]))),128))])]),n("div",vt,[n("button",{onClick:t=>{return
a=e.cluster_id,void(w.value.has(a)?w.value.delete(a):w.value.add(a));var
a},class:u(["expand-btn",{expanded:w.value.has(e.cluster_id)}])},[n("span",gt,c(w.value.has(e.cluster_id)?"Hide
Details":"Show Details"),1),a[23]||(a[23]=n("span",{class:"expand-icon"},"▼",-1))],10,mt)])]),w.value.has(e.cluste
r_id)?(i(),l("div",ft,[n("div",yt,[n("div",ht,[a[27]||(a[27]=n("h4",{class:"detail-section-title"},"Cluster
Information",-1)),n("div",bt,[n("div",kt,[a[24]||(a[24]=n("span",{class:"detail-label"},"Cluster ID:",-1)),n("span
",_t,c(e.cluster_id),1)]),n("div",xt,[a[25]||(a[25]=n("span",{class:"detail-label"},"Size:",-1)),n("span",wt,c(e.s
ize)+" citation"+c(e.size>1?"s":""),1)]),e.url?(i(),l("div",St,[a[26]||(a[26]=n("span",{class:"detail-label"},"Cou
rtListener URL:",-1)),n("a",{href:e.url,target:"_blank",class:"detail-link"},"View on
CourtListener",8,Ct)])):r("",!0)])]),n("div",Tt,[a[33]||(a[33]=n("h4",{class:"detail-section-title"},"Citation Det
ails",-1)),(i(!0),l(d,null,p(e.citations,(e,t)=>(i(),l("div",{key:t,class:"citation-detail-item"},[n("div",At,[n("
h5",Pt,c(H(e)),1),n("span",{class:u(["verification-badge",Q(e)])},c(Q(e).replace("_"," ")),3)]),n("div",Rt,[n("div
",Lt,[n("div",It,[a[28]||(a[28]=n("span",{class:"detail-label"},"Source:",-1)),n("span",Nt,c(W(e)),1)]),n("div",zt
,[a[29]||(a[29]=n("span",{class:"detail-label"},"Confidence:",-1)),n("span",Et,c(X(e)),1)]),n("div",Dt,[a[30]||(a[
30]=n("span",{class:"detail-label"},"Mismatch Reason:",-1)),n("span",Mt,c(oe(e)||"None"),1)]),K(e)?(i(),l("div",Ut
,[a[31]||(a[31]=n("span",{class:"detail-label"},"Error:",-1)),n("span",qt,c(K(e)),1)])):r("",!0),J(e)?(i(),l("div"
,$t,[a[32]||(a[32]=n("span",{class:"detail-label"},"URL:",-1)),n("a",{href:J(e),target:"_blank",class:"detail-link
"},"View Citation",8,Ft)])):r("",!0)])])]))),128))])])])):r("",!0)]))),128))])])])):t.results&&t.results.citations
&&t.results.citations.length>0?(i(),l("div",Ot,[n("div",Bt,[n("div",Vt,[a[37]||(a[37]=n("h2",null,"Citation
Verification Results (Individual)",-1)),n("div",jt,[n("div",Gt,[n("span",Ht,c(z.value),1),a[34]||(a[34]=n("span",{
class:"stat-label"},"Verified",-1))]),n("div",Jt,[n("span",Wt,c(E.value),1),a[35]||(a[35]=n("span",{class:"stat-la
bel"},"Invalid",-1))]),n("div",Xt,[n("span",Kt,c(q.value.length),1),a[36]||(a[36]=n("span",{class:"stat-label"},"T
otal",-1))])])]),n("div",{class:"action-buttons"},[n("button",{class:"action-btn copy-btn",onClick:ue}," Copy
Results "),n("button",{class:"action-btn download-btn",onClick:de}," Download ")])]),n("div",Qt,[n("div",Yt,[(i(!0
),l(d,null,p(F.value,e=>(i(),l("button",{key:e.value,class:u(["filter-btn",{active:k.value===e.value}]),onClick:t=
>k.value=e.value},c(e.label)+" ("+c(e.count)+") ",11,Zt))),128))]),n("div",ea,[y(n("input",{"onUpdate:modelValue":
a[5]||(a[5]=e=>_.value=e),type:"text",placeholder:"Search citations...",class:"search-input"},null,512),[[h,_.valu
e]])])]),n("div",ta,[(i(!0),l(d,null,p(q.value,e=>(i(),l("div",{key:H(e),class:"citation-item
individual"},[n("div",aa,[a[38]||(a[38]=n("span",{class:"row-label"},"Verifying
Source:",-1)),n("span",null,[B(e)&&"N/A"!==B(e)?(i(),l("span",sa,[v(c(B(e))+"
",1),j(e)?(i(),l("span",{key:0,class:u(["canonical-date",te(e)])}," ("+c(ie(j(e)))+") ",3)):(i(),l("span",la,"(no
date)"))])):(i(),l("span",ia,"No canonical
name"))])]),n("div",na,[a[39]||(a[39]=n("span",{class:"row-label"},"From
Document:",-1)),n("span",null,[V(e)&&"N/A"!==V(e)?(i(),l("span",ra,[v(c(V(e))+"
",1),G(e)?(i(),l("span",{key:0,class:u(["extracted-date",te(e)])}," ("+c(ie(G(e)))+") ",3)):(i(),l("span",oa,"(no
date)"))])):(i(),l("span",ca,"No extracted name or year"))])]),n("div",ua,[n("span",da,c(H(e)),1),n("span",{class:
u(["verification-badge",Q(e)])},c(Q(e)),3)]),n("div",pa,[a[40]||(a[40]=n("span",{class:"detail-label"},"Mismatch R
eason:",-1)),a[41]||(a[41]=v()),n("span",null,c(oe(e)),1)])]))),128))])])):(i(),l("div",va,a[42]||(a[42]=[n("p",nu
ll,"No citation results to display.",-1)])))]))}},[["__scopeId","data-v-4767a1a3"]]),ga={class:"unified-input"},fa
={class:"input-methods-top"},ya={class:"method-icon"},ha={class:"method-content"},ba={key:0,class:"active-indicato
r"},ka={class:"method-icon"},_a={class:"method-content"},xa={key:0,class:"active-indicator"},wa={key:0,class:"inpu
t-area-top"},Sa={key:0,class:"file-input"},Ca=["disabled"],Ta={key:0,class:"drop-zone-content"},Aa={key:1,class:"f
ile-info"},Pa={class:"file-details"},Ra={key:0,class:"validation-errors"},La={key:1,class:"url-input"},Ia={class:"
url-input-container"},Na={class:"input-wrapper"},za=["disabled"],Ea={key:0,class:"input-status
valid"},Da={key:1,class:"input-status invalid"},Ma={class:"input-footer"},Ua={key:0,class:"url-preview"},qa={key:1
,class:"url-error"},$a={key:2,class:"url-hint"},Fa={key:0,class:"validation-errors"},Oa={class:"input-methods-bott
om"},Ba={class:"method-icon"},Va={class:"method-content"},ja={key:0,class:"active-indicator"},Ga={class:"method-ic
on"},Ha={class:"method-content"},Ja={key:0,class:"active-indicator"},Wa={class:"analyze-section"},Xa=["disabled"],
Ka={key:0,class:"analyzing-spinner"},Qa={key:1,class:"analyze-icon"},Ya={key:0,class:"validation-summary"},Za={key
:1,class:"input-area-bottom"},es={key:0,class:"text-input"},ts={class:"textarea-container"},as=["disabled"],ss={ke
y:0,class:"textarea-overlay"},ls={class:"input-footer"},is={key:0,class:"min-length-hint"},ns={key:0,class:"valida
tion-errors"},rs={key:1,class:"quick-citation-input-area"},os={class:"quick-input-container"},cs={class:"input-wra
pper"},us=["disabled"],ds={key:0,class:"input-status valid"},ps={__name:"UnifiedInput",props:{isAnalyzing:{type:Bo
olean,default:!1}},emits:["analyze"],setup(t,{emit:s}){const o=t,m=s,g="Paste Text",_="URL",x="Upload
File",w="Quick Citation",S="Paste legal text or citations directly",C="Analyze content from a web URL",T="Upload
a document for analysis",A="Enter a single citation and analyze
instantly",P="📝",R="🔗",L="📁",I="🔎",N={minLength:10,maxLength:5e4,minLengthMessage:"Text must be at least 10
characters long",maxLengthMessage:"Text is too long. Maximum 50,000 characters
allowed."},z={maxLength:2048,maxLengthMessage:"URL is too long. Maximum 2,048 characters
allowed."},E={maxSize:52428800,allowedTypes:[".pdf",".doc",".docx",".txt"],maxSizeMessage:"File is too large.
Maximum 50MB allowed.",typeMessage:"Invalid file type. Please upload PDF, DOC, DOCX, or TXT files."},D=e("text"),M
=e(""),U=e(""),q=e(null),$=e(!1),F=e(null),O=e(""),B=e({}),V=e({text:!1,url:!1,file:!1,quick:!1}),j=e(!1);function
 G(){const e={};"text"===D.value?e.text=function(e){const t=[],a=N;return e.trim()?e.length<a.minLength?t.push(a.m
inLengthMessage):e.length>a.maxLength&&t.push(a.maxLengthMessage):t.push("Text is
required"),/[\x00-\x08\x0B\x0C\x0E-\x1F]/.test(e)&&t.push("Text contains invalid characters. Please remove any
special characters."),t}(M.value):"url"===D.value?e.url=function(e){const t=[],a=z;return
e.trim()?e.length>a.maxLength?t.push(a.maxLengthMessage):/^https?:\/\//.test(e)?/\./.test(e)||t.push("URL must
contain a dot"):t.push("URL must start with http:// or https://"):t.push("URL is
required"),t}(U.value):"file"===D.value&&(e.file=function(e){const
t=[],a=E;if(e){e.size>a.maxSize&&t.push(a.maxSizeMessage),0===e.size&&t.push("File is empty");const
s="."+e.name.split(".").pop().toLowerCase();a.allowedTypes.includes(s)||t.push(a.typeMessage)}else t.push("Please
select a file");return t}(q.value)),B.value=e}function H(){V.value[D.value]=!0,j.value=!1,G()}const
J=a(()=>B.value[D.value]||[]),W=a(()=>J.value.length>0),X=a(()=>{let e=!1;return!o.isAnalyzing&&("text"===D.value?
e=M.value.length>=N.minLength&&M.value.length<=N.maxLength:"url"===D.value?e=U.value.length>0:"file"===D.value?e=!
!q.value:"quick"===D.value&&(e=O.value.trim().length>0),e)});function
K(e){e.preventDefault(),e.stopPropagation(),q.value=e.target.files[0]||null,$.value=!1,H()}function
Q(e){e.preventDefault(),e.stopPropagation();const
t=e.dataTransfer.files[0];t&&(q.value=t,H()),$.value=!1}function Y(){var
e;o.isAnalyzing||null==(e=F.value)||e.click()}function Z(){q.value=null,F.value&&(F.value.value=""),H()}function
ee(){if(X.value)if(j.value=!1,"text"===D.value)m("analyze",{text:M.value,type:"text"});else
if("url"===D.value)m("analyze",{url:U.value,type:"url"});else if("file"===D.value){const e=new FormData;e.append("
file",q.value),e.append("type","file"),m("analyze",e)}else"quick"===D.value&&(m("analyze",{text:O.value.trim(),typ
e:"text",quick:!0}),O.value="");else j.value=!0}function te(e){if(!e)return"0 Bytes";const
t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+"
"+["Bytes","KB","MB","GB"][t]}function ae(){B.value={},V.value={text:!1,url:!1,file:!1,quick:!1},j.value=!1,G()}re
turn(e,a)=>(i(),l("div",ga,[n("div",fa,[n("div",{class:u(["input-method-card",{active:"file"===D.value,disabled:t.
isAnalyzing}]),onClick:a[0]||(a[0]=e=>!t.isAnalyzing&&(D.value="file",ae()))},[n("div",ya,c(L),1),n("div",ha,[n("h
4",null,c(x),1),n("p",null,c(T),1)]),"file"===D.value?(i(),l("div",ba,"✓")):r("",!0)],2),n("div",{class:u(["input-
method-card",{active:"url"===D.value,disabled:t.isAnalyzing}]),onClick:a[1]||(a[1]=e=>!t.isAnalyzing&&(D.value="ur
l",ae()))},[n("div",ka,c(R),1),n("div",_a,[n("h4",null,c(_),1),n("p",null,c(C),1)]),"url"===D.value?(i(),l("div",x
a,"✓")):r("",!0)],2)]),"file"===D.value||"url"===D.value?(i(),l("div",wa,["file"===D.value?(i(),l("div",Sa,[a[13]|
|(a[13]=n("label",{class:"input-label"},[n("i",{class:"bi bi-file-earmark-arrow-up me-2"}),v(" Upload a document "
)],-1)),n("div",{class:u(["file-drop-zone",{"has-file":q.value,dragover:$.value,error:W.value&&V.value.file}]),onD
rop:Q,onDragover:a[2]||(a[2]=b(e=>$.value=!0,["prevent"])),onDragleave:a[3]||(a[3]=b(e=>$.value=!1,["prevent"])),o
nClick:Y},[n("input",{ref_key:"fileInput",ref:F,id:"fileInput",type:"file",onChange:K,disabled:t.isAnalyzing,accep
t:".pdf,.doc,.docx,.txt",style:{display:"none"}},null,40,Ca),q.value?(i(),l("div",Aa,[a[11]||(a[11]=n("div",{class
:"file-icon"},"📄",-1)),n("div",Pa,[n("strong",null,c(q.value.name),1),n("span",null,c(te(q.value.size)),1)]),t.is
Analyzing?r("",!0):(i(),l("button",{key:0,onClick:b(Z,["stop"]),class:"clear-file-btn",title:"Remove
file"},a[10]||(a[10]=[n("i",{class:"bi bi-x-lg"},null,-1)])))])):(i(),l("div",Ta,a[9]||(a[9]=[f('<div
class="upload-icon" data-v-d110b890>📁</div><h5 class="drop-zone-title" data-v-d110b890>Click to browse or drag
&amp; drop</h5><p class="file-types" data-v-d110b890>Supports: PDF, DOC, DOCX, TXT (max 50MB)</p><div
class="drop-zone-hint" data-v-d110b890><i class="bi bi-arrow-up-circle" data-v-d110b890></i><span
data-v-d110b890>Drop your file here</span></div>',4)])))],34),W.value&&V.value.file?(i(),l("div",Ra,[(i(!0),l(d,nu
ll,p(J.value,e=>(i(),l("div",{key:e,class:"error-message"},[a[12]||(a[12]=n("span",{class:"error-icon"},"⚠️",-1)),
v(" "+c(e),1)]))),128))])):r("",!0)])):"url"===D.value?(i(),l("div",La,[a[21]||(a[21]=n("label",{class:"input-labe
l"},[n("i",{class:"bi bi-link-45deg me-2"}),v(" Enter URL to analyze
")],-1)),n("div",Ia,[n("div",Na,[a[16]||(a[16]=n("div",{class:"input-icon"},[n("i",{class:"bi bi-globe"})],-1)),y(
n("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>U.value=e),type:"url",placeholder:"https://example.com/document.pd
f",disabled:t.isAnalyzing,onInput:H,class:u([{error:W.value&&V.value.url},"url-input-field"])},null,42,za),[[h,U.v
alue]]),U.value&&!W.value?(i(),l("div",Ea,a[14]||(a[14]=[n("i",{class:"bi
bi-check-circle-fill"},null,-1)]))):U.value&&W.value?(i(),l("div",Da,a[15]||(a[15]=[n("i",{class:"bi bi-x-circle-f
ill"},null,-1)]))):r("",!0)])]),n("div",Ma,[U.value&&!W.value?(i(),l("span",Ua,[a[17]||(a[17]=n("i",{class:"bi
bi-eye me-1"},null,-1)),v(" Will analyze:
"+c(U.value),1)])):U.value&&W.value?(i(),l("span",qa,a[18]||(a[18]=[n("i",{class:"bi bi-exclamation-triangle
me-1"},null,-1),v(" Invalid URL format ",-1)]))):(i(),l("span",$a,a[19]||(a[19]=[n("i",{class:"bi bi-info-circle
me-1"},null,-1),v(" Enter a valid URL to analyze web content ",-1)])))]),W.value&&V.value.url?(i(),l("div",Fa,[(i(
!0),l(d,null,p(J.value,e=>(i(),l("div",{key:e,class:"error-message"},[a[20]||(a[20]=n("span",{class:"error-icon"},
"⚠️",-1)),v(" "+c(e),1)]))),128))])):r("",!0)])):r("",!0)])):r("",!0),n("div",Oa,[n("div",{class:u(["input-method-
card",{active:"quick"===D.value,disabled:t.isAnalyzing}]),onClick:a[5]||(a[5]=e=>!t.isAnalyzing&&(D.value="quick",
ae()))},[n("div",Ba,c(I),1),n("div",Va,[n("h4",null,c(w),1),n("p",null,c(A),1)]),"quick"===D.value?(i(),l("div",ja
,"✓")):r("",!0)],2),n("div",{class:u(["input-method-card",{active:"text"===D.value,disabled:t.isAnalyzing}]),onCli
ck:a[6]||(a[6]=e=>!t.isAnalyzing&&(D.value="text",ae()))},[n("div",Ga,c(P),1),n("div",Ha,[n("h4",null,c(g),1),n("p
",null,c(S),1)]),"text"===D.value?(i(),l("div",Ja,"✓")):r("",!0)],2)]),n("div",Wa,[n("button",{class:u(["analyze-b
tn",{disabled:!X.value||t.isAnalyzing}]),disabled:!X.value||t.isAnalyzing,onClick:ee},[t.isAnalyzing?(i(),l("span"
,Ka)):(i(),l("span",Qa,"🔍")),v(" "+c(t.isAnalyzing?"Analyzing...":"Analyze
Content"),1)],10,Xa),j.value&&W.value?(i(),l("div",Ya,a[22]||(a[22]=[n("p",null,"Please fix the errors above
before analyzing",-1)]))):r("",!0)]),"text"===D.value||"quick"===D.value?(i(),l("div",Za,["text"===D.value?(i(),l(
"div",es,[a[27]||(a[27]=n("label",{class:"input-label"},[n("i",{class:"bi bi-text-paragraph me-2"}),v(" Paste
your text here
")],-1)),n("div",ts,[y(n("textarea",{"onUpdate:modelValue":a[7]||(a[7]=e=>M.value=e),placeholder:"Paste legal
text, citations, or document content here...",disabled:t.isAnalyzing,rows:"8",onInput:H,class:u([{error:W.value&&V
.value.text},"text-input-field"])},null,42,as),[[h,M.value]]),M.value?r("",!0):(i(),l("div",ss,a[23]||(a[23]=[n("i
",{class:"bi bi-clipboard"},null,-1),n("span",null,"Paste your content here",-1)])))]),n("div",ls,[n("span",{class
:u(["char-count",{error:M.value.length>N.maxLength}])},[a[24]||(a[24]=n("i",{class:"bi bi-type
me-1"},null,-1)),v(" "+c(M.value.length)+" / "+c(N.maxLength)+" characters
",1)],2),M.value.length<N.minLength&&V.value.text?(i(),l("span",is,[a[25]||(a[25]=n("i",{class:"bi
bi-exclamation-circle me-1"},null,-1)),v(" Minimum "+c(N.minLength)+" characters required ",1)])):r("",!0)]),W.val
ue&&V.value.text?(i(),l("div",ns,[(i(!0),l(d,null,p(J.value,e=>(i(),l("div",{key:e,class:"error-message"},[a[26]||
(a[26]=n("span",{class:"error-icon"},"⚠️",-1)),v(" "+c(e),1)]))),128))])):r("",!0)])):"quick"===D.value?(i(),l("di
v",rs,[a[30]||(a[30]=n("label",{class:"input-label"},[n("i",{class:"bi bi-lightning me-2"}),v(" Enter a single
citation ")],-1)),n("div",os,[n("div",cs,[a[29]||(a[29]=n("div",{class:"input-icon"},[n("i",{class:"bi
bi-quote"})],-1)),y(n("input",{"onUpdate:modelValue":a[8]||(a[8]=e=>O.value=e),type:"text",placeholder:"e.g., 410
U.S. 113 (1973) or Roe v. Wade",disabled:t.isAnalyzing,onKeyup:k(ee,["enter"]),class:"quick-citation-input"},null,
40,us),[[h,O.value]]),O.value?(i(),l("div",ds,a[28]||(a[28]=[n("i",{class:"bi bi-check-circle-fill"},null,-1)]))):
r("",!0)])]),a[31]||(a[31]=n("div",{class:"input-footer"},[n("span",{class:"citation-hint"},[n("i",{class:"bi
bi-info-circle me-1"}),v(" Enter a legal citation to verify quickly ")])],-1))])):r("",!0)])):r("",!0)]))}},vs={ke
y:0,class:"unified-progress-container"},ms={class:"progress-header"},gs={class:"progress-icon"},fs={key:0,class:"e
rror-icon"},ys={key:1,class:"success-icon"},hs={key:2,class:"loading-icon"},bs={class:"progress-title-section"},ks
={class:"progress-title"},_s={key:0},xs={key:1},ws={key:2},Ss={class:"progress-subtitle"},Cs={key:0},Ts={key:1},As
={key:2},Ps={key:0,class:"progress-content"},Rs={class:"progress-stats"},Ls={class:"stat-item"},Is={class:"stat-va
lue"},Ns={key:0,class:"stat-item"},zs={class:"stat-value"},Es={key:1,class:"stat-item"},Ds={class:"stat-value"},Ms
={class:"main-progress-section"},Us={class:"progress-bar-container"},qs={class:"progress",style:{height:"1.5rem","
border-radius":"0.75rem"}},$s=["aria-valuenow"],Fs={class:"progress-text"},Os={key:0,class:"steps-progress"},Bs={c
lass:"steps-list"},Vs={class:"step-icon"},js={key:0,class:"bi bi-check-circle-fill"},Gs={key:1,class:"bi
bi-arrow-right-circle-fill"},Hs={key:2,class:"bi bi-circle"},Js={class:"step-content"},Ws={class:"step-name"},Xs={
key:0,class:"step-time"},Ks={key:1,class:"rate-limit-info"},Qs={class:"alert
alert-info"},Ys={key:0},Zs={key:1,class:"error-actions"},el={key:2,class:"completion-actions"};const
tl={class:"toast-icon"},al={class:"toast-message"},sl={class:"enhanced-validator"},ll={class:"header text-center m
b-4"},il={key:1,class:"loading-container"},nl={class:"loading-content"},rl={key:0,class:"progress-section"},ol={cl
ass:"progress-info mb-3"},cl={class:"progress-stats"},ul={class:"stat"},dl={class:"stat"},pl={class:"progress-cont
ainer"},vl={class:"progress",style:{height:"1.5rem","border-radius":"0.75rem"}},ml=["aria-valuenow"],gl={class:"pr
ogress-text"},fl={key:2,class:"error-container"},yl={class:"error-content"},hl={key:0,class:"mt-4"},bl={class:"car
d"},kl={class:"card-body"},_l={key:3,class:"main-content-wrapper"},xl={class:"main-content-area"},wl={key:0,class:
"results-container"},Sl={key:1,class:"input-container"},Cl={key:2,class:"no-results-container"};const Tl=L({name:"
EnhancedValidator",components:{CitationResults:ma,UnifiedInput:L(ps,[["__scopeId","data-v-d110b890"]]),UnifiedProg
ress:L({name:"UnifiedProgress",emits:["retry","reset","complete"],setup(e,{emit:t}){const{progressState:a,elapsedT
ime:s,remainingTime:l,progressPercent:i,progressBarClass:n,shouldShowProgress:r,formatTime:o,retryProgress:c,reset
Progress:u}=M();return{progressState:a,elapsedTime:s,remainingTime:l,progressPercent:i,progressBarClass:n,shouldSh
owProgress:r,formatTime:o,getUploadTypeLabel:()=>{switch(a.uploadType){case"file":return"Document";case"url":retur
n"URL Content";case"text":return"Text";default:return"Content"}},handleRetry:()=>{c()&&t("retry",{uploadType:a.upl
oadType,uploadData:a.uploadData})},handleReset:()=>{u(),t("reset")}}}},[["render",function(e,t,a,s,m,g){return s.s
houldShowProgress?(i(),l("div",vs,[n("div",{class:u(["progress-card",{"error-state":s.progressState.processingErro
r}])},[n("div",ms,[n("div",gs,[s.progressState.processingError?(i(),l("div",fs,t[2]||(t[2]=[n("i",{class:"bi
bi-exclamation-triangle"},null,-1)]))):s.progressState.hasResults?(i(),l("div",ys,t[3]||(t[3]=[n("i",{class:"bi
bi-check-circle-fill"},null,-1)]))):(i(),l("div",hs,t[4]||(t[4]=[n("div",{class:"spinner-border text-primary",role
:"status"},[n("span",{class:"visually-hidden"},"Processing...")],-1)])))]),n("div",bs,[n("h3",ks,[s.progressState.
processingError?(i(),l("span",_s,"Processing Failed")):s.progressState.hasResults?(i(),l("span",xs,"Processing
Complete")):(i(),l("span",ws,"Processing "+c(s.getUploadTypeLabel()),1))]),n("p",Ss,[s.progressState.processingErr
or?(i(),l("span",Cs,c(s.progressState.processingError),1)):s.progressState.hasResults?(i(),l("span",Ts,"Analysis
completed successfully")):(i(),l("span",As,c(s.progressState.currentStep),1))])])]),s.progressState.processingErro
r?r("",!0):(i(),l("div",Ps,[n("div",Rs,[n("div",Ls,[t[5]||(t[5]=n("i",{class:"bi bi-clock text-primary"},null,-1))
,t[6]||(t[6]=n("span",{class:"stat-label"},"Elapsed:",-1)),n("span",Is,c(s.formatTime(s.elapsedTime)),1)]),s.progr
essState.isActive&&s.remainingTime>0?(i(),l("div",Ns,[t[7]||(t[7]=n("i",{class:"bi bi-hourglass-split text-info"},
null,-1)),t[8]||(t[8]=n("span",{class:"stat-label"},"Remaining:",-1)),n("span",zs,c(s.formatTime(s.remainingTime))
,1)])):r("",!0),s.progressState.citationInfo?(i(),l("div",Es,[t[9]||(t[9]=n("i",{class:"bi bi-list-ol text-success
"},null,-1)),t[10]||(t[10]=n("span",{class:"stat-label"},"Citations:",-1)),n("span",Ds,c(s.progressState.citationI
nfo.processed||0)+" of "+c(s.progressState.citationInfo.total||0),1)])):r("",!0)]),n("div",Ms,[n("div",Us,[n("div"
,qs,[n("div",{class:u(["progress-bar progress-bar-striped",[s.progressBarClass,{"progress-bar-animated":s.progress
State.isActive}]]),role:"progressbar",style:o({width:s.progressPercent+"%"}),"aria-valuenow":s.progressPercent,"ar
ia-valuemin":"0","aria-valuemax":"100"},[n("span",Fs,c(Math.round(s.progressPercent))+"%",1)],14,$s)])])]),s.progr
essState.processingSteps.length>0?(i(),l("div",Os,[t[11]||(t[11]=n("div",{class:"steps-header"},[n("h6",null,[n("i
",{class:"bi bi-list-task me-2"}),v("Processing Steps")])],-1)),n("div",Bs,[(i(!0),l(d,null,p(s.progressState.proc
essingSteps,(e,t)=>(i(),l("div",{key:t,class:u(["step-item",{active:e.step===s.progressState.currentStep,completed
:e.completed,pending:!e.completed&&e.step!==s.progressState.currentStep}])},[n("div",Vs,[e.completed?(i(),l("i",js
)):e.step===s.progressState.currentStep?(i(),l("i",Gs)):(i(),l("i",Hs))]),n("div",Js,[n("span",Ws,c(e.step),1),e.e
stimated_time?(i(),l("span",Xs," (~"+c(e.estimated_time)+"s) ",1)):r("",!0)])],2))),128))])])):r("",!0),s.progress
State.rateLimitInfo?(i(),l("div",Ks,[n("div",Qs,[t[12]||(t[12]=n("i",{class:"bi bi-info-circle
me-2"},null,-1)),t[13]||(t[13]=n("strong",null,"Rate Limit:",-1)),v("
"+c(s.progressState.rateLimitInfo.remaining||0)+" requests remaining
",1),s.progressState.rateLimitInfo.reset_time?(i(),l("span",Ys," (resets in
"+c(s.formatTime(s.progressState.rateLimitInfo.reset_time))+") ",1)):r("",!0)])])):r("",!0)])),s.progressState.pro
cessingError?(i(),l("div",Zs,[s.progressState.canRetry?(i(),l("button",{key:0,onClick:t[0]||(t[0]=(...e)=>s.handle
Retry&&s.handleRetry(...e)),class:"btn btn-primary me-2"},t[14]||(t[14]=[n("i",{class:"bi bi-arrow-clockwise
me-1"},null,-1),v(" Retry Analysis
",-1)]))):r("",!0),n("button",{onClick:t[1]||(t[1]=(...e)=>s.handleReset&&s.handleReset(...e)),class:"btn
btn-outline-secondary"},t[15]||(t[15]=[n("i",{class:"bi bi-x-circle me-1"},null,-1),v(" Clear Error ",-1)]))])):r(
"",!0),s.progressState.hasResults&&!s.progressState.isActive?(i(),l("div",el,t[16]||(t[16]=[n("div",{class:"alert
alert-success"},[n("i",{class:"bi bi-check-circle-fill me-2"}),n("strong",null,"Analysis Complete!"),v(" Your
results are ready. ")],-1)]))):r("",!0)],2)])):r("",!0)}],["__scopeId","data-v-d9e38cde"]]),Toast:L({__name:"Toast
",props:{message:String,type:{type:String,default:"info"},duration:{type:Number,default:3500}},emits:["close"],set
up(t,{emit:s}){const o=t,d=s,p=e(!0),v=a(()=>"success"===o.type?"✅":"error"===o.type?"❌":"ℹ️");function
f(){p.value=!1,d("close")}return m(()=>o.message,e=>{e&&(p.value=!0,setTimeout(f,o.duration))}),(e,a)=>(i(),g(x,{n
ame:"toast-fade"},{default:_(()=>[p.value?(i(),l("div",{key:0,class:u(["toast",t.type])},[n("span",tl,c(v.value),1
),n("span",al,c(t.message),1),n("button",{class:"toast-close",onClick:f},"×")],2)):r("",!0)]),_:1}))}},[["__scopeI
d","data-v-a1e0936f"]]),SkeletonLoader:L({__name:"SkeletonLoader",props:{lines:{type:Number,default:3},height:{typ
e:String,default:"auto"},width:{type:String,default:"100%"}},setup:e=>(t,a)=>(i(),l("div",{class:"skeleton-loader"
,style:o({height:e.height,width:e.width})},[(i(!0),l(d,null,p(e.lines,e=>(i(),l("div",{key:e,class:"skeleton-line"
}))),128))],4))},[["__scopeId","data-v-1c57e4a2"]])},setup(){const s=T(),l=A(),i=e(null),n=e(null),{isLoading:r,ca
ncel:o}=function(a={}){const{loadingMessage:s="Loading...",showLoading:l=!0,onSuccess:i,onError:n,onFinally:r}=a,o
=e(null),c=e(null),u=e(!1),d=e(null);let p=null,v=null;const
m=`api_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return
t(()=>{v&&v.abort(),p&&p.remove()}),{execute:async function(e,t={}){var g;const{message:f=s,showLoader:y=l,signal:
h,...b}={...a,...t};c.value=null,d.value=null,o.value=null,y&&(p=R(m,{message:f})),u.value=!0,"undefined"!=typeof
AbortController&&(v=new AbortController,b.signal=h||v.signal);try{const t=await e({...b,signal:b.signal});return
o.value=t.data||t,d.value=t.status||200,i&&i(t),t}catch(k){throw c.value=k,d.value=(null==(g=k.response)?void 0:g.
status)||0,n&&n(k),k}finally{u.value=!1,p&&(c.value?p.error(c.value):p.complete(),p=null),r&&r(),v=null}},cancel:f
unction(){v&&(v.abort(),v=null),p&&(p.remove(),p=null),u.value=!1},data:o,error:c,isLoading:u,status:d}}({loadingM
essage:"Validating citation...",showLoading:!0}),c=e(!1),{isLoading:u}=function(){const e=(e,t="Loading...")=>{z.v
alue=e,t&&(E.value=t)};return{isLoading:a(()=>z.value),loadingMessage:a(()=>E.value),setLoading:e,showLoading:t=>{
e(!0,t)},hideLoading:()=>{e(!1)},toggleLoading:t=>{e(!z.value,t)}}}(),d=a(()=>r.value||u.value||c.value),{elapsedT
ime:p,progressPercent:v,progressBarClass:g,startProgress:f,setSteps:y,updateProgress:h,setError:b,completeProgress
:k,resetProgress:_}=M(),x=e(0),w=e(null),S=e(null),L=e(null);let D=e(null);const U=e(""),q=e("info"),$=(e,t="info"
)=>{U.value=e,q.value=t},F=e(null),O=12e4,B=e(""),V=e(null),j=e(null),G=e(null),H=e(!1),J=e(null),W=e(0),X=e(""),K
=e(0),Q=e([]),Y=()=>{V.value=null,j.value=null,G.value=null,H.value=!1,J.value=null,W.value=0,X.value="",K.value=0
,Q.value=[],_()},Z=e(null),ee=e(100),te=e(0),ae=a(()=>(null==v?void 0:v.value)||0),se=a(()=>(null==p?void 0:p.valu
e)||0),le=a(()=>!0),ie=e(!0),ne=a(()=>!i.value&&!n.value&&!d.value),{normalizeCitations:re}=function(){const
e=e=>{let t=0,a="text-muted";if(e.canonical_name&&"N/A"!==e.canonical_name&&(t+=2),e.extracted_case_name&&"N/A"!==
e.extracted_case_name&&e.canonical_name&&"N/A"!==e.canonical_name){const a=e.canonical_name.toLowerCase().split(/\
s+/).filter(e=>e.length>2),s=e.extracted_case_name.toLowerCase().split(/\s+/).filter(e=>e.length>2);a.filter(e=>s.
includes(e)).length/Math.max(a.length,s.length)>=.5&&(t+=1)}return e.canonical_date&&"N/A"!==e.canonical_date&&(t+
=1),e.url&&""!==e.url&&(t+=1),a=t>=4?"text-success":t>=2?"text-warning":"text-danger",{score:t,scoreColor:a,normal
ized:{canonical_name:e.canonical_name||"N/A",extracted_case_name:e.extracted_case_name||"N/A",canonical_date:e.can
onical_date||"N/A",extracted_date:e.extracted_date||"N/A",url:e.url||"",verified:e.verified||!1}}};return{normaliz
eCitation:e,normalizeCitations:t=>Array.isArray(t)?t.map(t=>{const a=e(t);return{...t,score:a.score,scoreColor:a.s
coreColor}}):[],calculateCitationScore:t=>e(t).score,calculateSimilarity:e=>{if(e.canonical_name&&"N/A"!==e.canoni
cal_name)return
1;if(e.extracted_case_name&&"N/A"!==e.extracted_case_name&&e.canonical_name&&"N/A"!==e.canonical_name){const t=e.c
anonical_name.toLowerCase().split(/\s+/).filter(e=>e.length>2),a=e.extracted_case_name.toLowerCase().split(/\s+/).
filter(e=>e.length>2);return t.filter(e=>a.includes(e)).length/Math.max(t.length,a.length)}return 0}}}();function
oe(e){const t=new Map;return e.forEach(e=>{const a=e.canonical_citation||e.citation||e.primary_citation;t.has(a)||
t.set(a,{cluster_id:`cluster_${a.replace(/[^a-zA-Z0-9]/g,"_")}`,canonical_name:e.canonical_name||"N/A",canonical_d
ate:e.canonical_date||null,extracted_case_name:e.extracted_case_name||"N/A",extracted_date:e.extracted_date||null,
url:e.url||null,citations:[]});t.get(a).citations.push(e)}),Array.from(t.values()).map(e=>({...e,size:e.citations.
length}))}function ce(){i.value=null,n.value=null,Y()}async function ue(e){if(e)try{const[t,a]=await Promise.allSe
ttled([I.get(`/task_status/${e}`),I.get(`/processing_progress?task_id=${e}`)]),s="fulfilled"===t.status?t.value.da
ta:{},l="fulfilled"===a.status?a.value.data:{};if("completed"===s.status){const e=s.result||s,t=Array.isArray(e.ci
tations)?e.citations:e.results||[],a=re?re(t):t;if(i.value={citations:a,clusters:e.clusters||oe(t),metadata:e.meta
data||{},total_citations:t.length,verified_count:t.filter(e=>{var t,a;return
e.verified||e.valid||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void
0:a.found)}).length,unverified_count:t.filter(e=>{var t,a;return!(e.verified||e.valid||(null==(t=e.data)?void
0:t.valid)||(null==(a=e.data)?void 0:a.found))}).length},c.value=!1,stopProcessing(),r.value=!1,void 0!==u&&void
0!==u.value&&(u.value=!1),$("Citation analysis completed
successfully!","success"),L.value&&(clearInterval(L.value),L.value=null),0===t.length){let e="No citations found
in the provided text or document.";s.status_message&&s.status_message.toLowerCase().includes("rate limit")&&(e+="
(Possible cause: search engine rate limiting)"),s.error&&(e+=` (Backend error: ${s.error})`),n.value=e}window&&win
dow.localStorage&&"true"===window.localStorage.getItem("debugMode")&&(n.value+="\n[DEBUG] Raw backend response:
"+JSON.stringify(s,null,2))}else if("failed"===s.status)n.value=s.error||"Processing
failed",c.value=!1,setProcessingError(s.error||"Processing failed"),$(`Processing failed: ${s.error||"Unknown
error"}`,"error"),L.value&&(clearInterval(L.value),L.value=null);else{c.value=!0;const t="success"===l.status?l:s;
t.estimated_total_time&&t.steps?D.value!==e&&(startProcessing({estimated_total_time:t.estimated_total_time,steps:t
.steps}),D.value=e):t.estimated_total_time&&D.value!==e&&(startProcessing(t.estimated_total_time),D.value=e),t.cur
rent_step&&h({step:t.current_step,progress:t.progress||0}),"success"===l.status&&void 0!==l.total_citations?(V.val
ue={total:l.total_citations,processed:l.processed_citations||0,unique:l.unique_citations||0},te.value=l.processed_
citations||0):void 0!==s.total_citations&&(V.value={total:s.total_citations,processed:s.processed_citations||0,uni
que:s.unique_citations||0}),L.value||(L.value=setInterval(()=>ue(e),2e3))}he()}catch(t){n.value="Failed to check
processing status",c.value=!1,setProcessingError(t.message||"Failed to check processing
status"),L.value&&(clearInterval(L.value),L.value=null)}}const de=async(e,t)=>{try{"file"===t?await
ge(e):"url"===t?await fe({url:e}):"text"===t&&await me({text:e})}catch(a){G.value=`Failed to analyze input:
${a.message}`,H.value=!0}},pe=e=>{try{let t=[];e.result&&Array.isArray(e.result.citations)&&e.result.citations.len
gth>0?t=e.result.citations:Array.isArray(e.citations)&&e.citations.length>0?t=e.citations:Array.isArray(e.validati
on_results)&&e.validation_results.length>0&&(t=e.validation_results),i.value={...e,citations:re(t),clusters:e.resu
lt&&e.result.clusters||e.clusters||oe(t),total_citations:t.length,verified_count:t.filter(e=>{var t,a;return
e.verified||e.valid||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void
0:a.found)}).length,unverified_count:t.filter(e=>{var t,a;return!(e.verified||e.valid||(null==(t=e.data)?void
0:t.valid)||(null==(a=e.data)?void 0:a.found))}).length,timestamp:(new
Date).toISOString()},r.value=!1,n.value=null,c.value=!1,S.value=null,k(i.value),P(()=>{const e=document.querySelec
tor(".results-container");e&&e.scrollIntoView({behavior:"smooth"})})}catch(t){n.value="Failed to process
results",r.value=!1}},ve=e=>{const t=e.message||"An error occurred during analysis";b(t),n.value=t,r.value=!1,c.va
lue=!1,S.value=null,H.value=!0,$(t,"error")},me=async({text:e,options:t})=>{if(!c.value){r.value=!0,n.value=null,i
.value=null;try{const t=await N({text:e,type:"text"});pe(t),r.value=!1}catch(a){ve(a)}}},ge=async
e=>{if(!c.value){r.value=!0,n.value=null,i.value=null;try{let t;e instanceof FormData?t=e:(t=new
FormData,t.append("file",e.file),t.append("type","file"));const a=await N(t);pe(a),r.value=!1}catch(t){ve(t)}}},fe
=async({url:e})=>{if(!c.value){r.value=!0,n.value=null,i.value=null;try{const t=await
N({url:e,type:"url"});pe(t),r.value=!1}catch(t){ve(t)}}};function ye(e){if(c.value)return void $("A request is
already in progress. Please wait for it to complete.","warning");let
t,a;e.file?(t="file",a=e):e.url?(t="url",a=e):e.text&&(t="text",a=e),f(t,a,95),y([{step:"Preparing
analysis",estimated_time:5},{step:"Processing content",estimated_time:30},{step:"Verifying citations",estimated_ti
me:60}]),Y(),startProcessing(),c.value=!0,n.value=null,i.value=null,e.file?ge(e):e.url?fe(e):e.text&&(e.quick?me({
text:e.text,options:{mode:"single"}}):me({text:e.text,options:{mode:"multi"}})),B.value="",he(),F.value=setTimeout
(()=>{B.value="Processing timed out. No response from
server.",setProcessingError(B.value),c.value=!1,$(B.value,"error")},O)}function
he(){F.value&&(clearTimeout(F.value),F.value=null)}C(()=>{let
e={...s.query};if(l.currentRoute.value.state&&l.currentRoute.value.state.results){const
e=l.currentRoute.value.state.results;let t=[];return e.result&&Array.isArray(e.result.citations)&&e.result.citatio
ns.length>0?t=e.result.citations:Array.isArray(e.citations)&&e.citations.length>0?t=e.citations:Array.isArray(e.va
lidation_results)&&e.validation_results.length>0&&(t=e.validation_results),void(t.length>0?(i.value={...e,citation
s:re(t),clusters:e.result&&e.result.clusters||e.clusters||oe(t),total_citations:t.length,verified_count:t.filter(e
=>{var t,a;return e.verified||e.valid||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void
0:a.found)}).length,unverified_count:t.filter(e=>{var t,a;return!(e.verified||e.valid||(null==(t=e.data)?void
0:t.valid)||(null==(a=e.data)?void 0:a.found))}).length},$("Citation analysis completed
successfully!","success")):n.value="No citations found in the provided text or document.")}if(e.task_id)return
S.value=e.task_id,c.value=!0,void
ue(e.task_id);if(!e.text&&!e.url&&!e.fileName&&localStorage.getItem("lastCitationInput"))try{const
t=JSON.parse(localStorage.getItem("lastCitationInput"));t.fileName?(delete t.fileName,0===Object.keys(t).length?lo
calStorage.removeItem("lastCitationInput"):localStorage.setItem("lastCitationInput",JSON.stringify(t)),e={}):e=t}c
atch(t){e={}}e.text||e.url||e.fileName?(ce(),e.text?me({text:e.text}):e.url?fe({url:e.url}):e.fileName&&(n.value=`
File "${e.fileName}" was previously uploaded but cannot be restored from history. Please upload the file again to
analyze it.`,ie.value=!0)):i.value=null,le.value&&ee.value>20&&(te.value=0,Z&&clearInterval(Z),Z=setInterval(()=>{
te.value<ee.value&&te.value++},2e3)),setTimeout(()=>{const e=document.querySelectorAll(".fas.fa-cog.fa-spin"),t=do
cument.querySelectorAll(".bi.bi-gear-fill.spinning");e.forEach((e,a)=>{-1===getComputedStyle(e).fontFamily.indexOf
("FontAwesome")&&(e.style.display="none",t[a]&&(t[a].style.display="inline-block"))})},100)}),t(()=>{c.value&&o(),
L.value&&(clearInterval(L.value),L.value=null),he(),Z&&clearInterval(Z)}),m(()=>i.value,e=>{e&&Z&&(te.value=ee.val
ue,clearInterval(Z))});return{results:i,error:n,isLoading:d,showLoading:d,hasActiveRequest:c,clearResults:ce,handl
eUnifiedAnalyze:ye,retryProcessing:async()=>{if(S.value)try{G.value=null,H.value=!1,Y(),await
I.cancelRequest(S.value);const e=I.getRequestStatus(S.value);if(e){const{type:t,input:a}=e;await
de(a,t)}}catch(e){G.value=`Failed to retry: ${e.message}`,H.value=!0}},cancelValidation:o,copyResults:function(){}
,downloadResults:function(){},handleProgressRetry:e=>{e&&e.uploadType&&e.uploadData&&ye(e.uploadData)},handleProgr
essReset:()=>{_(),ce()},handleProgressComplete:()=>{},citationInfo:V,queuePosition:x,estimatedQueueTime:w,rateLimi
tInfo:j,timeout:J,canRetry:H,processingError:G,totalProgress:W,currentStep:X,currentStepProgress:K,processingSteps
:Q,resetProcessing:Y,progressTimer:Z,progressTotal:ee,progressCurrent:te,formatTime:e=>{if(!e||e<0)return"00:00";c
onst t=Math.floor(e/60),a=Math.floor(e%60);return`${t.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`
},progressBarClass:g,progressPercent:ae,elapsedTime:se,getProgressBarClass:function(e){return e>=.8?"bg-success":e
>=.5?"bg-info":e>=.3?"bg-warning":"bg-danger"},applyCorrection:()=>{},toastMessage:U,toastType:q,clearToast:()=>{U
.value=""},fallbackError:B,showTimer:le,loadRecentInput:e=>{l.push({path:"/",query:{tab:e.tab,..."paste"===e.tab&&
e.text?{text:e.text}:{},..."url"===e.tab&&e.url?{url:e.url}:{}}})},showFileUpload:ie,shouldShowInput:ne}}},[["rend
er",function(e,t,a,s,d,p){const
m=w("Toast"),f=w("UnifiedInput"),y=w("CitationResults"),h=w("UnifiedProgress");return i(),l("div",sl,[s.toastMessa
ge?(i(),g(m,{key:0,message:s.toastMessage,type:s.toastType,onClose:s.clearToast},null,8,["message","type","onClose
"])):r("",!0),n("div",ll,[n("button",{class:"btn btn-link
back-btn",onClick:t[0]||(t[0]=(...t)=>e.goHome&&e.goHome(...t))},t[1]||(t[1]=[n("i",{class:"bi
bi-arrow-left"},null,-1),v(" Back to Home ",-1)])),t[2]||(t[2]=n("h1",{class:"results-title"},"Citation
Verification Results",-1))]),s.showLoading&&!s.results?(i(),l("div",il,[n("div",nl,[t[5]||(t[5]=n("div",{class:"sp
inner-container"},[n("div",{class:"spinner-border text-primary",role:"status"},[n("span",{class:"visually-hidden"}
,"Processing...")])],-1)),t[6]||(t[6]=n("h3",null,"Processing
Citations",-1)),t[7]||(t[7]=n("p",{class:"text-muted"},"Extracting and analyzing citations from your
document...",-1)),s.showTimer?(i(),l("div",rl,[n("div",ol,[n("div",cl,[n("span",ul,[t[3]||(t[3]=n("i",{class:"bi
bi-list-ol text-primary"},null,-1)),v(" "+c(s.progressCurrent)+" of "+c(s.progressTotal)+" citations
",1)]),n("span",dl,[t[4]||(t[4]=n("i",{class:"bi bi-clock text-primary"},null,-1)),v("
"+c(s.formatTime(s.elapsedTime))+" elapsed ",1)])])]),n("div",pl,[n("div",vl,[n("div",{class:u(["progress-bar
progress-bar-striped progress-bar-animated",s.progressBarClass]),role:"progressbar",style:o({width:s.progressPerce
nt+"%"}),"aria-valuenow":s.progressPercent,"aria-valuemin":"0","aria-valuemax":"100"},[n("span",gl,c(s.progressPer
cent)+"%",1)],14,ml)])])])):r("",!0)])])):s.error&&!s.showLoading?(i(),l("div",fl,[n("div",yl,[t[10]||(t[10]=n("di
v",{class:"error-icon"},[n("i",{class:"bi bi-exclamation-triangle"})],-1)),t[11]||(t[11]=n("h3",null,"Analysis Fai
led",-1)),n("p",null,c(s.error),1),s.showFileUpload?(i(),l("div",hl,[n("div",bl,[t[9]||(t[9]=n("div",{class:"card-
header bg-primary text-white"},[n("h5",{class:"mb-0"},[n("i",{class:"bi bi-file-earmark-arrow-up me-2"}),v("
Re-upload File ")])],-1)),n("div",kl,[t[8]||(t[8]=n("p",{class:"text-muted mb-3"}," To analyze your file, please
upload it again using the form below. ",-1)),S(f,{onAnalyze:s.handleUnifiedAnalyze,"is-analyzing":s.showLoading},n
ull,8,["onAnalyze","is-analyzing"])])])])):r("",!0)])])):(i(),l("div",_l,[n("div",xl,[s.results?(i(),l("div",wl,[S
(y,{results:s.results,"show-loading":s.showLoading,"processing-time":s.elapsedTime,"show-details":!0,"elapsed-time
":s.elapsedTime,"remaining-time":e.remainingTime,"total-progress":s.totalProgress,"current-step":s.currentStep,"cu
rrent-step-progress":s.currentStepProgress,"processing-steps":s.processingSteps,"citation-info":s.citationInfo,"ra
te-limit-info":s.rateLimitInfo,"processing-error":s.processingError,"can-retry":s.canRetry,timeout:s.timeout,onApp
lyCorrection:s.applyCorrection,onCopyResults:s.copyResults,onDownloadResults:s.downloadResults,onToast:e.showToast
},null,8,["results","show-loading","processing-time","elapsed-time","remaining-time","total-progress","current-ste
p","current-step-progress","processing-steps","citation-info","rate-limit-info","processing-error","can-retry","ti
meout","onApplyCorrection","onCopyResults","onDownloadResults","onToast"])])):s.shouldShowInput?(i(),l("div",Sl,[S
(f,{onAnalyze:s.handleUnifiedAnalyze,"is-analyzing":s.showLoading},null,8,["onAnalyze","is-analyzing"]),S(h,{onRet
ry:s.handleProgressRetry,onReset:s.handleProgressReset,onComplete:s.handleProgressComplete},null,8,["onRetry","onR
eset","onComplete"])])):(i(),l("div",Cl,t[12]||(t[12]=[n("div",{class:"no-results-content"},[n("div",{class:"no-re
sults-icon"},[n("i",{class:"bi bi-search"})]),n("h3",null,"No Analysis Results"),n("p",{class:"lead"},[v("No
results to display."),n("br"),v("Please return to the home page to start a new
analysis.")])],-1)])))])]))])}],["__scopeId","data-v-4a43707b"]]);export{Tl as default};


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod cat /usr/share/nginx/html/assets/EnhancedValidator-CIk_aGdi.js | Select-String -Pattern "getVerificationStatus.*citation.*=>" -Context 5
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-frontend-prod cat /usr/share/nginx/html/assets/EnhancedValidator-CIk_aGdi.js | Select-String -Pattern "Q=e=>" -Context 3

> import{r as e,D as t,p as a,E as s,c as l,o as i,b as n,l as r,B as o,t as c,x as u,F as d,n as p,g as v,G as
m,h as g,v as f,y,z as h,A as b,H as k,w as _,T as x,f as w,d as S,s as C,u as T,C as A,I as
P}from"./vendor-DMY3h6i6.js";import{c as R,_ as L}from"./index-CyOEC7o4.js";import{b as I,a as
N}from"./api-Ce0WCVD6.js";const z=e(!1),E=e("Loading...");const D=s({isActive:!1,taskId:null,startTime:null,estima
tedTotalTime:0,currentStep:"",stepProgress:0,totalProgress:0,processingSteps:[],actualTimes:{},citationInfo:null,r
ateLimitInfo:null,processingError:null,canRetry:!1,uploadType:null,uploadData:null,hasResults:!1,resultData:null})
;function M(){const e=a(()=>D.startTime?(Date.now()-D.startTime)/1e3:0),t=a(()=>D.estimatedTotalTime?Math.max(0,D.
estimatedTotalTime-e.value):0),s=a(()=>D.estimatedTotalTime?Math.min(100,e.value/D.estimatedTotalTime*100):0),l=a(
()=>{if(!D.processingSteps.length)return 0;const
t=D.processingSteps.findIndex(e=>e.step===D.currentStep);if(-1===t)return 0;const
a=D.processingSteps[t],s=e.value-(a.startTime||0);return Math.min(100,s/a.estimated_time*100)}),i=a(()=>D.processi
ngError?"bg-danger":s.value>=90?"bg-success":s.value>=60?"bg-info":s.value>=30?"bg-warning":"bg-primary"),n=(e,t,a
=30)=>{Object.assign(D,{isActive:!0,taskId:null,startTime:Date.now(),estimatedTotalTime:a,currentStep:"Initializin
g...",stepProgress:0,totalProgress:0,processingSteps:[],actualTimes:{},citationInfo:null,rateLimitInfo:null,proces
singError:null,canRetry:!1,uploadType:e,uploadData:t,hasResults:!1,resultData:null})},r=a(()=>D.isActive||D.proces
singError),o=a(()=>({isActive:D.isActive,hasError:!!D.processingError,hasResults:D.hasResults,uploadType:D.uploadT
ype,currentStep:D.currentStep,progress:s.value,elapsedTime:e.value,remainingTime:t.value}));return{progressState:D
,elapsedTime:e,remainingTime:t,progressPercent:s,currentStepProgress:l,progressBarClass:i,shouldShowProgress:r,get
ProgressSummary:o,formatTime:e=>{if(e<60)return`${Math.round(e)}s`;return`${Math.floor(e/60)}m ${Math.round(e%60)}
s`},startProgress:n,setTaskId:e=>{D.taskId=e},setSteps:e=>{D.processingSteps=e.map((e,t)=>({...e,index:t,startTime
:null,completed:!1}))},updateProgress:t=>{if(t.step){D.currentStep=t.step;const a=D.processingSteps.findIndex(e=>e
.step===t.step);-1===a||D.processingSteps[a].startTime||(D.processingSteps[a].startTime=e.value)}void
0!==t.progress&&(D.stepProgress=t.progress),void 0!==t.total_progress&&(D.totalProgress=t.total_progress),t.citati
on_info&&(D.citationInfo=t.citation_info),t.rate_limit_info&&(D.rateLimitInfo=t.rate_limit_info),t.estimated_total
_time&&(D.estimatedTotalTime=t.estimated_total_time)},setError:e=>{D.processingError=e,D.canRetry=!0,D.isActive=!1
},completeProgress:(e=null)=>{D.isActive=!1,D.currentStep="Completed",D.totalProgress=100,D.hasResults=!!e,D.resul
tData=e,D.processingSteps.forEach(e=>{e.completed=!0})},resetProgress:()=>{Object.assign(D,{isActive:!1,taskId:nul
l,startTime:null,estimatedTotalTime:0,currentStep:"",stepProgress:0,totalProgress:0,processingSteps:[],actualTimes
:{},citationInfo:null,rateLimitInfo:null,processingError:null,canRetry:!1,uploadType:null,uploadData:null,hasResul
ts:!1,resultData:null})},retryProgress:()=>!(!D.canRetry||!D.uploadData)&&(D.processingError=null,D.canRetry=!1,n(
D.uploadType,D.uploadData,D.estimatedTotalTime),!0)}}M();const U={name:"ProcessingProgress",props:{elapsedTime:{ty
pe:Number,required:!0},remainingTime:{type:Number,required:!0},totalProgress:{type:Number,required:!0},currentStep
:{type:String,default:""},currentStepProgress:{type:Number,default:0},processingSteps:{type:Array,default:()=>[]},
actualTimes:{type:Object,default:()=>({})},citationInfo:{type:Object,default:null},rateLimitInfo:{type:Object,defa
ult:null},error:{type:String,default:""},canRetry:{type:Boolean,default:!1},timeout:{type:Number,default:null}},mo
unted(){},watch:{totalProgress(e){},remainingTime(e){}},computed:{currentStepElapsed(){const
e=this.processingSteps.find(e=>e.step===this.currentStep);return
e?Date.now()/1e3-e.start_time:0},currentStepRemaining(){const
e=this.processingSteps.find(e=>e.step===this.currentStep);return e&&e.estimated_time?Math.max(0,e.estimated_time-t
his.currentStepElapsed):0},isTimeoutWarning(){if(!this.timeout)return!1;return
this.timeout-this.elapsedTime<60}},methods:{formatTime(e){if(e<0)return"0s";const
t=Math.floor(e/60),a=Math.round(e%60);return t>0?`${t}m ${a}s`:`${a}s`},getStepClass(e){return 100===e.progress?"c
ompleted":e.step===this.currentStep?"current":e.progress>0?"in-progress":"pending"},getStepStatus(e){return
100===e.progress?"Completed":e.step===this.currentStep?"In Progress":e.progress>0?`${e.progress}%`:"Pending"},form
atProcessingRate(e){if(!e.processed||!this.elapsedTime)return"0/min";const t=e.processed/this.elapsedTime*60;retur
n`${Math.round(t)}/min`}}},q={class:"processing-progress"},$={class:"progress-section"},F={class:"progress-bar"},O
={class:"time-info"},B={key:0,class:"citation-section"},V={class:"citation-stats"},j={class:"stat"},G={class:"valu
e"},H={class:"stat"},J={class:"value"},W={class:"stat"},X={class:"value"},K={key:0,class:"stat"},Q={class:"value"}
,Y={key:0,class:"rate-limit-info"},Z={class:"stat"},ee={class:"value"},te={key:0,class:"stat"},ae={class:"value"},
se={key:1,class:"current-step"},le={class:"step-info"},ie={class:"step-name"},ne={class:"progress-bar"},re={class:
"time-info"},oe={class:"steps-section"},ce={class:"steps-list"},ue={class:"step-header"},de={class:"step-name"},pe
={class:"step-status"},ve={key:0,class:"progress-bar"},me={key:1,class:"time-info"},ge={key:0},fe={key:2,class:"er
ror-section"},ye={class:"error-message"};const he=L(U,[["render",function(e,t,a,s,m,g){return
i(),l("div",q,[n("div",$,[t[1]||(t[1]=n("h3",null,"Overall Progress",-1)),n("div",F,[n("div",{class:"progress-fill
",style:o({width:`${a.totalProgress}%`})},null,4)]),n("div",O,[n("span",null,"Elapsed:
"+c(g.formatTime(a.elapsedTime)),1),n("span",null,"Remaining: "+c(g.formatTime(a.remainingTime)),1),a.timeout?(i()
,l("span",{key:0,class:u(["timeout-info",{warning:g.isTimeoutWarning}])}," Timeout: "+c(g.formatTime(a.timeout-a.e
lapsedTime)),3)):r("",!0)])]),a.citationInfo?(i(),l("div",B,[t[8]||(t[8]=n("h3",null,"Citation
Processing",-1)),n("div",V,[n("div",j,[t[2]||(t[2]=n("span",{class:"label"},"Total
Citations:",-1)),n("span",G,c(a.citationInfo.total),1)]),n("div",H,[t[3]||(t[3]=n("span",{class:"label"},"Unique C
itations:",-1)),n("span",J,c(a.citationInfo.unique),1)]),n("div",W,[t[4]||(t[4]=n("span",{class:"label"},"Processe
d:",-1)),n("span",X,c(a.citationInfo.processed),1)]),a.citationInfo.unique?(i(),l("div",K,[t[5]||(t[5]=n("span",{c
lass:"label"},"Processing Rate:",-1)),n("span",Q,c(g.formatProcessingRate(a.citationInfo)),1)])):r("",!0)]),a.rate
LimitInfo?(i(),l("div",Y,[n("div",Z,[t[6]||(t[6]=n("span",{class:"label"},"API Rate Limit:",-1)),n("span",ee,c(a.r
ateLimitInfo.remaining)+"/"+c(a.rateLimitInfo.limit),1)]),a.rateLimitInfo.resetTime?(i(),l("div",te,[t[7]||(t[7]=n
("span",{class:"label"},"Reset in:",-1)),n("span",ae,c(g.formatTime(a.rateLimitInfo.resetTime-Date.now()/1e3)),1)]
)):r("",!0)])):r("",!0)])):r("",!0),a.currentStep?(i(),l("div",se,[t[9]||(t[9]=n("h3",null,"Current Step",-1)),n("
div",le,[n("span",ie,c(a.currentStep),1),n("div",ne,[n("div",{class:"progress-fill",style:o({width:`${a.currentSte
pProgress}%`})},null,4)]),n("div",re,[n("span",null,"Elapsed:
"+c(g.formatTime(g.currentStepElapsed)),1),n("span",null,"Remaining:
"+c(g.formatTime(g.currentStepRemaining)),1)])])])):r("",!0),n("div",oe,[t[10]||(t[10]=n("h3",null,"Processing Ste
ps",-1)),n("div",ce,[(i(!0),l(d,null,p(a.processingSteps,e=>(i(),l("div",{key:e.step,class:u(["step",g.getStepClas
s(e)])},[n("div",ue,[n("span",de,c(e.step),1),n("span",pe,c(g.getStepStatus(e)),1)]),void 0!==e.progress?(i(),l("d
iv",ve,[n("div",{class:"progress-fill",style:o({width:`${e.progress}%`})},null,4)])):r("",!0),e.estimated_time?(i(
),l("div",me,[n("span",null,"Estimated:
"+c(g.formatTime(e.estimated_time)),1),e.actual_time?(i(),l("span",ge,"Actual: "+c(g.formatTime(e.actual_time)),1)
):r("",!0)])):r("",!0)],2))),128))])]),a.error?(i(),l("div",fe,[n("div",ye,[t[11]||(t[11]=n("i",{class:"fas
fa-exclamation-circle"},null,-1)),v(" "+c(a.error),1)]),a.canRetry?(i(),l("button",{key:0,onClick:t[0]||(t[0]=t=>e
.$emit("retry")),class:"retry-button"}," Retry Processing ")):r("",!0)])):r("",!0)])}],["__scopeId","data-v-c1475d
ed"]]),be={key:0,class:"loading-state"},ke={key:1,class:"error-state"},_e={key:2,class:"no-citations-found
text-center my-5"},xe={class:"lead"},we=["href"],Se={key:3,class:"citation-results"},Ce={key:0,class:"prominent-ci
tations-section"},Te={class:"citations-summary"},Ae={key:0},Pe={class:"attention-filter-btns"},Re={class:"citation
s-grid"},Le={class:"citation-row",style:{color:"#dc3545","font-weight":"bold","font-size":"1.15rem"}},Ie={class:"c
itation-row flex-names-row"},Ne={key:0},ze={key:1},Ee={class:"citation-row flex-names-row"},De={key:0},Me={key:1},
Ue={class:"citations-list-vertical"},qe={class:"citation-text"},$e={key:1,class:"perfect-score-celebration"},Fe={k
ey:1,class:"results-content"},Oe={class:"results-header"},Be={class:"header-content"},Ve={class:"summary-stats"},j
e={class:"stat-item verified"},Ge={class:"stat-number"},He={class:"stat-item
invalid"},Je={class:"stat-number"},We={class:"stat-item total"},Xe={class:"stat-number"},Ke={class:"filter-section
"},Qe={class:"filter-controls"},Ye=["onClick"],Ze={class:"search-box"},et={class:"citations-list"},tt={class:"cano
nical-only-clusters"},at={class:"cluster-main-content"},st={class:"canonical-line"},lt={key:1,class:"canonical-dat
e missing"},it={key:1,class:"canonical-name missing"},nt={class:"extracted-line"},rt={key:1,class:"extracted-date
missing"},ot={key:1,class:"extracted-name missing"},ct={class:"citations-section"},ut={class:"citations-list-verti
cal"},dt=["href"],pt={key:1,class:"citation-text"},vt={class:"expand-section"},mt=["onClick"],gt={class:"expand-te
xt"},ft={key:0,class:"cluster-details"},yt={class:"details-content"},ht={class:"detail-section"},bt={class:"detail
-grid"},kt={class:"detail-item"},_t={class:"detail-value"},xt={class:"detail-item"},wt={class:"detail-value"},St={
key:0,class:"detail-item"},Ct=["href"],Tt={class:"detail-section"},At={class:"citation-detail-header"},Pt={class:"
citation-detail-title"},Rt={class:"citation-detail-content"},Lt={class:"detail-grid"},It={class:"detail-item"},Nt=
{class:"detail-value"},zt={class:"detail-item"},Et={class:"detail-value"},Dt={class:"detail-item"},Mt={class:"deta
il-value"},Ut={key:0,class:"detail-item"},qt={class:"detail-value error-text"},$t={key:1,class:"detail-item"},Ft=[
"href"],Ot={key:2,class:"results-content"},Bt={class:"results-header"},Vt={class:"header-content"},jt={class:"summ
ary-stats"},Gt={class:"stat-item verified"},Ht={class:"stat-number"},Jt={class:"stat-item
invalid"},Wt={class:"stat-number"},Xt={class:"stat-item total"},Kt={class:"stat-number"},Qt={class:"filter-section
"},Yt={class:"filter-controls"},Zt=["onClick"],ea={class:"search-box"},ta={class:"citations-list"},aa={class:"cita
tion-row citation-row-canonical flex-names-row"},sa={key:0},la={key:1,class:"canonical-date
missing"},ia={key:1,class:"canonical-name missing"},na={class:"citation-row citation-row-extracted
flex-names-row"},ra={key:0},oa={key:1,class:"extracted-date missing"},ca={key:1,class:"extracted-name
missing"},ua={class:"citation-row citation-row-citations"},da={class:"citation-text"},pa={class:"detail-row"},va={
key:3,class:"no-results-state"},ma=L({__name:"CitationResults",props:{results:{type:Object,default:null},showLoadi
ng:{type:Boolean,default:!1},error:{type:String,default:""},elapsedTime:{type:Number,default:0},remainingTime:{typ
e:Number,default:0},totalProgress:{type:Number,default:0},currentStep:{type:String,default:""},currentStepProgress
:{type:Number,default:0},processingSteps:{type:Array,default:()=>[]},citationInfo:{type:Object,default:null},rateL
imitInfo:{type:Object,default:null},processingError:{type:String,default:""},canRetry:{type:Boolean,default:!1},ti
meout:{type:Number,default:null}},emits:["copy-results","download-results","toast"],setup(t,{emit:s}){const
o=t,b=s,k=e("all"),_=e(""),x=e(1);e(new Set);const w=e(new Set),S=e(0),C=e(null);e(!1),e("canonical-only");const
T=e("all"),A=e(!1);function P(e){return e.citations.every(e=>"unverified"===Q(e))}function R(e){return
e.citations.some(e=>!Y(B(e),V(e)))}function L(e){return
e.citations.some(e=>!Z(j(e),G(e)))}m(()=>o.results,e=>{},{immediate:!0,deep:!0});const I=a(()=>{var e,t;return
A.value?(null==(e=o.results)?void
0:e.clusters)&&o.results.clusters.length>0?o.results.clusters:(null==(t=o.results)?void 0:t.citations)?[{citations
:o.results.citations}]:[]:"unverified"===T.value?U.value.filter(P):"name"===T.value?U.value.filter(R):"date"===T.v
alue?U.value.filter(L):U.value});m(()=>o.results,(e,t)=>{e&&"number"==typeof
e.progress&&(S.value=e.progress,C.value=e.eta_seconds)},{immediate:!0,deep:!0});const
N=a(()=>o.showLoading),z=a(()=>{var e,t;return(null==(e=o.results)?void 0:e.clusters)&&o.results.clusters.length>0
?o.results.clusters.reduce((e,t)=>e+t.citations.filter(e=>"true"===e.verified||!0===e.verified).length,0):(null==(
t=o.results)?void
0:t.citations)?o.results.citations.filter(e=>"true"===e.verified||!0===e.verified).length:0}),E=a(()=>{var
e,t;return(null==(e=o.results)?void 0:e.clusters)&&o.results.clusters.length>0?o.results.clusters.reduce((e,t)=>e+
t.citations.filter(e=>"false"===e.verified||!1===e.verified).length,0):(null==(t=o.results)?void
0:t.citations)?o.results.citations.filter(e=>"false"===e.verified||!1===e.verified).length:0}),D=a(()=>{var
e;return(null==(e=o.results)?void 0:e.clusters)&&0!==o.results.clusters.length?o.results.clusters.map(e=>{let t=e.
citations.filter(e=>!$(e));if("verified"===k.value?t=t.filter(e=>"true"===e.verified||!0===e.verified):"invalid"==
=k.value&&(t=t.filter(e=>"false"===e.verified||!1===e.verified)),_.value.trim()){const e=_.value.toLowerCase();t=t
.filter(t=>t.citation&&t.citation.toLowerCase().includes(e)||t.canonical_citation&&t.canonical_citation.toLowerCas
e().includes(e)||t.primary_citation&&t.primary_citation.toLowerCase().includes(e)||O(t)&&O(t).toLowerCase().includ
es(e))}return t.length>0?{...e,citations:t,size:t.length}:null}).filter(e=>null!==e):[]});a(()=>{var
e,t;return(null==(e=o.results)?void
0:e.clusters)&&o.results.clusters.length>0?o.results.clusters.flatMap(e=>e.citations):(null==(t=o.results)?void
0:t.citations)?o.results.citations.filter(e=>!$(e)):[]});const M=e=>{let
t=0;e.canonical_name&&"N/A"!==e.canonical_name&&(t+=2);const a=e.canonical_name,s=e.extracted_case_name;return a&&
"N/A"!==a&&s&&"N/A"!==s&&Y(a,s)&&(t+=1),e.canonical_date&&"N/A"!==e.canonical_date&&(t+=1),e.url&&""!==e.url&&(t+=
1),t},U=a(()=>{var e,t;if((null==(e=o.results)?void 0:e.clusters)&&o.results.clusters.length>0)return
o.results.clusters.filter(e=>e.citations.some(e=>M(e)<4));if(null==(t=o.results)?void 0:t.citations){const
e=o.results.citations.filter(e=>M(e)<4),t={};return e.forEach(e=>{const a=`${e.extracted_case_name||"N/A"}||${e.ex
tracted_date||"N/A"}`;t[a]||(t[a]=[]),t[a].push(e)}),Object.values(t).map(e=>({citations:e}))}return[]}),q=a(()=>{
var e,t;if((null==(e=o.results)?void 0:e.clusters)&&o.results.clusters.length>0)return
D.value.flatMap(e=>e.citations);if(!(null==(t=o.results)?void 0:t.citations))return[];let a=o.results.citations;if
(a=a.filter(e=>!$(e)),"verified"===k.value?a=a.filter(e=>"true"===e.verified||!0===e.verified):"invalid"===k.value
&&(a=a.filter(e=>"false"===e.verified||!1===e.verified)),_.value.trim()){const e=_.value.toLowerCase();a=a.filter(
t=>t.citation&&t.citation.toLowerCase().includes(e)||t.canonical_citation&&t.canonical_citation.toLowerCase().incl
udes(e)||t.primary_citation&&t.primary_citation.toLowerCase().includes(e)||O(t)&&O(t).toLowerCase().includes(e))}r
eturn a}),$=e=>{const t=(e.citation||e.canonical_citation||e.primary_citation||"").toUpperCase();return!!(t.includ
es("U.S.C.")||t.includes("USC")||t.includes("C.F.R.")||t.includes("CFR")||t.includes("UNITED STATES
CODE")||t.includes("CODE OF FEDERAL REGULATIONS"))||(/\d+\s+U\.?\s*S\.?\s*C\.?\s*[§]?\s*\d+/i.test(t)||/\d+\s+C\.?
\s*F\.?\s*R\.?\s*[§]?\s*\d+/i.test(t))},F=a(()=>[{value:"all",label:"All",count:q.value.length},{value:"verified",
label:"Verified",count:z.value},{value:"invalid",label:"Invalid",count:E.value}]),O=e=>e.canonical_name||e.extract
ed_case_name||null,B=e=>e.canonical_name||null,V=e=>{const t=e.extracted_case_name;return
t&&"N/A"!==t?t:null},j=e=>e.canonical_date||null,G=e=>{const t=e.extracted_date;return t&&"N/A"!==t?t:null},H=e=>e
.citation||e.canonical_citation||e.primary_citation||"N/A",J=e=>e.url||null,W=e=>e.source||"Unknown",X=e=>e.confid
ence||e.likelihood_score||"N/A",K=e=>e.error||e.explanation||null,Q=e=>"true"===e.verified||!0===e.verified?"verif
ied":"true_by_parallel"===e.verified?"true_by_parallel":"unverified",Y=(e,t)=>{if(!e||!t)return!1;if("N/A"===e||"N
/A"===t)return!1;const a=e=>e.toLowerCase().replace(/[^\w\s]/g," ").replace(/\s+/g," ").trim(),s=e=>e.toLowerCase(
).replace(/\bcnty\.?\b/g,"county").replace(/\bco\.?\b/g,"company").replace(/\bcorp\.?\b/g,"corporation").replace(/
\binc\.?\b/g,"incorporated").replace(/\bllc\.?\b/g,"limited liability
company").replace(/\bltd\.?\b/g,"limited").replace(/\bdept?\.?\b/g,"department").replace(/\bex\s+rel\.?\b/g,"ex
rel").replace(/\bv\.?\s+/g,"v ").replace(/\bvs\.?\s+/g,"v ").replace(/[^\w\s]/g," ").replace(/\s+/g,"
").trim();if(a(e)===a(t))return!0;const l=s(e),i=s(t);if(l===i)return!0;const n=l.split("
").filter(e=>e.length>1),r=i.split(" ").filter(e=>e.length>1);return
n.filter(e=>r.includes(e)&&e.length>1).length/Math.min(n.length,r.length)>=.5},Z=(e,t)=>{if(!e||!t)return!1;const
a=e=>{const t=e.match(/\d{4}/);return t?t[0]:null},s=a(e),l=a(t);return s&&l&&s===l},ee=e=>{const
t=B(e),a=V(e);return Y(t,a)?"name-similar":"name-different"},te=e=>{const t=j(e),a=G(e);return Z(t,a)?"date-simila
r":"date-different"},ae=a(()=>{if(!o.results)return!0;if(o.results.clusters&&o.results.clusters.length>0){if(o.res
ults.clusters.reduce((e,t)=>e+(t.citations?t.citations.length:0),0)>0)return!1}return!(o.results.citations&&o.resu
lts.citations.length>0)&&!(o.results.total_citations&&o.results.total_citations>0)}),se=a(()=>"text"),le=a(()=>"")
,ie=e=>{if(!e)return null;const t=e.match(/\d{4}/);return t?t[0]:e},ne=()=>{x.value=1};function re(e,t,a){const
s=new Set,l=[];for(const i of e){const e=t(i),n=a(i);if(!e&&!n)continue;const
r=`${e||""}||${n||""}`;s.has(r)||(s.add(r),l.push({name:e,year:n,citation:i}))}return l}function oe(e){const
t=B(e),a=V(e),s=j(e),l=G(e);return(e=>{const
t=Q(e);return"verified"===t||"true_by_parallel"===t})(e)?t&&a&&!Y(t,a)?"Name mismatch":s&&l&&!Z(s,l)?"Date
mismatch":"":"Unverified"}function ce(){var e,t;let a=[];return(null==(e=o.results)?void 0:e.clusters)&&o.results.
clusters.length>0?o.results.clusters.forEach(e=>{a.push(...e.citations)}):(null==(t=o.results)?void
0:t.citations)&&(a=o.results.citations),a}function ue(){const e=ce().map(e=>`${H(e)}\nExtracted Name:
${V(e)||"N/A"}\nCanonical Name: ${B(e)||"N/A"}\nExtracted Date: ${G(e)||"N/A"}\nCanonical Date:
${j(e)||"N/A"}\nStatus: ${Q(e)}\nMismatch Reason: ${oe(e)}\nSource: ${W(e)}\nConfidence: ${X(e)}\nError:
${K(e)||""}\n---`).join("\n");navigator.clipboard.writeText(e),b("toast",{type:"success",message:"All citation
data copied!"})}function de(){const e=ce().map(e=>({citation:H(e),extracted_name:V(e),canonical_name:B(e),extracte
d_date:G(e),canonical_date:j(e),status:Q(e),mismatch_reason:oe(e),source:W(e),confidence:X(e),error:K(e)})),t=new
Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),s=document.createElement("a");
s.href=a,s.download="all_citations.json",s.click(),URL.revokeObjectURL(a),b("toast",{type:"success",message:"All
citation data downloaded!"})}return m(k,ne),m(_,ne),(e,a)=>t.showLoading?(i(),l("div",be,[a[6]||(a[6]=n("div",{cla
ss:"loading-spinner"},null,-1)),a[7]||(a[7]=n("p",null,"Processing citations...",-1)),N.value?(i(),g(he,{key:0,"el
apsed-time":o.elapsedTime,"remaining-time":o.remainingTime,"total-progress":o.totalProgress,"current-step":o.curre
ntStep,"current-step-progress":o.currentStepProgress,"processing-steps":o.processingSteps,"citation-info":o.citati
onInfo,"rate-limit-info":o.rateLimitInfo,error:o.processingError,"can-retry":o.canRetry,timeout:o.timeout},null,8,
["elapsed-time","remaining-time","total-progress","current-step","current-step-progress","processing-steps","citat
ion-info","rate-limit-info","error","can-retry","timeout"])):r("",!0)])):t.error?(i(),l("div",ke,[a[8]||(a[8]=n("d
iv",{class:"error-icon"},"⚠️",-1)),a[9]||(a[9]=n("h3",null,"Error Processing Citations",-1)),n("p",null,c(t.error)
,1)])):ae.value?(i(),l("div",_e,[a[10]||(a[10]=n("img",{src:"/casestrainer/no-results.svg",alt:"No citations
found",style:{width:"120px",margin:"20px 0"}},null,-1)),n("p",xe,"No case citations found in your "+c(se.value)+".
",1),n("a",{href:`mailto:jafrank@uw.edu?subject=CaseStrainer%20feedback&body=I%20submitted%20the%20following%20${s
e.value}:%0A${encodeURIComponent(le.value)}%0Aand%20no%20citations%20were%20found.`,class:"btn
btn-outline-primary mt-2"}," Report a possible extraction error ",8,we)])):(i(),l("div",Se,[t.results&&(t.results.
clusters||t.results.citations)?(i(),l("div",Ce,[n("div",Te,[U.value.length>0?(i(),l("div",Ae,[a[14]||(a[14]=n("h3"
,null,"Citations That Need Attention",-1)),n("div",Pe,[n("button",{class:u(["attention-filter-btn",{active:"all"==
=T.value}]),onClick:a[0]||(a[0]=e=>T.value="all")},"All",2),n("button",{class:u(["attention-filter-btn",{active:"u
nverified"===T.value}]),onClick:a[1]||(a[1]=e=>T.value="unverified")},"Unverified",2),n("button",{class:u(["attent
ion-filter-btn",{active:"name"===T.value}]),onClick:a[2]||(a[2]=e=>T.value="name")},"Name Mismatch",2),n("button",
{class:u(["attention-filter-btn",{active:"date"===T.value}]),onClick:a[3]||(a[3]=e=>T.value="date")},"Date Mismatc
h",2)]),n("div",Re,[(i(!0),l(d,null,p(I.value,e=>(i(),l("div",{key:e.cluster_id||H(e.citations[0]),class:"citation
-comparison-card"},[e.citations.every(e=>"unverified"===Q(e))&&0===re(e.citations,B,e=>ie(j(e))).length&&0===re(e.
citations,V,e=>ie(G(e))).length?(i(),l(d,{key:0},[n("div",Le,c(H(e.citations[0])),1),a[11]||(a[11]=f('<div
class="citation-row flex-names-row" data-v-4767a1a3><span class="row-label"
data-v-4767a1a3>Canonical:</span><span style="color:#dc3545;font-weight:bold;" data-v-4767a1a3>N/A
(N/A)</span></div><div class="citation-row flex-names-row" data-v-4767a1a3><span class="row-label"
data-v-4767a1a3>Extracted:</span><span style="color:#dc3545;font-weight:bold;" data-v-4767a1a3>N/A
(N/A)</span></div>',2))],64)):(i(),l(d,{key:1},[n("div",Ie,[a[12]||(a[12]=n("span",{class:"row-label"},"Verifying
Source:",-1)),n("span",null,[B(e.citations[0])&&"N/A"!==B(e.citations[0])?(i(),l(d,{key:0},[v(c(B(e.citations[0]))
+" ",1),j(e.citations[0])?(i(),l("span",Ne," ("+c(ie(j(e.citations[0])))+")",1)):(i(),l("span",ze,"
(N/A)"))],64)):(i(),l(d,{key:1},[v(" N/A (N/A)
")],64))])]),n("div",Ee,[a[13]||(a[13]=n("span",{class:"row-label"},"From Document:",-1)),n("span",null,[V(e.citat
ions[0])&&"N/A"!==V(e.citations[0])?(i(),l(d,{key:0},[v(c(V(e.citations[0]))+"
",1),G(e.citations[0])?(i(),l("span",De," ("+c(ie(G(e.citations[0])))+")",1)):(i(),l("span",Me,"
(N/A)"))],64)):(i(),l(d,{key:1},[v(" N/A (N/A) ")],64))])]),n("div",Ue,[(i(!0),l(d,null,p(e.citations,(e,t)=>(i(),
l("div",{key:t,class:"citation-row-item"},[n("span",qe,c(H(e)),1),n("span",{class:u(["verification-badge",Q(e)])},
["verified"===Q(e)?(i(),l(d,{key:0},[v("VERIFIED")],64)):"true_by_parallel"===Q(e)?(i(),l(d,{key:1},[v("verified
by parallel citation")],64)):(i(),l(d,{key:2},[v("UNVERIFIED")],64))],2)]))),128))])],64))]))),128))])])):(i(),l("
div",$e,a[15]||(a[15]=[f('<div class="celebration-content" data-v-4767a1a3><div class="celebration-icon"
data-v-4767a1a3>🎉</div><h3 class="celebration-title" data-v-4767a1a3>Perfect Score! 🏆</h3><p
class="celebration-message" data-v-4767a1a3>All citations are verified and complete! Great job on your legal
research.</p><div class="celebration-stats" data-v-4767a1a3><span class="stat-badge" data-v-4767a1a3>✅ All
Verified</span><span class="stat-badge" data-v-4767a1a3>📋 Complete Data</span><span class="stat-badge"
data-v-4767a1a3>🔗 Links Available</span></div></div>',1)])))])])):r("",!0),t.results&&t.results.clusters&&t.resul
ts.clusters.length>0?(i(),l("div",Fe,[n("div",Oe,[n("div",Be,[a[19]||(a[19]=n("h2",null,"Citation Verification
Results (Clustered)",-1)),n("div",Ve,[n("div",je,[n("span",Ge,c(z.value),1),a[16]||(a[16]=n("span",{class:"stat-la
bel"},"Verified",-1))]),n("div",He,[n("span",Je,c(E.value),1),a[17]||(a[17]=n("span",{class:"stat-label"},"Invalid
",-1))]),n("div",We,[n("span",Xe,c(D.value.length),1),a[18]||(a[18]=n("span",{class:"stat-label"},"Clusters",-1))]
)])]),n("div",{class:"action-buttons"},[n("button",{class:"action-btn copy-btn",onClick:ue}," Copy Results
"),n("button",{class:"action-btn download-btn",onClick:de}," Download ")])]),n("div",Ke,[n("div",Qe,[(i(!0),l(d,nu
ll,p(F.value,e=>(i(),l("button",{key:e.value,class:u(["filter-btn",{active:k.value===e.value}]),onClick:t=>k.value
=e.value},c(e.label)+" ("+c(e.count)+") ",11,Ye))),128))]),n("div",Ze,[y(n("input",{"onUpdate:modelValue":a[4]||(a
[4]=e=>_.value=e),type:"text",placeholder:"Search citations...",class:"search-input"},null,512),[[h,_.value]])])])
,n("div",et,[n("div",tt,[(i(!0),l(d,null,p(D.value,e=>(i(),l("div",{key:e.cluster_id,class:"canonical-only-card"},
[n("div",at,[n("div",st,[a[20]||(a[20]=n("span",{class:"canonical-label"},"Verifying Source:",-1)),B(e.citations[0
])&&"N/A"!==B(e.citations[0])?(i(),l("span",{key:0,class:u(["canonical-name",ee(e.citations[0])])},[v(c(B(e.citati
ons[0]))+" ",1),j(e.citations[0])?(i(),l("span",{key:0,class:u(["canonical-date",te(e.citations[0])])},"
("+c(ie(j(e.citations[0])))+") ",3)):(i(),l("span",lt,"(no date)"))],2)):(i(),l("span",it,"No canonical
name"))]),n("div",nt,[a[21]||(a[21]=n("span",{class:"extracted-label"},"From Document:",-1)),V(e.citations[0])&&"N
/A"!==V(e.citations[0])?(i(),l("span",{key:0,class:u(["extracted-name",ee(e.citations[0])])},[v(c(V(e.citations[0]
))+" ",1),G(e.citations[0])?(i(),l("span",{key:0,class:u(["extracted-date",te(e.citations[0])])},"
("+c(ie(G(e.citations[0])))+") ",3)):(i(),l("span",rt,"(no date)"))],2)):(i(),l("span",ot,"No extracted name or ye
ar"))]),n("div",ct,[a[22]||(a[22]=n("span",{class:"citations-label"},null,-1)),n("div",ut,[(i(!0),l(d,null,p(e.cit
ations,(e,t)=>(i(),l("div",{key:t,class:"citation-row-item"},["verified"===Q(e)&&J(e)?(i(),l("a",{key:0,href:J(e),
target:"_blank",class:"citation-link-verified"},c(H(e)),9,dt)):(i(),l("span",pt,c(H(e)),1)),n("span",{class:u(["ve
rification-badge",Q(e)])},c(Q(e).replace("_"," ")),3)]))),128))])]),n("div",vt,[n("button",{onClick:t=>{return
a=e.cluster_id,void(w.value.has(a)?w.value.delete(a):w.value.add(a));var
a},class:u(["expand-btn",{expanded:w.value.has(e.cluster_id)}])},[n("span",gt,c(w.value.has(e.cluster_id)?"Hide
Details":"Show Details"),1),a[23]||(a[23]=n("span",{class:"expand-icon"},"▼",-1))],10,mt)])]),w.value.has(e.cluste
r_id)?(i(),l("div",ft,[n("div",yt,[n("div",ht,[a[27]||(a[27]=n("h4",{class:"detail-section-title"},"Cluster
Information",-1)),n("div",bt,[n("div",kt,[a[24]||(a[24]=n("span",{class:"detail-label"},"Cluster ID:",-1)),n("span
",_t,c(e.cluster_id),1)]),n("div",xt,[a[25]||(a[25]=n("span",{class:"detail-label"},"Size:",-1)),n("span",wt,c(e.s
ize)+" citation"+c(e.size>1?"s":""),1)]),e.url?(i(),l("div",St,[a[26]||(a[26]=n("span",{class:"detail-label"},"Cou
rtListener URL:",-1)),n("a",{href:e.url,target:"_blank",class:"detail-link"},"View on
CourtListener",8,Ct)])):r("",!0)])]),n("div",Tt,[a[33]||(a[33]=n("h4",{class:"detail-section-title"},"Citation Det
ails",-1)),(i(!0),l(d,null,p(e.citations,(e,t)=>(i(),l("div",{key:t,class:"citation-detail-item"},[n("div",At,[n("
h5",Pt,c(H(e)),1),n("span",{class:u(["verification-badge",Q(e)])},c(Q(e).replace("_"," ")),3)]),n("div",Rt,[n("div
",Lt,[n("div",It,[a[28]||(a[28]=n("span",{class:"detail-label"},"Source:",-1)),n("span",Nt,c(W(e)),1)]),n("div",zt
,[a[29]||(a[29]=n("span",{class:"detail-label"},"Confidence:",-1)),n("span",Et,c(X(e)),1)]),n("div",Dt,[a[30]||(a[
30]=n("span",{class:"detail-label"},"Mismatch Reason:",-1)),n("span",Mt,c(oe(e)||"None"),1)]),K(e)?(i(),l("div",Ut
,[a[31]||(a[31]=n("span",{class:"detail-label"},"Error:",-1)),n("span",qt,c(K(e)),1)])):r("",!0),J(e)?(i(),l("div"
,$t,[a[32]||(a[32]=n("span",{class:"detail-label"},"URL:",-1)),n("a",{href:J(e),target:"_blank",class:"detail-link
"},"View Citation",8,Ft)])):r("",!0)])])]))),128))])])])):r("",!0)]))),128))])])])):t.results&&t.results.citations
&&t.results.citations.length>0?(i(),l("div",Ot,[n("div",Bt,[n("div",Vt,[a[37]||(a[37]=n("h2",null,"Citation
Verification Results (Individual)",-1)),n("div",jt,[n("div",Gt,[n("span",Ht,c(z.value),1),a[34]||(a[34]=n("span",{
class:"stat-label"},"Verified",-1))]),n("div",Jt,[n("span",Wt,c(E.value),1),a[35]||(a[35]=n("span",{class:"stat-la
bel"},"Invalid",-1))]),n("div",Xt,[n("span",Kt,c(q.value.length),1),a[36]||(a[36]=n("span",{class:"stat-label"},"T
otal",-1))])])]),n("div",{class:"action-buttons"},[n("button",{class:"action-btn copy-btn",onClick:ue}," Copy
Results "),n("button",{class:"action-btn download-btn",onClick:de}," Download ")])]),n("div",Qt,[n("div",Yt,[(i(!0
),l(d,null,p(F.value,e=>(i(),l("button",{key:e.value,class:u(["filter-btn",{active:k.value===e.value}]),onClick:t=
>k.value=e.value},c(e.label)+" ("+c(e.count)+") ",11,Zt))),128))]),n("div",ea,[y(n("input",{"onUpdate:modelValue":
a[5]||(a[5]=e=>_.value=e),type:"text",placeholder:"Search citations...",class:"search-input"},null,512),[[h,_.valu
e]])])]),n("div",ta,[(i(!0),l(d,null,p(q.value,e=>(i(),l("div",{key:H(e),class:"citation-item
individual"},[n("div",aa,[a[38]||(a[38]=n("span",{class:"row-label"},"Verifying
Source:",-1)),n("span",null,[B(e)&&"N/A"!==B(e)?(i(),l("span",sa,[v(c(B(e))+"
",1),j(e)?(i(),l("span",{key:0,class:u(["canonical-date",te(e)])}," ("+c(ie(j(e)))+") ",3)):(i(),l("span",la,"(no
date)"))])):(i(),l("span",ia,"No canonical
name"))])]),n("div",na,[a[39]||(a[39]=n("span",{class:"row-label"},"From
Document:",-1)),n("span",null,[V(e)&&"N/A"!==V(e)?(i(),l("span",ra,[v(c(V(e))+"
",1),G(e)?(i(),l("span",{key:0,class:u(["extracted-date",te(e)])}," ("+c(ie(G(e)))+") ",3)):(i(),l("span",oa,"(no
date)"))])):(i(),l("span",ca,"No extracted name or year"))])]),n("div",ua,[n("span",da,c(H(e)),1),n("span",{class:
u(["verification-badge",Q(e)])},c(Q(e)),3)]),n("div",pa,[a[40]||(a[40]=n("span",{class:"detail-label"},"Mismatch R
eason:",-1)),a[41]||(a[41]=v()),n("span",null,c(oe(e)),1)])]))),128))])])):(i(),l("div",va,a[42]||(a[42]=[n("p",nu
ll,"No citation results to display.",-1)])))]))}},[["__scopeId","data-v-4767a1a3"]]),ga={class:"unified-input"},fa
={class:"input-methods-top"},ya={class:"method-icon"},ha={class:"method-content"},ba={key:0,class:"active-indicato
r"},ka={class:"method-icon"},_a={class:"method-content"},xa={key:0,class:"active-indicator"},wa={key:0,class:"inpu
t-area-top"},Sa={key:0,class:"file-input"},Ca=["disabled"],Ta={key:0,class:"drop-zone-content"},Aa={key:1,class:"f
ile-info"},Pa={class:"file-details"},Ra={key:0,class:"validation-errors"},La={key:1,class:"url-input"},Ia={class:"
url-input-container"},Na={class:"input-wrapper"},za=["disabled"],Ea={key:0,class:"input-status
valid"},Da={key:1,class:"input-status invalid"},Ma={class:"input-footer"},Ua={key:0,class:"url-preview"},qa={key:1
,class:"url-error"},$a={key:2,class:"url-hint"},Fa={key:0,class:"validation-errors"},Oa={class:"input-methods-bott
om"},Ba={class:"method-icon"},Va={class:"method-content"},ja={key:0,class:"active-indicator"},Ga={class:"method-ic
on"},Ha={class:"method-content"},Ja={key:0,class:"active-indicator"},Wa={class:"analyze-section"},Xa=["disabled"],
Ka={key:0,class:"analyzing-spinner"},Qa={key:1,class:"analyze-icon"},Ya={key:0,class:"validation-summary"},Za={key
:1,class:"input-area-bottom"},es={key:0,class:"text-input"},ts={class:"textarea-container"},as=["disabled"],ss={ke
y:0,class:"textarea-overlay"},ls={class:"input-footer"},is={key:0,class:"min-length-hint"},ns={key:0,class:"valida
tion-errors"},rs={key:1,class:"quick-citation-input-area"},os={class:"quick-input-container"},cs={class:"input-wra
pper"},us=["disabled"],ds={key:0,class:"input-status valid"},ps={__name:"UnifiedInput",props:{isAnalyzing:{type:Bo
olean,default:!1}},emits:["analyze"],setup(t,{emit:s}){const o=t,m=s,g="Paste Text",_="URL",x="Upload
File",w="Quick Citation",S="Paste legal text or citations directly",C="Analyze content from a web URL",T="Upload
a document for analysis",A="Enter a single citation and analyze
instantly",P="📝",R="🔗",L="📁",I="🔎",N={minLength:10,maxLength:5e4,minLengthMessage:"Text must be at least 10
characters long",maxLengthMessage:"Text is too long. Maximum 50,000 characters
allowed."},z={maxLength:2048,maxLengthMessage:"URL is too long. Maximum 2,048 characters
allowed."},E={maxSize:52428800,allowedTypes:[".pdf",".doc",".docx",".txt"],maxSizeMessage:"File is too large.
Maximum 50MB allowed.",typeMessage:"Invalid file type. Please upload PDF, DOC, DOCX, or TXT files."},D=e("text"),M
=e(""),U=e(""),q=e(null),$=e(!1),F=e(null),O=e(""),B=e({}),V=e({text:!1,url:!1,file:!1,quick:!1}),j=e(!1);function
 G(){const e={};"text"===D.value?e.text=function(e){const t=[],a=N;return e.trim()?e.length<a.minLength?t.push(a.m
inLengthMessage):e.length>a.maxLength&&t.push(a.maxLengthMessage):t.push("Text is
required"),/[\x00-\x08\x0B\x0C\x0E-\x1F]/.test(e)&&t.push("Text contains invalid characters. Please remove any
special characters."),t}(M.value):"url"===D.value?e.url=function(e){const t=[],a=z;return
e.trim()?e.length>a.maxLength?t.push(a.maxLengthMessage):/^https?:\/\//.test(e)?/\./.test(e)||t.push("URL must
contain a dot"):t.push("URL must start with http:// or https://"):t.push("URL is
required"),t}(U.value):"file"===D.value&&(e.file=function(e){const
t=[],a=E;if(e){e.size>a.maxSize&&t.push(a.maxSizeMessage),0===e.size&&t.push("File is empty");const
s="."+e.name.split(".").pop().toLowerCase();a.allowedTypes.includes(s)||t.push(a.typeMessage)}else t.push("Please
select a file");return t}(q.value)),B.value=e}function H(){V.value[D.value]=!0,j.value=!1,G()}const
J=a(()=>B.value[D.value]||[]),W=a(()=>J.value.length>0),X=a(()=>{let e=!1;return!o.isAnalyzing&&("text"===D.value?
e=M.value.length>=N.minLength&&M.value.length<=N.maxLength:"url"===D.value?e=U.value.length>0:"file"===D.value?e=!
!q.value:"quick"===D.value&&(e=O.value.trim().length>0),e)});function
K(e){e.preventDefault(),e.stopPropagation(),q.value=e.target.files[0]||null,$.value=!1,H()}function
Q(e){e.preventDefault(),e.stopPropagation();const
t=e.dataTransfer.files[0];t&&(q.value=t,H()),$.value=!1}function Y(){var
e;o.isAnalyzing||null==(e=F.value)||e.click()}function Z(){q.value=null,F.value&&(F.value.value=""),H()}function
ee(){if(X.value)if(j.value=!1,"text"===D.value)m("analyze",{text:M.value,type:"text"});else
if("url"===D.value)m("analyze",{url:U.value,type:"url"});else if("file"===D.value){const e=new FormData;e.append("
file",q.value),e.append("type","file"),m("analyze",e)}else"quick"===D.value&&(m("analyze",{text:O.value.trim(),typ
e:"text",quick:!0}),O.value="");else j.value=!0}function te(e){if(!e)return"0 Bytes";const
t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+"
"+["Bytes","KB","MB","GB"][t]}function ae(){B.value={},V.value={text:!1,url:!1,file:!1,quick:!1},j.value=!1,G()}re
turn(e,a)=>(i(),l("div",ga,[n("div",fa,[n("div",{class:u(["input-method-card",{active:"file"===D.value,disabled:t.
isAnalyzing}]),onClick:a[0]||(a[0]=e=>!t.isAnalyzing&&(D.value="file",ae()))},[n("div",ya,c(L),1),n("div",ha,[n("h
4",null,c(x),1),n("p",null,c(T),1)]),"file"===D.value?(i(),l("div",ba,"✓")):r("",!0)],2),n("div",{class:u(["input-
method-card",{active:"url"===D.value,disabled:t.isAnalyzing}]),onClick:a[1]||(a[1]=e=>!t.isAnalyzing&&(D.value="ur
l",ae()))},[n("div",ka,c(R),1),n("div",_a,[n("h4",null,c(_),1),n("p",null,c(C),1)]),"url"===D.value?(i(),l("div",x
a,"✓")):r("",!0)],2)]),"file"===D.value||"url"===D.value?(i(),l("div",wa,["file"===D.value?(i(),l("div",Sa,[a[13]|
|(a[13]=n("label",{class:"input-label"},[n("i",{class:"bi bi-file-earmark-arrow-up me-2"}),v(" Upload a document "
)],-1)),n("div",{class:u(["file-drop-zone",{"has-file":q.value,dragover:$.value,error:W.value&&V.value.file}]),onD
rop:Q,onDragover:a[2]||(a[2]=b(e=>$.value=!0,["prevent"])),onDragleave:a[3]||(a[3]=b(e=>$.value=!1,["prevent"])),o
nClick:Y},[n("input",{ref_key:"fileInput",ref:F,id:"fileInput",type:"file",onChange:K,disabled:t.isAnalyzing,accep
t:".pdf,.doc,.docx,.txt",style:{display:"none"}},null,40,Ca),q.value?(i(),l("div",Aa,[a[11]||(a[11]=n("div",{class
:"file-icon"},"📄",-1)),n("div",Pa,[n("strong",null,c(q.value.name),1),n("span",null,c(te(q.value.size)),1)]),t.is
Analyzing?r("",!0):(i(),l("button",{key:0,onClick:b(Z,["stop"]),class:"clear-file-btn",title:"Remove
file"},a[10]||(a[10]=[n("i",{class:"bi bi-x-lg"},null,-1)])))])):(i(),l("div",Ta,a[9]||(a[9]=[f('<div
class="upload-icon" data-v-d110b890>📁</div><h5 class="drop-zone-title" data-v-d110b890>Click to browse or drag
&amp; drop</h5><p class="file-types" data-v-d110b890>Supports: PDF, DOC, DOCX, TXT (max 50MB)</p><div
class="drop-zone-hint" data-v-d110b890><i class="bi bi-arrow-up-circle" data-v-d110b890></i><span
data-v-d110b890>Drop your file here</span></div>',4)])))],34),W.value&&V.value.file?(i(),l("div",Ra,[(i(!0),l(d,nu
ll,p(J.value,e=>(i(),l("div",{key:e,class:"error-message"},[a[12]||(a[12]=n("span",{class:"error-icon"},"⚠️",-1)),
v(" "+c(e),1)]))),128))])):r("",!0)])):"url"===D.value?(i(),l("div",La,[a[21]||(a[21]=n("label",{class:"input-labe
l"},[n("i",{class:"bi bi-link-45deg me-2"}),v(" Enter URL to analyze
")],-1)),n("div",Ia,[n("div",Na,[a[16]||(a[16]=n("div",{class:"input-icon"},[n("i",{class:"bi bi-globe"})],-1)),y(
n("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>U.value=e),type:"url",placeholder:"https://example.com/document.pd
f",disabled:t.isAnalyzing,onInput:H,class:u([{error:W.value&&V.value.url},"url-input-field"])},null,42,za),[[h,U.v
alue]]),U.value&&!W.value?(i(),l("div",Ea,a[14]||(a[14]=[n("i",{class:"bi
bi-check-circle-fill"},null,-1)]))):U.value&&W.value?(i(),l("div",Da,a[15]||(a[15]=[n("i",{class:"bi bi-x-circle-f
ill"},null,-1)]))):r("",!0)])]),n("div",Ma,[U.value&&!W.value?(i(),l("span",Ua,[a[17]||(a[17]=n("i",{class:"bi
bi-eye me-1"},null,-1)),v(" Will analyze:
"+c(U.value),1)])):U.value&&W.value?(i(),l("span",qa,a[18]||(a[18]=[n("i",{class:"bi bi-exclamation-triangle
me-1"},null,-1),v(" Invalid URL format ",-1)]))):(i(),l("span",$a,a[19]||(a[19]=[n("i",{class:"bi bi-info-circle
me-1"},null,-1),v(" Enter a valid URL to analyze web content ",-1)])))]),W.value&&V.value.url?(i(),l("div",Fa,[(i(
!0),l(d,null,p(J.value,e=>(i(),l("div",{key:e,class:"error-message"},[a[20]||(a[20]=n("span",{class:"error-icon"},
"⚠️",-1)),v(" "+c(e),1)]))),128))])):r("",!0)])):r("",!0)])):r("",!0),n("div",Oa,[n("div",{class:u(["input-method-
card",{active:"quick"===D.value,disabled:t.isAnalyzing}]),onClick:a[5]||(a[5]=e=>!t.isAnalyzing&&(D.value="quick",
ae()))},[n("div",Ba,c(I),1),n("div",Va,[n("h4",null,c(w),1),n("p",null,c(A),1)]),"quick"===D.value?(i(),l("div",ja
,"✓")):r("",!0)],2),n("div",{class:u(["input-method-card",{active:"text"===D.value,disabled:t.isAnalyzing}]),onCli
ck:a[6]||(a[6]=e=>!t.isAnalyzing&&(D.value="text",ae()))},[n("div",Ga,c(P),1),n("div",Ha,[n("h4",null,c(g),1),n("p
",null,c(S),1)]),"text"===D.value?(i(),l("div",Ja,"✓")):r("",!0)],2)]),n("div",Wa,[n("button",{class:u(["analyze-b
tn",{disabled:!X.value||t.isAnalyzing}]),disabled:!X.value||t.isAnalyzing,onClick:ee},[t.isAnalyzing?(i(),l("span"
,Ka)):(i(),l("span",Qa,"🔍")),v(" "+c(t.isAnalyzing?"Analyzing...":"Analyze
Content"),1)],10,Xa),j.value&&W.value?(i(),l("div",Ya,a[22]||(a[22]=[n("p",null,"Please fix the errors above
before analyzing",-1)]))):r("",!0)]),"text"===D.value||"quick"===D.value?(i(),l("div",Za,["text"===D.value?(i(),l(
"div",es,[a[27]||(a[27]=n("label",{class:"input-label"},[n("i",{class:"bi bi-text-paragraph me-2"}),v(" Paste
your text here
")],-1)),n("div",ts,[y(n("textarea",{"onUpdate:modelValue":a[7]||(a[7]=e=>M.value=e),placeholder:"Paste legal
text, citations, or document content here...",disabled:t.isAnalyzing,rows:"8",onInput:H,class:u([{error:W.value&&V
.value.text},"text-input-field"])},null,42,as),[[h,M.value]]),M.value?r("",!0):(i(),l("div",ss,a[23]||(a[23]=[n("i
",{class:"bi bi-clipboard"},null,-1),n("span",null,"Paste your content here",-1)])))]),n("div",ls,[n("span",{class
:u(["char-count",{error:M.value.length>N.maxLength}])},[a[24]||(a[24]=n("i",{class:"bi bi-type
me-1"},null,-1)),v(" "+c(M.value.length)+" / "+c(N.maxLength)+" characters
",1)],2),M.value.length<N.minLength&&V.value.text?(i(),l("span",is,[a[25]||(a[25]=n("i",{class:"bi
bi-exclamation-circle me-1"},null,-1)),v(" Minimum "+c(N.minLength)+" characters required ",1)])):r("",!0)]),W.val
ue&&V.value.text?(i(),l("div",ns,[(i(!0),l(d,null,p(J.value,e=>(i(),l("div",{key:e,class:"error-message"},[a[26]||
(a[26]=n("span",{class:"error-icon"},"⚠️",-1)),v(" "+c(e),1)]))),128))])):r("",!0)])):"quick"===D.value?(i(),l("di
v",rs,[a[30]||(a[30]=n("label",{class:"input-label"},[n("i",{class:"bi bi-lightning me-2"}),v(" Enter a single
citation ")],-1)),n("div",os,[n("div",cs,[a[29]||(a[29]=n("div",{class:"input-icon"},[n("i",{class:"bi
bi-quote"})],-1)),y(n("input",{"onUpdate:modelValue":a[8]||(a[8]=e=>O.value=e),type:"text",placeholder:"e.g., 410
U.S. 113 (1973) or Roe v. Wade",disabled:t.isAnalyzing,onKeyup:k(ee,["enter"]),class:"quick-citation-input"},null,
40,us),[[h,O.value]]),O.value?(i(),l("div",ds,a[28]||(a[28]=[n("i",{class:"bi bi-check-circle-fill"},null,-1)]))):
r("",!0)])]),a[31]||(a[31]=n("div",{class:"input-footer"},[n("span",{class:"citation-hint"},[n("i",{class:"bi
bi-info-circle me-1"}),v(" Enter a legal citation to verify quickly ")])],-1))])):r("",!0)])):r("",!0)]))}},vs={ke
y:0,class:"unified-progress-container"},ms={class:"progress-header"},gs={class:"progress-icon"},fs={key:0,class:"e
rror-icon"},ys={key:1,class:"success-icon"},hs={key:2,class:"loading-icon"},bs={class:"progress-title-section"},ks
={class:"progress-title"},_s={key:0},xs={key:1},ws={key:2},Ss={class:"progress-subtitle"},Cs={key:0},Ts={key:1},As
={key:2},Ps={key:0,class:"progress-content"},Rs={class:"progress-stats"},Ls={class:"stat-item"},Is={class:"stat-va
lue"},Ns={key:0,class:"stat-item"},zs={class:"stat-value"},Es={key:1,class:"stat-item"},Ds={class:"stat-value"},Ms
={class:"main-progress-section"},Us={class:"progress-bar-container"},qs={class:"progress",style:{height:"1.5rem","
border-radius":"0.75rem"}},$s=["aria-valuenow"],Fs={class:"progress-text"},Os={key:0,class:"steps-progress"},Bs={c
lass:"steps-list"},Vs={class:"step-icon"},js={key:0,class:"bi bi-check-circle-fill"},Gs={key:1,class:"bi
bi-arrow-right-circle-fill"},Hs={key:2,class:"bi bi-circle"},Js={class:"step-content"},Ws={class:"step-name"},Xs={
key:0,class:"step-time"},Ks={key:1,class:"rate-limit-info"},Qs={class:"alert
alert-info"},Ys={key:0},Zs={key:1,class:"error-actions"},el={key:2,class:"completion-actions"};const
tl={class:"toast-icon"},al={class:"toast-message"},sl={class:"enhanced-validator"},ll={class:"header text-center m
b-4"},il={key:1,class:"loading-container"},nl={class:"loading-content"},rl={key:0,class:"progress-section"},ol={cl
ass:"progress-info mb-3"},cl={class:"progress-stats"},ul={class:"stat"},dl={class:"stat"},pl={class:"progress-cont
ainer"},vl={class:"progress",style:{height:"1.5rem","border-radius":"0.75rem"}},ml=["aria-valuenow"],gl={class:"pr
ogress-text"},fl={key:2,class:"error-container"},yl={class:"error-content"},hl={key:0,class:"mt-4"},bl={class:"car
d"},kl={class:"card-body"},_l={key:3,class:"main-content-wrapper"},xl={class:"main-content-area"},wl={key:0,class:
"results-container"},Sl={key:1,class:"input-container"},Cl={key:2,class:"no-results-container"};const Tl=L({name:"
EnhancedValidator",components:{CitationResults:ma,UnifiedInput:L(ps,[["__scopeId","data-v-d110b890"]]),UnifiedProg
ress:L({name:"UnifiedProgress",emits:["retry","reset","complete"],setup(e,{emit:t}){const{progressState:a,elapsedT
ime:s,remainingTime:l,progressPercent:i,progressBarClass:n,shouldShowProgress:r,formatTime:o,retryProgress:c,reset
Progress:u}=M();return{progressState:a,elapsedTime:s,remainingTime:l,progressPercent:i,progressBarClass:n,shouldSh
owProgress:r,formatTime:o,getUploadTypeLabel:()=>{switch(a.uploadType){case"file":return"Document";case"url":retur
n"URL Content";case"text":return"Text";default:return"Content"}},handleRetry:()=>{c()&&t("retry",{uploadType:a.upl
oadType,uploadData:a.uploadData})},handleReset:()=>{u(),t("reset")}}}},[["render",function(e,t,a,s,m,g){return s.s
houldShowProgress?(i(),l("div",vs,[n("div",{class:u(["progress-card",{"error-state":s.progressState.processingErro
r}])},[n("div",ms,[n("div",gs,[s.progressState.processingError?(i(),l("div",fs,t[2]||(t[2]=[n("i",{class:"bi
bi-exclamation-triangle"},null,-1)]))):s.progressState.hasResults?(i(),l("div",ys,t[3]||(t[3]=[n("i",{class:"bi
bi-check-circle-fill"},null,-1)]))):(i(),l("div",hs,t[4]||(t[4]=[n("div",{class:"spinner-border text-primary",role
:"status"},[n("span",{class:"visually-hidden"},"Processing...")],-1)])))]),n("div",bs,[n("h3",ks,[s.progressState.
processingError?(i(),l("span",_s,"Processing Failed")):s.progressState.hasResults?(i(),l("span",xs,"Processing
Complete")):(i(),l("span",ws,"Processing "+c(s.getUploadTypeLabel()),1))]),n("p",Ss,[s.progressState.processingErr
or?(i(),l("span",Cs,c(s.progressState.processingError),1)):s.progressState.hasResults?(i(),l("span",Ts,"Analysis
completed successfully")):(i(),l("span",As,c(s.progressState.currentStep),1))])])]),s.progressState.processingErro
r?r("",!0):(i(),l("div",Ps,[n("div",Rs,[n("div",Ls,[t[5]||(t[5]=n("i",{class:"bi bi-clock text-primary"},null,-1))
,t[6]||(t[6]=n("span",{class:"stat-label"},"Elapsed:",-1)),n("span",Is,c(s.formatTime(s.elapsedTime)),1)]),s.progr
essState.isActive&&s.remainingTime>0?(i(),l("div",Ns,[t[7]||(t[7]=n("i",{class:"bi bi-hourglass-split text-info"},
null,-1)),t[8]||(t[8]=n("span",{class:"stat-label"},"Remaining:",-1)),n("span",zs,c(s.formatTime(s.remainingTime))
,1)])):r("",!0),s.progressState.citationInfo?(i(),l("div",Es,[t[9]||(t[9]=n("i",{class:"bi bi-list-ol text-success
"},null,-1)),t[10]||(t[10]=n("span",{class:"stat-label"},"Citations:",-1)),n("span",Ds,c(s.progressState.citationI
nfo.processed||0)+" of "+c(s.progressState.citationInfo.total||0),1)])):r("",!0)]),n("div",Ms,[n("div",Us,[n("div"
,qs,[n("div",{class:u(["progress-bar progress-bar-striped",[s.progressBarClass,{"progress-bar-animated":s.progress
State.isActive}]]),role:"progressbar",style:o({width:s.progressPercent+"%"}),"aria-valuenow":s.progressPercent,"ar
ia-valuemin":"0","aria-valuemax":"100"},[n("span",Fs,c(Math.round(s.progressPercent))+"%",1)],14,$s)])])]),s.progr
essState.processingSteps.length>0?(i(),l("div",Os,[t[11]||(t[11]=n("div",{class:"steps-header"},[n("h6",null,[n("i
",{class:"bi bi-list-task me-2"}),v("Processing Steps")])],-1)),n("div",Bs,[(i(!0),l(d,null,p(s.progressState.proc
essingSteps,(e,t)=>(i(),l("div",{key:t,class:u(["step-item",{active:e.step===s.progressState.currentStep,completed
:e.completed,pending:!e.completed&&e.step!==s.progressState.currentStep}])},[n("div",Vs,[e.completed?(i(),l("i",js
)):e.step===s.progressState.currentStep?(i(),l("i",Gs)):(i(),l("i",Hs))]),n("div",Js,[n("span",Ws,c(e.step),1),e.e
stimated_time?(i(),l("span",Xs," (~"+c(e.estimated_time)+"s) ",1)):r("",!0)])],2))),128))])])):r("",!0),s.progress
State.rateLimitInfo?(i(),l("div",Ks,[n("div",Qs,[t[12]||(t[12]=n("i",{class:"bi bi-info-circle
me-2"},null,-1)),t[13]||(t[13]=n("strong",null,"Rate Limit:",-1)),v("
"+c(s.progressState.rateLimitInfo.remaining||0)+" requests remaining
",1),s.progressState.rateLimitInfo.reset_time?(i(),l("span",Ys," (resets in
"+c(s.formatTime(s.progressState.rateLimitInfo.reset_time))+") ",1)):r("",!0)])])):r("",!0)])),s.progressState.pro
cessingError?(i(),l("div",Zs,[s.progressState.canRetry?(i(),l("button",{key:0,onClick:t[0]||(t[0]=(...e)=>s.handle
Retry&&s.handleRetry(...e)),class:"btn btn-primary me-2"},t[14]||(t[14]=[n("i",{class:"bi bi-arrow-clockwise
me-1"},null,-1),v(" Retry Analysis
",-1)]))):r("",!0),n("button",{onClick:t[1]||(t[1]=(...e)=>s.handleReset&&s.handleReset(...e)),class:"btn
btn-outline-secondary"},t[15]||(t[15]=[n("i",{class:"bi bi-x-circle me-1"},null,-1),v(" Clear Error ",-1)]))])):r(
"",!0),s.progressState.hasResults&&!s.progressState.isActive?(i(),l("div",el,t[16]||(t[16]=[n("div",{class:"alert
alert-success"},[n("i",{class:"bi bi-check-circle-fill me-2"}),n("strong",null,"Analysis Complete!"),v(" Your
results are ready. ")],-1)]))):r("",!0)],2)])):r("",!0)}],["__scopeId","data-v-d9e38cde"]]),Toast:L({__name:"Toast
",props:{message:String,type:{type:String,default:"info"},duration:{type:Number,default:3500}},emits:["close"],set
up(t,{emit:s}){const o=t,d=s,p=e(!0),v=a(()=>"success"===o.type?"✅":"error"===o.type?"❌":"ℹ️");function
f(){p.value=!1,d("close")}return m(()=>o.message,e=>{e&&(p.value=!0,setTimeout(f,o.duration))}),(e,a)=>(i(),g(x,{n
ame:"toast-fade"},{default:_(()=>[p.value?(i(),l("div",{key:0,class:u(["toast",t.type])},[n("span",tl,c(v.value),1
),n("span",al,c(t.message),1),n("button",{class:"toast-close",onClick:f},"×")],2)):r("",!0)]),_:1}))}},[["__scopeI
d","data-v-a1e0936f"]]),SkeletonLoader:L({__name:"SkeletonLoader",props:{lines:{type:Number,default:3},height:{typ
e:String,default:"auto"},width:{type:String,default:"100%"}},setup:e=>(t,a)=>(i(),l("div",{class:"skeleton-loader"
,style:o({height:e.height,width:e.width})},[(i(!0),l(d,null,p(e.lines,e=>(i(),l("div",{key:e,class:"skeleton-line"
}))),128))],4))},[["__scopeId","data-v-1c57e4a2"]])},setup(){const s=T(),l=A(),i=e(null),n=e(null),{isLoading:r,ca
ncel:o}=function(a={}){const{loadingMessage:s="Loading...",showLoading:l=!0,onSuccess:i,onError:n,onFinally:r}=a,o
=e(null),c=e(null),u=e(!1),d=e(null);let p=null,v=null;const
m=`api_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return
t(()=>{v&&v.abort(),p&&p.remove()}),{execute:async function(e,t={}){var g;const{message:f=s,showLoader:y=l,signal:
h,...b}={...a,...t};c.value=null,d.value=null,o.value=null,y&&(p=R(m,{message:f})),u.value=!0,"undefined"!=typeof
AbortController&&(v=new AbortController,b.signal=h||v.signal);try{const t=await e({...b,signal:b.signal});return
o.value=t.data||t,d.value=t.status||200,i&&i(t),t}catch(k){throw c.value=k,d.value=(null==(g=k.response)?void 0:g.
status)||0,n&&n(k),k}finally{u.value=!1,p&&(c.value?p.error(c.value):p.complete(),p=null),r&&r(),v=null}},cancel:f
unction(){v&&(v.abort(),v=null),p&&(p.remove(),p=null),u.value=!1},data:o,error:c,isLoading:u,status:d}}({loadingM
essage:"Validating citation...",showLoading:!0}),c=e(!1),{isLoading:u}=function(){const e=(e,t="Loading...")=>{z.v
alue=e,t&&(E.value=t)};return{isLoading:a(()=>z.value),loadingMessage:a(()=>E.value),setLoading:e,showLoading:t=>{
e(!0,t)},hideLoading:()=>{e(!1)},toggleLoading:t=>{e(!z.value,t)}}}(),d=a(()=>r.value||u.value||c.value),{elapsedT
ime:p,progressPercent:v,progressBarClass:g,startProgress:f,setSteps:y,updateProgress:h,setError:b,completeProgress
:k,resetProgress:_}=M(),x=e(0),w=e(null),S=e(null),L=e(null);let D=e(null);const U=e(""),q=e("info"),$=(e,t="info"
)=>{U.value=e,q.value=t},F=e(null),O=12e4,B=e(""),V=e(null),j=e(null),G=e(null),H=e(!1),J=e(null),W=e(0),X=e(""),K
=e(0),Q=e([]),Y=()=>{V.value=null,j.value=null,G.value=null,H.value=!1,J.value=null,W.value=0,X.value="",K.value=0
,Q.value=[],_()},Z=e(null),ee=e(100),te=e(0),ae=a(()=>(null==v?void 0:v.value)||0),se=a(()=>(null==p?void 0:p.valu
e)||0),le=a(()=>!0),ie=e(!0),ne=a(()=>!i.value&&!n.value&&!d.value),{normalizeCitations:re}=function(){const
e=e=>{let t=0,a="text-muted";if(e.canonical_name&&"N/A"!==e.canonical_name&&(t+=2),e.extracted_case_name&&"N/A"!==
e.extracted_case_name&&e.canonical_name&&"N/A"!==e.canonical_name){const a=e.canonical_name.toLowerCase().split(/\
s+/).filter(e=>e.length>2),s=e.extracted_case_name.toLowerCase().split(/\s+/).filter(e=>e.length>2);a.filter(e=>s.
includes(e)).length/Math.max(a.length,s.length)>=.5&&(t+=1)}return e.canonical_date&&"N/A"!==e.canonical_date&&(t+
=1),e.url&&""!==e.url&&(t+=1),a=t>=4?"text-success":t>=2?"text-warning":"text-danger",{score:t,scoreColor:a,normal
ized:{canonical_name:e.canonical_name||"N/A",extracted_case_name:e.extracted_case_name||"N/A",canonical_date:e.can
onical_date||"N/A",extracted_date:e.extracted_date||"N/A",url:e.url||"",verified:e.verified||!1}}};return{normaliz
eCitation:e,normalizeCitations:t=>Array.isArray(t)?t.map(t=>{const a=e(t);return{...t,score:a.score,scoreColor:a.s
coreColor}}):[],calculateCitationScore:t=>e(t).score,calculateSimilarity:e=>{if(e.canonical_name&&"N/A"!==e.canoni
cal_name)return
1;if(e.extracted_case_name&&"N/A"!==e.extracted_case_name&&e.canonical_name&&"N/A"!==e.canonical_name){const t=e.c
anonical_name.toLowerCase().split(/\s+/).filter(e=>e.length>2),a=e.extracted_case_name.toLowerCase().split(/\s+/).
filter(e=>e.length>2);return t.filter(e=>a.includes(e)).length/Math.max(t.length,a.length)}return 0}}}();function
oe(e){const t=new Map;return e.forEach(e=>{const a=e.canonical_citation||e.citation||e.primary_citation;t.has(a)||
t.set(a,{cluster_id:`cluster_${a.replace(/[^a-zA-Z0-9]/g,"_")}`,canonical_name:e.canonical_name||"N/A",canonical_d
ate:e.canonical_date||null,extracted_case_name:e.extracted_case_name||"N/A",extracted_date:e.extracted_date||null,
url:e.url||null,citations:[]});t.get(a).citations.push(e)}),Array.from(t.values()).map(e=>({...e,size:e.citations.
length}))}function ce(){i.value=null,n.value=null,Y()}async function ue(e){if(e)try{const[t,a]=await Promise.allSe
ttled([I.get(`/task_status/${e}`),I.get(`/processing_progress?task_id=${e}`)]),s="fulfilled"===t.status?t.value.da
ta:{},l="fulfilled"===a.status?a.value.data:{};if("completed"===s.status){const e=s.result||s,t=Array.isArray(e.ci
tations)?e.citations:e.results||[],a=re?re(t):t;if(i.value={citations:a,clusters:e.clusters||oe(t),metadata:e.meta
data||{},total_citations:t.length,verified_count:t.filter(e=>{var t,a;return
e.verified||e.valid||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void
0:a.found)}).length,unverified_count:t.filter(e=>{var t,a;return!(e.verified||e.valid||(null==(t=e.data)?void
0:t.valid)||(null==(a=e.data)?void 0:a.found))}).length},c.value=!1,stopProcessing(),r.value=!1,void 0!==u&&void
0!==u.value&&(u.value=!1),$("Citation analysis completed
successfully!","success"),L.value&&(clearInterval(L.value),L.value=null),0===t.length){let e="No citations found
in the provided text or document.";s.status_message&&s.status_message.toLowerCase().includes("rate limit")&&(e+="
(Possible cause: search engine rate limiting)"),s.error&&(e+=` (Backend error: ${s.error})`),n.value=e}window&&win
dow.localStorage&&"true"===window.localStorage.getItem("debugMode")&&(n.value+="\n[DEBUG] Raw backend response:
"+JSON.stringify(s,null,2))}else if("failed"===s.status)n.value=s.error||"Processing
failed",c.value=!1,setProcessingError(s.error||"Processing failed"),$(`Processing failed: ${s.error||"Unknown
error"}`,"error"),L.value&&(clearInterval(L.value),L.value=null);else{c.value=!0;const t="success"===l.status?l:s;
t.estimated_total_time&&t.steps?D.value!==e&&(startProcessing({estimated_total_time:t.estimated_total_time,steps:t
.steps}),D.value=e):t.estimated_total_time&&D.value!==e&&(startProcessing(t.estimated_total_time),D.value=e),t.cur
rent_step&&h({step:t.current_step,progress:t.progress||0}),"success"===l.status&&void 0!==l.total_citations?(V.val
ue={total:l.total_citations,processed:l.processed_citations||0,unique:l.unique_citations||0},te.value=l.processed_
citations||0):void 0!==s.total_citations&&(V.value={total:s.total_citations,processed:s.processed_citations||0,uni
que:s.unique_citations||0}),L.value||(L.value=setInterval(()=>ue(e),2e3))}he()}catch(t){n.value="Failed to check
processing status",c.value=!1,setProcessingError(t.message||"Failed to check processing
status"),L.value&&(clearInterval(L.value),L.value=null)}}const de=async(e,t)=>{try{"file"===t?await
ge(e):"url"===t?await fe({url:e}):"text"===t&&await me({text:e})}catch(a){G.value=`Failed to analyze input:
${a.message}`,H.value=!0}},pe=e=>{try{let t=[];e.result&&Array.isArray(e.result.citations)&&e.result.citations.len
gth>0?t=e.result.citations:Array.isArray(e.citations)&&e.citations.length>0?t=e.citations:Array.isArray(e.validati
on_results)&&e.validation_results.length>0&&(t=e.validation_results),i.value={...e,citations:re(t),clusters:e.resu
lt&&e.result.clusters||e.clusters||oe(t),total_citations:t.length,verified_count:t.filter(e=>{var t,a;return
e.verified||e.valid||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void
0:a.found)}).length,unverified_count:t.filter(e=>{var t,a;return!(e.verified||e.valid||(null==(t=e.data)?void
0:t.valid)||(null==(a=e.data)?void 0:a.found))}).length,timestamp:(new
Date).toISOString()},r.value=!1,n.value=null,c.value=!1,S.value=null,k(i.value),P(()=>{const e=document.querySelec
tor(".results-container");e&&e.scrollIntoView({behavior:"smooth"})})}catch(t){n.value="Failed to process
results",r.value=!1}},ve=e=>{const t=e.message||"An error occurred during analysis";b(t),n.value=t,r.value=!1,c.va
lue=!1,S.value=null,H.value=!0,$(t,"error")},me=async({text:e,options:t})=>{if(!c.value){r.value=!0,n.value=null,i
.value=null;try{const t=await N({text:e,type:"text"});pe(t),r.value=!1}catch(a){ve(a)}}},ge=async
e=>{if(!c.value){r.value=!0,n.value=null,i.value=null;try{let t;e instanceof FormData?t=e:(t=new
FormData,t.append("file",e.file),t.append("type","file"));const a=await N(t);pe(a),r.value=!1}catch(t){ve(t)}}},fe
=async({url:e})=>{if(!c.value){r.value=!0,n.value=null,i.value=null;try{const t=await
N({url:e,type:"url"});pe(t),r.value=!1}catch(t){ve(t)}}};function ye(e){if(c.value)return void $("A request is
already in progress. Please wait for it to complete.","warning");let
t,a;e.file?(t="file",a=e):e.url?(t="url",a=e):e.text&&(t="text",a=e),f(t,a,95),y([{step:"Preparing
analysis",estimated_time:5},{step:"Processing content",estimated_time:30},{step:"Verifying citations",estimated_ti
me:60}]),Y(),startProcessing(),c.value=!0,n.value=null,i.value=null,e.file?ge(e):e.url?fe(e):e.text&&(e.quick?me({
text:e.text,options:{mode:"single"}}):me({text:e.text,options:{mode:"multi"}})),B.value="",he(),F.value=setTimeout
(()=>{B.value="Processing timed out. No response from
server.",setProcessingError(B.value),c.value=!1,$(B.value,"error")},O)}function
he(){F.value&&(clearTimeout(F.value),F.value=null)}C(()=>{let
e={...s.query};if(l.currentRoute.value.state&&l.currentRoute.value.state.results){const
e=l.currentRoute.value.state.results;let t=[];return e.result&&Array.isArray(e.result.citations)&&e.result.citatio
ns.length>0?t=e.result.citations:Array.isArray(e.citations)&&e.citations.length>0?t=e.citations:Array.isArray(e.va
lidation_results)&&e.validation_results.length>0&&(t=e.validation_results),void(t.length>0?(i.value={...e,citation
s:re(t),clusters:e.result&&e.result.clusters||e.clusters||oe(t),total_citations:t.length,verified_count:t.filter(e
=>{var t,a;return e.verified||e.valid||(null==(t=e.data)?void 0:t.valid)||(null==(a=e.data)?void
0:a.found)}).length,unverified_count:t.filter(e=>{var t,a;return!(e.verified||e.valid||(null==(t=e.data)?void
0:t.valid)||(null==(a=e.data)?void 0:a.found))}).length},$("Citation analysis completed
successfully!","success")):n.value="No citations found in the provided text or document.")}if(e.task_id)return
S.value=e.task_id,c.value=!0,void
ue(e.task_id);if(!e.text&&!e.url&&!e.fileName&&localStorage.getItem("lastCitationInput"))try{const
t=JSON.parse(localStorage.getItem("lastCitationInput"));t.fileName?(delete t.fileName,0===Object.keys(t).length?lo
calStorage.removeItem("lastCitationInput"):localStorage.setItem("lastCitationInput",JSON.stringify(t)),e={}):e=t}c
atch(t){e={}}e.text||e.url||e.fileName?(ce(),e.text?me({text:e.text}):e.url?fe({url:e.url}):e.fileName&&(n.value=`
File "${e.fileName}" was previously uploaded but cannot be restored from history. Please upload the file again to
analyze it.`,ie.value=!0)):i.value=null,le.value&&ee.value>20&&(te.value=0,Z&&clearInterval(Z),Z=setInterval(()=>{
te.value<ee.value&&te.value++},2e3)),setTimeout(()=>{const e=document.querySelectorAll(".fas.fa-cog.fa-spin"),t=do
cument.querySelectorAll(".bi.bi-gear-fill.spinning");e.forEach((e,a)=>{-1===getComputedStyle(e).fontFamily.indexOf
("FontAwesome")&&(e.style.display="none",t[a]&&(t[a].style.display="inline-block"))})},100)}),t(()=>{c.value&&o(),
L.value&&(clearInterval(L.value),L.value=null),he(),Z&&clearInterval(Z)}),m(()=>i.value,e=>{e&&Z&&(te.value=ee.val
ue,clearInterval(Z))});return{results:i,error:n,isLoading:d,showLoading:d,hasActiveRequest:c,clearResults:ce,handl
eUnifiedAnalyze:ye,retryProcessing:async()=>{if(S.value)try{G.value=null,H.value=!1,Y(),await
I.cancelRequest(S.value);const e=I.getRequestStatus(S.value);if(e){const{type:t,input:a}=e;await
de(a,t)}}catch(e){G.value=`Failed to retry: ${e.message}`,H.value=!0}},cancelValidation:o,copyResults:function(){}
,downloadResults:function(){},handleProgressRetry:e=>{e&&e.uploadType&&e.uploadData&&ye(e.uploadData)},handleProgr
essReset:()=>{_(),ce()},handleProgressComplete:()=>{},citationInfo:V,queuePosition:x,estimatedQueueTime:w,rateLimi
tInfo:j,timeout:J,canRetry:H,processingError:G,totalProgress:W,currentStep:X,currentStepProgress:K,processingSteps
:Q,resetProcessing:Y,progressTimer:Z,progressTotal:ee,progressCurrent:te,formatTime:e=>{if(!e||e<0)return"00:00";c
onst t=Math.floor(e/60),a=Math.floor(e%60);return`${t.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`
},progressBarClass:g,progressPercent:ae,elapsedTime:se,getProgressBarClass:function(e){return e>=.8?"bg-success":e
>=.5?"bg-info":e>=.3?"bg-warning":"bg-danger"},applyCorrection:()=>{},toastMessage:U,toastType:q,clearToast:()=>{U
.value=""},fallbackError:B,showTimer:le,loadRecentInput:e=>{l.push({path:"/",query:{tab:e.tab,..."paste"===e.tab&&
e.text?{text:e.text}:{},..."url"===e.tab&&e.url?{url:e.url}:{}}})},showFileUpload:ie,shouldShowInput:ne}}},[["rend
er",function(e,t,a,s,d,p){const
m=w("Toast"),f=w("UnifiedInput"),y=w("CitationResults"),h=w("UnifiedProgress");return i(),l("div",sl,[s.toastMessa
ge?(i(),g(m,{key:0,message:s.toastMessage,type:s.toastType,onClose:s.clearToast},null,8,["message","type","onClose
"])):r("",!0),n("div",ll,[n("button",{class:"btn btn-link
back-btn",onClick:t[0]||(t[0]=(...t)=>e.goHome&&e.goHome(...t))},t[1]||(t[1]=[n("i",{class:"bi
bi-arrow-left"},null,-1),v(" Back to Home ",-1)])),t[2]||(t[2]=n("h1",{class:"results-title"},"Citation
Verification Results",-1))]),s.showLoading&&!s.results?(i(),l("div",il,[n("div",nl,[t[5]||(t[5]=n("div",{class:"sp
inner-container"},[n("div",{class:"spinner-border text-primary",role:"status"},[n("span",{class:"visually-hidden"}
,"Processing...")])],-1)),t[6]||(t[6]=n("h3",null,"Processing
Citations",-1)),t[7]||(t[7]=n("p",{class:"text-muted"},"Extracting and analyzing citations from your
document...",-1)),s.showTimer?(i(),l("div",rl,[n("div",ol,[n("div",cl,[n("span",ul,[t[3]||(t[3]=n("i",{class:"bi
bi-list-ol text-primary"},null,-1)),v(" "+c(s.progressCurrent)+" of "+c(s.progressTotal)+" citations
",1)]),n("span",dl,[t[4]||(t[4]=n("i",{class:"bi bi-clock text-primary"},null,-1)),v("
"+c(s.formatTime(s.elapsedTime))+" elapsed ",1)])])]),n("div",pl,[n("div",vl,[n("div",{class:u(["progress-bar
progress-bar-striped progress-bar-animated",s.progressBarClass]),role:"progressbar",style:o({width:s.progressPerce
nt+"%"}),"aria-valuenow":s.progressPercent,"aria-valuemin":"0","aria-valuemax":"100"},[n("span",gl,c(s.progressPer
cent)+"%",1)],14,ml)])])])):r("",!0)])])):s.error&&!s.showLoading?(i(),l("div",fl,[n("div",yl,[t[10]||(t[10]=n("di
v",{class:"error-icon"},[n("i",{class:"bi bi-exclamation-triangle"})],-1)),t[11]||(t[11]=n("h3",null,"Analysis Fai
led",-1)),n("p",null,c(s.error),1),s.showFileUpload?(i(),l("div",hl,[n("div",bl,[t[9]||(t[9]=n("div",{class:"card-
header bg-primary text-white"},[n("h5",{class:"mb-0"},[n("i",{class:"bi bi-file-earmark-arrow-up me-2"}),v("
Re-upload File ")])],-1)),n("div",kl,[t[8]||(t[8]=n("p",{class:"text-muted mb-3"}," To analyze your file, please
upload it again using the form below. ",-1)),S(f,{onAnalyze:s.handleUnifiedAnalyze,"is-analyzing":s.showLoading},n
ull,8,["onAnalyze","is-analyzing"])])])])):r("",!0)])])):(i(),l("div",_l,[n("div",xl,[s.results?(i(),l("div",wl,[S
(y,{results:s.results,"show-loading":s.showLoading,"processing-time":s.elapsedTime,"show-details":!0,"elapsed-time
":s.elapsedTime,"remaining-time":e.remainingTime,"total-progress":s.totalProgress,"current-step":s.currentStep,"cu
rrent-step-progress":s.currentStepProgress,"processing-steps":s.processingSteps,"citation-info":s.citationInfo,"ra
te-limit-info":s.rateLimitInfo,"processing-error":s.processingError,"can-retry":s.canRetry,timeout:s.timeout,onApp
lyCorrection:s.applyCorrection,onCopyResults:s.copyResults,onDownloadResults:s.downloadResults,onToast:e.showToast
},null,8,["results","show-loading","processing-time","elapsed-time","remaining-time","total-progress","current-ste
p","current-step-progress","processing-steps","citation-info","rate-limit-info","processing-error","can-retry","ti
meout","onApplyCorrection","onCopyResults","onDownloadResults","onToast"])])):s.shouldShowInput?(i(),l("div",Sl,[S
(f,{onAnalyze:s.handleUnifiedAnalyze,"is-analyzing":s.showLoading},null,8,["onAnalyze","is-analyzing"]),S(h,{onRet
ry:s.handleProgressRetry,onReset:s.handleProgressReset,onComplete:s.handleProgressComplete},null,8,["onRetry","onR
eset","onComplete"])])):(i(),l("div",Cl,t[12]||(t[12]=[n("div",{class:"no-results-content"},[n("div",{class:"no-re
sults-icon"},[n("i",{class:"bi bi-search"})]),n("h3",null,"No Analysis Results"),n("p",{class:"lead"},[v("No
results to display."),n("br"),v("Please return to the home page to start a new
analysis.")])],-1)])))])]))])}],["__scopeId","data-v-4a43707b"]]);export{Tl as default};


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
]633;D]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>curl -X POST "https://wolf.law.uw.edu/casestrainer/api/analyze" -H "Content-Type: application/json" -d "{\"text\":\"327 P.3d 644\"}" | jq '.result.citations[] | select(.citation == "327 P.3d 644") | {citation, verified, true_by_parallel}'
jq : The term 'jq' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the 
spelling of the name, or if a path was included, verify that the path is correct and try again.
At line:1 char:136
+ ... Type: application/json" -d "{\"text\":\"327 P.3d 644\"}" | jq '.resul ...
+                                                                ~~
    + CategoryInfo          : ObjectNotFound: (jq:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException
jq : The term 'jq' is not recognized as the name of a cmdlet, function, script file, or operable program. Check
the spelling of the name, or if a path was included, verify that the path is correct and try again.
At line:1 char:136
+ ... Type: application/json" -d "{\"text\":\"327 P.3d 644\"}" | jq '.resul ...
+                                                                ~~
    + CategoryInfo          : ObjectNotFound: (jq:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>curl -X POST "https://wolf.law.uw.edu/casestrainer/api/analyze" -H "Content-Type: application/json" -d "{\"text\":\"327 P.3d 644\"}"
>> TerminatingError(Invoke-WebRequest): "Cannot bind parameter 'Headers'. Cannot convert the "Content-Type: application/json" value of type "System.String" to type "System.Collections.IDictionary"."
Invoke-WebRequest : Cannot bind parameter 'Headers'. Cannot convert the "Content-Type: application/json" value of type 
"System.String" to type "System.Collections.IDictionary".
At line:1 char:68
+ ... casestrainer/api/analyze" -H "Content-Type: application/json" -d "{\" ...
+                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidArgument: (:) [Invoke-WebRequest], ParameterBindingException
    + FullyQualifiedErrorId : CannotConvertArgumentNoMessage,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
Invoke-WebRequest : Cannot bind parameter 'Headers'. Cannot convert the "Content-Type: application/json" value of
type "System.String" to type "System.Collections.IDictionary".
At line:1 char:68
+ ... casestrainer/api/analyze" -H "Content-Type: application/json" -d "{\" ...
+                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidArgument: (:) [Invoke-WebRequest], ParameterBindingException
    + FullyQualifiedErrorId : CannotConvertArgumentNoMessage,Microsoft.PowerShell.Commands.InvokeWebRequestComman
   d

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/analyze" -Method POST -Headers @{"Content-Type"="application/json"} -Body '{"text":"327 P.3d 644"}' | Select-Object -ExpandProperty Content
{"metadata":{"content_type":"application/json","endpoint":"/analyze","has_json_data":true,"input_size":23,"input_type":"json","processing_mode":"unknown","processing_time":1754208431.7496777,"processing_time_ms":1682,"request_id":"ec2f19c9-f600-482d-ae1a-b76e69ad627e","source":"direct_api","status":"completed","success":true,"text_length":12,"timestamp":"2025-08-03T08:07:10.069519"},"request_id":"ec2f19c9-f600-482d-ae1a-b76e69ad627e","result":{"citations":[{"canonical_date":null,"canonical_name":null,"case_history":[],"citation":"327 P.3d 644","cluster_id":null,"cluster_members":[],"confidence":0.8,"context":"327 P.3d 644","court":null,"docket_number":null,"docket_numbers":[],"end_index":12,"error":null,"extracted_case_name":"N/A","extracted_date":null,"is_cluster":false,"is_parallel":false,"metadata":{},"method":"regex","parallel_citations":[],"pattern":"flexible_p3d","pinpoint_pages":[],"publication_status":null,"source":"fallback","start_index":0,"url":null,"verified":false}],"clusters":[],"statistics":{}},"success":true}
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/analyze" -Method POST -Headers @{"Content-Type"="application/json"} -Body '{"text":"180 Wn. 2d 632, 327 P.3d 644"}' | Select-Object -ExpandProperty Content
{"metadata":{"content_type":"application/json","endpoint":"/analyze","has_json_data":true,"input_size":39,"input_type":"json","processing_mode":"unknown","processing_time":1754208438.111614,"processing_time_ms":1959,"request_id":"98f4d611-3580-4281-8811-84d77c0659cb","source":"direct_api","status":"completed","success":true,"text_length":28,"timestamp":"2025-08-03T08:07:16.153840"},"request_id":"98f4d611-3580-4281-8811-84d77c0659cb","result":{"citations":[{"canonical_date":"2014-06-19","canonical_name":"In re the Marriage of Chandola","case_history":[],"citation":"180 Wn. 2d 632, 327 P.3d 644","cluster_id":null,"cluster_members":[],"confidence":0.8,"context":"180 Wn. 2d 632, 327 P.3d 644","court":null,"docket_number":null,"docket_numbers":[],"end_index":28,"error":null,"extracted_case_name":"N/A","extracted_date":null,"is_cluster":false,"is_parallel":true,"metadata":{"cluster_id":"fallback_parallel_180 Wn. 2d 632, 327 P.3d 644_327 P.3d 644","courtlistener_source":"CourtListener-lookup-validated","is_in_cluster":true},"method":"regex","parallel_citations":["327 P.3d 644"],"pattern":"parallel_citation_cluster","pinpoint_pages":[],"publication_status":null,"source":"CourtListener-lookup-validated","start_index":0,"url":"https://www.courtlistener.com/opinion/4906942/in-re-the-marriage-of-chandola/","verified":true},{"canonical_date":"2014-06-19","canonical_name":"In re the Marriage of Chandola","case_history":[],"citation":"327 P.3d 644","cluster_id":null,"cluster_members":[],"confidence":0.8,"context":"d 632, 327 P.3d 644","court":null,"docket_number":null,"docket_numbers":[],"end_index":28,"error":null,"extracted_case_name":"N/A","extracted_date":null,"is_cluster":false,"is_parallel":false,"metadata":{"canonical_date_propagated_from":"180 Wn. 2d 632, 327 P.3d 644","canonical_name_propagated_from":"180 Wn. 2d 632, 327 P.3d 644","cluster_id":"fallback_parallel_180 Wn. 2d 632, 327 P.3d 644_327 P.3d 644","is_in_cluster":true},"method":"regex","parallel_citations":["180 Wn. 2d 632, 327 P.3d 644"],"pattern":"flexible_p3d","pinpoint_pages":[],"publication_status":null,"source":"fallback","start_index":16,"url":null,"verified":false}],"clusters":[{"canonical_date":"2014-06-19","canonical_name":"In re the Marriage of Chandola","citations":[{"canonical_date":"2014-06-19","canonical_name":"In re the Marriage of Chandola","citation":"180 Wn. 2d 632, 327 P.3d 644","confidence":0.8,"context":"180 Wn. 2d 632, 327 P.3d 644","court":null,"extracted_case_name":"N/A","extracted_date":"N/A","parallel_citations":["327 P.3d 644"],"source":"CourtListener-lookup-validated","url":"https://www.courtlistener.com/opinion/4906942/in-re-the-marriage-of-chandola/","verified":true},{"canonical_date":"2014-06-19","canonical_name":"In re the Marriage of Chandola","citation":"327 P.3d 644","confidence":0.8,"context":"d 632, 327 P.3d 644","court":null,"extracted_case_name":"N/A","extracted_date":"N/A","parallel_citations":["180 Wn. 2d 632, 327 P.3d 644"],"source":"fallback","true_by_parallel":true,"url":null,"verified":false}],"cluster_id":"fallback_parallel_180 Wn. 2d 632, 327 P.3d 644_327 P.3d 644","extracted_case_name":"N/A","extracted_date":null,"has_parallel_citations":true,"size":2,"source":"citation_clustering","url":"https://www.courtlistener.com/opinion/4906942/in-re-the-marriage-of-chandola/"}],"statistics":{}},"success":true}
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>.\cslaunch.ps1
Transcript started, output file is D:\dev\casestrainer\logs\script_20250803_010750.log

=== Checking Docker Availability ===
[OK] Docker CLI is available: Docker version 28.3.2, build 578ccf6
[INFO] Docker is running in Linux containers mode
[OK] Docker Compose is available: Docker Compose version v2.38.2-desktop.1
[cslaunch] Starting interactive menu...

========================================
 Enhanced CaseStrainer Docker Launcher
                v1.3 (ENHANCED)
========================================

 1.  Quick Production Start (FASTEST)
    - Minimal checks, maximum speed

 2.  Smart Production Start (RECOMMENDED)
    - Intelligent build detection, balanced speed

 3.  Force Full Rebuild
    - Complete rebuild, use when needed

 4.   Advanced Diagnostics
 5.   Cache Management
 6.   Stop All Services
 7.  Quick Status Check
 8.  Run Production Server Test
 0.  Exit

TIP: Use option 1 for fastest startup!

Pruning unused Docker images and volumes for a clean build...
Building all images with --no-cache to ensure latest code...
Starting up containers...

[INFO] Full rebuild complete.
[INFO] If you are testing the frontend, please hard-refresh your browser (Ctrl+F5) to clear any cached JS/CSS.

Press any key to return to menu...
PS>TerminatingError(): "The pipeline has been stopped."
>> TerminatingError(): "The pipeline has been stopped."
]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/analyze" -Method POST -Headers @{"Content-Type"="application/json"} -Body '{"text":"180 Wn. 2d 632, 327 P.3d 644"}' | Select-Object -ExpandProperty Content
{"metadata":{"content_type":"application/json","endpoint":"/analyze","has_json_data":true,"input_size":39,"input_type":"json","processing_mode":"unknown","processing_time":1754209079.0378838,"processing_time_ms":6280,"request_id":"7d5ba8f2-9327-4424-80c6-0a3f13a066e5","source":"direct_api","status":"completed","success":true,"text_length":28,"timestamp":"2025-08-03T08:17:52.759622"},"request_id":"7d5ba8f2-9327-4424-80c6-0a3f13a066e5","result":{"citations":[{"canonical_date":"2014-06-19","canonical_name":"In re the Marriage of Chandola","case_history":[],"citation":"180 Wn. 2d 632, 327 P.3d 644","cluster_id":null,"cluster_members":[],"confidence":0.8,"context":"180 Wn. 2d 632, 327 P.3d 644","court":null,"docket_number":null,"docket_numbers":[],"end_index":28,"error":null,"extracted_case_name":"N/A","extracted_date":null,"is_cluster":false,"is_parallel":true,"metadata":{"cluster_id":"fallback_parallel_180 Wn. 2d 632, 327 P.3d 644_327 P.3d 644","courtlistener_source":"CourtListener-lookup-validated","is_in_cluster":true},"method":"regex","parallel_citations":["327 P.3d 644"],"pattern":"parallel_citation_cluster","pinpoint_pages":[],"publication_status":null,"source":"CourtListener-lookup-validated","start_index":0,"url":"https://www.courtlistener.com/opinion/4906942/in-re-the-marriage-of-chandola/","verified":true},{"canonical_date":"2014-06-19","canonical_name":"In re the Marriage of Chandola","case_history":[],"citation":"327 P.3d 644","cluster_id":null,"cluster_members":[],"confidence":0.8,"context":"d 632, 327 P.3d 644","court":null,"docket_number":null,"docket_numbers":[],"end_index":28,"error":null,"extracted_case_name":"N/A","extracted_date":null,"is_cluster":false,"is_parallel":false,"metadata":{"canonical_date_propagated_from":"180 Wn. 2d 632, 327 P.3d 644","canonical_name_propagated_from":"180 Wn. 2d 632, 327 P.3d 644","cluster_id":"fallback_parallel_180 Wn. 2d 632, 327 P.3d 644_327 P.3d 644","is_in_cluster":true},"method":"regex","parallel_citations":["180 Wn. 2d 632, 327 P.3d 644"],"pattern":"flexible_p3d","pinpoint_pages":[],"publication_status":null,"source":"fallback","start_index":16,"url":null,"verified":false}],"clusters":[{"canonical_date":"2014-06-19","canonical_name":"In re the Marriage of Chandola","citations":[{"canonical_date":"2014-06-19","canonical_name":"In re the Marriage of Chandola","citation":"180 Wn. 2d 632, 327 P.3d 644","confidence":0.8,"context":"180 Wn. 2d 632, 327 P.3d 644","court":null,"extracted_case_name":"N/A","extracted_date":"N/A","parallel_citations":["327 P.3d 644"],"source":"CourtListener-lookup-validated","url":"https://www.courtlistener.com/opinion/4906942/in-re-the-marriage-of-chandola/","verified":true},{"canonical_date":"2014-06-19","canonical_name":"In re the Marriage of Chandola","citation":"327 P.3d 644","confidence":0.8,"context":"d 632, 327 P.3d 644","court":null,"extracted_case_name":"N/A","extracted_date":"N/A","parallel_citations":["180 Wn. 2d 632, 327 P.3d 644"],"source":"fallback","true_by_parallel":true,"url":null,"verified":false}],"cluster_id":"fallback_parallel_180 Wn. 2d 632, 327 P.3d 644_327 P.3d 644","extracted_case_name":"N/A","extracted_date":null,"has_parallel_citations":true,"size":2,"source":"citation_clustering","url":"https://www.courtlistener.com/opinion/4906942/in-re-the-marriage-of-chandola/"}],"statistics":{}},"success":true}
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker ps

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>.\cslaunch.ps1
Transcript started, output file is D:\dev\casestrainer\logs\script_20250803_011807.log

=== Checking Docker Availability ===
[OK] Docker CLI is available: Docker version 28.3.2, build 578ccf6
[INFO] Docker is running in Linux containers mode
[OK] Docker Compose is available: Docker Compose version v2.38.2-desktop.1
[cslaunch] Starting interactive menu...

========================================
 Enhanced CaseStrainer Docker Launcher
                v1.3 (ENHANCED)
========================================

 1.  Quick Production Start (FASTEST)
    - Minimal checks, maximum speed

 2.  Smart Production Start (RECOMMENDED)
    - Intelligent build detection, balanced speed

 3.  Force Full Rebuild
    - Complete rebuild, use when needed

 4.   Advanced Diagnostics
 5.   Cache Management
 6.   Stop All Services
 7.  Quick Status Check
 8.  Run Production Server Test
 0.  Exit

TIP: Use option 1 for fastest startup!

PS>TerminatingError(): "The pipeline has been stopped."
>> TerminatingError(): "The pipeline has been stopped."
PS>TerminatingError(): "The pipeline has been stopped."
>> TerminatingError(): "The pipeline has been stopped."
]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>.\cslaunch.ps1 -MenuOption 3
Transcript started, output file is D:\dev\casestrainer\logs\script_20250803_011918.log

=== Checking Docker Availability ===
[OK] Docker CLI is available: Docker version 28.3.2, build 578ccf6
[INFO] Docker is running in Linux containers mode
[OK] Docker Compose is available: Docker Compose version v2.38.2-desktop.1
[cslaunch] Running menu option 3...
Pruning unused Docker images and volumes for a clean build...

Building all images with --no-cache to ensure latest code...

Starting up containers...


[INFO] Full rebuild complete.
[INFO] If you are testing the frontend, please hard-refresh your browser (Ctrl+F5) to clear any cached JS/CSS.

Fatal Error: The term '//' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or if a path was included, verify that the path is correct and try again.
Check log file: D:\dev\casestrainer\logs\crash.log
]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/analyze" -Method POST -Headers @{"Content-Type"="application/json"} -Body '{"text":"180 Wn. 2d 632, 327 P.3d 644"}' | Select-Object -ExpandProperty Content
>> TerminatingError(Invoke-WebRequest): "⚠️
500
Server Error
We're experiencing technical difficulties. Our team has been notified and is working to resolve the issue. 
Please try again in a few minutes, or contact us if the problem persists. 
Return to CaseStrainer "
Invoke-WebRequest : ⚠️
500
Server Error
We're experiencing technical difficulties. Our team has been notified and is working to resolve the issue. 
Please try again in a few minutes, or contact us if the problem persists. 
Return to CaseStrainer 
At line:1 char:1
+ Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/anal ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-WebRequest], 
WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
Invoke-WebRequest : ⚠️
500
Server Error
We're experiencing technical difficulties. Our team has been notified and is working to resolve the issue.
Please try again in a few minutes, or contact us if the problem persists.
Return to CaseStrainer
At line:1 char:1
+ Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/anal ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-WebRequest], WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-backend-prod --tail 20

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-backend-prod --tail 50 | Select-String -Pattern "ERROR|Exception|Traceback"
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker ps

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/health" -Method GET


StatusCode        : 200
StatusDescription : OK
Content           : {123, 34, 115, 116...}
RawContent        : HTTP/1.1 200 OK
                    Connection: keep-alive
                    Content-Length: 21
                    Content-Type: application/octet-stream,application/json
                    Date: Sun, 03 Aug 2025 08:28:21 GMT
                    Server: nginx/1.29.0

                    {"status": "healthy"}...
Headers           : {[Connection, keep-alive], [Content-Length, 21], [Content-Type,
                    application/octet-stream,application/json], [Date, Sun, 03 Aug 2025 08:28:21 GMT]...}
RawContentLength  : 21



]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/analyze" -Method POST -Headers @{"Content-Type"="application/json"} -Body '{"text":"327 P.3d 644"}' | Select-Object -ExpandProperty Content
>> TerminatingError(Invoke-WebRequest): "⚠️
500
Server Error
We're experiencing technical difficulties. Our team has been notified and is working to resolve the issue. 
Please try again in a few minutes, or contact us if the problem persists. 
Return to CaseStrainer "
Invoke-WebRequest : ⚠️
500
Server Error
We're experiencing technical difficulties. Our team has been notified and is working to resolve the issue. 
Please try again in a few minutes, or contact us if the problem persists. 
Return to CaseStrainer 
At line:1 char:1
+ Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/anal ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-WebRequest], 
WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
Invoke-WebRequest : ⚠️
500
Server Error
We're experiencing technical difficulties. Our team has been notified and is working to resolve the issue.
Please try again in a few minutes, or contact us if the problem persists.
Return to CaseStrainer
At line:1 char:1
+ Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/anal ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-WebRequest], W
   ebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-backend-prod --tail 100

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-rqworker-prod --tail 20

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod curl -X POST "http://localhost:5000/casestrainer/api/analyze" -H "Content-Type: application/json" -d '{"text":"327 P.3d 644"}'

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod curl -X POST "http://localhost:5000/casestrainer/api/analyze" -H "Content-Type: application/json" -d '{"text":"327 P.3d 644"}'

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>echo '{"text":"327 P.3d 644"}' | docker exec -i casestrainer-backend-prod curl -X POST "http://localhost:5000/casestrainer/api/analyze" -H "Content-Type: application/json" -d @-
At line:1 char:176
+ ... 0/casestrainer/api/analyze" -H "Content-Type: application/json" -d @-
+                                                                        ~
Unrecognized token in source text.
At line:1 char:176
+ ... 0/casestrainer/api/analyze" -H "Content-Type: application/json" -d @-
+                                                                        ~
Unrecognized token in source text.
    + CategoryInfo          : ParserError: (:) [], ParentContainsErrorRecordException
    + FullyQualifiedErrorId : UnrecognizedToken

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod python -m py_compile src/unified_citation_processor_v2.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker restart casestrainer-backend-prod

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/analyze" -Method POST -Headers @{"Content-Type"="application/json"} -Body '{"text":"180 Wn. 2d 632, 327 P.3d 644"}' | Select-Object -ExpandProperty Content
>> TerminatingError(Invoke-WebRequest): "⚠️
500
Server Error
We're experiencing technical difficulties. Our team has been notified and is working to resolve the issue. 
Please try again in a few minutes, or contact us if the problem persists. 
Return to CaseStrainer "
Invoke-WebRequest : ⚠️
500
Server Error
We're experiencing technical difficulties. Our team has been notified and is working to resolve the issue. 
Please try again in a few minutes, or contact us if the problem persists. 
Return to CaseStrainer 
At line:1 char:1
+ Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/anal ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-WebRequest], 
WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
Invoke-WebRequest : ⚠️
500
Server Error
We're experiencing technical difficulties. Our team has been notified and is working to resolve the issue.
Please try again in a few minutes, or contact us if the problem persists.
Return to CaseStrainer
At line:1 char:1
+ Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/anal ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-WebRequest], W
   ebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>.\cslaunch.ps1 -MenuOption 3
Transcript started, output file is D:\dev\casestrainer\logs\script_20250803_013031.log

=== Checking Docker Availability ===
[OK] Docker CLI is available: Docker version 28.3.2, build 578ccf6
[INFO] Docker is running in Linux containers mode
[OK] Docker Compose is available: Docker Compose version v2.38.2-desktop.1
[cslaunch] Running menu option 3...
Pruning unused Docker images and volumes for a clean build...

Building all images with --no-cache to ensure latest code...

Starting up containers...


[INFO] Full rebuild complete.
[INFO] If you are testing the frontend, please hard-refresh your browser (Ctrl+F5) to clear any cached JS/CSS.

Fatal Error: The term '//' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or if a path was included, verify that the path is correct and try again.
Check log file: D:\dev\casestrainer\logs\crash.log
]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/analyze" -Method POST -Headers @{"Content-Type"="application/json"} -Body '{"text":"180 Wn. 2d 632, 327 P.3d 644"}' | Select-Object -ExpandProperty Content
>> TerminatingError(Invoke-WebRequest): "⚠️
500
Server Error
We're experiencing technical difficulties. Our team has been notified and is working to resolve the issue. 
Please try again in a few minutes, or contact us if the problem persists. 
Return to CaseStrainer "
Invoke-WebRequest : ⚠️
500
Server Error
We're experiencing technical difficulties. Our team has been notified and is working to resolve the issue. 
Please try again in a few minutes, or contact us if the problem persists. 
Return to CaseStrainer 
At line:1 char:1
+ Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/anal ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-WebRequest], 
WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
Invoke-WebRequest : ⚠️
500
Server Error
We're experiencing technical difficulties. Our team has been notified and is working to resolve the issue.
Please try again in a few minutes, or contact us if the problem persists.
Return to CaseStrainer
At line:1 char:1
+ Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/anal ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-WebRequest], W
   ebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-backend-prod --tail 30

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-backend-prod --tail 100 | Select-String -Pattern "ERROR|Exception|Traceback|500"

2025-08-03 08:38:50 - src.app_final_vue - INFO - CORS configured for origins: ['https://wolf.law.uw.edu',
'http://localhost:5000', 'http://localhost:8080']
2025-08-03 08:38:51 - waitress - INFO - Serving on http://0.0.0.0:5000


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/health" -Method GET


StatusCode        : 200
StatusDescription : OK
Content           : {123, 34, 115, 116...}
RawContent        : HTTP/1.1 200 OK
                    Connection: keep-alive
                    Content-Length: 21
                    Content-Type: application/octet-stream,application/json
                    Date: Sun, 03 Aug 2025 08:39:15 GMT
                    Server: nginx/1.29.0

                    {"status": "healthy"}...
Headers           : {[Connection, keep-alive], [Content-Length, 21], [Content-Type,
                    application/octet-stream,application/json], [Date, Sun, 03 Aug 2025 08:39:15 GMT]...}
RawContentLength  : 21



]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-rqworker-prod --tail 20

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/analyze" -Method POST -Headers @{"Content-Type"="application/json"} -Body '{"text":"test"}' | Select-Object -ExpandProperty Content
>> TerminatingError(Invoke-WebRequest): "⚠️
500
Server Error
We're experiencing technical difficulties. Our team has been notified and is working to resolve the issue. 
Please try again in a few minutes, or contact us if the problem persists. 
Return to CaseStrainer "
Invoke-WebRequest : ⚠️
500
Server Error
We're experiencing technical difficulties. Our team has been notified and is working to resolve the issue. 
Please try again in a few minutes, or contact us if the problem persists. 
Return to CaseStrainer 
At line:1 char:1
+ Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/anal ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-WebRequest], 
WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
Invoke-WebRequest : ⚠️
500
Server Error
We're experiencing technical difficulties. Our team has been notified and is working to resolve the issue.
Please try again in a few minutes, or contact us if the problem persists.
Return to CaseStrainer
At line:1 char:1
+ Invoke-WebRequest -Uri "https://wolf.law.uw.edu/casestrainer/api/anal ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.HttpWebRequest:HttpWebRequest) [Invoke-WebRequest], W
   ebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand
]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-nginx-prod --tail 20

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker inspect casestrainer-backend-prod | Select-String -Pattern "IPAddress"

            "SecondaryIPAddresses": null,
            "IPAddress": "",
                    "IPAddress": "172.18.0.7",


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod netstat -tlnp

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod ps aux

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod curl -X POST "http://casestrainer-backend-prod:5000/casestrainer/api/analyze" -H "Content-Type: application/json" -d '{"text":"test"}'

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-nginx-prod curl -X POST "http://casestrainer-backend-prod:5000/casestrainer/api/analyze" -H "Content-Type: application/json" -d "{\"text\":\"test\"}"

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker logs casestrainer-backend-prod --tail 50 | Select-String -Pattern "JSON|parse|error"

2025-08-03 08:39:54 - src.vue_api_endpoints_updated - ERROR - [Request f6a8d67a-6d0e-419d-aeee-3e7a763be545]
Error: Error in JSON input handler: 400 Bad Request: The browser (or proxy) sent a request that this server could
not understand.
2025-08-03 08:39:54 - src.app_final_vue - WARNING - Body (truncated):
{"citations":[],"clusters":[],"details":"Error in JSON input handler: 400 Bad Request: The browser (or proxy)
sent a request that this server could not understand.","error":"Error in JSON input handle...
2025-08-03 08:39:59 - src.vue_api_endpoints_updated - INFO - [Request b34f2c63-3a57-4fff-9e2a-88ce1cfa60dd]
Content-Type: application/json
2025-08-03 08:39:59 - src.vue_api_endpoints_updated - DEBUG - [Request b34f2c63-3a57-4fff-9e2a-88ce1cfa60dd]
Headers: {'Host': 'casestrainer-backend-prod:5000', 'User-Agent': 'curl/7.88.1', 'Accept': '*/*', 'Content-Type':
'application/json', 'Content-Length': '2'}
2025-08-03 08:39:59 - src.vue_api_endpoints_updated - INFO - [Request b34f2c63-3a57-4fff-9e2a-88ce1cfa60dd]
Routing to JSON input handler
2025-08-03 08:39:59 - src.vue_api_endpoints_updated - ERROR - [Request b34f2c63-3a57-4fff-9e2a-88ce1cfa60dd]
Error in JSON input handler: 400 Bad Request: The browser (or proxy) sent a request that this server could not
understand.
  File "/usr/local/lib/python3.10/site-packages/werkzeug/wrappers/request.py", line 611, in get_json
    rv = self.json_module.loads(data)
  File "/usr/local/lib/python3.10/site-packages/flask/json/provider.py", line 187, in loads
    return json.loads(s, **kwargs)
  File "/usr/local/lib/python3.10/json/__init__.py", line 346, in loads
  File "/usr/local/lib/python3.10/json/decoder.py", line 337, in decode
  File "/usr/local/lib/python3.10/json/decoder.py", line 353, in raw_decode
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
  File "/usr/local/lib/python3.10/site-packages/flask/wrappers.py", line 214, in on_json_loading_failed
    return super().on_json_loading_failed(e)
  File "/usr/local/lib/python3.10/site-packages/werkzeug/wrappers/request.py", line 645, in on_json_loading_failed
    raise BadRequest(f"Failed to decode JSON object: {e}")
werkzeug.exceptions.BadRequest: 400 Bad Request: Failed to decode JSON object: Expecting property name enclosed
in double quotes: line 1 column 2 (char 1)
    result = await _handle_json_input(service, request_id, json_data or request.get_json())
  File "/usr/local/lib/python3.10/site-packages/werkzeug/wrappers/request.py", line 620, in get_json
    rv = self.on_json_loading_failed(e)
  File "/usr/local/lib/python3.10/site-packages/flask/wrappers.py", line 219, in on_json_loading_failed
2025-08-03 08:39:59 - src.vue_api_endpoints_updated - ERROR - [Request b34f2c63-3a57-4fff-9e2a-88ce1cfa60dd]
Error: Error in JSON input handler: 400 Bad Request: The browser (or proxy) sent a request that this server could
not understand.
2025-08-03 08:39:59 - src.app_final_vue - WARNING - Body (truncated):
{"citations":[],"clusters":[],"details":"Error in JSON input handler: 400 Bad Request: The browser (or proxy)
sent a request that this server could not understand.","error":"Error in JSON input handle...


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>echo '{"text":"test"}' > /tmp/test.json && docker exec casestrainer-nginx-prod curl -X POST "http://casestrainer-backend-prod:5000/casestrainer/api/analyze" -H "Content-Type: application/json" -d @/tmp/test.json
At line:1 char:41
+ echo '{"text":"test"}' > /tmp/test.json && docker exec casestrainer-n ...
+                                         ~~
The token '&&' is not a valid statement separator in this version.

At line:1 char:197
+ ... trainer/api/analyze" -H "Content-Type: application/json" -d @/tmp/tes ...
+                                                                 ~
Unrecognized token in source text.
At line:1 char:41
+ echo '{"text":"test"}' > /tmp/test.json && docker exec casestrainer-n ...
+                                         ~~
The token '&&' is not a valid statement separator in this version.

At line:1 char:197
+ ... trainer/api/analyze" -H "Content-Type: application/json" -d @/tmp/tes ...
+                                                                 ~
Unrecognized token in source text.
    + CategoryInfo          : ParserError: (:) [], ParentContainsErrorRecordException
    + FullyQualifiedErrorId : InvalidEndOfLine

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>python test_production_server.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>git status

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker images | Select-String "casestrainer"

casestrainer-rqworker3       latest     b8a8c2d19c60   5 minutes ago   2.13GB
casestrainer-rqworker2       latest     849ad9436824   5 minutes ago   2.13GB
casestrainer-backend         latest     ffecdddaf76e   5 minutes ago   2.13GB
casestrainer-rqworker        latest     e4143e9874df   5 minutes ago   2.13GB
casestrainer-frontend-prod   latest     ae0547a4c683   7 minutes ago   80.1MB


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker ps --format "table {{.Names}}\t{{.Image}}\t{{.CreatedAt}}"

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod grep -A 5 -B 5 "true_by_parallel.*metadata" /app/src/unified_citation_processor_v2.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker system df

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>docker exec casestrainer-backend-prod ls -la /app/src/unified_citation_processor_v2.py

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>.\cslaunch.ps1 -MenuOption 3
Transcript started, output file is D:\dev\casestrainer\logs\script_20250803_014302.log

=== Checking Docker Availability ===
[OK] Docker CLI is available: Docker version 28.3.2, build 578ccf6
[INFO] Docker is running in Linux containers mode
[OK] Docker Compose is available: Docker Compose version v2.38.2-desktop.1
[cslaunch] Running menu option 3...
Pruning unused Docker images and volumes for a clean build...

Building all images with --no-cache to ensure latest code...

Starting up containers...


[INFO] Full rebuild complete.
[INFO] If you are testing the frontend, please hard-refresh your browser (Ctrl+F5) to clear any cached JS/CSS.

Fatal Error: The term '//' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or if a path was included, verify that the path is correct and try again.
Check log file: D:\dev\casestrainer\logs\crash.log
]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
