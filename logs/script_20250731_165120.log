**********************
Windows PowerShell transcript start
Start time: 20250731165120
Username: NETID\jafrank
RunAs User: NETID\jafrank
Configuration Name: 
Machine: HAUMEA (Microsoft Windows NT 10.0.20348.0)
Host Application: powershell -ExecutionPolicy Bypass -File .\cslaunch.ps1
Process ID: 2812
PSVersion: 5.1.20348.3932
PSEdition: Desktop
PSCompatibleVersions: 1.0, 2.0, 3.0, 4.0, 5.0, 5.1.20348.3932
BuildVersion: 10.0.20348.3932
CLRVersion: 4.0.30319.42000
WSManStackVersion: 3.0
PSRemotingProtocolVersion: 2.3
SerializationVersion: 1.1.0.1
**********************
Transcript started, output file is D:\dev\casestrainer\logs\script_20250731_165120.log

=== Checking Docker Availability ===
[OK] Docker CLI is available: Docker version 28.3.2, build 578ccf6
[INFO] Docker is running in Linux containers mode
[OK] Docker Compose is available: Docker Compose version v2.38.2-desktop.1
[cslaunch] Starting interactive menu...

========================================
 Enhanced CaseStrainer Docker Launcher
                v1.3 (ENHANCED)
========================================

 1.  Quick Production Start (FASTEST)
    - Minimal checks, maximum speed

 2.  Smart Production Start (RECOMMENDED)
    - Intelligent build detection, balanced speed

 3.  Force Full Rebuild
    - Complete rebuild, use when needed

 4.   Advanced Diagnostics
 5.   Cache Management
 6.   Stop All Services
 7.  Quick Status Check
 8.  Run Production Server Test
 0.  Exit

TIP: Use option 1 for fastest startup!

Deleting all .pyc files and __pycache__ directories to prevent stale bytecode...
Analyzing code changes to determine rebuild strategy...
ðŸ„ Rebuilding backend image to ensure Python code changes are included...

=== Starting Docker Production Mode ===
Checking if Vue build is needed...
Vue build is up to date
OK Docker is running
OK Sufficient disk space (91.71 GB free)
Processing Vue frontend build...
Using cached Vue build check result: False
Vue build needed: False, ForceRebuild: False
OK Vue build up to date (skipping build)
Stopping existing Docker containers...
Running: docker-compose -f D:\dev\casestrainer\docker-compose.prod.yml down --timeout 30
Containers stopped successfully
Checking for any remaining 'casestrainer' containers...
No remaining 'casestrainer' containers found.

Starting Docker containers...
Code changes detected: Rebuilding affected containers...
Docker compose command: docker-compose -f D:\dev\casestrainer\docker-compose.prod.yml up -d --build
OK Docker containers started successfully
Waiting for containers to initialize...

Waiting for services to initialize...
OK All services are ready
  Backend (127.0.0.1:5001): UP, Redis (127.0.0.1:6380): UP, RQ Worker: HEALTHY

=== Docker Production Mode Ready ===
INFO Production Site:  https://wolf.law.uw.edu/casestrainer

Local Development URLs:
Backend API:    http://localhost:5001/casestrainer/api/
Frontend Prod:  http://localhost:8080/
Nginx (HTTP):   http://localhost:80/
Nginx (HTTPS):  https://localhost:443/
Local Frontend: https://localhost/casestrainer/
API Health:     https://localhost/casestrainer/api/health

Docker Commands:
  View logs:    docker-compose -f docker-compose.prod.yml logs [service]
  Stop all:     docker-compose -f docker-compose.prod.yml down
  Restart:      docker-compose -f docker-compose.prod.yml restart [service]

Running adaptive learning pipeline...
Starting adaptive learning pipeline...
Using enhanced adaptive learning pipeline...
Running adaptive learning pipeline...
âœ… Adaptive learning pipeline completed successfully
âœ… Adaptive learning completed successfully

Running post-startup validation...
  Testing API endpoints...
  âœ… API health check passed
  âŒ Text processing test failed after 3 attempts
WARNING: Post-startup validation failed - system may have issues

=== Starting Docker Production Mode ===
Checking if Vue build is needed...
Vue build is up to date
OK Docker is running
OK Sufficient disk space (91.71 GB free)
Processing Vue frontend build...
Using cached Vue build check result: False
Vue build needed: False, ForceRebuild: False
OK Vue build up to date (skipping build)
Stopping existing Docker containers...
Running: docker-compose -f D:\dev\casestrainer\docker-compose.prod.yml down --timeout 30
Containers stopped successfully
Checking for any remaining 'casestrainer' containers...
No remaining 'casestrainer' containers found.

Starting Docker containers...
Code changes detected: Rebuilding affected containers...
Docker compose command: docker-compose -f D:\dev\casestrainer\docker-compose.prod.yml up -d --build
OK Docker containers started successfully
Waiting for containers to initialize...

Waiting for services to initialize...
OK All services are ready
  Backend (127.0.0.1:5001): UP, Redis (127.0.0.1:6380): UP, RQ Worker: HEALTHY

=== Docker Production Mode Ready ===
INFO Production Site:  https://wolf.law.uw.edu/casestrainer

Local Development URLs:
Backend API:    http://localhost:5001/casestrainer/api/
Frontend Prod:  http://localhost:8080/
Nginx (HTTP):   http://localhost:80/
Nginx (HTTPS):  https://localhost:443/
Local Frontend: https://localhost/casestrainer/
API Health:     https://localhost/casestrainer/api/health

Docker Commands:
  View logs:    docker-compose -f docker-compose.prod.yml logs [service]
  Stop all:     docker-compose -f docker-compose.prod.yml down
  Restart:      docker-compose -f docker-compose.prod.yml restart [service]

Running adaptive learning pipeline...
Starting adaptive learning pipeline...
Using enhanced adaptive learning pipeline...
Running adaptive learning pipeline...
âœ… Adaptive learning pipeline completed successfully
âœ… Adaptive learning completed successfully

Running post-startup validation...
  Testing API endpoints...
  âœ… API health check passed
  âŒ Text processing test failed after 3 attempts
WARNING: Post-startup validation failed - system may have issues
Running production test suite...
[2025-07-31 16:54:12] âŒ Some production tests failed (exit code: 4)!

Last 30 lines of test output:
--maxfail=1 --disab ...
+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (D:\Python\Lib\s..
   .cope" is unset.:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError

The event loop scope for asynchronous fixtures will default to
the fixture caching scope. Future versions of pytest-asyncio
will default the loop scope for asynchronous fixtures to
function scope. Set the default fixture loop scope explicitly
in order to avoid unexpected behavior in the future. Valid
fixture loop scopes are: "function", "class", "module",
"package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_
SCOPE_UNSET))
============================= test session starts =============================
platform win32 -- Python 3.13.3, pytest-8.3.5, pluggy-1.6.0 -- D:\Python\python.exe
cachedir: .pytest_cache
metadata: {'Python': '3.13.3', 'Platform': 'Windows-2022Server-10.0.20348-SP0', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'asyncio': '1.0.0', 'cov': '6.1.1', 'html': '4.1.1', 'httpx': '0.35.0', 'metadata': '3.1.1', 'mock': '3.14.1', 'timeout': '2.4.0', 'xdist': '3.7.0'}}
rootdir: D:\dev\casestrainer
configfile: pytest.ini
plugins: anyio-4.9.0, asyncio-1.0.0, cov-6.1.1, html-4.1.1, httpx-0.35.0, metadata-3.1.1, mock-3.14.1, timeout-2.4.0, xdist-3.7.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
ERROR: file or directory not found: test_production_server.py

collecting ... collected 0 items

============================ no tests ran in 0.03s ============================

Full test log available at: D:\dev\casestrainer\logs\production_test.log
PS>TerminatingError(): "System error."
#1 [internal] load local bake definitions
#1 reading from stdin 354B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 1.62kB 0.0s done
#2 DONE 0.1s

#3 [internal] load metadata for docker.io/library/python:3.10-slim
#3 ...

#4 [auth] library/python:pull token for registry-1.docker.io
#4 DONE 0.0s

#3 [internal] load metadata for docker.io/library/python:3.10-slim
#3 DONE 1.5s

#5 [internal] load .dockerignore
#5 transferring context:
#5 transferring context: 908B 0.0s done
#5 DONE 0.1s

#6 [internal] load build context
#6 DONE 0.0s

#7 [ 1/15] FROM docker.io/library/python:3.10-slim@sha256:81f1cdb3770d54ecfdbddcc52c2125fce674c14a1d976dfd8f65dc0734f9c3c5
#7 resolve docker.io/library/python:3.10-slim@sha256:81f1cdb3770d54ecfdbddcc52c2125fce674c14a1d976dfd8f65dc0734f9c3c5 0.1s done
#7 DONE 0.1s

#6 [internal] load build context
#6 transferring context: 37.48kB 0.1s done
#6 DONE 0.1s

#8 [ 9/15] COPY --chown=app:app app/ /app/app/
#8 CACHED

#9 [ 8/15] COPY --chown=app:app src/ /app/src/
#9 CACHED

#10 [ 2/15] WORKDIR /app
#10 CACHED

#11 [ 3/15] COPY requirements.txt requirements.txt
#11 CACHED

#12 [ 5/15] RUN pip install --no-cache-dir -r requirements.txt
#12 CACHED

#13 [12/15] COPY --chown=app:app static/ /app/static/
#13 CACHED

#14 [13/15] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete
#14 CACHED

#15 [ 4/15] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*
#15 CACHED

#16 [11/15] COPY --chown=app:app templates/ /app/templates/
#16 CACHED

#17 [ 7/15] RUN useradd --create-home --shell /bin/bash app
#17 CACHED

#18 [10/15] COPY --chown=app:app config/ /app/config/
#18 CACHED

#19 [ 6/15] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*
#19 CACHED

#20 [14/15] RUN mkdir -p /app/logs && chown app:app /app/logs
#20 CACHED

#21 [15/15] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache
#21 CACHED

#22 exporting to image
#22 exporting layers 0.0s done
#22 exporting manifest sha256:316f6ce7ddad83f5328e3863426e9e08e843dc340994bcaa9ded3b8e90eb6af8 done
#22 exporting config sha256:f168be4301e7b1873b1092f0c1a7aa71915f48a737b207a44321d7c45f08b73a done
#22 exporting attestation manifest sha256:0da472c5d7a89d4b1db9293b5d67b45fa0e9654239f4cb97fdb880e29cc84baa
#22 exporting attestation manifest sha256:0da472c5d7a89d4b1db9293b5d67b45fa0e9654239f4cb97fdb880e29cc84baa 0.1s done
#22 exporting manifest list sha256:8b62e5d5931e153b1abe7605e6d2f3f9e7a4a465c5400fc5eac35b1f436f9ce3 0.0s done
#22 naming to docker.io/library/casestrainer-backend:latest
#22 naming to docker.io/library/casestrainer-backend:latest 0.0s done
#22 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done
#22 DONE 0.5s

#23 resolving provenance for metadata file
#23 DONE 0.1s
pytest.exe :
D:\Python\Lib\site-packages\pytest_asyncio\plugin.py:208:
PytestDeprecationWarning: The configuration option
"asyncio_default_fixture_loop_scope" is unset.
At D:\dev\casestrainer\cslaunch.ps1:2277 char:17
+ ...             & pytest test_production_server.py -v
--maxfail=1 --disab ...
+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (D:\Python\Lib\s..
   .cope" is unset.:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError

The event loop scope for asynchronous fixtures will default to
the fixture caching scope. Future versions of pytest-asyncio
will default the loop scope for asynchronous fixtures to
function scope. Set the default fixture loop scope explicitly
in order to avoid unexpected behavior in the future. Valid
fixture loop scopes are: "function", "class", "module",
"package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_
SCOPE_UNSET))
============================= test session starts =============================
platform win32 -- Python 3.13.3, pytest-8.3.5, pluggy-1.6.0 -- D:\Python\python.exe
cachedir: .pytest_cache
metadata: {'Python': '3.13.3', 'Platform': 'Windows-2022Server-10.0.20348-SP0', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'asyncio': '1.0.0', 'cov': '6.1.1', 'html': '4.1.1', 'httpx': '0.35.0', 'metadata': '3.1.1', 'mock': '3.14.1', 'timeout': '2.4.0', 'xdist': '3.7.0'}}
rootdir: D:\dev\casestrainer
configfile: pytest.ini
plugins: anyio-4.9.0, asyncio-1.0.0, cov-6.1.1, html-4.1.1, httpx-0.35.0, metadata-3.1.1, mock-3.14.1, timeout-2.4.0, xdist-3.7.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
ERROR: file or directory not found: test_production_server.py

collecting ... collected 0 items

============================ no tests ran in 0.03s ============================
PS>TerminatingError(): "System error."
**********************
Windows PowerShell transcript end
End time: 20250731165418
**********************
