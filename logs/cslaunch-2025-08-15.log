[2025-08-15 07:15:38] [INFO] CaseStrainer Production Launcher starting...
[2025-08-15 07:15:38] [INFO] Environment: Production, Mode: Auto
[2025-08-15 07:15:38] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-15 07:15:38] [INFO] Checking prerequisites...
[2025-08-15 07:15:38] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-15 07:15:38] [INFO] Auto-detecting deployment mode...
[2025-08-15 07:15:38] [INFO] Vue source files are newer than dist files - rebuild needed
[2025-08-15 07:15:38] [INFO] Vue source files are newer than dist - performing build and Fast restart
[2025-08-15 07:15:38] [INFO] Building Vue frontend...
[2025-08-15 07:15:47] [INFO] Auto-detected mode: Fast
[2025-08-15 07:15:47] [INFO] Starting deployment in Fast mode...
[2025-08-15 07:15:47] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-15 07:15:47] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-15 07:15:55] [DEBUG] Docker operation exit code: 0
[2025-08-15 07:15:55] [DEBUG] Docker output:  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-15 07:15:55] [INFO] Docker operation completed successfully: down
[2025-08-15 07:15:55] [INFO] Recent changes in src - will rebuild images
[2025-08-15 07:15:55] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-15 07:15:55] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-15 07:16:22] [DEBUG] Docker operation exit code: 0
[2025-08-15 07:16:22] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker2 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [frontend-prod internal] load build definition from Dockerfile.prod; #3 transferring dockerfile: 2.03kB 0.0s done; #3 DONE 0.1s; ; #4 [backend internal] load metadata for docker.io/library/python:3.10-slim; #4 ...; ; #5 [nginx internal] load build definition from Dockerfile; #5 transferring dockerfile: 652B 0.0s done; #5 DONE 0.1s; ; #4 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #4 ...; ; #6 [nginx internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B 0.0s done; #7 DONE 0.0s; ; #8 [nginx internal] load build context; #8 DONE 0.0s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.0s done; #9 DONE 0.1s; ; #8 [nginx internal] load build context; #8 transferring context: 97B done; #8 DONE 0.0s; ; #10 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #10 CACHED; ; #11 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #11 CACHED; ; #12 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #12 CACHED; ; #13 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #13 CACHED; ; #14 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #14 CACHED; ; #15 [nginx 2/8] RUN apk add --no-cache curl; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [auth] library/node:pull token for registry-1.docker.io; #17 DONE 0.0s; ; #18 [auth] library/python:pull token for registry-1.docker.io; #18 DONE 0.0s; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:d827faeee0e8e0232fafdd37b96bce6be6023af70177bebd900ae7908ee45336 0.1s done; #19 exporting manifest list sha256:30a05f5b03c0aece93f4ff8d3ac48cf3e74563a2da42528cf2c8fb5cb85612f6 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest; #19 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.1s done; #19 DONE 0.3s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.9s; ; #21 [nginx] resolving provenance for metadata file; #21 DONE 0.0s; ; #22 [frontend-prod internal] load .dockerignore; #22 transferring context: 834B 0.0s done; #22 DONE 0.0s; ; #4 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #4 DONE 0.9s; ; #23 [frontend-prod internal] load build context; #23 DONE 0.0s; ; #24 [rqworker3 internal] load .dockerignore; #24 transferring context: 908B 0.0s done; #24 transferring context: 908B 0.0s done; #24 DONE 0.0s; ; #25 [rqworker3 internal] load build context; #25 DONE 0.0s; ; #26 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #26 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #26 DONE 0.1s; ; #23 [frontend-prod internal] load build context; #23 transferring context: 27.16kB 0.0s done; #23 DONE 0.0s; ; #9 [frontend-prod production-stage 1/7] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.2s; ; #27 [backend  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #27 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #27 DONE 0.1s; ; #28 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #28 CACHED; ; #29 [frontend-prod build-stage  2/10] WORKDIR /app; #29 CACHED; ; #30 [frontend-prod build-stage  3/10] COPY package*.json ./; #30 CACHED; ; #31 [frontend-prod build-stage  5/10] COPY public/ public/; #31 CACHED; ; #25 [rqworker1 internal] load build context; #25 transferring context: 160.39kB 0.1s done; #25 DONE 0.2s; ; #32 [frontend-prod build-stage  6/10] COPY src/ src/; #32 DONE 0.2s; ; #33 [rqworker3  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #33 CACHED; ; #34 [rqworker3  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #34 CACHED; ; #35 [rqworker3  5/17] RUN pip install --no-cache-dir -r requirements.txt; #35 CACHED; ; #36 [rqworker3  2/17] WORKDIR /app; #36 CACHED; ; #37 [rqworker3  3/17] COPY requirements.txt requirements.txt; #37 CACHED; ; #38 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #38 CACHED; ; #39 [frontend-prod build-stage  7/10] COPY index.html .; #39 DONE 0.1s; ; #40 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #40 ...; ; #41 [frontend-prod build-stage  8/10] COPY vite.config.js .; #41 DONE 0.2s; ; #40 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #40 DONE 0.3s; ; #42 [rqworker1  9/17] COPY --chown=app:app app/ /app/app/; #42 DONE 0.2s; ; #43 [rqworker3 10/17] COPY --chown=app:app config/ /app/config/; #43 DONE 0.2s; ; #44 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #44 DONE 0.1s; ; #45 [backend 12/17] COPY --chown=app:app static/ /app/static/; #45 DONE 1.1s; ; #46 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #46 DONE 0.1s; ; #47 [rqworker1 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #47 DONE 0.5s; ; #48 [rqworker1 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #48 DONE 0.5s; ; #49 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #49 DONE 0.4s; ; #50 [rqworker2 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #50 DONE 0.5s; ; #51 [rqworker1] exporting to image; #51 exporting layers 4.5s done; #51 exporting manifest sha256:b32408119c1369960b8f9edc56e908281e5eb2978ccf33a654449b813f5f3c32; #51 exporting manifest sha256:b32408119c1369960b8f9edc56e908281e5eb2978ccf33a654449b813f5f3c32 0.1s done; #51 exporting config sha256:44cfccec12f37fa2d961caafcb59f043db0a6de633539ce8096980db0907a6e1; #51 exporting config sha256:44cfccec12f37fa2d961caafcb59f043db0a6de633539ce8096980db0907a6e1 0.1s done; #51 exporting attestation manifest sha256:044aab41a7d08f154c23d2e1824cdb642f28a78eb5ede914340718dce5e2b788; #51 exporting attestation manifest sha256:044aab41a7d08f154c23d2e1824cdb642f28a78eb5ede914340718dce5e2b788 0.3s done; #51 exporting manifest list sha256:f2cdd432fad1d8a61ced35e0258b9ae32265fe0f77780231a1618d75b709c3de; #51 exporting manifest list sha256:f2cdd432fad1d8a61ced35e0258b9ae32265fe0f77780231a1618d75b709c3de 0.1s done; #51 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #51 unpacking to docker.io/library/casestrainer-rqworker1:latest; #51 ...; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 0.998 ; #52 0.998 > casestrainer-vue-new@0.6.5 build; #52 0.998 > vite build; #52 0.998 ; #52 2.072 vite v6.3.5 building for production...; #52 2.710 transforming...; #52 8.541 G£ô 139 modules transformed.; #52 ...; ; #53 [rqworker2] exporting to image; #53 exporting layers 4.5s done; #53 exporting manifest sha256:a3d8facb804e72fadd96909904f18b1541850fc675ca8f006e78a285ffd06ede 0.1s done; #53 exporting config sha256:1b6ac0eb6af4219b6cae9a22db506cc76ccd78c2f34632552cdbfc031f438c53 0.1s done; #53 exporting attestation manifest sha256:94a52f906106b9e90c54c2dbdb456a333ba8a1bfcb14ebf3a82f3756065aa868 0.3s done; #53 exporting manifest list sha256:2f369baf42466d03d1278df99cebb88b40591c912755b1a09385e85106cf52ff 0.1s done; #53 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #53 unpacking to docker.io/library/casestrainer-rqworker2:latest; #53 ...; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 11.46 rendering chunks...; #52 ...; ; #54 [backend] exporting to image; #54 exporting layers 4.5s done; #54 exporting manifest sha256:9776fbb6f63105982d8a8a1b3b55037accd4f4256a0b10e63815e623ff6c615b 0.1s done; #54 exporting config sha256:d2fba5e93ba05216dd32479e6893d2c81ff6ab967f8ed77d63010cee47c38422 0.1s done; #54 exporting attestation manifest sha256:63659089a7a936dfcfa66b9cb2744d1ad41ce666c2b2e51af0318466097d87e1 0.3s done; #54 exporting manifest list sha256:7167ababf2b6c9dc60f1aa7d710234d3f54ab0083aa79fbce4b360d06bbc94f6 0.1s done; #54 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #54 unpacking to docker.io/library/casestrainer-backend:latest 3.7s done; #54 DONE 9.3s; ; #55 [rqworker3] exporting to image; #55 exporting layers 4.5s done; #55 exporting manifest sha256:b4127073a95a30d497cf5a41848eb52bd1e2225ddd0b99edf5cb3488135e0c1c 0.1s done; #55 exporting config sha256:17ee5a7c6aadf3026380c390328b23c534d8b9290383f7fe1e9d962716d5bf92 0.1s done; #55 exporting attestation manifest sha256:4d1ae7cbe67e905a828b81ec138f30b70ec96303a130c88cffb6fb98329ef5af 0.2s done; #55 exporting manifest list sha256:bab3938f001b99045b922b05f3d88e43583c74a4ddbf286a0001b9b1fb8b4d9b 0.1s done; #55 naming to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #55 unpacking to docker.io/library/casestrainer-rqworker3:latest 3.8s done; #55 DONE 9.3s; ; #53 [rqworker2] exporting to image; #53 unpacking to docker.io/library/casestrainer-rqworker2:latest 3.7s done; #53 DONE 9.3s; ; #51 [rqworker1] exporting to image; #51 unpacking to docker.io/library/casestrainer-rqworker1:latest 3.7s done; #51 DONE 9.3s; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 ...; ; #56 [backend] resolving provenance for metadata file; #56 DONE 0.2s; ; #57 [rqworker2] resolving provenance for metadata file; #57 DONE 0.5s; ; #58 [rqworker3] resolving provenance for metadata file; #58 DONE 0.2s; ; #59 [rqworker1] resolving provenance for metadata file; #59 DONE 0.1s; ; #52 [frontend-prod build-stage  9/10] RUN npm run build; #52 18.40 computing gzip size...; #52 18.42 dist/index.html                              0.91 kB Göé gzip:  0.46 kB; #52 18.42 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB Göé gzip:  0.07 kB; #52 18.42 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB Göé gzip:  0.07 kB; #52 18.42 dist/assets/NotFound-CrLUfTg_.css            1.01 kB Göé gzip:  0.45 kB; #52 18.42 dist/assets/Docs-La2G-zWQ.css                1.39 kB Göé gzip:  0.46 kB; #52 18.42 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB Göé gzip:  0.57 kB; #52 18.42 dist/assets/index-BJGmEP7K.css             276.13 kB Göé gzip: 39.00 kB; #52 18.42 dist/assets/Docs-C6UVXRX-.js                 1.01 kB Göé gzip:  0.56 kB; #52 18.42 dist/assets/WordPlugin-DcwYXWkp.js           1.20 kB Göé gzip:  0.71 kB; #52 18.42 dist/assets/BrowserExtension-oPKH-QOW.js     1.22 kB Göé gzip:  0.73 kB; #52 18.43 dist/assets/NotFound-Coe9gIgW.js             1.89 kB Göé gzip:  0.92 kB; #52 18.43 dist/assets/ApiDocs-Z5jI_-Gp.js             23.31 kB Göé gzip:  4.00 kB; #52 18.43 dist/assets/vendor-C-1G2k3o.js              34.93 kB Göé gzip: 13.58 kB; #52 18.43 dist/assets/vue-DOX4hRq3.js                 91.40 kB Göé gzip: 34.95 kB; #52 18.43 dist/assets/index-DQb_Fn4p.js              159.57 kB Göé gzip: 47.11 kB; #52 18.43 G£ô built in 16.18s; #52 DONE 19.0s; ; #60 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #60 DONE 0.3s; ; #9 [frontend-prod production-stage 1/7] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 CACHED; ; #61 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #61 DONE 0.1s; ; #62 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #62 DONE 0.5s; ; #63 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #63 DONE 0.1s; ; #64 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #64 DONE 0.1s; ; #65 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #65 DONE 0.4s; ; #66 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #66 DONE 0.5s; ; #67 [frontend-prod] exporting to image; #67 exporting layers; #67 exporting layers 0.5s done; #67 exporting manifest sha256:25dffe3388b8c58704a46e5544259ae3643fe47bd53d93d4432d2dc8c7114d61 0.0s done; #67 exporting config sha256:c0c571295bc2b77c7fbcfbce43bf274caae38d734617543c11d8697aa9ba86c0 0.0s done; #67 exporting attestation manifest sha256:9bbaac5b8c95b8295b37a73b62c645fed18a6a25224e30735a97af8721085f26; #67 exporting attestation manifest sha256:9bbaac5b8c95b8295b37a73b62c645fed18a6a25224e30735a97af8721085f26 0.1s done; #67 exporting manifest list sha256:6c1dc8cdf3473f7df2439d319aaf355553ae73cd3e4993b7860f34c14c580885 0.0s done; #67 naming to docker.io/library/casestrainer-frontend-prod:latest done; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.2s done; #67 DONE 1.0s; ; #68 [frontend-prod] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built
[2025-08-15 07:16:22] [INFO] Docker operation completed successfully: build
[2025-08-15 07:16:22] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-15 07:16:37] [DEBUG] Docker operation exit code: 0
[2025-08-15 07:16:37] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-15 07:16:37] [INFO] Docker operation completed successfully: up
[2025-08-15 07:16:37] [INFO] Waiting for containers to stabilize...
[2025-08-15 07:16:47] [INFO] Performing application health check...
[2025-08-15 07:16:47] [INFO] Application health check passed
[2025-08-15 07:16:47] [INFO] Deployment completed successfully!
[2025-08-15 07:16:47] [INFO] Containers running: 7
[2025-08-15 07:16:47] [DEBUG] Launcher execution completed
[2025-08-15 07:22:22] [INFO] CaseStrainer Production Launcher starting...
[2025-08-15 07:22:22] [INFO] Environment: Production, Mode: Auto
[2025-08-15 07:22:22] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-15 07:22:22] [INFO] Checking prerequisites...
[2025-08-15 07:22:22] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-15 07:22:22] [INFO] Auto-detecting deployment mode...
[2025-08-15 07:22:23] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-15 07:22:23] [INFO] Recent code changes detected - recommending Fast start
[2025-08-15 07:22:23] [INFO] Auto-detected mode: Fast
[2025-08-15 07:22:23] [INFO] Starting deployment in Fast mode...
[2025-08-15 07:22:23] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-15 07:22:23] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-15 07:22:41] [DEBUG] Docker operation exit code: 0
[2025-08-15 07:22:41] [DEBUG] Docker output:  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-15 07:22:41] [INFO] Docker operation completed successfully: down
[2025-08-15 07:22:41] [INFO] Recent changes in src - will rebuild images
[2025-08-15 07:22:41] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-15 07:22:41] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-15 07:22:57] [DEBUG] Docker operation exit code: 0
[2025-08-15 07:22:57] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [nginx internal] load build definition from Dockerfile; #2 transferring dockerfile: 652B done; #2 DONE 0.0s; ; #3 [backend internal] load build definition from Dockerfile; #3 transferring dockerfile: 1.80kB 0.0s done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB done; #4 DONE 0.1s; ; #5 [backend internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B done; #7 DONE 0.0s; ; #8 [auth] library/python:pull token for registry-1.docker.io; #8 DONE 0.0s; ; #9 [auth] library/node:pull token for registry-1.docker.io; #9 DONE 0.0s; ; #10 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.0s done; #10 DONE 0.1s; ; #11 [nginx internal] load build context; #11 transferring context: 97B done; #11 DONE 0.0s; ; #12 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #12 CACHED; ; #13 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #13 CACHED; ; #14 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #14 CACHED; ; #15 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #15 CACHED; ; #16 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #16 CACHED; ; #17 [nginx 2/8] RUN apk add --no-cache curl; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:c5dfc345ec47488786291237b9e1542206aea28c6472414181a59463c5b07d85; #19 exporting attestation manifest sha256:c5dfc345ec47488786291237b9e1542206aea28c6472414181a59463c5b07d85 0.1s done; #19 exporting manifest list sha256:7f71a7f7320be73e3e0246b5dd87f9999b63dc3ca43c6015c103d0bf09be8a3d 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.3s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.7s; ; #5 [backend internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.0s done; #10 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #23 [nginx] resolving provenance for metadata file; #23 DONE 0.0s; ; #5 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 0.8s; ; #24 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #24 DONE 0.1s; ; #25 [rqworker1 internal] load .dockerignore; #25 transferring context: 908B 0.0s done; #25 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 4.14kB 0.0s done; #22 DONE 0.0s; ; #26 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #26 CACHED; ; #27 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #27 CACHED; ; #28 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #28 CACHED; ; #29 [frontend-prod build-stage  7/10] COPY index.html .; #29 CACHED; ; #30 [frontend-prod build-stage  2/10] WORKDIR /app; #30 CACHED; ; #31 [frontend-prod build-stage  9/10] RUN npm run build; #31 CACHED; ; #32 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #32 CACHED; ; #33 [frontend-prod build-stage  8/10] COPY vite.config.js .; #33 CACHED; ; #34 [frontend-prod build-stage  6/10] COPY src/ src/; #34 CACHED; ; #35 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #35 CACHED; ; #36 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #36 CACHED; ; #37 [frontend-prod build-stage  5/10] COPY public/ public/; #37 CACHED; ; #38 [frontend-prod build-stage  3/10] COPY package*.json ./; #38 CACHED; ; #39 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #39 CACHED; ; #40 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #40 CACHED; ; #41 [backend  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #41 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #41 DONE 0.1s; ; #42 [backend internal] load build context; #42 transferring context: 234.68kB 0.2s done; #42 DONE 0.2s; ; #43 [rqworker1  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #43 CACHED; ; #44 [rqworker1  5/17] RUN pip install --no-cache-dir -r requirements.txt; #44 CACHED; ; #45 [rqworker1  2/17] WORKDIR /app; #45 CACHED; ; #46 [rqworker1  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #46 CACHED; ; #47 [rqworker1  3/17] COPY requirements.txt requirements.txt; #47 CACHED; ; #48 [backend  7/17] RUN useradd --create-home --shell /bin/bash app; #48 CACHED; ; #49 [frontend-prod] exporting to image; #49 exporting layers 0.0s done; #49 exporting manifest sha256:25dffe3388b8c58704a46e5544259ae3643fe47bd53d93d4432d2dc8c7114d61 done; #49 exporting config sha256:c0c571295bc2b77c7fbcfbce43bf274caae38d734617543c11d8697aa9ba86c0 0.0s done; #49 exporting attestation manifest sha256:064366ad1366882f1a3b79bc301d7127bdde0fe0c70c6236ba09c4a15916364a 0.1s done; #49 exporting manifest list sha256:1707100a1b341d1a04c69aa2abf2995e85b0e17c14182ee6fbadbc56377eaf85 0.0s done; #49 naming to docker.io/library/casestrainer-frontend-prod:latest done; #49 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #49 DONE 0.4s; ; #50 [backend  8/17] COPY --chown=app:app src/ /app/src/; #50 DONE 0.5s; ; #51 [frontend-prod] resolving provenance for metadata file; #51 DONE 0.0s; ; #52 [rqworker1  9/17] COPY --chown=app:app app/ /app/app/; #52 DONE 0.1s; ; #52 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #52 DONE 0.1s; ; #53 [rqworker3 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.1s; ; #53 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.1s; ; #54 [rqworker3 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.1s; ; #54 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.1s; ; #55 [rqworker3 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 1.1s; ; #55 [rqworker3 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 1.1s; ; #56 [rqworker3 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.1s; ; #56 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.1s; ; #57 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.5s; ; #57 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.5s; ; #58 [rqworker2 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.5s; ; #58 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.5s; ; #59 [rqworker1 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.4s; ; #59 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.4s; ; #60 [backend 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.4s; ; #60 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.4s; ; #61 [rqworker2] exporting to image; #61 exporting layers 3.7s done; #61 exporting manifest sha256:bfb2d2f5a32170b1243250906d5308980f094b9238f5f716f933c3a78b301889 0.1s done; #61 exporting config sha256:709a5bf5ba0174dd667c322fe203489dedebd799bc5c0ae0b7be94fa3c848005; #61 exporting config sha256:709a5bf5ba0174dd667c322fe203489dedebd799bc5c0ae0b7be94fa3c848005 0.1s done; #61 exporting attestation manifest sha256:520cc86949d8ebb82ef7c7e7746479b72a8ffa6375d5da19812e40d38c98e0d0; #61 exporting attestation manifest sha256:520cc86949d8ebb82ef7c7e7746479b72a8ffa6375d5da19812e40d38c98e0d0 0.2s done; #61 exporting manifest list sha256:8e83b7942b8014a690d03085d09f95e3ba88f4b1da7e1bd9848c4c2828081e64; #61 exporting manifest list sha256:8e83b7942b8014a690d03085d09f95e3ba88f4b1da7e1bd9848c4c2828081e64 0.1s done; #61 naming to docker.io/library/casestrainer-rqworker2:latest; #61 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #61 unpacking to docker.io/library/casestrainer-rqworker2:latest; #61 ...; ; #62 [backend] exporting to image; #62 exporting layers 3.7s done; #62 exporting manifest sha256:49c0f957a4e6b2fc4ebb873cfeb608cadfdcbe53c7886d960af798dd61963859 0.1s done; #62 exporting config sha256:620891a57d552fa2f6729aa316e2229fef77392db195d10a8e5a10b9adb35edc 0.1s done; #62 exporting attestation manifest sha256:c2c7361a471cf563c4fee0a4c51ab79e43939f649692996b9ca0b9264fd92670 0.2s done; #62 exporting manifest list sha256:37ed420b07cea5b11033e74e8ac70bebf3ab2d1b627d59de2d25ccd28760052e 0.1s done; #62 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #62 unpacking to docker.io/library/casestrainer-backend:latest 2.8s done; #62 DONE 7.4s; ; #61 [rqworker2] exporting to image; #61 unpacking to docker.io/library/casestrainer-rqworker2:latest 2.8s done; #61 DONE 7.4s; ; #63 [rqworker3] exporting to image; #63 exporting layers 3.7s done; #63 exporting manifest sha256:913e37b9a65136c829d188cee7f5eedeebbeb093dbaf8eb9f00cd6e1a8ea5c6f 0.1s done; #63 exporting config sha256:9031e44d5663f296559cbc28d00d6d9fd0e0c5e928b9c123c03309eed53f9e88 0.1s done; #63 exporting attestation manifest sha256:72ace414341f69125e2e79bb27f03c86c6a15e92b8a056b2bdddf6fcfe2ab21d 0.2s done; #63 exporting manifest list sha256:b256f6a75d26fa8eb8d5ce0451a40da9dd271a7ea3021b916f5085f88232f973 0.1s done; #63 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #63 unpacking to docker.io/library/casestrainer-rqworker3:latest 2.8s done; #63 DONE 7.4s; ; #64 [rqworker1] exporting to image; #64 exporting layers 3.7s done; #64 exporting manifest sha256:646b774978744d76b3de134675d1f0154f0431934995bb57c78b635c08f67b93 0.1s done; #64 exporting config sha256:979430fdd2d40beec764d01ce0ae34778405b3c25ef72427c993175150b41ae9 0.1s done; #64 exporting attestation manifest sha256:5829af153533f6881eb47e3807103cf7ab8f871e7e6833919815003ca2493dcb 0.2s done; #64 exporting manifest list sha256:dd335dd162cfb4f0b5052986c39f80b0c246dece10e5cdc64d9cc8d9ba4f9452 0.1s done; #64 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #64 unpacking to docker.io/library/casestrainer-rqworker1:latest 2.8s done; #64 DONE 7.4s; ; #65 [backend] resolving provenance for metadata file; #65 DONE 0.1s; ; #66 [rqworker1] resolving provenance for metadata file; #66 DONE 0.1s; ; #67 [rqworker3] resolving provenance for metadata file; #67 DONE 0.2s; ; #68 [rqworker2] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built
[2025-08-15 07:22:57] [INFO] Docker operation completed successfully: build
[2025-08-15 07:22:57] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-15 07:23:13] [DEBUG] Docker operation exit code: 0
[2025-08-15 07:23:13] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-15 07:23:13] [INFO] Docker operation completed successfully: up
[2025-08-15 07:23:13] [INFO] Waiting for containers to stabilize...
[2025-08-15 07:23:24] [INFO] Performing application health check...
[2025-08-15 07:23:24] [INFO] Application health check passed
[2025-08-15 07:23:24] [INFO] Deployment completed successfully!
[2025-08-15 07:23:24] [INFO] Containers running: 7
[2025-08-15 07:23:24] [DEBUG] Launcher execution completed
[2025-08-15 07:33:50] [INFO] CaseStrainer Production Launcher starting...
[2025-08-15 07:33:50] [INFO] Environment: Production, Mode: Auto
[2025-08-15 07:33:50] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-15 07:33:50] [INFO] Checking prerequisites...
[2025-08-15 07:33:50] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-15 07:33:50] [INFO] Auto-detecting deployment mode...
[2025-08-15 07:33:51] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-15 07:33:51] [INFO] Recent code changes detected - recommending Fast start
[2025-08-15 07:33:51] [INFO] Auto-detected mode: Fast
[2025-08-15 07:33:51] [INFO] Starting deployment in Fast mode...
[2025-08-15 07:33:51] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-15 07:33:51] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-15 07:33:54] [DEBUG] Docker operation exit code: 0
[2025-08-15 07:33:54] [DEBUG] Docker output:  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-15 07:33:54] [INFO] Docker operation completed successfully: down
[2025-08-15 07:33:54] [INFO] Recent changes in src - will rebuild images
[2025-08-15 07:33:54] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-15 07:33:54] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-15 07:34:18] [DEBUG] Docker operation exit code: 0
[2025-08-15 07:34:18] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker2 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [frontend-prod internal] load build definition from Dockerfile.prod; #3 transferring dockerfile: 2.03kB 0.0s done; #3 DONE 0.1s; ; #4 [nginx internal] load build definition from Dockerfile; #4 transferring dockerfile: 652B 0.0s done; #4 DONE 0.1s; ; #2 [backend internal] load build definition from Dockerfile; #2 DONE 0.1s; ; #5 [auth] library/node:pull token for registry-1.docker.io; #5 DONE 0.0s; ; #6 [auth] library/python:pull token for registry-1.docker.io; #6 DONE 0.0s; ; #7 [nginx internal] load metadata for docker.io/library/nginx:alpine; #7 DONE 0.1s; ; #8 [nginx internal] load .dockerignore; #8 transferring context: 2B done; #8 DONE 0.0s; ; #9 [nginx internal] load build context; #9 DONE 0.0s; ; #10 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #9 [nginx internal] load build context; #9 transferring context: 97B done; #9 DONE 0.0s; ; #11 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #11 CACHED; ; #12 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #12 CACHED; ; #13 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #13 CACHED; ; #14 [nginx 2/8] RUN apk add --no-cache curl; #14 CACHED; ; #15 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #15 CACHED; ; #16 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #16 CACHED; ; #17 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #17 CACHED; ; #18 [nginx] exporting to image; #18 exporting layers 0.0s done; #18 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af 0.0s done; #18 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #18 exporting attestation manifest sha256:86e81e416ec53c9dfc830e542dff06a53944907527fbb83fade373889607ae2e; #18 exporting attestation manifest sha256:86e81e416ec53c9dfc830e542dff06a53944907527fbb83fade373889607ae2e 0.1s done; #18 exporting manifest list sha256:e728400ada872f49099f14d841251022ab751d35b684b7b63df57de0b96cdac1 0.0s done; #18 naming to docker.io/library/casestrainer-nginx:latest; #18 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #18 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #18 DONE 0.3s; ; #19 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #19 ...; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.8s; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B done; #21 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #19 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #19 DONE 0.9s; ; #23 [backend internal] load .dockerignore; #23 transferring context: 908B 0.0s done; #23 DONE 0.1s; ; #24 [rqworker1 internal] load build context; #24 DONE 0.0s; ; #25 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #25 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #25 ...; ; #26 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #26 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #26 DONE 0.2s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 70.13kB 0.0s done; #22 DONE 0.1s; ; #25 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #25 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #25 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #25 DONE 0.1s; ; #27 [nginx] resolving provenance for metadata file; #27 DONE 0.0s; ; #28 [frontend-prod build-stage  3/10] COPY package*.json ./; #28 CACHED; ; #29 [frontend-prod build-stage  2/10] WORKDIR /app; #29 CACHED; ; #30 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #30 CACHED; ; #31 [frontend-prod build-stage  5/10] COPY public/ public/; #31 CACHED; ; #24 [rqworker2 internal] load build context; #24 transferring context: 206.09kB 0.3s done; #24 transferring context: 206.09kB 0.3s done; #24 DONE 0.5s; ; #32 [frontend-prod build-stage  6/10] COPY src/ src/; #32 DONE 0.5s; ; #24 [rqworker2 internal] load build context; #24 DONE 0.5s; ; #33 [rqworker3 11/17] COPY --chown=app:app templates/ /app/templates/; #33 CACHED; ; #34 [rqworker3  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #34 CACHED; ; #35 [rqworker3  9/17] COPY --chown=app:app app/ /app/app/; #35 CACHED; ; #36 [rqworker3 12/17] COPY --chown=app:app static/ /app/static/; #36 CACHED; ; #37 [rqworker3  8/17] COPY --chown=app:app src/ /app/src/; #37 CACHED; ; #38 [rqworker3  5/17] RUN pip install --no-cache-dir -r requirements.txt; #38 CACHED; ; #39 [rqworker3  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #39 CACHED; ; #40 [rqworker3  2/17] WORKDIR /app; #40 CACHED; ; #41 [rqworker3 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #41 CACHED; ; #42 [rqworker3  3/17] COPY requirements.txt requirements.txt; #42 CACHED; ; #43 [rqworker3  7/17] RUN useradd --create-home --shell /bin/bash app; #43 CACHED; ; #44 [rqworker3 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #44 CACHED; ; #45 [rqworker3 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #45 CACHED; ; #46 [rqworker3 10/17] COPY --chown=app:app config/ /app/config/; #46 CACHED; ; #47 [rqworker3 13/17] COPY --chown=app:app VERSION /app/VERSION; #47 CACHED; ; #48 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #48 CACHED; ; #49 [backend] exporting to image; #49 exporting layers 0.0s done; #49 exporting manifest sha256:49c0f957a4e6b2fc4ebb873cfeb608cadfdcbe53c7886d960af798dd61963859 0.0s done; #49 exporting config sha256:620891a57d552fa2f6729aa316e2229fef77392db195d10a8e5a10b9adb35edc 0.0s done; #49 ...; ; #50 [frontend-prod build-stage  7/10] COPY index.html .; #50 DONE 0.3s; ; #49 [backend] exporting to image; #49 exporting attestation manifest sha256:7375d68a13ba66a0a0aa2b40092a2f33b14b76f40f5321680b46aa4b77b01a9e; #49 exporting attestation manifest sha256:7375d68a13ba66a0a0aa2b40092a2f33b14b76f40f5321680b46aa4b77b01a9e 0.4s done; #49 exporting manifest list sha256:acaedad59e278b67d4c454d6a6139b7a83915b0ccacf18d545f10534099d5039; #49 ...; ; #51 [frontend-prod build-stage  8/10] COPY vite.config.js .; #51 DONE 0.6s; ; #49 [backend] exporting to image; #49 exporting manifest list sha256:acaedad59e278b67d4c454d6a6139b7a83915b0ccacf18d545f10534099d5039 0.2s done; #49 naming to docker.io/library/casestrainer-backend:latest; #49 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #49 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #49 DONE 1.2s; ; #52 [rqworker1] exporting to image; #52 exporting layers 0.0s done; #52 exporting manifest sha256:646b774978744d76b3de134675d1f0154f0431934995bb57c78b635c08f67b93 0.0s done; #52 exporting config sha256:979430fdd2d40beec764d01ce0ae34778405b3c25ef72427c993175150b41ae9 0.0s done; #52 exporting attestation manifest sha256:9fa555baf6f5b2d34e050f5785876240bd5712a7e09108df8944e0e435eeebf6 0.3s done; #52 exporting manifest list sha256:47e655f32e07fe90a83fff48f085f812b74aac454305c44e88f6cce0bbb5873e 0.3s done; #52 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #52 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #52 DONE 1.1s; ; #53 [rqworker3] exporting to image; #53 exporting layers 0.0s done; #53 exporting manifest sha256:913e37b9a65136c829d188cee7f5eedeebbeb093dbaf8eb9f00cd6e1a8ea5c6f 0.0s done; #53 exporting config sha256:9031e44d5663f296559cbc28d00d6d9fd0e0c5e928b9c123c03309eed53f9e88 0.1s done; #53 exporting attestation manifest sha256:d2377699d69668d26ba9bd1b3f31b7e76ac23096b743dcf1b2ad1e8caf0d9dd7 0.5s done; #53 exporting manifest list sha256:b13c96370c1b9cc144282218e1241fa9961111edf20e30ae38197c5fa7a0c174 0.1s done; #53 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #53 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #53 DONE 1.2s; ; #54 [rqworker2] exporting to image; #54 exporting layers 0.0s done; #54 exporting manifest sha256:bfb2d2f5a32170b1243250906d5308980f094b9238f5f716f933c3a78b301889 0.0s done; #54 exporting config sha256:709a5bf5ba0174dd667c322fe203489dedebd799bc5c0ae0b7be94fa3c848005 0.0s done; #54 exporting attestation manifest sha256:d07dadf4f12eb6b7644081b0f2853b13e5d84478342ba4870f45aac3a433260d 0.5s done; #54 exporting manifest list sha256:34d15e7687d8352e72139b0f4bc5d1c7fa92fde062a282eb600b53b48979aa53 0.2s done; #54 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #54 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #54 DONE 1.2s; ; #55 [frontend-prod build-stage  9/10] RUN npm run build; #55 ...; ; #56 [rqworker1] resolving provenance for metadata file; #56 DONE 0.2s; ; #57 [rqworker2] resolving provenance for metadata file; #57 DONE 0.1s; ; #55 [frontend-prod build-stage  9/10] RUN npm run build; #55 1.296 ; #55 1.296 > casestrainer-vue-new@0.6.5 build; #55 1.296 > vite build; #55 1.296 ; #55 ...; ; #58 [backend] resolving provenance for metadata file; #58 DONE 0.3s; ; #59 [rqworker3] resolving provenance for metadata file; #59 DONE 0.0s; ; #55 [frontend-prod build-stage  9/10] RUN npm run build; #55 2.450 vite v6.3.5 building for production...; #55 3.276 transforming...; #55 8.384 G£ô 139 modules transformed.; #55 9.601 rendering chunks...; #55 14.07 computing gzip size...; #55 14.10 dist/index.html                              0.91 kB Göé gzip:  0.46 kB; #55 14.10 dist/assets/BrowserExtension-D7DMnBaO.css    0.05 kB Göé gzip:  0.07 kB; #55 14.10 dist/assets/WordPlugin-i1tv7U98.css          0.05 kB Göé gzip:  0.07 kB; #55 14.10 dist/assets/NotFound-CrLUfTg_.css            1.01 kB Göé gzip:  0.45 kB; #55 14.10 dist/assets/Docs-La2G-zWQ.css                1.39 kB Göé gzip:  0.46 kB; #55 14.10 dist/assets/ApiDocs-HlSfV-mw.css             2.20 kB Göé gzip:  0.57 kB; #55 14.10 dist/assets/index-rULwTk_e.css             276.13 kB Göé gzip: 39.00 kB; #55 14.10 dist/assets/Docs-C-RMosxJ.js                 1.01 kB Göé gzip:  0.56 kB; #55 14.10 dist/assets/WordPlugin-WGDtw1oo.js           1.20 kB Göé gzip:  0.71 kB; #55 14.10 dist/assets/BrowserExtension-CgezA8Rt.js     1.22 kB Göé gzip:  0.73 kB; #55 14.10 dist/assets/NotFound-D0-ZlB3q.js             1.89 kB Göé gzip:  0.92 kB; #55 14.10 dist/assets/ApiDocs-D_AwgdRi.js             23.31 kB Göé gzip:  4.00 kB; #55 14.10 dist/assets/vendor-C-1G2k3o.js              34.93 kB Göé gzip: 13.58 kB; #55 14.10 dist/assets/vue-DOX4hRq3.js                 91.40 kB Göé gzip: 34.95 kB; #55 14.10 dist/assets/index-Xc4wQ511.js              159.76 kB Göé gzip: 47.15 kB; #55 14.10 G£ô built in 11.38s; #55 DONE 14.4s; ; #60 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #60 DONE 0.4s; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 CACHED; ; #61 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #61 DONE 0.1s; ; #62 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #62 DONE 0.4s; ; #63 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #63 DONE 0.1s; ; #64 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #64 DONE 0.2s; ; #65 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #65 DONE 0.4s; ; #66 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #66 DONE 0.5s; ; #67 [frontend-prod] exporting to image; #67 exporting layers; #67 exporting layers 0.8s done; #67 exporting manifest sha256:c1836ea5127fe3358856f58cbc74c4198108ef080705cf95d1c2305c4ffbf6f7 0.0s done; #67 exporting config sha256:cd5585c9e33a62b59500b700963413683d1df872372d8b4428c999a8c03d9350 0.0s done; #67 exporting attestation manifest sha256:824a499f17fb666a2f0415f7d05542400a9d721a13377ff85cffd55f4afb44ba; #67 exporting attestation manifest sha256:824a499f17fb666a2f0415f7d05542400a9d721a13377ff85cffd55f4afb44ba 0.1s done; #67 exporting manifest list sha256:6af17b2f7a53bd503e5f34fa7a2830f70e59659f53066e812fd25ddb5cf1d8b2 0.0s done; #67 naming to docker.io/library/casestrainer-frontend-prod:latest; #67 naming to docker.io/library/casestrainer-frontend-prod:latest done; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest; #67 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.3s done; #67 DONE 1.4s; ; #68 [frontend-prod] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built
[2025-08-15 07:34:18] [INFO] Docker operation completed successfully: build
[2025-08-15 07:34:18] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-15 07:34:33] [DEBUG] Docker operation exit code: 0
[2025-08-15 07:34:33] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-15 07:34:33] [INFO] Docker operation completed successfully: up
[2025-08-15 07:34:33] [INFO] Waiting for containers to stabilize...
[2025-08-15 07:34:43] [INFO] Performing application health check...
[2025-08-15 07:34:43] [INFO] Application health check passed
[2025-08-15 07:34:43] [INFO] Deployment completed successfully!
[2025-08-15 07:34:43] [INFO] Containers running: 7
[2025-08-15 07:34:43] [DEBUG] Launcher execution completed
[2025-08-15 15:20:26] [INFO] CaseStrainer Production Launcher starting...
[2025-08-15 15:20:26] [INFO] Environment: Production, Mode: Auto
[2025-08-15 15:20:26] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-15 15:20:26] [INFO] Checking prerequisites...
[2025-08-15 15:20:26] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-15 15:20:26] [INFO] Auto-detecting deployment mode...
[2025-08-15 15:20:27] [INFO] Vue source files are newer than dist files - rebuild needed
[2025-08-15 15:20:27] [INFO] Vue source files are newer than dist - performing build and Fast restart
[2025-08-15 15:20:27] [INFO] Building Vue frontend...
[2025-08-15 15:20:36] [INFO] Auto-detected mode: Fast
[2025-08-15 15:20:36] [INFO] Starting deployment in Fast mode...
[2025-08-15 15:20:36] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-15 15:20:36] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-15 15:20:40] [DEBUG] Docker operation exit code: 0
[2025-08-15 15:20:40] [DEBUG] Docker output:  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-15 15:20:40] [INFO] Docker operation completed successfully: down
[2025-08-15 15:20:40] [INFO] Recent changes in src - will rebuild images
[2025-08-15 15:20:40] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-15 15:20:40] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-15 15:20:59] [DEBUG] Docker operation exit code: 0
[2025-08-15 15:20:59] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [backend internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [frontend-prod internal] load build definition from Dockerfile.prod; #3 transferring dockerfile: 2.03kB 0.0s done; #3 DONE 0.1s; ; #4 [backend internal] load metadata for docker.io/library/python:3.10-slim; #4 ...; ; #5 [nginx internal] load build definition from Dockerfile; #5 transferring dockerfile: 652B done; #5 DONE 0.1s; ; #4 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #4 ...; ; #6 [nginx internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B done; #7 DONE 0.0s; ; #8 [nginx internal] load build context; #8 DONE 0.0s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 DONE 0.1s; ; #8 [nginx internal] load build context; #8 transferring context: 97B 0.0s done; #8 DONE 0.0s; ; #10 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #10 CACHED; ; #11 [nginx 2/8] RUN apk add --no-cache curl; #11 CACHED; ; #12 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #12 CACHED; ; #13 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #13 CACHED; ; #14 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #14 CACHED; ; #15 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [auth] library/node:pull token for registry-1.docker.io; #17 DONE 0.0s; ; #18 [auth] library/python:pull token for registry-1.docker.io; #18 DONE 0.0s; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:1a6474de554f44437377baf170e92ab36c55a555c53bd4f878249d95d44a0e33; #19 exporting attestation manifest sha256:1a6474de554f44437377baf170e92ab36c55a555c53bd4f878249d95d44a0e33 0.1s done; #19 exporting manifest list sha256:d763bffadd90c109558241ab292fcaab1fe8600dff481dac958bd43ab3288d51 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.3s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.8s; ; #4 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #4 ...; ; #9 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.1s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #4 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #4 DONE 1.0s; ; #23 [rqworker2 internal] load .dockerignore; #23 transferring context: 908B done; #23 DONE 0.0s; ; #24 [rqworker1 internal] load build context; #24 DONE 0.0s; ; #25 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #25 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.2s done; #25 DONE 0.2s; ; #26 [nginx] resolving provenance for metadata file; #26 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 70.13kB 0.0s done; #22 DONE 0.1s; ; #27 [rqworker2  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #27 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #27 DONE 0.1s; ; #28 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #28 CACHED; ; #29 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #29 CACHED; ; #30 [frontend-prod build-stage  9/10] RUN npm run build; #30 CACHED; ; #31 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #31 CACHED; ; #32 [frontend-prod build-stage  6/10] COPY src/ src/; #32 CACHED; ; #33 [frontend-prod build-stage  8/10] COPY vite.config.js .; #33 CACHED; ; #34 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #34 CACHED; ; #35 [frontend-prod build-stage  5/10] COPY public/ public/; #35 CACHED; ; #36 [frontend-prod build-stage  2/10] WORKDIR /app; #36 CACHED; ; #37 [frontend-prod build-stage  7/10] COPY index.html .; #37 CACHED; ; #38 [frontend-prod build-stage  3/10] COPY package*.json ./; #38 CACHED; ; #39 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #39 CACHED; ; #40 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #40 CACHED; ; #41 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #41 CACHED; ; #42 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #42 CACHED; ; #24 [rqworker2 internal] load build context; #24 transferring context: 151.10kB 0.2s done; #24 DONE 0.2s; ; #43 [backend  3/17] COPY requirements.txt requirements.txt; #43 CACHED; ; #44 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #44 CACHED; ; #45 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #45 CACHED; ; #46 [backend  2/17] WORKDIR /app; #46 CACHED; ; #47 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #47 CACHED; ; #48 [rqworker3  7/17] RUN useradd --create-home --shell /bin/bash app; #48 CACHED; ; #49 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #49 ...; ; #50 [frontend-prod] exporting to image; #50 exporting layers 0.0s done; #50 exporting manifest sha256:c1836ea5127fe3358856f58cbc74c4198108ef080705cf95d1c2305c4ffbf6f7 0.0s done; #50 exporting config sha256:cd5585c9e33a62b59500b700963413683d1df872372d8b4428c999a8c03d9350 0.0s done; #50 exporting attestation manifest sha256:71121bc03294a4e896e2211cfbf9ce2b26d3ff45f59d3d7d6d7613769d3f601b 0.1s done; #50 exporting manifest list sha256:b92653ca75049fc19445f8988906a7d7390e39bafa5b927189cae08c104cacc2 0.0s done; #50 naming to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #50 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #50 DONE 0.4s; ; #49 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #49 DONE 0.8s; ; #51 [frontend-prod] resolving provenance for metadata file; #51 DONE 0.0s; ; #52 [rqworker3  9/17] COPY --chown=app:app app/ /app/app/; #52 DONE 0.3s; ; #53 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.2s; ; #54 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.2s; ; #55 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 1.7s; ; #56 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.2s; ; #57 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.7s; ; #58 [rqworker2 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.4s; ; #59 [rqworker3 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.4s; ; #60 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.5s; ; #61 [rqworker3] exporting to image; #61 exporting layers; #61 exporting layers 4.1s done; #61 exporting manifest sha256:176291cdd2e3fa3cfbc2bd2fa6de71c6deabe6d8cd4112447c9665ac970732c5; #61 exporting manifest sha256:176291cdd2e3fa3cfbc2bd2fa6de71c6deabe6d8cd4112447c9665ac970732c5 0.1s done; #61 exporting config sha256:8560a8347464b7dad67a721b347b9fa831f1fd60432f908276c394ffa2bcec35; #61 exporting config sha256:8560a8347464b7dad67a721b347b9fa831f1fd60432f908276c394ffa2bcec35 0.1s done; #61 exporting attestation manifest sha256:2211564c6ee54e025b04b0b0306d2e98f4fb16fe41b1bc52a206f451c2d47775; #61 exporting attestation manifest sha256:2211564c6ee54e025b04b0b0306d2e98f4fb16fe41b1bc52a206f451c2d47775 0.3s done; #61 exporting manifest list sha256:32b8fe0a2c923c447463268c395c89f5f66e199564459c6fe0eaf1f8d5ebd90d; #61 exporting manifest list sha256:32b8fe0a2c923c447463268c395c89f5f66e199564459c6fe0eaf1f8d5ebd90d 0.1s done; #61 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-rqworker3:latest; #61 unpacking to docker.io/library/casestrainer-rqworker3:latest 3.3s done; #61 DONE 8.4s; ; #62 [rqworker2] exporting to image; #62 exporting layers 4.1s done; #62 exporting manifest sha256:4b565c93962af66183bd1ca954f9b987b236ead36aea4202eef282c605f55f6c 0.1s done; #62 exporting config sha256:b8453099dd80c1ef4b3b02497aab0942597fdcfca845f2dfa5687a324959e586 0.2s done; #62 exporting attestation manifest sha256:ddc754799f09499bfa5ff4393f0b7fdd4cd6af194eae181f346d0e74d082bfc8 0.3s done; #62 exporting manifest list sha256:c09667d81e7d3653080441868199581bd2c833f64fea443a4abcde8949fcdd35 0.1s done; #62 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #62 unpacking to docker.io/library/casestrainer-rqworker2:latest 3.4s done; #62 DONE 8.4s; ; #63 [rqworker1] exporting to image; #63 exporting layers 4.1s done; #63 exporting manifest sha256:539c457de76d012edd8324e686c8119d11f64b61cff87ebc5a3f6f6e95236505 0.1s done; #63 exporting config sha256:8a856b2634d66572531c4776aec070197a9a4cf6da6058d71b907e1723741379 0.2s done; #63 exporting attestation manifest sha256:e3524c722c8564463d9952078e7579c56e3f660976c6d4d3f118d68a40c4db1b 0.3s done; #63 exporting manifest list sha256:0630a567c351602e5378dc317c92585301b45dc977d8bd4e8bcf167256f80d7f 0.1s done; #63 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #63 unpacking to docker.io/library/casestrainer-rqworker1:latest 3.4s done; #63 DONE 8.4s; ; #64 [backend] exporting to image; #64 exporting layers 4.1s done; #64 exporting manifest sha256:331b54d1c21abe19baa37df9bc71041dac5e5f709cdd425f60915893bb5cc8d6 0.1s done; #64 exporting config sha256:9e41927fee54d82ee555464e67e2f3d382099e2400e2421ab30645d14ef6caad 0.2s done; #64 exporting attestation manifest sha256:b6160f03efbc5d97dfba195270a4d9cbd681ab0c5f900be09b582d5cbe6347da 0.3s done; #64 exporting manifest list sha256:c99362cab03abcd37f1e08ffaec13648b2dd8b6fcf963bbafa6fd62423da99c0 0.1s done; #64 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #64 unpacking to docker.io/library/casestrainer-backend:latest 3.4s done; #64 DONE 8.4s; ; #65 [rqworker3] resolving provenance for metadata file; #65 DONE 0.3s; ; #66 [rqworker1] resolving provenance for metadata file; #66 ...; ; #67 [rqworker2] resolving provenance for metadata file; #67 DONE 0.2s; ; #66 [rqworker1] resolving provenance for metadata file; #66 DONE 0.3s; ; #68 [backend] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built
[2025-08-15 15:20:59] [INFO] Docker operation completed successfully: build
[2025-08-15 15:20:59] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-15 15:21:18] [DEBUG] Docker operation exit code: 0
[2025-08-15 15:21:18] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-15 15:21:18] [INFO] Docker operation completed successfully: up
[2025-08-15 15:21:18] [INFO] Waiting for containers to stabilize...
[2025-08-15 15:21:29] [INFO] Performing application health check...
[2025-08-15 15:21:29] [INFO] Application health check passed
[2025-08-15 15:21:29] [INFO] Deployment completed successfully!
[2025-08-15 15:21:29] [INFO] Containers running: 7
[2025-08-15 15:21:29] [DEBUG] Launcher execution completed
[2025-08-15 15:24:51] [INFO] CaseStrainer Production Launcher starting...
[2025-08-15 15:24:51] [INFO] Environment: Production, Mode: Auto
[2025-08-15 15:24:51] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-15 15:24:51] [INFO] Checking prerequisites...
[2025-08-15 15:24:51] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-15 15:24:51] [INFO] Auto-detecting deployment mode...
[2025-08-15 15:24:52] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-15 15:24:52] [INFO] Recent code changes detected - recommending Fast start
[2025-08-15 15:24:52] [INFO] Auto-detected mode: Fast
[2025-08-15 15:24:52] [INFO] Starting deployment in Fast mode...
[2025-08-15 15:24:52] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-15 15:24:52] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-15 15:25:10] [DEBUG] Docker operation exit code: 0
[2025-08-15 15:25:10] [DEBUG] Docker output:  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-15 15:25:10] [INFO] Docker operation completed successfully: down
[2025-08-15 15:25:10] [INFO] Recent changes in src - will rebuild images
[2025-08-15 15:25:10] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-15 15:25:10] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-15 15:25:19] [DEBUG] Docker operation exit code: 0
[2025-08-15 15:25:19] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [nginx internal] load build definition from Dockerfile; #2 transferring dockerfile: 652B 0.0s done; #2 DONE 0.1s; ; #3 [backend internal] load build definition from Dockerfile; #3 transferring dockerfile: 1.80kB 0.0s done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB 0.0s done; #4 DONE 0.1s; ; #5 [nginx internal] load metadata for docker.io/library/nginx:alpine; #5 DONE 0.2s; ; #6 [nginx internal] load .dockerignore; #6 transferring context: 2B 0.0s done; #6 DONE 0.1s; ; #7 [auth] library/node:pull token for registry-1.docker.io; #7 DONE 0.0s; ; #8 [auth] library/python:pull token for registry-1.docker.io; #8 DONE 0.0s; ; #9 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #9 ...; ; #10 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #11 [nginx internal] load build context; #11 transferring context: 97B 0.0s done; #11 DONE 0.0s; ; #12 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #12 CACHED; ; #13 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #13 CACHED; ; #14 [nginx 2/8] RUN apk add --no-cache curl; #14 CACHED; ; #15 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #15 CACHED; ; #16 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #16 CACHED; ; #17 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:c27f56c1e39fdbcd6f1d79edede32f79021b5c196b332e596267a2b50301bed1 0.1s done; #19 exporting manifest list sha256:94f6131f5aee8885403b1e54bcb64ee9a34842d6cff2815fa6848c2044439a6a; #19 exporting manifest list sha256:94f6131f5aee8885403b1e54bcb64ee9a34842d6cff2815fa6848c2044439a6a 0.1s done; #19 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.3s; ; #9 [backend internal] load metadata for docker.io/library/python:3.10-slim; #9 DONE 0.8s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.8s; ; #21 [rqworker3 internal] load .dockerignore; #21 transferring context: 908B 0.0s done; #21 DONE 0.1s; ; #22 [frontend-prod internal] load .dockerignore; #22 transferring context: 834B 0.0s done; #22 DONE 0.1s; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #23 [rqworker1 internal] load build context; #23 DONE 0.0s; ; #24 [frontend-prod internal] load build context; #24 DONE 0.0s; ; #25 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #25 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #25 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.3s done; #25 DONE 0.3s; ; #26 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #26 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #26 ...; ; #25 [backend  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #25 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.3s done; #25 DONE 0.3s; ; #26 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #26 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.4s done; #26 DONE 0.5s; ; #23 [backend internal] load build context; #23 transferring context: 151.10kB 0.2s done; #23 transferring context: 151.10kB 0.2s done; #23 DONE 0.4s; ; #27 [nginx] resolving provenance for metadata file; #27 DONE 0.1s; ; #24 [frontend-prod internal] load build context; #24 transferring context: 4.14kB 0.0s done; #24 DONE 0.1s; ; #28 [rqworker2 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #28 CACHED; ; #29 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #29 CACHED; ; #30 [rqworker2 11/17] COPY --chown=app:app templates/ /app/templates/; #30 CACHED; ; #31 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #31 CACHED; ; #32 [rqworker2  5/17] RUN pip install --no-cache-dir -r requirements.txt; #32 CACHED; ; #33 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #33 CACHED; ; #34 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #34 CACHED; ; #35 [rqworker2  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #35 CACHED; ; #36 [rqworker2  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #36 CACHED; ; #37 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #37 CACHED; ; #38 [rqworker2  3/17] COPY requirements.txt requirements.txt; #38 CACHED; ; #39 [rqworker2 10/17] COPY --chown=app:app config/ /app/config/; #39 CACHED; ; #40 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #40 CACHED; ; #41 [rqworker2  2/17] WORKDIR /app; #41 CACHED; ; #42 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #42 CACHED; ; #43 [rqworker2 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #43 CACHED; ; #42 [rqworker1  7/17] RUN useradd --create-home --shell /bin/bash app; #42 CACHED; ; #38 [rqworker1  3/17] COPY requirements.txt requirements.txt; #38 CACHED; ; #34 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #34 CACHED; ; #32 [rqworker1  5/17] RUN pip install --no-cache-dir -r requirements.txt; #32 CACHED; ; #31 [rqworker1 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #31 CACHED; ; #33 [rqworker1 12/17] COPY --chown=app:app static/ /app/static/; #33 CACHED; ; #37 [rqworker1 13/17] COPY --chown=app:app VERSION /app/VERSION; #37 CACHED; ; #41 [rqworker1  2/17] WORKDIR /app; #41 CACHED; ; #40 [rqworker1 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #40 CACHED; ; #28 [rqworker1 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #28 CACHED; ; #35 [rqworker1  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #35 CACHED; ; #39 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #39 CACHED; ; #29 [rqworker1  9/17] COPY --chown=app:app app/ /app/app/; #29 CACHED; ; #30 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #30 CACHED; ; #36 [rqworker1  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #36 CACHED; ; #44 [frontend-prod build-stage  9/10] RUN npm run build; #44 CACHED; ; #45 [frontend-prod build-stage  5/10] COPY public/ public/; #45 CACHED; ; #46 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #46 CACHED; ; #47 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #47 CACHED; ; #48 [frontend-prod build-stage  8/10] COPY vite.config.js .; #48 CACHED; ; #49 [frontend-prod build-stage  6/10] COPY src/ src/; #49 CACHED; ; #50 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #50 CACHED; ; #51 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #51 CACHED; ; #52 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #52 CACHED; ; #53 [frontend-prod build-stage  3/10] COPY package*.json ./; #53 CACHED; ; #54 [frontend-prod build-stage  2/10] WORKDIR /app; #54 CACHED; ; #55 [frontend-prod build-stage  7/10] COPY index.html .; #55 CACHED; ; #56 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #56 CACHED; ; #57 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #57 CACHED; ; #58 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #58 CACHED; ; #59 [rqworker1] exporting to image; #59 exporting layers 0.1s done; #59 exporting manifest sha256:539c457de76d012edd8324e686c8119d11f64b61cff87ebc5a3f6f6e95236505 0.1s done; #59 exporting config sha256:8a856b2634d66572531c4776aec070197a9a4cf6da6058d71b907e1723741379; #59 exporting config sha256:8a856b2634d66572531c4776aec070197a9a4cf6da6058d71b907e1723741379 0.2s done; #59 exporting attestation manifest sha256:cc321c14ce2c5c4a301bc67be1324fa9b4a3d6594876c92c379eac0552adab2a; #59 exporting attestation manifest sha256:cc321c14ce2c5c4a301bc67be1324fa9b4a3d6594876c92c379eac0552adab2a 0.4s done; #59 exporting manifest list sha256:b246c49039dae5fde8b80b6aef046751296cb3f16c7d045687ecc3e5a6bb2f73; #59 exporting manifest list sha256:b246c49039dae5fde8b80b6aef046751296cb3f16c7d045687ecc3e5a6bb2f73 0.2s done; #59 naming to docker.io/library/casestrainer-rqworker1:latest; #59 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #59 unpacking to docker.io/library/casestrainer-rqworker1:latest; #59 ...; ; #60 [frontend-prod] exporting to image; #60 exporting layers 0.0s done; #60 exporting manifest sha256:c1836ea5127fe3358856f58cbc74c4198108ef080705cf95d1c2305c4ffbf6f7 0.1s done; #60 exporting config sha256:cd5585c9e33a62b59500b700963413683d1df872372d8b4428c999a8c03d9350 0.2s done; #60 exporting attestation manifest sha256:9145ca938fc577503a9dc74b2d3e035916b23daf8ed18bd432694fb9a961d4e8 0.5s done; #60 exporting manifest list sha256:fef043a8e237d73d98f5060d359f203742936b8d82cbfbd744b481c841ae1ea9 0.2s done; #60 naming to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #60 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #60 DONE 1.6s; ; #61 [rqworker3] exporting to image; #61 exporting layers 0.1s done; #61 exporting manifest sha256:176291cdd2e3fa3cfbc2bd2fa6de71c6deabe6d8cd4112447c9665ac970732c5 0.1s done; #61 exporting config sha256:8560a8347464b7dad67a721b347b9fa831f1fd60432f908276c394ffa2bcec35 0.2s done; #61 exporting attestation manifest sha256:7eb97345ea8cb22fd75b1ecfce8aa9d96ede7e3059b9b4c28641cb72bc7b627f 0.5s done; #61 exporting manifest list sha256:3f6f030cdab2f2a851dd048ed3053c86ed21008d445b01adc1370bcf10955455 0.2s done; #61 naming to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #61 unpacking to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #61 DONE 1.6s; ; #59 [rqworker1] exporting to image; #59 unpacking to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #59 DONE 1.6s; ; #62 [backend] exporting to image; #62 exporting layers 0.1s done; #62 exporting manifest sha256:331b54d1c21abe19baa37df9bc71041dac5e5f709cdd425f60915893bb5cc8d6 0.2s done; #62 exporting config sha256:9e41927fee54d82ee555464e67e2f3d382099e2400e2421ab30645d14ef6caad 0.1s done; #62 exporting attestation manifest sha256:12305ca41f3974cf2c504374dbf1662a013e99207b78841b1ce5eea28a6e5c8f 0.5s done; #62 exporting manifest list sha256:1d97e3cda11daf2b83588dffdc80de3c2282a75f2189b178679ed49a69cb0bca 0.2s done; #62 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #62 unpacking to docker.io/library/casestrainer-backend:latest 0.1s done; #62 DONE 1.6s; ; #63 [rqworker2] exporting to image; #63 exporting layers 0.1s done; #63 exporting manifest sha256:4b565c93962af66183bd1ca954f9b987b236ead36aea4202eef282c605f55f6c 0.1s done; #63 exporting config sha256:b8453099dd80c1ef4b3b02497aab0942597fdcfca845f2dfa5687a324959e586 0.1s done; #63 exporting attestation manifest sha256:6ce58a613b7ea7dd695b59cef388361a4bb243f851f350ba0101cdf1f94d91c4 0.5s done; #63 exporting manifest list sha256:f1abd331eeada10ceebfcc3ec2991f8913d67cf8f19b0295ef8e75448cf74839 0.2s done; #63 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #63 unpacking to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #63 DONE 1.6s; ; #64 [frontend-prod] resolving provenance for metadata file; #64 DONE 0.4s; ; #65 [backend] resolving provenance for metadata file; #65 DONE 0.4s; ; #66 [rqworker3] resolving provenance for metadata file; #66 DONE 0.6s; ; #67 [rqworker1] resolving provenance for metadata file; #67 DONE 0.3s; ; #68 [rqworker2] resolving provenance for metadata file; #68 DONE 0.1s;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built
[2025-08-15 15:25:19] [INFO] Docker operation completed successfully: build
[2025-08-15 15:25:19] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-15 15:25:37] [DEBUG] Docker operation exit code: 0
[2025-08-15 15:25:37] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-15 15:25:37] [INFO] Docker operation completed successfully: up
[2025-08-15 15:25:37] [INFO] Waiting for containers to stabilize...
[2025-08-15 15:25:48] [INFO] Performing application health check...
[2025-08-15 15:25:48] [INFO] Application health check passed
[2025-08-15 15:25:48] [INFO] Deployment completed successfully!
[2025-08-15 15:25:48] [INFO] Containers running: 7
[2025-08-15 15:25:48] [DEBUG] Launcher execution completed
[2025-08-15 15:41:58] [INFO] CaseStrainer Production Launcher starting...
[2025-08-15 15:41:58] [INFO] Environment: Production, Mode: Auto
[2025-08-15 15:41:58] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-15 15:41:58] [INFO] Checking prerequisites...
[2025-08-15 15:41:58] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-15 15:41:58] [INFO] Auto-detecting deployment mode...
[2025-08-15 15:41:59] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-15 15:41:59] [INFO] Recent code changes detected - recommending Fast start
[2025-08-15 15:41:59] [INFO] Auto-detected mode: Fast
[2025-08-15 15:41:59] [INFO] Starting deployment in Fast mode...
[2025-08-15 15:41:59] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-15 15:41:59] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-15 15:42:02] [DEBUG] Docker operation exit code: 0
[2025-08-15 15:42:02] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-15 15:42:02] [INFO] Docker operation completed successfully: down
[2025-08-15 15:42:03] [INFO] Recent changes in src - will rebuild images
[2025-08-15 15:42:03] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-15 15:42:03] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-15 15:42:23] [DEBUG] Docker operation exit code: 0
[2025-08-15 15:42:23] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker3 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.0s; ; #3 [frontend-prod internal] load build definition from Dockerfile.prod; #3 transferring dockerfile: 2.03kB 0.0s done; #3 DONE 0.1s; ; #4 [nginx internal] load build definition from Dockerfile; #4 transferring dockerfile: 652B 0.0s done; #4 DONE 0.1s; ; #5 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [nginx internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B done; #7 DONE 0.0s; ; #8 [nginx internal] load build context; #8 DONE 0.0s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #10 [auth] library/node:pull token for registry-1.docker.io; #10 DONE 0.0s; ; #11 [auth] library/python:pull token for registry-1.docker.io; #11 DONE 0.0s; ; #8 [nginx internal] load build context; #8 transferring context: 97B done; #8 DONE 0.1s; ; #12 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #12 CACHED; ; #13 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #13 CACHED; ; #14 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #14 CACHED; ; #15 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #15 CACHED; ; #16 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #16 CACHED; ; #17 [nginx 2/8] RUN apk add --no-cache curl; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [nginx] exporting to image; #19 exporting layers; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:3a96bec5d0ec0218e189f9ade4a446da5fc73aaee530c51a84ef3787f4ccc73c; #19 exporting attestation manifest sha256:3a96bec5d0ec0218e189f9ade4a446da5fc73aaee530c51a84ef3787f4ccc73c 0.1s done; #19 exporting manifest list sha256:61feb7daae746f5ffff954ba694784d5f6abf666fe5bc80aecd62d6dddedaf15 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest; #19 ...; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.8s; ; #19 [nginx] exporting to image; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.1s done; #19 DONE 0.4s; ; #9 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 ...; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 1.0s; ; #24 [rqworker2 internal] load .dockerignore; #24 transferring context: 908B 0.0s done; #24 DONE 0.1s; ; #25 [rqworker1 internal] load build context; #25 DONE 0.0s; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.3s done; #23 DONE 0.3s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 4.14kB 0.0s done; #22 DONE 0.1s; ; #26 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #26 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #26 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #26 DONE 0.2s; ; #27 [frontend-prod build-stage  5/10] COPY public/ public/; #27 CACHED; ; #28 [frontend-prod build-stage  9/10] RUN npm run build; #28 CACHED; ; #29 [frontend-prod build-stage  8/10] COPY vite.config.js .; #29 CACHED; ; #30 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #30 CACHED; ; #31 [frontend-prod build-stage  3/10] COPY package*.json ./; #31 CACHED; ; #32 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #32 CACHED; ; #33 [frontend-prod build-stage  6/10] COPY src/ src/; #33 CACHED; ; #34 [frontend-prod build-stage  7/10] COPY index.html .; #34 CACHED; ; #35 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #35 CACHED; ; #36 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #36 CACHED; ; #37 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #37 CACHED; ; #38 [frontend-prod build-stage  2/10] WORKDIR /app; #38 CACHED; ; #39 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #39 CACHED; ; #40 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #40 CACHED; ; #41 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #41 CACHED; ; #42 [frontend-prod] exporting to image; #42 exporting layers 0.0s done; #42 exporting manifest sha256:c1836ea5127fe3358856f58cbc74c4198108ef080705cf95d1c2305c4ffbf6f7 0.0s done; #42 exporting config sha256:cd5585c9e33a62b59500b700963413683d1df872372d8b4428c999a8c03d9350 0.0s done; #42 exporting attestation manifest sha256:70667142487057cc457f1680289157b7b72a81e8bcb2bf9f761b7e0fabc0d3db; #42 ...; ; #25 [rqworker1 internal] load build context; #25 transferring context: 161.16kB 0.2s done; #25 DONE 0.3s; ; #43 [rqworker1  3/17] COPY requirements.txt requirements.txt; #43 CACHED; ; #44 [rqworker1  5/17] RUN pip install --no-cache-dir -r requirements.txt; #44 CACHED; ; #45 [rqworker1  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #45 CACHED; ; #46 [rqworker1  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #46 CACHED; ; #47 [rqworker1  2/17] WORKDIR /app; #47 CACHED; ; #48 [rqworker1  7/17] RUN useradd --create-home --shell /bin/bash app; #48 CACHED; ; #47 [rqworker2  2/17] WORKDIR /app; #47 CACHED; ; #43 [rqworker2  3/17] COPY requirements.txt requirements.txt; #43 CACHED; ; #44 [rqworker2  5/17] RUN pip install --no-cache-dir -r requirements.txt; #44 CACHED; ; #45 [rqworker2  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #45 CACHED; ; #46 [rqworker2  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #46 CACHED; ; #48 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #48 CACHED; ; #49 [nginx] resolving provenance for metadata file; #49 DONE 0.0s; ; #42 [frontend-prod] exporting to image; #42 exporting attestation manifest sha256:70667142487057cc457f1680289157b7b72a81e8bcb2bf9f761b7e0fabc0d3db 0.2s done; #42 exporting manifest list sha256:86de78f418f10414dbc38cc09cdc363988ad44b89562e10c53918029a5b80bff 0.1s done; #42 naming to docker.io/library/casestrainer-frontend-prod:latest; #42 naming to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #42 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #42 DONE 0.5s; ; #50 [backend  8/17] COPY --chown=app:app src/ /app/src/; #50 DONE 0.9s; ; #51 [rqworker1  9/17] COPY --chown=app:app app/ /app/app/; #51 DONE 0.4s; ; #52 [frontend-prod] resolving provenance for metadata file; #52 DONE 0.0s; ; #53 [rqworker3 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.3s; ; #54 [backend 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.2s; ; #55 [rqworker1 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 1.4s; ; #56 [rqworker1 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.2s; ; #57 [rqworker3 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.6s; ; #58 [rqworker1 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.4s; ; #59 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.5s; ; #60 [rqworker1 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.4s; ; #61 [rqworker1] exporting to image; #61 exporting layers; #61 exporting layers 4.3s done; #61 exporting manifest sha256:4be40d668740d4fa976a0ad6a3b5d8a6b3a162215a529d73a341b41cf01c6291 0.1s done; #61 exporting config sha256:f1e466972c49a670c5cedbea3e5dcfe4951fd407b3ec4e9c4d0bc0c77d0bb649; #61 exporting config sha256:f1e466972c49a670c5cedbea3e5dcfe4951fd407b3ec4e9c4d0bc0c77d0bb649 0.2s done; #61 exporting attestation manifest sha256:de228c0ab8f27c84a25196ef9f2f2910796236a771c607766f842508da64d813; #61 exporting attestation manifest sha256:de228c0ab8f27c84a25196ef9f2f2910796236a771c607766f842508da64d813 0.3s done; #61 exporting manifest list sha256:2dfdc37eac35e13ea8f7e0df82c760c195f8995b787e5149dc8d9e37a51a37b7; #61 exporting manifest list sha256:2dfdc37eac35e13ea8f7e0df82c760c195f8995b787e5149dc8d9e37a51a37b7 0.2s done; #61 naming to docker.io/library/casestrainer-rqworker1:latest; #61 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest 3.5s done; #61 DONE 9.0s; ; #62 [backend] exporting to image; #62 exporting layers 4.3s done; #62 exporting manifest sha256:98d56d5cc80fcfd89e481d2231e6505cb77b0b73ad573a9ea333980aced15a6f 0.2s done; #62 exporting config sha256:22bb52e7d00b01fb873bede9fed0bacb822a356e923a98384b0d6443a7b859fa 0.2s done; #62 exporting attestation manifest sha256:14da68e8026dfa8a42f407b96cdc46f5766e8c9dd8f165930cc55cc23161c613 0.3s done; #62 exporting manifest list sha256:14cc64e253e2540384a16f699f0996c86a02ab7c4ed2361eb051dca04222c091 0.2s done; #62 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #62 unpacking to docker.io/library/casestrainer-backend:latest 3.5s done; #62 DONE 9.0s; ; #63 [rqworker2] exporting to image; #63 exporting layers 4.3s done; #63 exporting manifest sha256:69badb0d42016edfaa86bb856733114dab3125b01f5ec25c80ac6b8b1bf0a1cc 0.1s done; #63 exporting config sha256:8a72ae54780d54bc54b246c034360a9966cbf13001f8320646955180deed41f2 0.2s done; #63 exporting attestation manifest sha256:f922713ed661bc7810b05f016fbcd22c289127e084f49a94d2a8f56365d8f1c6 0.3s done; #63 exporting manifest list sha256:b4f36274aa2c99c63c5d2544196b981f8dcdefae727ebe101463bd2cb4ee539b 0.2s done; #63 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #63 unpacking to docker.io/library/casestrainer-rqworker2:latest 3.5s done; #63 DONE 9.1s; ; #64 [rqworker3] exporting to image; #64 exporting layers 4.3s done; #64 exporting manifest sha256:87cc670f902e41abc7339de8b42cdcd72b1d45fe2cfb6bdd5101093db5c90933 0.1s done; #64 exporting config sha256:9f0406d6ccf85712390481f26e1b11e9ee3d3cead3fd3b9f1bd5815138d0d7ab 0.2s done; #64 exporting attestation manifest sha256:f1b8b17f447708b563dd04ce1ad479dbdfb71ddb1c32e1996b37383b7e55deda 0.3s done; #64 exporting manifest list sha256:fdf2fc46fdb702ad62db6edf7185eb63c1be9b77efa7ee0b45f9d1a88c347990 0.2s done; #64 naming to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #64 unpacking to docker.io/library/casestrainer-rqworker3:latest 3.5s done; #64 DONE 9.1s; ; #65 [rqworker1] resolving provenance for metadata file; #65 DONE 0.5s; ; #66 [rqworker2] resolving provenance for metadata file; #66 DONE 0.5s; ; #67 [backend] resolving provenance for metadata file; #67 DONE 0.2s; ; #68 [rqworker3] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built
[2025-08-15 15:42:23] [INFO] Docker operation completed successfully: build
[2025-08-15 15:42:23] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-15 15:42:44] [DEBUG] Docker operation exit code: 0
[2025-08-15 15:42:44] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-nginx-prod  Created;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-15 15:42:44] [INFO] Docker operation completed successfully: up
[2025-08-15 15:42:44] [INFO] Waiting for containers to stabilize...
[2025-08-15 15:42:55] [INFO] Performing application health check...
[2025-08-15 15:42:55] [INFO] Application health check passed
[2025-08-15 15:42:55] [INFO] Deployment completed successfully!
[2025-08-15 15:42:55] [INFO] Containers running: 7
[2025-08-15 15:42:55] [DEBUG] Launcher execution completed
[2025-08-15 15:55:54] [INFO] CaseStrainer Production Launcher starting...
[2025-08-15 15:55:54] [INFO] Environment: Production, Mode: Auto
[2025-08-15 15:55:54] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-15 15:55:54] [INFO] Checking prerequisites...
[2025-08-15 15:55:54] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-15 15:55:54] [INFO] Auto-detecting deployment mode...
[2025-08-15 15:55:55] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-15 15:55:55] [INFO] Recent code changes detected - recommending Fast start
[2025-08-15 15:55:55] [INFO] Auto-detected mode: Fast
[2025-08-15 15:55:55] [INFO] Starting deployment in Fast mode...
[2025-08-15 15:55:55] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-15 15:55:55] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-15 15:56:03] [DEBUG] Docker operation exit code: 0
[2025-08-15 15:56:03] [DEBUG] Docker output:  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-15 15:56:03] [INFO] Docker operation completed successfully: down
[2025-08-15 15:56:03] [INFO] Recent changes in src - will rebuild images
[2025-08-15 15:56:03] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-15 15:56:03] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-15 15:56:21] [DEBUG] Docker operation exit code: 0
[2025-08-15 15:56:21] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker1 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [frontend-prod internal] load build definition from Dockerfile.prod; #3 transferring dockerfile: 2.03kB 0.0s done; #3 DONE 0.1s; ; #4 [nginx internal] load build definition from Dockerfile; #4 transferring dockerfile: 652B 0.0s done; #4 DONE 0.1s; ; #5 [auth] library/python:pull token for registry-1.docker.io; #5 DONE 0.0s; ; #6 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [auth] library/node:pull token for registry-1.docker.io; #7 DONE 0.0s; ; #8 [nginx internal] load .dockerignore; #8 transferring context: 2B done; #8 DONE 0.0s; ; #9 [nginx internal] load build context; #9 DONE 0.0s; ; #10 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #9 [nginx internal] load build context; #9 transferring context: 97B 0.0s done; #9 DONE 0.0s; ; #11 [backend internal] load metadata for docker.io/library/python:3.10-slim; #11 ...; ; #12 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #12 CACHED; ; #13 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #13 CACHED; ; #14 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #14 CACHED; ; #15 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #15 CACHED; ; #16 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #16 CACHED; ; #17 [nginx 2/8] RUN apk add --no-cache curl; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af 0.0s done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 0.0s done; #19 exporting attestation manifest sha256:97c7fe35ddce01e9a75e0f507ec53a1b78522cff414e3805207eb339cda6e018 0.1s done; #19 exporting manifest list sha256:3eb830e7a192d68d07959c33ecaf5b833b832fc29acbf6d754b8d234b73bc34e; #19 exporting manifest list sha256:3eb830e7a192d68d07959c33ecaf5b833b832fc29acbf6d754b8d234b73bc34e 0.1s done; #19 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.4s; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.7s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.0s; ; #11 [backend internal] load metadata for docker.io/library/python:3.10-slim; #11 ...; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #11 [rqworker3 internal] load metadata for docker.io/library/python:3.10-slim; #11 DONE 0.9s; ; #23 [rqworker1 internal] load .dockerignore; #23 transferring context: 908B 0.0s done; #23 DONE 0.0s; ; #24 [rqworker3 internal] load build context; #24 DONE 0.0s; ; #25 [rqworker3  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #25 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #25 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #25 DONE 0.1s; ; #24 [backend internal] load build context; #24 DONE 0.0s; ; #26 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #26 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.2s done; #26 DONE 0.2s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 4.14kB 0.0s done; #22 DONE 0.1s; ; #25 [rqworker2  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #25 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #25 DONE 0.1s; ; #27 [frontend-prod build-stage  2/10] WORKDIR /app; #27 CACHED; ; #28 [frontend-prod build-stage  5/10] COPY public/ public/; #28 CACHED; ; #29 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #29 CACHED; ; #30 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #30 CACHED; ; #31 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #31 CACHED; ; #32 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #32 CACHED; ; #33 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #33 CACHED; ; #34 [frontend-prod build-stage  3/10] COPY package*.json ./; #34 CACHED; ; #35 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #35 CACHED; ; #36 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #36 CACHED; ; #37 [frontend-prod build-stage  9/10] RUN npm run build; #37 CACHED; ; #38 [frontend-prod build-stage  7/10] COPY index.html .; #38 CACHED; ; #39 [frontend-prod build-stage  8/10] COPY vite.config.js .; #39 CACHED; ; #40 [frontend-prod build-stage  6/10] COPY src/ src/; #40 CACHED; ; #41 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #41 CACHED; ; #24 [rqworker3 internal] load build context; #24 transferring context: 167.06kB 0.2s done; #24 ...; ; #42 [nginx] resolving provenance for metadata file; #42 DONE 0.0s; ; #24 [rqworker3 internal] load build context; #24 transferring context: 167.06kB 0.2s done; #24 DONE 0.3s; ; #43 [rqworker1  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #43 CACHED; ; #44 [rqworker1  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #44 CACHED; ; #45 [rqworker1  5/17] RUN pip install --no-cache-dir -r requirements.txt; #45 CACHED; ; #46 [rqworker1  2/17] WORKDIR /app; #46 CACHED; ; #47 [rqworker1  3/17] COPY requirements.txt requirements.txt; #47 CACHED; ; #48 [rqworker1  7/17] RUN useradd --create-home --shell /bin/bash app; #48 CACHED; ; #49 [frontend-prod] exporting to image; #49 exporting layers 0.0s done; #49 exporting manifest sha256:c1836ea5127fe3358856f58cbc74c4198108ef080705cf95d1c2305c4ffbf6f7 0.0s done; #49 exporting config sha256:cd5585c9e33a62b59500b700963413683d1df872372d8b4428c999a8c03d9350 0.0s done; #49 exporting attestation manifest sha256:9b71af40fff9d54e47a2ce811b51a6fae897190364571430c12902b92c7f3021 0.1s done; #49 exporting manifest list sha256:76e6dbaefbb4632f50d6f838a8e175fa9bd4dbaf9cdd5cd32248db978d2837fc 0.0s done; #49 naming to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #49 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #49 DONE 0.4s; ; #50 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #50 DONE 0.6s; ; #50 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #50 DONE 0.6s; ; #51 [backend  9/17] COPY --chown=app:app app/ /app/app/; #51 DONE 0.3s; ; #51 [rqworker1  9/17] COPY --chown=app:app app/ /app/app/; #51 DONE 0.3s; ; #52 [frontend-prod] resolving provenance for metadata file; #52 DONE 0.0s; ; #53 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.2s; ; #53 [backend 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.2s; ; #54 [rqworker2 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.2s; ; #54 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.2s; ; #55 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 1.1s; ; #55 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 1.1s; ; #56 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.2s; ; #56 [rqworker2 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.2s; ; #57 [rqworker3 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.5s; ; #57 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.5s; ; #58 [rqworker1 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.5s; ; #58 [rqworker1 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.5s; ; #59 [rqworker3 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.5s; ; #59 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.5s; ; #60 [rqworker1 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.4s; ; #60 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.4s; ; #61 [rqworker1] exporting to image; #61 exporting layers 3.7s done; #61 exporting manifest sha256:9d38220810140911e7c2136d8e8bbd2eb76a7bb9899c5f099317e1df1fec9d19; #61 exporting manifest sha256:9d38220810140911e7c2136d8e8bbd2eb76a7bb9899c5f099317e1df1fec9d19 0.1s done; #61 exporting config sha256:9cd8f153456a357b5c20fd86e5383a05f72d2f378c884959200744be342d67df; #61 exporting config sha256:9cd8f153456a357b5c20fd86e5383a05f72d2f378c884959200744be342d67df 0.1s done; #61 exporting attestation manifest sha256:6ac33033984f17e032e0530ef3f79232fa23fc054e94dcc2c7f7a69e4d81ce14; #61 exporting attestation manifest sha256:6ac33033984f17e032e0530ef3f79232fa23fc054e94dcc2c7f7a69e4d81ce14 0.3s done; #61 exporting manifest list sha256:5c79f6ac336880687f2da0624a47f8bc06706eaa791a3a2a4dd0d5a761936f5a; #61 exporting manifest list sha256:5c79f6ac336880687f2da0624a47f8bc06706eaa791a3a2a4dd0d5a761936f5a 0.1s done; #61 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest; #61 ...; ; #62 [backend] exporting to image; #62 exporting layers 3.7s done; #62 exporting manifest sha256:76e456db82773fb7e71e0cb72059efbc1989f42f6b0c54608f647b768ed7f73d 0.1s done; #62 exporting config sha256:334525e831881597d3def5876ffd7530c1ff229c8ca80b4aea8b620ce81662bd 0.1s done; #62 exporting attestation manifest sha256:fae28795ce204192d340f4601a228628f6084ae1c4ae13369c05c753d9c67b2c 0.3s done; #62 exporting manifest list sha256:9efabab2a9f77e802ab05f507151701b30b61072feb157e5c82c1c980c314bea 0.1s done; #62 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #62 unpacking to docker.io/library/casestrainer-backend:latest 2.8s done; #62 DONE 7.5s; ; #63 [rqworker2] exporting to image; #63 exporting layers 3.7s done; #63 exporting manifest sha256:3843198a6aac6e9a303ff9ac92b8c299f1f610301743e6c63f6537c9a42711c7 0.1s done; #63 exporting config sha256:e3f5cca691aeca0c3a6fb3cd7f1ff140c203b326413984fcdfd8e3bccf0fb33d 0.1s done; #63 exporting attestation manifest sha256:e294f0f141026d8ade06ba9f9da7eedff9ab9839ce1894df32d34e0f0d27dc6d 0.3s done; #63 exporting manifest list sha256:7234475cecc98fa5439df20250a7b7b568367297f864f249560fab2bda090822 0.1s done; #63 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #63 unpacking to docker.io/library/casestrainer-rqworker2:latest 2.8s done; #63 DONE 7.5s; ; #61 [rqworker1] exporting to image; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest 2.9s done; #61 DONE 7.5s; ; #64 [rqworker3] exporting to image; #64 exporting layers 3.7s done; #64 exporting manifest sha256:71cb5044ffcab12291dd72e84b63124e8c6c4b04e80343a9664d82c18b5fdf79 0.2s done; #64 exporting config sha256:900466be74018b477ac2a0bda06e63256ceae48d7bc1c6b04cf7ea1ae49969fc 0.1s done; #64 exporting attestation manifest sha256:02b3fd2d561fe1a1c079ca858d58502b87481a7cc8bc249cd8b802edc01355ab 0.3s done; #64 exporting manifest list sha256:ff03382c2185d58bae2c9656b7c6dedcd9fbe6bed5f147db8b7c9430a3c3ab7a 0.1s done; #64 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #64 unpacking to docker.io/library/casestrainer-rqworker3:latest 2.8s done; #64 DONE 7.5s; ; #65 [rqworker2] resolving provenance for metadata file; #65 DONE 0.4s; ; #66 [rqworker3] resolving provenance for metadata file; #66 DONE 0.1s; ; #67 [backend] resolving provenance for metadata file; #67 DONE 0.3s; ; #68 [rqworker1] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built
[2025-08-15 15:56:21] [INFO] Docker operation completed successfully: build
[2025-08-15 15:56:21] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-15 15:56:40] [DEBUG] Docker operation exit code: 0
[2025-08-15 15:56:40] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-15 15:56:40] [INFO] Docker operation completed successfully: up
[2025-08-15 15:56:40] [INFO] Waiting for containers to stabilize...
[2025-08-15 15:56:45] [DEBUG] Launcher execution completed
[2025-08-15 16:04:26] [INFO] CaseStrainer Production Launcher starting...
[2025-08-15 16:04:26] [INFO] Environment: Production, Mode: Auto
[2025-08-15 16:04:26] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-15 16:04:26] [INFO] Checking prerequisites...
[2025-08-15 16:04:26] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-15 16:04:26] [INFO] Auto-detecting deployment mode...
[2025-08-15 16:04:27] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-15 16:04:27] [INFO] Recent code changes detected - recommending Fast start
[2025-08-15 16:04:27] [INFO] Auto-detected mode: Fast
[2025-08-15 16:04:27] [INFO] Starting deployment in Fast mode...
[2025-08-15 16:04:27] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-15 16:04:27] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-15 16:04:30] [DEBUG] Docker operation exit code: 0
[2025-08-15 16:04:30] [DEBUG] Docker output:  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-15 16:04:30] [INFO] Docker operation completed successfully: down
[2025-08-15 16:04:30] [INFO] Recent changes in src - will rebuild images
[2025-08-15 16:04:30] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-15 16:04:30] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-15 16:04:47] [DEBUG] Docker operation exit code: 0
[2025-08-15 16:04:47] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker1 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [frontend-prod internal] load build definition from Dockerfile.prod; #3 transferring dockerfile: 2.03kB 0.0s done; #3 DONE 0.1s; ; #4 [nginx internal] load build definition from Dockerfile; #4 transferring dockerfile: 652B 0.0s done; #4 DONE 0.1s; ; #5 [backend internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [auth] library/python:pull token for registry-1.docker.io; #6 DONE 0.0s; ; #7 [auth] library/node:pull token for registry-1.docker.io; #7 DONE 0.0s; ; #8 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #8 DONE 0.1s; ; #9 [nginx internal] load .dockerignore; #9 transferring context: 2B done; #9 DONE 0.0s; ; #10 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #11 [nginx internal] load build context; #11 transferring context: 97B done; #11 DONE 0.1s; ; #12 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #12 ...; ; #13 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #13 CACHED; ; #14 [nginx 2/8] RUN apk add --no-cache curl; #14 CACHED; ; #15 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #15 CACHED; ; #16 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #16 CACHED; ; #17 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #17 CACHED; ; #18 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #18 CACHED; ; #19 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #19 CACHED; ; #20 [nginx] exporting to image; #20 exporting layers done; #20 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #20 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 0.0s done; #20 exporting attestation manifest sha256:6c4e8203cd43da2becd63c3ad7e2d29ea696411bbae041b44208c8f2e493227e 0.1s done; #20 exporting manifest list sha256:eb561a13e5a8872e4de783d67ca0c6e997031fb750c65347f266abc9e8dac792; #20 exporting manifest list sha256:eb561a13e5a8872e4de783d67ca0c6e997031fb750c65347f266abc9e8dac792 0.1s done; #20 naming to docker.io/library/casestrainer-nginx:latest 0.1s done; #20 unpacking to docker.io/library/casestrainer-nginx:latest; #20 ...; ; #12 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #12 DONE 0.7s; ; #20 [nginx] exporting to image; #20 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #20 DONE 0.4s; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.1s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 ...; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 1.0s; ; #24 [backend internal] load .dockerignore; #24 transferring context: 908B 0.0s done; #24 DONE 0.1s; ; #25 [rqworker2 internal] load build context; #25 DONE 0.0s; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.3s done; #23 DONE 0.3s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 4.14kB 0.0s done; #22 DONE 0.1s; ; #26 [rqworker2  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #26 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #26 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #26 DONE 0.2s; ; #27 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #27 CACHED; ; #28 [frontend-prod build-stage  6/10] COPY src/ src/; #28 CACHED; ; #29 [frontend-prod build-stage  5/10] COPY public/ public/; #29 CACHED; ; #30 [frontend-prod build-stage  9/10] RUN npm run build; #30 CACHED; ; #31 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #31 CACHED; ; #32 [frontend-prod build-stage  3/10] COPY package*.json ./; #32 CACHED; ; #33 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #33 CACHED; ; #34 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #34 CACHED; ; #35 [frontend-prod build-stage  7/10] COPY index.html .; #35 CACHED; ; #36 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #36 CACHED; ; #37 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #37 CACHED; ; #38 [frontend-prod build-stage  2/10] WORKDIR /app; #38 CACHED; ; #39 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #39 CACHED; ; #40 [frontend-prod build-stage  8/10] COPY vite.config.js .; #40 CACHED; ; #41 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #41 CACHED; ; #25 [rqworker2 internal] load build context; #25 transferring context: 360.95kB 0.2s done; #25 DONE 0.3s; ; #42 [nginx] resolving provenance for metadata file; #42 DONE 0.0s; ; #43 [frontend-prod] exporting to image; #43 exporting layers 0.0s done; #43 exporting manifest sha256:c1836ea5127fe3358856f58cbc74c4198108ef080705cf95d1c2305c4ffbf6f7 0.0s done; #43 exporting config sha256:cd5585c9e33a62b59500b700963413683d1df872372d8b4428c999a8c03d9350 done; #43 exporting attestation manifest sha256:a867535c7306d9f96c7138f5adc542fa0dee6ab8d1ad52a31586f49b03fe4e24 0.2s done; #43 exporting manifest list sha256:2012ca902640f84b42e70de034fea593bfc990ae6a119fa381b062e14b374dd7; #43 exporting manifest list sha256:2012ca902640f84b42e70de034fea593bfc990ae6a119fa381b062e14b374dd7 0.0s done; #43 naming to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #43 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #43 DONE 0.4s; ; #44 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #44 CACHED; ; #45 [backend  2/17] WORKDIR /app; #45 CACHED; ; #46 [backend  3/17] COPY requirements.txt requirements.txt; #46 CACHED; ; #47 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #47 CACHED; ; #48 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #48 CACHED; ; #49 [backend  7/17] RUN useradd --create-home --shell /bin/bash app; #49 CACHED; ; #50 [rqworker1  8/17] COPY --chown=app:app src/ /app/src/; #50 DONE 0.5s; ; #51 [backend  9/17] COPY --chown=app:app app/ /app/app/; #51 DONE 0.2s; ; #52 [frontend-prod] resolving provenance for metadata file; #52 DONE 0.0s; ; #53 [rqworker2 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.2s; ; #54 [backend 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.2s; ; #55 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 1.0s; ; #56 [rqworker1 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.2s; ; #57 [rqworker1 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.4s; ; #58 [rqworker1 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.5s; ; #59 [rqworker1 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.4s; ; #60 [rqworker1 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.5s; ; #61 [rqworker1] exporting to image; #61 exporting layers 3.8s done; #61 exporting manifest sha256:6203ae9e7aac7981ce88c329efbd0b93c0a496fbb746e2992957207e6acf5571; #61 exporting manifest sha256:6203ae9e7aac7981ce88c329efbd0b93c0a496fbb746e2992957207e6acf5571 0.1s done; #61 exporting config sha256:00b73bd964cf57930a40cf8a6eb51dbc36bf682230d9ba956b2baedded24fb77; #61 exporting config sha256:00b73bd964cf57930a40cf8a6eb51dbc36bf682230d9ba956b2baedded24fb77 0.1s done; #61 exporting attestation manifest sha256:892ced7670e4f8692f1d96e3a12d3ba6ada7b634851ef552543885d6f7545a93; #61 exporting attestation manifest sha256:892ced7670e4f8692f1d96e3a12d3ba6ada7b634851ef552543885d6f7545a93 0.2s done; #61 exporting manifest list sha256:88548792d4bfac65c815bf751f830ee7bd463bd2ea6189aae7de710ab6a77fe0; #61 exporting manifest list sha256:88548792d4bfac65c815bf751f830ee7bd463bd2ea6189aae7de710ab6a77fe0 0.1s done; #61 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest; #61 ...; ; #62 [rqworker2] exporting to image; #62 exporting layers 3.8s done; #62 exporting manifest sha256:a156c63c4c17dd4a35d85312dc84550fb6b13737a68fe41398303b838a9f268c 0.1s done; #62 exporting config sha256:da59cd80514b1c496371bafa10539a4beaf99dc2936932f5926b85916c226175 0.1s done; #62 exporting attestation manifest sha256:37ed567b2669e676a6f976222b14629475dcb0e34a2422a83a35bf8f081dea38 0.2s done; #62 exporting manifest list sha256:02359768f67dc06ce7c960c2ab9dcfdc679793b1ff64f646184459375e68efb0 0.1s done; #62 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #62 unpacking to docker.io/library/casestrainer-rqworker2:latest 3.1s done; #62 DONE 7.8s; ; #63 [backend] exporting to image; #63 exporting layers 3.8s done; #63 exporting manifest sha256:570269edfa4a645aa96512535fd9b18e391af182fb7462d7fab2290290205486 0.1s done; #63 exporting config sha256:1601d63e20db7f07bda831529f3144f90ee419dd67128c48818c86e7ebff7519 0.1s done; #63 exporting attestation manifest sha256:7dcb8dd9c985a34fc8098d1e46e81649b63ab4b4ed07427eeffcbf4bc36fd6ee 0.2s done; #63 exporting manifest list sha256:0fc4a6960f0be0da89d19d98170767d56a68b31ae0c063a7eaf25331f84e979a 0.1s done; #63 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #63 unpacking to docker.io/library/casestrainer-backend:latest 3.1s done; #63 DONE 7.8s; ; #64 [rqworker3] exporting to image; #64 exporting layers 3.9s done; #64 exporting manifest sha256:b244a41c40bc38039ae6a55c4a8cea85099842edf31d8c26c22c8db22fa4fdac 0.1s done; #64 exporting config sha256:14b8b73212f46bb81222a7bbb09c227c0136ad78a9d3950457590587937bcb28 0.1s done; #64 exporting attestation manifest sha256:4873e03ddddc17846c93fd3e11f8ee87e450d209b6cacd0aa41960dadaa8ea9e 0.2s done; #64 exporting manifest list sha256:53820d55c84fb13541a90c8feb25bd0717679e08dc6b871c7babfd5b728b06fc 0.1s done; #64 naming to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #64 unpacking to docker.io/library/casestrainer-rqworker3:latest 3.1s done; #64 DONE 7.9s; ; #61 [rqworker1] exporting to image; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest 3.1s done; #61 DONE 7.8s; ; #65 [backend] resolving provenance for metadata file; #65 DONE 0.5s; ; #66 [rqworker3] resolving provenance for metadata file; #66 DONE 0.2s; ; #67 [rqworker2] resolving provenance for metadata file; #67 DONE 0.4s; ; #68 [rqworker1] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built
[2025-08-15 16:04:47] [INFO] Docker operation completed successfully: build
[2025-08-15 16:04:47] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-15 16:05:06] [DEBUG] Docker operation exit code: 0
[2025-08-15 16:05:06] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-15 16:05:06] [INFO] Docker operation completed successfully: up
[2025-08-15 16:05:06] [INFO] Waiting for containers to stabilize...
[2025-08-15 16:05:16] [INFO] Performing application health check...
[2025-08-15 16:05:16] [INFO] Application health check passed
[2025-08-15 16:05:16] [INFO] Deployment completed successfully!
[2025-08-15 16:05:16] [INFO] Containers running: 7
[2025-08-15 16:05:16] [DEBUG] Launcher execution completed
[2025-08-15 16:06:03] [INFO] CaseStrainer Production Launcher starting...
[2025-08-15 16:06:03] [INFO] Environment: Production, Mode: Auto
[2025-08-15 16:06:03] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-15 16:06:03] [INFO] Checking prerequisites...
[2025-08-15 16:06:03] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-15 16:06:03] [INFO] Auto-detecting deployment mode...
[2025-08-15 16:06:03] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-15 16:06:03] [INFO] Recent code changes detected - recommending Fast start
[2025-08-15 16:06:03] [INFO] Auto-detected mode: Fast
[2025-08-15 16:06:03] [INFO] Starting deployment in Fast mode...
[2025-08-15 16:06:03] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-15 16:06:03] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-15 16:06:06] [DEBUG] Docker operation exit code: 0
[2025-08-15 16:06:06] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-15 16:06:06] [INFO] Docker operation completed successfully: down
[2025-08-15 16:06:07] [INFO] Recent changes in src - will rebuild images
[2025-08-15 16:06:07] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-15 16:06:07] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-15 16:06:25] [DEBUG] Docker operation exit code: 0
[2025-08-15 16:06:25] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker2 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [frontend-prod internal] load build definition from Dockerfile.prod; #3 transferring dockerfile: 2.03kB 0.0s done; #3 DONE 0.1s; ; #4 [nginx internal] load build definition from Dockerfile; #4 transferring dockerfile: 652B 0.0s done; #4 DONE 0.1s; ; #5 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #5 DONE 0.1s; ; #6 [nginx internal] load .dockerignore; #6 transferring context:; #6 transferring context: 2B done; #6 DONE 0.0s; ; #7 [nginx internal] load build context; #7 DONE 0.0s; ; #8 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.1s; ; #7 [nginx internal] load build context; #7 transferring context: 97B 0.0s done; #7 DONE 0.1s; ; #9 [nginx 2/8] RUN apk add --no-cache curl; #9 CACHED; ; #10 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #10 CACHED; ; #11 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #11 CACHED; ; #12 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #12 CACHED; ; #13 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #13 CACHED; ; #14 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #14 CACHED; ; #15 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #15 CACHED; ; #16 [nginx] exporting to image; #16 exporting layers done; #16 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af 0.0s done; #16 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 0.0s done; #16 ...; ; #17 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #17 DONE 0.4s; ; #18 [rqworker2 internal] load .dockerignore; #18 transferring context: 908B 0.0s done; #18 DONE 0.0s; ; #19 [rqworker1 internal] load build context; #19 DONE 0.0s; ; #16 [nginx] exporting to image; #16 exporting attestation manifest sha256:b5c1dcfd47330085f8bbbf38f77bb0c3effd4f04e581451b65dd9c4b1c51f7cd; #16 ...; ; #8 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #8 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #8 DONE 0.1s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.5s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B done; #21 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #16 [nginx] exporting to image; #16 exporting attestation manifest sha256:b5c1dcfd47330085f8bbbf38f77bb0c3effd4f04e581451b65dd9c4b1c51f7cd 0.1s done; #16 exporting manifest list sha256:f3310d4e15bb2e4c058ac2446d041bb29025be14c0154fee6f977fa14b0b9a98; #16 ...; ; #23 [rqworker1  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #23 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.2s done; #23 DONE 0.2s; ; #24 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.2s done; #24 DONE 0.2s; ; #16 [nginx] exporting to image; #16 exporting manifest list sha256:f3310d4e15bb2e4c058ac2446d041bb29025be14c0154fee6f977fa14b0b9a98 0.1s done; #16 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #16 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #16 ...; ; #22 [frontend-prod internal] load build context; #22 transferring context: 4.14kB 0.0s done; #22 DONE 0.1s; ; #25 [frontend-prod build-stage  9/10] RUN npm run build; #25 CACHED; ; #26 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #26 CACHED; ; #27 [frontend-prod build-stage  2/10] WORKDIR /app; #27 CACHED; ; #28 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #28 CACHED; ; #29 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #29 CACHED; ; #30 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #30 CACHED; ; #31 [frontend-prod build-stage  5/10] COPY public/ public/; #31 CACHED; ; #32 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #32 CACHED; ; #33 [frontend-prod build-stage  7/10] COPY index.html .; #33 CACHED; ; #34 [frontend-prod build-stage  8/10] COPY vite.config.js .; #34 CACHED; ; #35 [frontend-prod build-stage  3/10] COPY package*.json ./; #35 CACHED; ; #36 [frontend-prod build-stage  6/10] COPY src/ src/; #36 CACHED; ; #37 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #37 CACHED; ; #38 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #38 CACHED; ; #39 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #39 CACHED; ; #16 [nginx] exporting to image; #16 DONE 0.6s; ; #19 [rqworker2 internal] load build context; #19 transferring context: 174.47kB 0.2s done; #19 DONE 0.2s; ; #40 [backend  2/17] WORKDIR /app; #40 CACHED; ; #41 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #41 CACHED; ; #42 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #42 CACHED; ; #43 [backend  3/17] COPY requirements.txt requirements.txt; #43 CACHED; ; #44 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #44 CACHED; ; #45 [backend  7/17] RUN useradd --create-home --shell /bin/bash app; #45 CACHED; ; #46 [backend  8/17] COPY --chown=app:app src/ /app/src/; #46 ...; ; #47 [frontend-prod] exporting to image; #47 exporting layers 0.0s done; #47 exporting manifest sha256:c1836ea5127fe3358856f58cbc74c4198108ef080705cf95d1c2305c4ffbf6f7 0.0s done; #47 exporting config sha256:cd5585c9e33a62b59500b700963413683d1df872372d8b4428c999a8c03d9350 0.0s done; #47 exporting attestation manifest sha256:b56a8835b4844eafede196dd3782ceb06d2ba4bd2e87f149cb1ef579e6c91458 0.1s done; #47 exporting manifest list sha256:69ce8ee928b589e7f38552154e58974a24efb5087f5d561decaec17286fde058 0.0s done; #47 naming to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #47 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #47 DONE 0.5s; ; #46 [backend  8/17] COPY --chown=app:app src/ /app/src/; #46 DONE 0.7s; ; #48 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #48 DONE 0.3s; ; #49 [nginx] resolving provenance for metadata file; #49 DONE 0.0s; ; #50 [frontend-prod] resolving provenance for metadata file; #50 DONE 0.0s; ; #51 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #51 DONE 0.2s; ; #52 [rqworker3 11/17] COPY --chown=app:app templates/ /app/templates/; #52 DONE 0.2s; ; #53 [rqworker1 12/17] COPY --chown=app:app static/ /app/static/; #53 DONE 1.2s; ; #54 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #54 DONE 0.2s; ; #55 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #55 DONE 0.5s; ; #56 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #56 DONE 0.5s; ; #57 [rqworker2 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #57 DONE 0.6s; ; #58 [rqworker2 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #58 DONE 0.4s; ; #59 [rqworker2] exporting to image; #59 exporting layers 3.8s done; #59 exporting manifest sha256:f839eab98914cfbd6b63e724e8296a7054a3a34417fe6d5ac9c3f2dcaba4e8c4; #59 exporting manifest sha256:f839eab98914cfbd6b63e724e8296a7054a3a34417fe6d5ac9c3f2dcaba4e8c4 0.1s done; #59 exporting config sha256:b2b6fa93e765df095267ede4d4a54e5c653696d39f321b28a84472fb386cd448; #59 exporting config sha256:b2b6fa93e765df095267ede4d4a54e5c653696d39f321b28a84472fb386cd448 0.2s done; #59 exporting attestation manifest sha256:a84e216d2f814f4e950f5edd6c763c2eee75ef3e4771eac62b58d20ac23ea241; #59 exporting attestation manifest sha256:a84e216d2f814f4e950f5edd6c763c2eee75ef3e4771eac62b58d20ac23ea241 0.3s done; #59 exporting manifest list sha256:ac8804a96b27956bf9afc717df12584468040a37a6b99cc6f6db041fbc4c5686; #59 exporting manifest list sha256:ac8804a96b27956bf9afc717df12584468040a37a6b99cc6f6db041fbc4c5686 0.2s done; #59 naming to docker.io/library/casestrainer-rqworker2:latest 0.1s done; #59 unpacking to docker.io/library/casestrainer-rqworker2:latest; #59 ...; ; #60 [rqworker3] exporting to image; #60 exporting layers 3.9s done; #60 exporting manifest sha256:6f7a8864e517d9e5d4747d4bc3a4afda1c8a63002b7504f387b12c4b7f7898a8 0.1s done; #60 exporting config sha256:07a550b99ec7c7176db46946f8ca752f0bdaf284acc368a3aa7b1cd2cb8aec36 0.2s done; #60 exporting attestation manifest sha256:b2e04591395eacc74d10081ef1e6aa12d6f4264d852243cc8d534777421a6d70 0.3s done; #60 exporting manifest list sha256:8567887d0c7248c7212d5860942f6f539d87a30acb63f4c15501dbfd22d967f0 0.2s done; #60 naming to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #60 unpacking to docker.io/library/casestrainer-rqworker3:latest 4.4s done; #60 DONE 9.2s; ; #59 [rqworker2] exporting to image; #59 unpacking to docker.io/library/casestrainer-rqworker2:latest 4.4s done; #59 DONE 9.3s; ; #61 [rqworker1] exporting to image; #61 exporting layers 3.9s done; #61 exporting manifest sha256:f6e04572ba76bcdb0019ade4db1048be05eb7dce8a2607c301f4fa18747436aa 0.2s done; #61 exporting config sha256:cb4bc5e65b931502af997e906ed6685ea482eb97031f9fe9062f7e2dbc3fb9f9 0.1s done; #61 exporting attestation manifest sha256:06a1ed822b2c8d951f9dc26950215435a0325fd0efff15a356f9aa7375afd026 0.3s done; #61 exporting manifest list sha256:bbb7178e044948a8a21a73da023ba3b73a9f3df35a0a83b1e4d2ff0dce6fdd7b 0.2s done; #61 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest 4.4s done; #61 DONE 9.3s; ; #62 [backend] exporting to image; #62 exporting layers 3.9s done; #62 exporting manifest sha256:03df3f8e620f5c834914965d06f23a0adfa204544a2a6bfdd94d1f8e0db9ca97 0.1s done; #62 exporting config sha256:620ce1b265a3c6ad37a6fbcbcbbce8dcb5787df145856a3ca211df9647e921e3 0.2s done; #62 exporting attestation manifest sha256:c5110d932586d6c9c894dd9e221483e5166036ea935e3305573e2af24e85373f 0.3s done; #62 exporting manifest list sha256:c4b25937e46cf2e2be6085a3bca2c76679512349dd5846622dce260b05d0cab1 0.2s done; #62 naming to docker.io/library/casestrainer-backend:latest 0.1s done; #62 unpacking to docker.io/library/casestrainer-backend:latest 4.4s done; #62 DONE 9.3s; ; #63 [rqworker3] resolving provenance for metadata file; #63 DONE 0.2s; ; #64 [rqworker2] resolving provenance for metadata file; #64 ...; ; #65 [rqworker1] resolving provenance for metadata file; #65 DONE 0.2s; ; #64 [rqworker2] resolving provenance for metadata file; #64 DONE 0.3s; ; #66 [backend] resolving provenance for metadata file; #66 DONE 0.0s;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built
[2025-08-15 16:06:25] [INFO] Docker operation completed successfully: build
[2025-08-15 16:06:25] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-15 16:06:43] [DEBUG] Docker operation exit code: 0
[2025-08-15 16:06:43] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-nginx-prod  Created;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-15 16:06:43] [INFO] Docker operation completed successfully: up
[2025-08-15 16:06:43] [INFO] Waiting for containers to stabilize...
[2025-08-15 16:06:54] [INFO] Performing application health check...
[2025-08-15 16:06:54] [INFO] Application health check passed
[2025-08-15 16:06:54] [INFO] Deployment completed successfully!
[2025-08-15 16:06:54] [INFO] Containers running: 7
[2025-08-15 16:06:54] [DEBUG] Launcher execution completed
[2025-08-15 16:07:41] [INFO] CaseStrainer Production Launcher starting...
[2025-08-15 16:07:41] [INFO] Environment: Production, Mode: Auto
[2025-08-15 16:07:41] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-15 16:07:41] [INFO] Checking prerequisites...
[2025-08-15 16:07:41] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-15 16:07:41] [INFO] Auto-detecting deployment mode...
[2025-08-15 16:07:42] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-15 16:07:42] [INFO] Recent code changes detected - recommending Fast start
[2025-08-15 16:07:42] [INFO] Auto-detected mode: Fast
[2025-08-15 16:07:42] [INFO] Starting deployment in Fast mode...
[2025-08-15 16:07:42] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-15 16:07:42] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-15 16:07:46] [DEBUG] Docker operation exit code: 0
[2025-08-15 16:07:46] [DEBUG] Docker output:  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-15 16:07:46] [INFO] Docker operation completed successfully: down
[2025-08-15 16:07:46] [INFO] Recent changes in src - will rebuild images
[2025-08-15 16:07:46] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-15 16:07:46] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-15 16:08:04] [DEBUG] Docker operation exit code: 0
[2025-08-15 16:08:04] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [backend internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [nginx internal] load build definition from Dockerfile; #3 transferring dockerfile: 652B 0.0s done; #3 DONE 0.1s; ; #4 [frontend-prod internal] load build definition from Dockerfile.prod; #4 transferring dockerfile: 2.03kB done; #4 DONE 0.1s; ; #5 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #5 ...; ; #6 [nginx internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B 0.0s done; #7 DONE 0.1s; ; #8 [nginx internal] load build context; #8 DONE 0.0s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.2s; ; #10 [backend internal] load metadata for docker.io/library/python:3.10-slim; #10 ...; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 DONE 0.2s; ; #8 [nginx internal] load build context; #8 transferring context: 97B 0.0s done; #8 DONE 0.1s; ; #5 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #5 DONE 0.5s; ; #11 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #11 CACHED; ; #12 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #12 CACHED; ; #13 [nginx 2/8] RUN apk add --no-cache curl; #13 CACHED; ; #14 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #14 CACHED; ; #15 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #15 CACHED; ; #16 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #16 CACHED; ; #17 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #17 CACHED; ; #18 [frontend-prod internal] load .dockerignore; #18 transferring context: 834B 0.0s done; #18 DONE 0.1s; ; #9 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.2s; ; #10 [backend internal] load metadata for docker.io/library/python:3.10-slim; #10 DONE 0.7s; ; #19 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #19 ...; ; #20 [frontend-prod internal] load build context; #20 DONE 0.0s; ; #21 [backend internal] load .dockerignore; #21 transferring context: 908B 0.0s done; #21 DONE 0.1s; ; #19 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #19 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #19 ...; ; #22 [rqworker3 internal] load build context; #22 DONE 0.0s; ; #19 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #19 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.3s done; #19 DONE 0.3s; ; #20 [frontend-prod internal] load build context; #20 transferring context: 4.14kB 0.0s done; #20 DONE 0.1s; ; #23 [backend  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #23 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.2s done; #23 DONE 0.2s; ; #24 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #24 CACHED; ; #25 [frontend-prod build-stage  2/10] WORKDIR /app; #25 CACHED; ; #26 [frontend-prod build-stage  9/10] RUN npm run build; #26 CACHED; ; #27 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #27 CACHED; ; #28 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #28 CACHED; ; #29 [frontend-prod build-stage  5/10] COPY public/ public/; #29 CACHED; ; #30 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #30 CACHED; ; #31 [frontend-prod build-stage  8/10] COPY vite.config.js .; #31 CACHED; ; #32 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #32 CACHED; ; #33 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #33 CACHED; ; #34 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #34 CACHED; ; #35 [frontend-prod build-stage  6/10] COPY src/ src/; #35 CACHED; ; #36 [frontend-prod build-stage  7/10] COPY index.html .; #36 CACHED; ; #37 [frontend-prod build-stage  3/10] COPY package*.json ./; #37 CACHED; ; #38 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #38 CACHED; ; #22 [backend internal] load build context; #22 ...; ; #39 [nginx] exporting to image; #39 exporting layers 0.1s done; #39 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af 0.0s done; #39 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 0.0s done; #39 exporting attestation manifest sha256:4b105b28b4aee5d40a371c7ffa5fca9065b5ebddb3d3d0fad018f3b4f4c595cc 0.2s done; #39 exporting manifest list sha256:0af3b5066d8d956c0079fb5345977d5d2f160b61d560943ea84e2f238d3b09cc 0.1s done; #39 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #39 unpacking to docker.io/library/casestrainer-nginx:latest 0.1s done; #39 DONE 0.7s; ; #22 [backend internal] load build context; #22 transferring context: 153.73kB 0.2s done; #22 DONE 0.3s; ; #40 [frontend-prod] exporting to image; #40 exporting layers 0.1s done; #40 exporting manifest sha256:c1836ea5127fe3358856f58cbc74c4198108ef080705cf95d1c2305c4ffbf6f7 0.0s done; #40 exporting config sha256:cd5585c9e33a62b59500b700963413683d1df872372d8b4428c999a8c03d9350 0.0s done; #40 exporting attestation manifest sha256:5c926f9260659f34eeba22bc10142bd04e127e62f9aa9f9a74c4f5c05f851013 0.1s done; #40 exporting manifest list sha256:57382b53e655ef19ad2b9fbbee870ef8bfaa3f9435300afde794bb4d0c58159e; #40 ...; ; #41 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #41 CACHED; ; #42 [backend  2/17] WORKDIR /app; #42 CACHED; ; #43 [backend  3/17] COPY requirements.txt requirements.txt; #43 CACHED; ; #44 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #44 CACHED; ; #45 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #45 CACHED; ; #46 [backend  7/17] RUN useradd --create-home --shell /bin/bash app; #46 CACHED; ; #40 [frontend-prod] exporting to image; #40 exporting manifest list sha256:57382b53e655ef19ad2b9fbbee870ef8bfaa3f9435300afde794bb4d0c58159e 0.1s done; #40 naming to docker.io/library/casestrainer-frontend-prod:latest; #40 naming to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #40 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.1s done; #40 DONE 0.6s; ; #47 [backend  8/17] COPY --chown=app:app src/ /app/src/; #47 DONE 0.7s; ; #48 [nginx] resolving provenance for metadata file; #48 DONE 0.0s; ; #49 [backend  9/17] COPY --chown=app:app app/ /app/app/; #49 ...; ; #50 [frontend-prod] resolving provenance for metadata file; #50 DONE 0.0s; ; #49 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #49 DONE 0.2s; ; #51 [rqworker3 10/17] COPY --chown=app:app config/ /app/config/; #51 DONE 0.2s; ; #52 [rqworker3 11/17] COPY --chown=app:app templates/ /app/templates/; #52 DONE 0.2s; ; #53 [rqworker1 12/17] COPY --chown=app:app static/ /app/static/; #53 DONE 1.4s; ; #54 [backend 13/17] COPY --chown=app:app VERSION /app/VERSION; #54 DONE 0.2s; ; #55 [rqworker2 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #55 DONE 0.5s; ; #56 [rqworker2 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #56 DONE 0.6s; ; #57 [rqworker3 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #57 DONE 0.5s; ; #58 [rqworker1 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #58 DONE 0.4s; ; #59 [backend] exporting to image; #59 exporting layers; #59 exporting layers 3.8s done; #59 exporting manifest sha256:fb9d35dc276a55c2930f4dd6538d475027d74e6cb79a581b104d81cac6a4b4f4; #59 exporting manifest sha256:fb9d35dc276a55c2930f4dd6538d475027d74e6cb79a581b104d81cac6a4b4f4 0.1s done; #59 exporting config sha256:96e7a571c3ab9142d72f88c75374b1acff3efceeee4cb938d7e54198b7dbe11a; #59 exporting config sha256:96e7a571c3ab9142d72f88c75374b1acff3efceeee4cb938d7e54198b7dbe11a 0.2s done; #59 exporting attestation manifest sha256:86f0cf8e33b7be70d7494762f4ff770e85fb58577cf40e560925e544a0a938bd; #59 exporting attestation manifest sha256:86f0cf8e33b7be70d7494762f4ff770e85fb58577cf40e560925e544a0a938bd 0.3s done; #59 exporting manifest list sha256:400dea6023210a75354c6f826669bdec39906c7bff658267128e1a8e98c7df16; #59 exporting manifest list sha256:400dea6023210a75354c6f826669bdec39906c7bff658267128e1a8e98c7df16 0.3s done; #59 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #59 unpacking to docker.io/library/casestrainer-backend:latest; #59 unpacking to docker.io/library/casestrainer-backend:latest 3.3s done; #59 ...; ; #60 [rqworker1] exporting to image; #60 exporting layers 3.8s done; #60 exporting manifest sha256:6f477a5d3bbaf5d3b4a3db74a8ac451736d7db2beb05f572dfc7740b76929489 0.1s done; #60 exporting config sha256:09938da0521c50eca2e3acafc6e2ea6dcaa9858c288e954ce6f4839843afe4a7 0.2s done; #60 exporting attestation manifest sha256:98e5b1a1a3687b83e82a6898976479411a27d514e4e674a2e6d28e3060bf4438 0.3s done; #60 exporting manifest list sha256:ba3475389d08369f9395aefb5a7220dc488dd5538813992abf1e18bbf3d4562c 0.3s done; #60 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #60 unpacking to docker.io/library/casestrainer-rqworker1:latest 3.3s done; #60 DONE 8.3s; ; #61 [rqworker2] exporting to image; #61 exporting layers 3.8s done; #61 exporting manifest sha256:25d13aeebcb3b6d6bcd5f95a0b3ffb140c5e2119d10515e2baaa06a1f1f9aced 0.1s done; #61 exporting config sha256:b242986907c5c4ee9e43ce9fb0b181c4f07257edf7b3f37dce0f72b899810646 0.1s done; #61 exporting attestation manifest sha256:0655feec76ee6bb63b6d3b28b8959e1eb56b158ebb7d0313058d62d31660bb2c 0.3s done; #61 exporting manifest list sha256:780facf635568f7a2ef7d64a21c4a74832227ad3545576799c866daebf82a002 0.3s done; #61 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-rqworker2:latest 3.3s done; #61 DONE 8.3s; ; #59 [backend] exporting to image; #59 DONE 8.3s; ; #62 [rqworker3] exporting to image; #62 exporting layers 3.9s done; #62 exporting manifest sha256:b10c877058aeceaff6c167f08e8fcb81602062a187e51a1586ddbbcdff3a185d 0.1s done; #62 exporting config sha256:a64e0008aea077ae3b06a04ed427ba822e7b495f877cb36578317c3af8a68475 0.1s done; #62 exporting attestation manifest sha256:6685a123dac51ee46e428bccb629b3b595e063e9346b4d76c5f39ed9720ef642 0.3s done; #62 exporting manifest list sha256:6eb3c7643847ae9450523291894ebd6b22f0ca8f2b89abe0de533e84ca504e8a 0.2s done; #62 naming to docker.io/library/casestrainer-rqworker3:latest 0.1s done; #62 unpacking to docker.io/library/casestrainer-rqworker3:latest 3.4s done; #62 DONE 8.3s; ; #63 [backend] resolving provenance for metadata file; #63 DONE 0.4s; ; #64 [rqworker2] resolving provenance for metadata file; #64 DONE 0.1s; ; #65 [rqworker1] resolving provenance for metadata file; #65 DONE 0.3s; ; #66 [rqworker3] resolving provenance for metadata file; #66 DONE 0.0s;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built
[2025-08-15 16:08:04] [INFO] Docker operation completed successfully: build
[2025-08-15 16:08:04] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-15 16:08:24] [DEBUG] Docker operation exit code: 0
[2025-08-15 16:08:24] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-15 16:08:24] [INFO] Docker operation completed successfully: up
[2025-08-15 16:08:24] [INFO] Waiting for containers to stabilize...
[2025-08-15 16:08:34] [INFO] Performing application health check...
[2025-08-15 16:08:34] [INFO] Application health check passed
[2025-08-15 16:08:34] [INFO] Deployment completed successfully!
[2025-08-15 16:08:34] [INFO] Containers running: 7
[2025-08-15 16:08:34] [DEBUG] Launcher execution completed
[2025-08-15 16:16:09] [INFO] CaseStrainer Production Launcher starting...
[2025-08-15 16:16:09] [INFO] Environment: Production, Mode: Auto
[2025-08-15 16:16:09] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-15 16:16:09] [INFO] Checking prerequisites...
[2025-08-15 16:16:09] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-15 16:16:09] [INFO] Auto-detecting deployment mode...
[2025-08-15 16:16:10] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-15 16:16:10] [INFO] Recent code changes detected - recommending Fast start
[2025-08-15 16:16:10] [INFO] Auto-detected mode: Fast
[2025-08-15 16:16:10] [INFO] Starting deployment in Fast mode...
[2025-08-15 16:16:10] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-15 16:16:10] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-15 16:16:13] [DEBUG] Docker operation exit code: 0
[2025-08-15 16:16:13] [DEBUG] Docker output:  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-15 16:16:13] [INFO] Docker operation completed successfully: down
[2025-08-15 16:16:14] [INFO] Recent changes in src - will rebuild images
[2025-08-15 16:16:14] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-15 16:16:14] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-15 16:16:31] [DEBUG] Docker operation exit code: 0
[2025-08-15 16:16:31] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [backend internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.0s; ; #3 [frontend-prod internal] load build definition from Dockerfile.prod; #3 transferring dockerfile: 2.03kB done; #3 DONE 0.0s; ; #4 [nginx internal] load build definition from Dockerfile; #4 transferring dockerfile: 652B 0.0s done; #4 DONE 0.1s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #6 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [auth] library/python:pull token for registry-1.docker.io; #7 DONE 0.0s; ; #8 [auth] library/node:pull token for registry-1.docker.io; #8 DONE 0.0s; ; #9 [nginx internal] load .dockerignore; #9 transferring context: 2B done; #9 DONE 0.0s; ; #10 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #11 [nginx internal] load build context; #11 transferring context: 97B done; #11 DONE 0.0s; ; #12 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #12 CACHED; ; #13 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #13 CACHED; ; #14 [nginx 2/8] RUN apk add --no-cache curl; #14 CACHED; ; #15 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #15 CACHED; ; #16 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #16 CACHED; ; #17 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #17 CACHED; ; #18 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #18 CACHED; ; #19 [nginx] exporting to image; #19 exporting layers 0.0s done; #19 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af done; #19 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 done; #19 exporting attestation manifest sha256:915ac7b57145c7f861f13911fe813a016e4d543f2cffc0840ae88d948ea06d86; #19 exporting attestation manifest sha256:915ac7b57145c7f861f13911fe813a016e4d543f2cffc0840ae88d948ea06d86 0.1s done; #19 exporting manifest list sha256:799f197226e87301e6b525b4ed17df10ed6d7f2eb7f0776c2226ac9262263da3 0.0s done; #19 naming to docker.io/library/casestrainer-nginx:latest; #19 naming to docker.io/library/casestrainer-nginx:latest done; #19 unpacking to docker.io/library/casestrainer-nginx:latest 0.0s done; #19 DONE 0.3s; ; #20 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #20 DONE 0.7s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 ...; ; #10 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #10 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #10 DONE 0.1s; ; #21 [frontend-prod internal] load .dockerignore; #21 transferring context: 834B 0.0s done; #21 DONE 0.0s; ; #22 [frontend-prod internal] load build context; #22 DONE 0.0s; ; #23 [rqworker1 internal] load .dockerignore; #23 DONE 0.0s; ; #5 [rqworker1 internal] load metadata for docker.io/library/python:3.10-slim; #5 DONE 0.9s; ; #23 [rqworker2 internal] load .dockerignore; #23 transferring context: 908B 0.0s done; #23 DONE 0.0s; ; #24 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #24 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.1s done; #24 DONE 0.1s; ; #25 [rqworker3 internal] load build context; #25 DONE 0.0s; ; #26 [rqworker3  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #26 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #26 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #26 DONE 0.1s; ; #22 [frontend-prod internal] load build context; #22 transferring context: 4.14kB 0.0s done; #22 DONE 0.1s; ; #27 [nginx] resolving provenance for metadata file; #27 DONE 0.0s; ; #28 [frontend-prod build-stage  5/10] COPY public/ public/; #28 CACHED; ; #29 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #29 CACHED; ; #30 [frontend-prod build-stage  6/10] COPY src/ src/; #30 CACHED; ; #31 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #31 CACHED; ; #32 [frontend-prod build-stage  9/10] RUN npm run build; #32 CACHED; ; #33 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #33 CACHED; ; #34 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #34 CACHED; ; #35 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #35 CACHED; ; #36 [frontend-prod build-stage  8/10] COPY vite.config.js .; #36 CACHED; ; #37 [frontend-prod build-stage  2/10] WORKDIR /app; #37 CACHED; ; #38 [frontend-prod build-stage  3/10] COPY package*.json ./; #38 CACHED; ; #39 [frontend-prod build-stage  7/10] COPY index.html .; #39 CACHED; ; #40 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #40 CACHED; ; #41 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #41 CACHED; ; #26 [rqworker3  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #26 DONE 0.1s; ; #42 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #42 CACHED; ; #25 [rqworker1 internal] load build context; #25 transferring context: 173.95kB 0.2s done; #25 DONE 0.2s; ; #43 [frontend-prod] exporting to image; #43 exporting layers 0.0s done; #43 exporting manifest sha256:c1836ea5127fe3358856f58cbc74c4198108ef080705cf95d1c2305c4ffbf6f7 0.0s done; #43 exporting config sha256:cd5585c9e33a62b59500b700963413683d1df872372d8b4428c999a8c03d9350 0.0s done; #43 exporting attestation manifest sha256:d9b3573e641c8a4c16a019aa2619a0597080f77b8bf3261b86919fbe836b6505 0.1s done; #43 exporting manifest list sha256:f85f39ba16095902f18748300ab8361ed3eba21a9484b2797290e3d8851c90c5; #43 exporting manifest list sha256:f85f39ba16095902f18748300ab8361ed3eba21a9484b2797290e3d8851c90c5 0.0s done; #43 naming to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #43 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #43 DONE 0.3s; ; #44 [rqworker2  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #44 CACHED; ; #45 [rqworker2  2/17] WORKDIR /app; #45 CACHED; ; #46 [rqworker2  5/17] RUN pip install --no-cache-dir -r requirements.txt; #46 CACHED; ; #47 [rqworker2  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #47 CACHED; ; #48 [rqworker2  3/17] COPY requirements.txt requirements.txt; #48 CACHED; ; #49 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #49 CACHED; ; #50 [rqworker3  8/17] COPY --chown=app:app src/ /app/src/; #50 DONE 0.6s; ; #51 [rqworker2  9/17] COPY --chown=app:app app/ /app/app/; #51 DONE 0.3s; ; #52 [frontend-prod] resolving provenance for metadata file; #52 DONE 0.0s; ; #53 [rqworker1 10/17] COPY --chown=app:app config/ /app/config/; #53 DONE 0.2s; ; #54 [rqworker2 11/17] COPY --chown=app:app templates/ /app/templates/; #54 DONE 0.3s; ; #55 [backend 12/17] COPY --chown=app:app static/ /app/static/; #55 DONE 0.9s; ; #56 [rqworker1 13/17] COPY --chown=app:app VERSION /app/VERSION; #56 DONE 0.2s; ; #57 [rqworker1 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #57 DONE 0.5s; ; #58 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #58 DONE 0.4s; ; #59 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #59 DONE 0.5s; ; #60 [rqworker1 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #60 DONE 0.6s; ; #61 [rqworker1] exporting to image; #61 exporting layers 4.0s done; #61 exporting manifest sha256:27abd8d318cbbadb712f33783541c051a3d2579a689dbc1e484bce7d8983d837 0.1s done; #61 exporting config sha256:467d2b014759e51758003bcfbfe6fdfde13ec7298a9698cf1b85add5c3f80b1a; #61 exporting config sha256:467d2b014759e51758003bcfbfe6fdfde13ec7298a9698cf1b85add5c3f80b1a 0.1s done; #61 exporting attestation manifest sha256:a2d14afe1a76ef070600977741a0a81caddf5211a73a086bccc363c7d9eecfeb; #61 exporting attestation manifest sha256:a2d14afe1a76ef070600977741a0a81caddf5211a73a086bccc363c7d9eecfeb 0.2s done; #61 exporting manifest list sha256:f645cb90b45379f12b07ebc19fb7942dfcec9ac0f40f4299242bf5421723ac1a; #61 exporting manifest list sha256:f645cb90b45379f12b07ebc19fb7942dfcec9ac0f40f4299242bf5421723ac1a 0.1s done; #61 naming to docker.io/library/casestrainer-rqworker1:latest; #61 naming to docker.io/library/casestrainer-rqworker1:latest 0.1s done; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest; #61 ...; ; #62 [backend] exporting to image; #62 exporting layers 4.0s done; #62 exporting manifest sha256:a18df7205b4fefbf239f89e5785a4f54d365e7092ff6ff6ea0c5d41de139e0a8 0.1s done; #62 exporting config sha256:20e2c4570f36e2dfd8c7f8656a999ae4722a0c99b02d7f29b07f767dafe315d1 0.1s done; #62 exporting attestation manifest sha256:a2da6319eb657f28fa0432417d3bbc9496960a4f1f0a55a11fd229f131abf3ac 0.2s done; #62 exporting manifest list sha256:c2f0c71c9d439667dbce6e06ae9ba6d034655c4f7d717a5ff3b8880de48f457d 0.1s done; #62 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #62 unpacking to docker.io/library/casestrainer-backend:latest 3.7s done; #62 DONE 8.5s; ; #61 [rqworker1] exporting to image; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest 3.7s done; #61 DONE 8.6s; ; #63 [rqworker3] exporting to image; #63 exporting layers 4.0s done; #63 exporting manifest sha256:15edb46dd76f11906c541f76a1b1fd15f1d01cab7acde4b61589bb134a77a036 0.1s done; #63 exporting config sha256:b299078a37dd77bf2e0aec2d93dd9b7f245b26dca2f0d129d8846542f84e69c9 0.2s done; #63 exporting attestation manifest sha256:b9e6edf9dbdba6ae502cecf36973cdda571665395b3754942bef4cbbeaa6e9a8 0.2s done; #63 exporting manifest list sha256:8db28e6ac4d47336a91c341eba3ba8c42c86fa8ee8c7e485f4ece4b5711feaf3 0.1s done; #63 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #63 unpacking to docker.io/library/casestrainer-rqworker3:latest 3.6s done; #63 DONE 8.5s; ; #64 [rqworker2] exporting to image; #64 exporting layers 4.0s done; #64 exporting manifest sha256:acfa61b64e48493a14e8cc3a04610b517b4a56a1f14f30f51429b02d83a0b557 0.1s done; #64 exporting config sha256:e2dbe402ef3f8305e4cf3ac701284408d31cfb5434c4940831d8f64f98744302 0.2s done; #64 exporting attestation manifest sha256:34a2c0b0dc3bb784462139f1a90be48ce413d1bc9fcaad27757fbde89baa15a4 0.2s done; #64 exporting manifest list sha256:9efafe9afa7f0535477bbe89593024736736b91f9a5eb0416ef4abb62ed52698 0.1s done; #64 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #64 unpacking to docker.io/library/casestrainer-rqworker2:latest 3.7s done; #64 DONE 8.6s; ; #65 [backend] resolving provenance for metadata file; #65 ...; ; #66 [rqworker3] resolving provenance for metadata file; #66 DONE 0.3s; ; #65 [backend] resolving provenance for metadata file; #65 DONE 0.5s; ; #67 [rqworker1] resolving provenance for metadata file; #67 DONE 0.2s; ; #68 [rqworker2] resolving provenance for metadata file; #68 DONE 0.0s;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built
[2025-08-15 16:16:31] [INFO] Docker operation completed successfully: build
[2025-08-15 16:16:31] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-15 16:16:49] [DEBUG] Docker operation exit code: 0
[2025-08-15 16:16:49] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-nginx-prod  Created;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-15 16:16:49] [INFO] Docker operation completed successfully: up
[2025-08-15 16:16:49] [INFO] Waiting for containers to stabilize...
[2025-08-15 16:17:00] [INFO] Performing application health check...
[2025-08-15 16:17:00] [INFO] Application health check passed
[2025-08-15 16:17:00] [INFO] Deployment completed successfully!
[2025-08-15 16:17:00] [INFO] Containers running: 7
[2025-08-15 16:17:00] [DEBUG] Launcher execution completed
[2025-08-15 16:17:35] [INFO] CaseStrainer Production Launcher starting...
[2025-08-15 16:17:35] [INFO] Environment: Production, Mode: Auto
[2025-08-15 16:17:35] [DEBUG] Configuration loaded from cslaunch-production-config.json
[2025-08-15 16:17:35] [INFO] Checking prerequisites...
[2025-08-15 16:17:35] [DEBUG] Docker check passed: Docker version 28.3.2, build 578ccf6
[2025-08-15 16:17:35] [INFO] Auto-detecting deployment mode...
[2025-08-15 16:17:35] [DEBUG] Recent changes detected in src (within 2 hours)
[2025-08-15 16:17:35] [INFO] Recent code changes detected - recommending Fast start
[2025-08-15 16:17:35] [INFO] Auto-detected mode: Fast
[2025-08-15 16:17:35] [INFO] Starting deployment in Fast mode...
[2025-08-15 16:17:35] [INFO] Performing Fast Start (restart with rebuild if needed)...
[2025-08-15 16:17:35] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml down 
[2025-08-15 16:17:38] [DEBUG] Docker operation exit code: 0
[2025-08-15 16:17:38] [DEBUG] Docker output:  Container casestrainer-rqworker1-prod  Stopping;  Container casestrainer-rqworker3-prod  Stopping;  Container casestrainer-nginx-prod  Stopping;  Container casestrainer-rqworker2-prod  Stopping;  Container casestrainer-nginx-prod  Stopped;  Container casestrainer-nginx-prod  Removing;  Container casestrainer-rqworker2-prod  Stopped;  Container casestrainer-rqworker2-prod  Removing;  Container casestrainer-nginx-prod  Removed;  Container casestrainer-frontend-prod  Stopping;  Container casestrainer-backend-prod  Stopping;  Container casestrainer-rqworker1-prod  Stopped;  Container casestrainer-rqworker1-prod  Removing;  Container casestrainer-rqworker2-prod  Removed;  Container casestrainer-rqworker3-prod  Stopped;  Container casestrainer-rqworker3-prod  Removing;  Container casestrainer-rqworker1-prod  Removed;  Container casestrainer-rqworker3-prod  Removed;  Container casestrainer-frontend-prod  Stopped;  Container casestrainer-frontend-prod  Removing;  Container casestrainer-frontend-prod  Removed;  Container casestrainer-backend-prod  Stopped;  Container casestrainer-backend-prod  Removing;  Container casestrainer-backend-prod  Removed;  Container casestrainer-redis-prod  Stopping;  Container casestrainer-redis-prod  Stopped;  Container casestrainer-redis-prod  Removing;  Container casestrainer-redis-prod  Removed;  Network casestrainer_app-network  Removing;  Network casestrainer_app-network  Removed
[2025-08-15 16:17:38] [INFO] Docker operation completed successfully: down
[2025-08-15 16:17:39] [INFO] Recent changes in src - will rebuild images
[2025-08-15 16:17:39] [INFO] Rebuilding Docker images due to recent changes...
[2025-08-15 16:17:39] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml build 
[2025-08-15 16:17:53] [DEBUG] Docker operation exit code: 0
[2025-08-15 16:17:53] [DEBUG] Docker output: #1 [internal] load local bake definitions; #1 reading from stdin 2.73kB done; #1 DONE 0.0s; ; #2 [rqworker1 internal] load build definition from Dockerfile; #2 transferring dockerfile: 1.80kB 0.0s done; #2 DONE 0.1s; ; #3 [backend internal] load metadata for docker.io/library/python:3.10-slim; #3 ...; ; #4 [nginx internal] load build definition from Dockerfile; #4 transferring dockerfile: 652B 0.0s done; #4 DONE 0.1s; ; #5 [frontend-prod internal] load build definition from Dockerfile.prod; #5 transferring dockerfile: 2.03kB 0.1s done; #5 DONE 0.1s; ; #3 [rqworker2 internal] load metadata for docker.io/library/python:3.10-slim; #3 ...; ; #6 [frontend-prod internal] load metadata for docker.io/library/nginx:alpine; #6 DONE 0.1s; ; #7 [nginx internal] load .dockerignore; #7 transferring context: 2B done; #7 DONE 0.0s; ; #8 [nginx internal] load build context; #8 DONE 0.0s; ; #9 [nginx 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.2s; ; #8 [nginx internal] load build context; #8 transferring context: 97B 0.0s done; #8 DONE 0.0s; ; #10 [nginx 4/8] RUN mkdir -p /etc/nginx/ssl; #10 CACHED; ; #11 [nginx 6/8] COPY conf.d/default.conf /etc/nginx/conf.d/default.conf; #11 CACHED; ; #12 [nginx 5/8] COPY nginx.conf /etc/nginx/nginx.conf; #12 CACHED; ; #13 [nginx 3/8] RUN mkdir -p /usr/share/nginx/html/casestrainer; #13 CACHED; ; #14 [nginx 7/8] RUN chown -R nginx:nginx /usr/share/nginx/html; #14 CACHED; ; #15 [nginx 2/8] RUN apk add --no-cache curl; #15 CACHED; ; #16 [nginx 8/8] RUN chmod -R 755 /usr/share/nginx/html; #16 CACHED; ; #17 [frontend-prod internal] load metadata for docker.io/library/node:18-alpine; #17 DONE 0.5s; ; #3 [backend internal] load metadata for docker.io/library/python:3.10-slim; #3 DONE 0.5s; ; #18 [backend internal] load .dockerignore; #18 transferring context: 908B 0.0s done; #18 DONE 0.1s; ; #19 [frontend-prod internal] load .dockerignore; #19 transferring context: 834B 0.0s done; #19 DONE 0.1s; ; #20 [nginx] exporting to image; #20 exporting layers 0.0s done; #20 exporting manifest sha256:1411e1d0a4e40bb392400d66abc81bda6d9f8f45ef272c4b1b18c6d7a95cd7af 0.0s done; #20 exporting config sha256:9f509e4711f233a512933a1151b1c64f6be141b00e62dd8b09f096dbaf9f4939 0.0s done; #20 exporting attestation manifest sha256:a5f1a3cb636f88d837e3df89c50a5dc1200131e7665f8cfbe2ae606b48268ee7; #20 ...; ; #9 [frontend-prod 1/8] FROM docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a; #9 resolve docker.io/library/nginx:alpine@sha256:c0d0d0c261e8a56ddb9d445961f404a62ddd76863c00d8091221305e7c8c0c3a 0.1s done; #9 DONE 0.3s; ; #21 [frontend-prod internal] load build context; #21 DONE 0.0s; ; #22 [rqworker3 internal] load build context; #22 DONE 0.0s; ; #20 [nginx] exporting to image; #20 exporting attestation manifest sha256:a5f1a3cb636f88d837e3df89c50a5dc1200131e7665f8cfbe2ae606b48268ee7 0.1s done; #20 exporting manifest list sha256:28350fe21686b6a823342e611281a5bedc08444cfedc265c0ea166dad3460f2c; #20 ...; ; #23 [frontend-prod build-stage  1/10] FROM docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e; #23 resolve docker.io/library/node:18-alpine@sha256:8d6421d663b4c28fd3ebc498332f249011d118945588d0a35cb9bc4b8ca09d9e 0.2s done; #23 DONE 0.2s; ; #24 [rqworker3  1/17] FROM docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da; #24 resolve docker.io/library/python:3.10-slim@sha256:420fbb0e468d3eaf0f7e93ea6f7a48792cbcadc39d43ac95b96bee2afe4367da 0.1s done; #24 DONE 0.2s; ; #20 [nginx] exporting to image; #20 exporting manifest list sha256:28350fe21686b6a823342e611281a5bedc08444cfedc265c0ea166dad3460f2c 0.0s done; #20 naming to docker.io/library/casestrainer-nginx:latest 0.0s done; #20 unpacking to docker.io/library/casestrainer-nginx:latest; #20 ...; ; #21 [frontend-prod internal] load build context; #21 transferring context: 4.14kB 0.1s done; #21 DONE 0.1s; ; #20 [nginx] exporting to image; #20 unpacking to docker.io/library/casestrainer-nginx:latest 0.1s done; #20 ...; ; #25 [frontend-prod build-stage  9/10] RUN npm run build; #25 CACHED; ; #26 [frontend-prod production-stage 6/7] RUN chmod +x /wait-for-backend.sh; #26 CACHED; ; #27 [frontend-prod build-stage  3/10] COPY package*.json ./; #27 CACHED; ; #28 [frontend-prod build-stage  7/10] COPY index.html .; #28 CACHED; ; #29 [frontend-prod production-stage 4/7] COPY nginx-user-minimal.conf /etc/nginx/nginx.conf; #29 CACHED; ; #30 [frontend-prod build-stage  5/10] COPY public/ public/; #30 CACHED; ; #31 [frontend-prod build-stage 10/10] RUN if [ ! -f "/app/dist/index.html" ]; then       echo "ERROR: index.html was not generated in the build process" && exit 1;     fi; #31 CACHED; ; #32 [frontend-prod build-stage  6/10] COPY src/ src/; #32 CACHED; ; #33 [frontend-prod production-stage 3/7] RUN rm -f /etc/nginx/conf.d/*; #33 CACHED; ; #34 [frontend-prod build-stage  2/10] WORKDIR /app; #34 CACHED; ; #35 [frontend-prod build-stage  4/10] RUN npm install --prefer-offline --no-audit --progress=false; #35 CACHED; ; #36 [frontend-prod production-stage 2/7] COPY --from=build-stage /app/dist /usr/share/nginx/html; #36 CACHED; ; #37 [frontend-prod production-stage 5/7] COPY wait-for-backend.sh /wait-for-backend.sh; #37 CACHED; ; #38 [frontend-prod build-stage  8/10] COPY vite.config.js .; #38 CACHED; ; #39 [frontend-prod production-stage 7/7] RUN echo '#!/bin/sh' > /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Test Nginx configuration' >> /start-nginx.sh &&     echo 'if ! nginx -t; then' >> /start-nginx.sh &&     echo '  echo "[ERROR] Nginx configuration test failed"' >> /start-nginx.sh &&     echo '  exit 1' >> /start-nginx.sh &&     echo 'fi' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Start Nginx in the background' >> /start-nginx.sh &&     echo 'nginx -g "daemon off;" &' >> /start-nginx.sh &&     echo '' >> /start-nginx.sh &&     echo '# Keep the container running' >> /start-nginx.sh &&     echo 'wait' >> /start-nginx.sh &&     chmod +x /start-nginx.sh; #39 CACHED; ; #20 [nginx] exporting to image; #20 DONE 0.6s; ; #22 [rqworker2 internal] load build context; #22 transferring context: 156.41kB 0.2s done; #22 DONE 0.3s; ; #40 [backend  3/17] COPY requirements.txt requirements.txt; #40 CACHED; ; #41 [backend  5/17] RUN pip install --no-cache-dir -r requirements.txt; #41 CACHED; ; #42 [backend  4/17] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*; #42 CACHED; ; #43 [backend  6/17] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*; #43 CACHED; ; #44 [backend  2/17] WORKDIR /app; #44 CACHED; ; #45 [rqworker2  7/17] RUN useradd --create-home --shell /bin/bash app; #45 CACHED; ; #46 [frontend-prod] exporting to image; #46 exporting layers 0.0s done; #46 exporting manifest sha256:c1836ea5127fe3358856f58cbc74c4198108ef080705cf95d1c2305c4ffbf6f7 done; #46 exporting config sha256:cd5585c9e33a62b59500b700963413683d1df872372d8b4428c999a8c03d9350 done; #46 exporting attestation manifest sha256:86ae74e3b10547c9f0f650e71dd944909cae0c59a94271eed4ee2aa8a4e85e25 0.1s done; #46 exporting manifest list sha256:223926c8a60594dfea9b8caf860a477dd6173f4b9cfbdf09cc9c5f6b63950100; #46 exporting manifest list sha256:223926c8a60594dfea9b8caf860a477dd6173f4b9cfbdf09cc9c5f6b63950100 0.0s done; #46 naming to docker.io/library/casestrainer-frontend-prod:latest done; #46 unpacking to docker.io/library/casestrainer-frontend-prod:latest 0.0s done; #46 DONE 0.3s; ; #47 [rqworker2  8/17] COPY --chown=app:app src/ /app/src/; #47 DONE 0.4s; ; #48 [nginx] resolving provenance for metadata file; #48 DONE 0.0s; ; #47 [rqworker3  8/17] COPY --chown=app:app src/ /app/src/; #47 DONE 0.4s; ; #49 [rqworker1  9/17] COPY --chown=app:app app/ /app/app/; #49 DONE 0.2s; ; #50 [frontend-prod] resolving provenance for metadata file; #50 DONE 0.0s; ; #51 [rqworker3 10/17] COPY --chown=app:app config/ /app/config/; #51 DONE 0.1s; ; #51 [backend 10/17] COPY --chown=app:app config/ /app/config/; #51 DONE 0.1s; ; #52 [rqworker1 11/17] COPY --chown=app:app templates/ /app/templates/; #52 DONE 0.1s; ; #52 [rqworker2 11/17] COPY --chown=app:app templates/ /app/templates/; #52 DONE 0.1s; ; #53 [rqworker2 12/17] COPY --chown=app:app static/ /app/static/; #53 DONE 0.7s; ; #53 [rqworker3 12/17] COPY --chown=app:app static/ /app/static/; #53 DONE 0.7s; ; #54 [rqworker3 13/17] COPY --chown=app:app VERSION /app/VERSION; #54 DONE 0.1s; ; #54 [rqworker1 13/17] COPY --chown=app:app VERSION /app/VERSION; #54 DONE 0.1s; ; #55 [backend 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #55 DONE 0.3s; ; #55 [rqworker1 14/17] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete; #55 DONE 0.3s; ; #56 [rqworker1 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #56 DONE 0.4s; ; #56 [backend 15/17] RUN mkdir -p /app/logs && chown app:app /app/logs; #56 DONE 0.4s; ; #57 [backend 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #57 DONE 0.4s; ; #57 [rqworker1 16/17] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #57 DONE 0.4s; ; #58 [backend 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #58 DONE 0.3s; ; #58 [rqworker3 17/17] RUN chown -R app:app /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache; #58 DONE 0.3s; ; #59 [rqworker2] exporting to image; #59 exporting layers 3.5s done; #59 exporting manifest sha256:97a67dc226fc52b79e491762a8490f9dc57cce84a0c5d3a6bbf5e366253016ba; #59 exporting manifest sha256:97a67dc226fc52b79e491762a8490f9dc57cce84a0c5d3a6bbf5e366253016ba 0.1s done; #59 exporting config sha256:57d4cd35c0e991f89ca22226fcafbf73a5288f0e1a96166eb019694108497b5e; #59 exporting config sha256:57d4cd35c0e991f89ca22226fcafbf73a5288f0e1a96166eb019694108497b5e 0.1s done; #59 exporting attestation manifest sha256:6f43d16979d20c3d85d2570e421b4efeeb992ef9ef08a0fa13a90dd320708a21; #59 exporting attestation manifest sha256:6f43d16979d20c3d85d2570e421b4efeeb992ef9ef08a0fa13a90dd320708a21 0.2s done; #59 exporting manifest list sha256:44ade70c9b726f665ba5cb4ff55824c75c992acd4b995d947e62156fee55d571; #59 exporting manifest list sha256:44ade70c9b726f665ba5cb4ff55824c75c992acd4b995d947e62156fee55d571 0.1s done; #59 naming to docker.io/library/casestrainer-rqworker2:latest 0.0s done; #59 unpacking to docker.io/library/casestrainer-rqworker2:latest; #59 ...; ; #60 [backend] exporting to image; #60 exporting layers 3.5s done; #60 exporting manifest sha256:6098b8c049adb300af3b39e7d759443453d47d147e3269a25a2f2ce471206420 0.1s done; #60 exporting config sha256:8e3f52c4ba339ef497f0070e90c08dc001da909584a58fddbdad09f8bc3aa49c 0.1s done; #60 exporting attestation manifest sha256:cd6fb5a75e95055cb2b3076d458261647c6339077bdaba292e6dd07c8c28c6be 0.2s done; #60 exporting manifest list sha256:39478941a1c5bcdcc55a36727cf9d15ad1b741c9519c2dd4d1034733862c2b59 0.1s done; #60 naming to docker.io/library/casestrainer-backend:latest 0.0s done; #60 unpacking to docker.io/library/casestrainer-backend:latest 2.7s done; #60 DONE 6.8s; ; #59 [rqworker2] exporting to image; #59 unpacking to docker.io/library/casestrainer-rqworker2:latest 2.7s done; #59 DONE 6.9s; ; #61 [rqworker1] exporting to image; #61 exporting layers 3.5s done; #61 exporting manifest sha256:7cf94d430af35a35c6b8d21cf5ad0f5d94be780bf71f26e75a12a8546c023abd 0.1s done; #61 exporting config sha256:b2c5789fca911fe35994233942909bd19b75a52f0c6eb5921b5e18de37773487 0.1s done; #61 exporting attestation manifest sha256:894af31d4e8351e46737d5093a52daa56afc6ae01db6127f6aa5184b3a9d2bec 0.2s done; #61 exporting manifest list sha256:a6f0840145386188449f4e6ba8dffcf0b2098e1676ccf4575ff513cc52bf1835 0.1s done; #61 naming to docker.io/library/casestrainer-rqworker1:latest 0.0s done; #61 unpacking to docker.io/library/casestrainer-rqworker1:latest 2.7s done; #61 DONE 6.9s; ; #62 [rqworker3] exporting to image; #62 exporting layers 3.5s done; #62 exporting manifest sha256:80f4b1bb008d59384c969d9f37574f0dc0eafeef1183e0249463857e6165f71c 0.1s done; #62 exporting config sha256:cae12ea97c056dcedce4f784ad3282adb68e48413faa55e9bd6f85859dce1ee8 0.1s done; #62 exporting attestation manifest sha256:507ba53f07fd1d68bb2825611975f109273a114592c009fb2250f03a6c92c39a 0.2s done; #62 exporting manifest list sha256:986402eda38aa338ce96290dfd5aee442401658f91b625d476f8c605ecd5bbb2 0.1s done; #62 naming to docker.io/library/casestrainer-rqworker3:latest 0.0s done; #62 unpacking to docker.io/library/casestrainer-rqworker3:latest 2.7s done; #62 DONE 6.9s; ; #63 [backend] resolving provenance for metadata file; #63 DONE 0.2s; ; #64 [rqworker2] resolving provenance for metadata file; #64 DONE 0.0s; ; #65 [rqworker3] resolving provenance for metadata file; #65 DONE 0.3s; ; #66 [rqworker1] resolving provenance for metadata file; #66 DONE 0.1s;  casestrainer-backend  Built;  casestrainer-rqworker1  Built;  casestrainer-rqworker2  Built;  casestrainer-rqworker3  Built;  casestrainer-frontend-prod  Built;  casestrainer-nginx  Built
[2025-08-15 16:17:53] [INFO] Docker operation completed successfully: build
[2025-08-15 16:17:53] [DEBUG] Executing: docker-compose -f docker-compose.prod.yml up -d
[2025-08-15 16:18:07] [DEBUG] Docker operation exit code: 0
[2025-08-15 16:18:07] [DEBUG] Docker output:  Network casestrainer_app-network  Creating;  Network casestrainer_app-network  Created;  Container casestrainer-redis-prod  Creating;  Container casestrainer-frontend-prod  Creating;  Container casestrainer-frontend-prod  Created;  Container casestrainer-redis-prod  Created;  Container casestrainer-rqworker3-prod  Creating;  Container casestrainer-rqworker1-prod  Creating;  Container casestrainer-rqworker2-prod  Creating;  Container casestrainer-backend-prod  Creating;  Container casestrainer-rqworker2-prod  Created;  Container casestrainer-backend-prod  Created;  Container casestrainer-nginx-prod  Creating;  Container casestrainer-rqworker3-prod  Created;  Container casestrainer-rqworker1-prod  Created;  Container casestrainer-nginx-prod  Created;  Container casestrainer-redis-prod  Starting;  Container casestrainer-frontend-prod  Starting;  Container casestrainer-redis-prod  Started;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-redis-prod  Waiting;  Container casestrainer-frontend-prod  Started;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker1-prod  Starting;  Container casestrainer-rqworker3-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-backend-prod  Starting;  Container casestrainer-redis-prod  Healthy;  Container casestrainer-rqworker2-prod  Starting;  Container casestrainer-rqworker3-prod  Started;  Container casestrainer-rqworker2-prod  Started;  Container casestrainer-rqworker1-prod  Started;  Container casestrainer-backend-prod  Started;  Container casestrainer-frontend-prod  Waiting;  Container casestrainer-backend-prod  Waiting;  Container casestrainer-frontend-prod  Healthy;  Container casestrainer-backend-prod  Healthy;  Container casestrainer-nginx-prod  Starting;  Container casestrainer-nginx-prod  Started
[2025-08-15 16:18:07] [INFO] Docker operation completed successfully: up
[2025-08-15 16:18:07] [INFO] Waiting for containers to stabilize...
[2025-08-15 16:18:17] [INFO] Performing application health check...
[2025-08-15 16:18:17] [INFO] Application health check passed
[2025-08-15 16:18:17] [INFO] Deployment completed successfully!
[2025-08-15 16:18:17] [INFO] Containers running: 7
[2025-08-15 16:18:17] [DEBUG] Launcher execution completed
