**********************
Windows PowerShell transcript start
Start time: 20250731094344
Username: NETID\jafrank
RunAs User: NETID\jafrank
Configuration Name: 
Machine: HAUMEA (Microsoft Windows NT 10.0.20348.0)
Host Application: C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -noexit -command try { . "c:\Users\jafrank\AppData\Local\Programs\Windsurf\resources\app\out\vs\workbench\contrib\terminal\common\scripts\shellIntegration.ps1" } catch {}
Process ID: 12176
PSVersion: 5.1.20348.3932
PSEdition: Desktop
PSCompatibleVersions: 1.0, 2.0, 3.0, 4.0, 5.0, 5.1.20348.3932
BuildVersion: 10.0.20348.3932
CLRVersion: 4.0.30319.42000
WSManStackVersion: 3.0
PSRemotingProtocolVersion: 2.3
SerializationVersion: 1.1.0.1
**********************
Transcript started, output file is D:\dev\casestrainer\logs\script_20250731_094344.log

=== Checking Docker Availability ===
[OK] Docker CLI is available: Docker version 28.3.2, build 578ccf6
[ERROR] Docker daemon is not available: Client:  Version:    28.3.2  Context:    desktop-linux  Debug Mode: false  Plugins:   ai: Docker AI Agent - Ask Gordon (Docker Inc.)     Version:  v1.9.9     Path:     C:\Users\jafrank\.docker\cli-plugins\docker-ai.exe   buildx: Docker Buildx (Docker Inc.)     Version:  v0.25.0-desktop.1     Path:     C:\Program Files\Docker\cli-plugins\docker-buildx.exe   cloud: Docker Cloud (Docker Inc.)     Version:  v0.4.2     Path:     C:\Program Files\Docker\cli-plugins\docker-cloud.exe   compose: Docker Compose (Docker Inc.)     Version:  v2.38.2-desktop.1     Path:     C:\Program Files\Docker\cli-plugins\docker-compose.exe   debug: Get a shell into any image or container (Docker Inc.)     Version:  0.0.41     Path:     C:\Program Files\Docker\cli-plugins\docker-debug.exe   desktop: Docker Desktop commands (Docker Inc.)     Version:  v0.1.11     Path:     C:\Program Files\Docker\cli-plugins\docker-desktop.exe   extension: Manages Docker extensions (Docker Inc.)     Version:  v0.2.29     Path:     C:\Program Files\Docker\cli-plugins\docker-extension.exe   init: Creates Docker-related starter files for your project (Docker Inc.)     Version:  v1.4.0     Path:     C:\Program Files\Docker\cli-plugins\docker-init.exe   mcp: Docker MCP Plugin (Docker Inc.)     Version:  v0.9.9     Path:     C:\Program Files\Docker\cli-plugins\docker-mcp.exe   model: Docker Model Runner (EXPERIMENTAL) (Docker Inc.)     Version:  v0.1.33     Path:     C:\Program Files\Docker\cli-plugins\docker-model.exe   sbom: View the packaged-based Software Bill Of Materials (SBOM) for an image (Anchore Inc.)     Version:  0.6.0     Path:     C:\Program Files\Docker\cli-plugins\docker-sbom.exe   scout: Docker Scout (Docker Inc.)     Version:  v1.18.2     Path:     C:\Users\jafrank\.docker\cli-plugins\docker-scout.exe  Server: ERROR: request returned 500 Internal Server Error for API route and version http://%2F%2F.%2Fpipe%2FdockerDesktopLinuxEngine/v1.51/info, check if the server supports the requested API version errors pretty printing info
âŒ Docker is not available. Please ensure Docker Desktop is installed and running.
   Visit https://www.docker.com/products/docker-desktop to download and install Docker Desktop
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) docker-compose build backend

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) docker-compose build frontend-dev

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) docker-compose build --no-cache --progress=plain rqworker3

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) Get-Process -Name "Docker Desktop" -ErrorAction SilentlyContinue

Handles  NPM(K)    PM(K)      WS(K)     CPU(s)     Id  SI ProcessName
-------  ------    -----      -----     ------     --  -- -----------
    859      45   131388     138984      16.42   2644   2 Docker De...
    334      18    12636      50616       0.23   5496   2 Docker De...
    381      27   117668     175088     230.98  14744   2 Docker De...
    335      34    15820      81136       8.14  20752   2 Docker De...


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) docker info

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) Get-Process -Name "*docker*" | Stop-Process -Force
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) Start-Sleep -Seconds 10
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) Start-Process -FilePath "C:\Program Files\Docker\Docker\Docker Desktop.exe"

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) docker info

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) docker-compose build --no-cache --progress=plain rqworker3

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) ./cslaunch
Transcript started, output file is D:\dev\casestrainer\logs\script_20250731_120133.log

=== Checking Docker Availability ===
[OK] Docker CLI is available: Docker version 28.3.2, build 578ccf6
[INFO] Docker is running in Linux containers mode
[OK] Docker Compose is available: Docker Compose version v2.38.2-desktop.1
[cslaunch] Starting interactive menu...

========================================
 Enhanced CaseStrainer Docker Launcher
                v1.3 (ENHANCED)
========================================

 1.  Quick Production Start (FASTEST)
    - Minimal checks, maximum speed

 2.  Smart Production Start (RECOMMENDED)
    - Intelligent build detection, balanced speed

 3.  Force Full Rebuild
    - Complete rebuild, use when needed

 4.   Advanced Diagnostics
 5.   Cache Management
 6.   Stop All Services
 7.  Quick Status Check
 8.  Run Production Server Test
 0.  Exit

TIP: Use option 1 for fastest startup!

Deleting all .pyc files and __pycache__ directories to prevent stale bytecode...
Analyzing code changes to determine rebuild strategy...
ðŸ„ Rebuilding backend image to ensure Python code changes are included...

=== Starting Docker Production Mode ===
Checking if Vue build is needed...
Vue build is up to date
OK Docker is running
OK Sufficient disk space (90.7 GB free)
Processing Vue frontend build...
Using cached Vue build check result: False
Vue build needed: False, ForceRebuild: False
OK Vue build up to date (skipping build)
Stopping existing Docker containers...
Running: docker-compose -f D:\dev\casestrainer\docker-compose.prod.yml down --timeout 30
Containers stopped successfully
Checking for any remaining 'casestrainer' containers...
No remaining 'casestrainer' containers found.

Starting Docker containers...
Using existing images (no rebuild needed)...
Docker compose command: docker-compose -f D:\dev\casestrainer\docker-compose.prod.yml up -d
OK Docker containers started successfully
Waiting for containers to initialize...

Waiting for services to initialize...
OK All services are ready
  Backend (127.0.0.1:5001): UP, Redis (127.0.0.1:6380): UP, RQ Worker: HEALTHY

=== Docker Production Mode Ready ===
INFO Production Site:  https://wolf.law.uw.edu/casestrainer

Local Development URLs:
Backend API:    http://localhost:5001/casestrainer/api/
Frontend Prod:  http://localhost:8080/
Nginx (HTTP):   http://localhost:80/
Nginx (HTTPS):  https://localhost:443/
Local Frontend: https://localhost/casestrainer/
API Health:     https://localhost/casestrainer/api/health

Docker Commands:
  View logs:    docker-compose -f docker-compose.prod.yml logs [service]
  Stop all:     docker-compose -f docker-compose.prod.yml down
  Restart:      docker-compose -f docker-compose.prod.yml restart [service]

Running adaptive learning pipeline...
Starting adaptive learning pipeline...
Using enhanced adaptive learning pipeline...
Running adaptive learning pipeline...
âœ… Adaptive learning pipeline completed successfully
âœ… Adaptive learning completed successfully

Running post-startup validation...
  Testing API endpoints...
  âŒ API health check failed after 3 attempts
WARNING: Post-startup validation failed - system may have issues

=== Starting Docker Production Mode ===
Checking if Vue build is needed...
Vue build is up to date
OK Docker is running
OK Sufficient disk space (90.69 GB free)
Processing Vue frontend build...
Using cached Vue build check result: False
Vue build needed: False, ForceRebuild: False
OK Vue build up to date (skipping build)
Stopping existing Docker containers...
Running: docker-compose -f D:\dev\casestrainer\docker-compose.prod.yml down --timeout 30
Containers stopped successfully
Checking for any remaining 'casestrainer' containers...
No remaining 'casestrainer' containers found.

Starting Docker containers...
Using existing images (no rebuild needed)...
Docker compose command: docker-compose -f D:\dev\casestrainer\docker-compose.prod.yml up -d
OK Docker containers started successfully
Waiting for containers to initialize...

Waiting for services to initialize...
OK All services are ready
  Backend (127.0.0.1:5001): UP, Redis (127.0.0.1:6380): UP, RQ Worker: HEALTHY

=== Docker Production Mode Ready ===
INFO Production Site:  https://wolf.law.uw.edu/casestrainer

Local Development URLs:
Backend API:    http://localhost:5001/casestrainer/api/
Frontend Prod:  http://localhost:8080/
Nginx (HTTP):   http://localhost:80/
Nginx (HTTPS):  https://localhost:443/
Local Frontend: https://localhost/casestrainer/
API Health:     https://localhost/casestrainer/api/health

Docker Commands:
  View logs:    docker-compose -f docker-compose.prod.yml logs [service]
  Stop all:     docker-compose -f docker-compose.prod.yml down
  Restart:      docker-compose -f docker-compose.prod.yml restart [service]

Running adaptive learning pipeline...
Starting adaptive learning pipeline...
Using enhanced adaptive learning pipeline...
Running adaptive learning pipeline...
âœ… Adaptive learning pipeline completed successfully
âœ… Adaptive learning completed successfully

Running post-startup validation...
  Testing API endpoints...
  âŒ API health check failed after 3 attempts
WARNING: Post-startup validation failed - system may have issues
Running production test suite...
[2025-07-31 12:03:53] âŒ Some production tests failed (exit code: 1)!

Last 30 lines of test output:

============================ no tests ran in 0.03s ============================
pytest.exe : D:\Python\Lib\site-packages\pytest_asyncio\plugin.py:208: PytestDeprecationWarning:
The configuration option "asyncio_default_fixture_loop_scope" is unset.
At D:\dev\casestrainer\cslaunch.ps1:1830 char:17
+ ...             & pytest test_production_server.py -v --maxfail=1 --disab ...
+                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (D:\Python\Lib\s...cope" is unset.:String) [], RemoteE
   xception
    + FullyQualifiedErrorId : NativeCommandError

The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future
versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function
scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the
future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))
============================= test session starts =============================
platform win32 -- Python 3.13.3, pytest-8.3.5, pluggy-1.6.0 -- D:\Python\python.exe
cachedir: .pytest_cache
metadata: {'Python': '3.13.3', 'Platform': 'Windows-2022Server-10.0.20348-SP0', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'asyncio': '1.0.0', 'cov': '6.1.1', 'html': '4.1.1', 'httpx': '0.35.0', 'metadata': '3.1.1', 'mock': '3.14.1', 'timeout': '2.4.0', 'xdist': '3.7.0'}}
rootdir: D:\dev\casestrainer
configfile: pytest.ini
plugins: anyio-4.9.0, asyncio-1.0.0, cov-6.1.1, html-4.1.1, httpx-0.35.0, metadata-3.1.1, mock-3.14.1, timeout-2.4.0, xdist-3.7.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
ERROR: file or directory not found: test_production_server.py

collecting ... collected 0 items

============================ no tests ran in 0.03s ============================

Full test log available at: D:\dev\casestrainer\logs\production_test.log
(.venv) TerminatingError(): "System error."
#1 [internal] load local bake definitions
#1 reading from stdin 354B done
#1 DONE 0.0s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 1.62kB 0.0s done
#2 DONE 0.1s

#3 [internal] load metadata for docker.io/library/python:3.10-slim
#3 ...

#4 [auth] library/python:pull token for registry-1.docker.io
#4 DONE 0.0s

#3 [internal] load metadata for docker.io/library/python:3.10-slim
#3 DONE 1.2s

#5 [internal] load .dockerignore
#5 transferring context: 908B 0.0s done
#5 DONE 0.1s

#6 [internal] load build context
#6 DONE 0.0s

#7 [ 1/15] FROM docker.io/library/python:3.10-slim@sha256:81f1cdb3770d54ecfdbddcc52c2125fce674c14a1d976dfd8f65dc0734f9c3c5
#7 resolve docker.io/library/python:3.10-slim@sha256:81f1cdb3770d54ecfdbddcc52c2125fce674c14a1d976dfd8f65dc0734f9c3c5 0.1s done
#7 DONE 0.1s

#6 [internal] load build context
#6 transferring context: 37.48kB 0.1s done
#6 DONE 0.2s

#8 [12/15] COPY --chown=app:app static/ /app/static/
#8 CACHED

#9 [ 2/15] WORKDIR /app
#9 CACHED

#10 [ 3/15] COPY requirements.txt requirements.txt
#10 CACHED

#11 [ 4/15] RUN apt-get update && apt-get install -y git && rm -rf /var/lib/apt/lists/*
#11 CACHED

#12 [14/15] RUN mkdir -p /app/logs && chown app:app /app/logs
#12 CACHED

#13 [ 5/15] RUN pip install --no-cache-dir -r requirements.txt
#13 CACHED

#14 [ 6/15] RUN apt-get update && apt-get install -y     build-essential     gcc     curl     git     libmagic1     && rm -rf /var/lib/apt/lists/*
#14 CACHED

#15 [ 7/15] RUN useradd --create-home --shell /bin/bash app
#15 CACHED

#16 [13/15] RUN find . -type d -name '__pycache__' -exec rm -r {} + && find . -type f -name '*.pyc' -delete
#16 CACHED

#17 [ 9/15] COPY --chown=app:app app/ /app/app/
#17 CACHED

#18 [ 8/15] COPY --chown=app:app src/ /app/src/
#18 CACHED

#19 [11/15] COPY --chown=app:app templates/ /app/templates/
#19 CACHED

#20 [10/15] COPY --chown=app:app config/ /app/config/
#20 CACHED

#21 [15/15] RUN mkdir -p /home/app/data /home/app/logs /home/app/uploads /home/app/temp_uploads /app/citation_cache
#21 CACHED

#22 exporting to image
#22 exporting layers 0.0s done
#22 exporting manifest sha256:a8a19e7fa9a345da55104d1dddc8d7f889a915fd16e26b4ee977b0514e176549 0.0s done
#22 exporting config sha256:b80f5966d5ed4870fc25e292fb814e3640be61fd314267acbfd59623c9437a1f done
#22 exporting attestation manifest sha256:99adc5b252dae31d71e0929be19890e52536ac709cd58bf4b3ef2f971cbb811c
#22 exporting attestation manifest sha256:99adc5b252dae31d71e0929be19890e52536ac709cd58bf4b3ef2f971cbb811c 0.1s done
#22 exporting manifest list sha256:7fb3e34cae063745589f912975953a160ccbd15e5bf62020102200c6ce1fea6f 0.1s done
#22 naming to docker.io/library/casestrainer-backend:latest
#22 naming to docker.io/library/casestrainer-backend:latest 0.0s done
#22 unpacking to docker.io/library/casestrainer-backend:latest 0.0s done
#22 DONE 0.4s

#23 resolving provenance for metadata file
#23 DONE 0.1s
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) Get-Module -Name Docker -ListAvailable | Select-Object Name, Version, Path
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) Get-Command -Module Docker | Select-Object Name
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) Import-Module .\scripts\modules\Docker.psm1 -Force -PassThru -ErrorAction SilentlyContinue

ModuleType Version    Name                                ExportedComm
                                                          ands
---------- -------    ----                                ------------
Script     0.0        Docker                              {Get-Dock...


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) powershell -NoProfile -ExecutionPolicy Bypass -Command "Import-Module .\scripts\modules\DockerHealth.psm1 -Force; Invoke-DockerHealthCheck -Verbose"

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) ./cslaunch
Transcript started, output file is D:\dev\casestrainer\logs\script_20250731_141215.log

=== Checking Docker Availability ===
[OK] Docker CLI is available: Docker version 28.3.2, build 578ccf6
[ERROR] Docker daemon is not available: Client:  Version:    28.3.2  Context:    desktop-linux  Debug Mode: false  Plugins:   ai: Docker AI Agent - Ask Gordon (Docker Inc.)     Version:  v1.9.9     Path:     C:\Users\jafrank\.docker\cli-plugins\docker-ai.exe   buildx: Docker Buildx (Docker Inc.)     Version:  v0.25.0-desktop.1     Path:     C:\Program Files\Docker\cli-plugins\docker-buildx.exe   cloud: Docker Cloud (Docker Inc.)     Version:  v0.4.2     Path:     C:\Program Files\Docker\cli-plugins\docker-cloud.exe   compose: Docker Compose (Docker Inc.)     Version:  v2.38.2-desktop.1     Path:     C:\Program Files\Docker\cli-plugins\docker-compose.exe   debug: Get a shell into any image or container (Docker Inc.)     Version:  0.0.41     Path:     C:\Program Files\Docker\cli-plugins\docker-debug.exe   desktop: Docker Desktop commands (Docker Inc.)     Version:  v0.1.11     Path:     C:\Program Files\Docker\cli-plugins\docker-desktop.exe   extension: Manages Docker extensions (Docker Inc.)     Version:  v0.2.29     Path:     C:\Program Files\Docker\cli-plugins\docker-extension.exe   init: Creates Docker-related starter files for your project (Docker Inc.)     Version:  v1.4.0     Path:     C:\Program Files\Docker\cli-plugins\docker-init.exe   mcp: Docker MCP Plugin (Docker Inc.)     Version:  v0.9.9     Path:     C:\Program Files\Docker\cli-plugins\docker-mcp.exe   model: Docker Model Runner (EXPERIMENTAL) (Docker Inc.)     Version:  v0.1.33     Path:     C:\Program Files\Docker\cli-plugins\docker-model.exe   sbom: View the packaged-based Software Bill Of Materials (SBOM) for an image (Anchore Inc.)     Version:  0.6.0     Path:     C:\Program Files\Docker\cli-plugins\docker-sbom.exe   scout: Docker Scout (Docker Inc.)     Version:  v1.18.2     Path:     C:\Users\jafrank\.docker\cli-plugins\docker-scout.exe  Server: ERROR: request returned 500 Internal Server Error for API route and version http://%2F%2F.%2Fpipe%2FdockerDesktopLinuxEngine/v1.51/info, check if the server supports the requested API version errors pretty printing info
âŒ Docker is not available. Please ensure Docker Desktop is installed and running.
   Visit https://www.docker.com/products/docker-desktop to download and install Docker Desktop
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) Get-Process -Name "*docker*" | Stop-Process -Force
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) Start-Sleep -Seconds 10
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) Start-Process -FilePath "C:\Program Files\Docker\Docker\Docker Desktop.exe"
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) docker info

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) docker-compose build --no-cache --progress=plain rqworker3

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) docker-compose ps

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) docker-compose exec backend /bin/sh

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
]633;D]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) df -h
df : The term 'df' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the 
spelling of the name, or if a path was included, verify that the path is correct and try again.
At line:1 char:1
+ df -h
+ ~~
    + CategoryInfo          : ObjectNotFound: (df:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException
df : The term 'df' is not recognized as the name of a cmdlet,
function, script file, or operable program. Check the spelling of the
name, or if a path was included, verify that the path is correct and
try again.
At line:1 char:1
+ df -h
+ ~~
    + CategoryInfo          : ObjectNotFound: (df:String) [], Command
   NotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) Get-WmiObject -Class Win32_LogicalDisk | Select-Object DeviceID, @{Name="Size(GB)";Expression={[math]::Round($_.Size/1GB,2)}}, @{Name="FreeSpace(GB)";Expression={[math]::Round($_.FreeSpace/1GB,2)}}, @{Name="% Free";Expression={[math]::Round(($_.FreeSpace/$_.Size)*100,2)}}

DeviceID Size(GB) FreeSpace(GB) % Free
-------- -------- ------------- ------
C:         198.88         90.82  45.66
D:        2047.98        953.68  46.57
E:              0             0


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) # Look for database files in your project
Get-ChildItem -Path . -Recurse -Include *.db, *.sqlite, *.sqlite3 -ErrorAction SilentlyContinue

# Also check for any database-related files
Get-ChildItem -Path . -Recurse -Name "*database*" -ErrorAction SilentlyContinue
(.venv) TerminatingError(): "The pipeline has been stopped."
>> TerminatingError(): "The pipeline has been stopped."
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) Get-ChildItem -Path . -Recurse -Include *.db, *.sqlite, *.sqlite3 -ErrorAction SilentlyContinue


    Directory: D:\dev\casestrainer\data


Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a----         7/14/2025   1:06 PM         118784 citations.db
-a----         6/12/2025   9:07 PM          12288 langsearch_cache.db


    Directory: D:\dev\casestrainer\src\data


Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a----         6/26/2025   7:34 PM          36864 citations.db


    Directory: D:\dev\casestrainer\src


Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a----         7/10/2025  12:34 PM          45056 citations.db


    Directory: D:\dev\casestrainer


Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a----         5/29/2025  10:05 PM          24576 citations.db
-a----         7/23/2025   1:53 AM          20480 legal_search_cache.d
                                                  b


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) # Look at your database manager configuration
Get-Content src/database_manager.py | Select-String -Pattern "citations.db|database_path|DATABASE"

Database Manager for CaseStrainer
This module provides comprehensive database management including:
- Database backup and recovery
from .config import DATABASE_FILE
class DatabaseManager:
    Comprehensive database manager for CaseStrainer with
production-ready features.
        Initialize the database manager.
            db_path: Path to the SQLite database file
        # Ensure database directory exists
        # Initialize database with optimized settings
        self._initialize_database()
    def _initialize_database(self):
        """Initialize the database with optimized settings and
schema."""
                logger.info(f"Database initialized with
optimizations: {self.db_path}")
            logger.error(f"Database initialization failed: {e}")
        """Create the database schema with optimized structure."""
        logger.info("Database indexes created/verified")
        """Get a database connection from the pool."""
            logger.error(f"Database connection error: {e}")
    def backup_database(self, backup_path: str = None) -> str:
        """Create a compressed backup of the database."""
            # Copy database file
            logger.info(f"Database backup created: {backup_path}")
            logger.error(f"Database backup failed: {e}")
    def restore_database(self, backup_path: str) -> bool:
        """Restore database from a backup file."""
            # Replace current database
            logger.info(f"Database restored from: {backup_path}")
            logger.error(f"Database restore failed: {e}")
    def vacuum_database(self) -> bool:
        """Optimize database by removing unused space."""
                logger.info("Database vacuum and analyze completed")
            logger.error(f"Database vacuum failed: {e}")
    def get_database_stats(self) -> Dict[str, Any]:
        """Get comprehensive database statistics."""
                    'database_path': self.db_path,
                    'database_size_mb': os.path.getsize(self.db_path)
/ (1024 * 1024),
            logger.error(f"Failed to get database stats: {e}")
        """Close all database connections."""
        logger.info("Database manager closed")
# Global database manager instance
def get_database_manager() -> DatabaseManager:
    """Get the global database manager instance."""
        _db_manager = DatabaseManager(DATABASE_FILE)
def close_database_manager():
    """Close the global database manager."""


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) Get-Content src/config.py | Select-String -Pattern "DATABASE_FILE|citations.db"

DATABASE_FILE: str = get_config_value(
    "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")
    # DATABASE_FILE has a default value, so just validate the path
        db_path = DATABASE_FILE  # Use the already-configured value
        'database_file': DATABASE_FILE,


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) (.venv) PS D:\dev\casestrainer> Get-Content src/config.py | Select-String -Pattern "DATABASE_FILE|citations.db"

DATABASE_FILE: str = get_config_value(
    "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")    
    # DATABASE_FILE has a default value, so just validate the path
        db_path = DATABASE_FILE  # Use the already-configured value    
        'database_file': DATABASE_FILE,


(.venv) PS D:\dev\casestrainer> 
At line:1 char:9
+ (.venv) PS D:\dev\casestrainer> Get-Content src/config.py | Select-St ...
+         ~~
Unexpected token 'PS' in expression or statement.

At line:4 char:21
+     "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")
+                     ~
Missing expression after ','.

At line:4 char:22
+     "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")
+                      ~~~~~~~~~~~~
Unexpected token 'os.path.join' in expression or statement.

At line:4 char:21
+     "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")
+                     ~
Missing closing ')' in expression.

At line:4 char:43
+     "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")
+                                           ~
Missing argument in parameter list.

At line:7 char:24
+         'database_file': DATABASE_FILE,
+                        ~
Unexpected token ':' in expression or statement.
At line:1 char:9
+ (.venv) PS D:\dev\casestrainer> Get-Content src/config.py |
Select-St ...
+         ~~
Unexpected token 'PS' in expression or statement.

At line:4 char:21
+     "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")
+                     ~
Missing expression after ','.

At line:4 char:22
+     "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")
+                      ~~~~~~~~~~~~
Unexpected token 'os.path.join' in expression or statement.

At line:4 char:21
+     "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")
+                     ~
Missing closing ')' in expression.

At line:4 char:43
+     "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")
+                                           ~
Missing argument in parameter list.

At line:7 char:24
+         'database_file': DATABASE_FILE,
+                        ~
Unexpected token ':' in expression or statement.
    + CategoryInfo          : ParserError: (:) [], ParentContainsErro
   rRecordException
    + FullyQualifiedErrorId : UnexpectedToken

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) (.venv) PS D:\dev\casestrainer> Get-Content src/config.py | Select-String -Pattern "DATABASE_FILE|citations.db"

DATABASE_FILE: str = get_config_value(
    "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")    
    # DATABASE_FILE has a default value, so just validate the path
        db_path = DATABASE_FILE  # Use the already-configured value    
        'database_file': DATABASE_FILE,


(.venv) PS D:\dev\casestrainer> # Stop any running Python processes
Get-Process python -ErrorAction SilentlyContinue | Stop-Process -Force

# Create the missing VERSION file
"1.0.0" | Out-File -FilePath "VERSION" -Encoding utf8

# Verify VERSION file was created
Get-Content VERSION
At line:1 char:9
+ (.venv) PS D:\dev\casestrainer> Get-Content src/config.py | Select-St ...
+         ~~
Unexpected token 'PS' in expression or statement.

At line:4 char:21
+     "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")
+                     ~
Missing expression after ','.

At line:4 char:22
+     "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")
+                      ~~~~~~~~~~~~
Unexpected token 'os.path.join' in expression or statement.

At line:4 char:21
+     "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")
+                     ~
Missing closing ')' in expression.

At line:4 char:43
+     "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")
+                                           ~
Missing argument in parameter list.

At line:7 char:24
+         'database_file': DATABASE_FILE,
+                        ~
Unexpected token ':' in expression or statement.
At line:1 char:9
+ (.venv) PS D:\dev\casestrainer> Get-Content src/config.py |
Select-St ...
+         ~~
Unexpected token 'PS' in expression or statement.

At line:4 char:21
+     "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")
+                     ~
Missing expression after ','.

At line:4 char:22
+     "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")
+                      ~~~~~~~~~~~~
Unexpected token 'os.path.join' in expression or statement.

At line:4 char:21
+     "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")
+                     ~
Missing closing ')' in expression.

At line:4 char:43
+     "DATABASE_FILE", os.path.join(BASE_DIR, "data", "citations.db")
+                                           ~
Missing argument in parameter list.

At line:7 char:24
+         'database_file': DATABASE_FILE,
+                        ~
Unexpected token ':' in expression or statement.
    + CategoryInfo          : ParserError: (:) [], ParentContainsErro
   rRecordException
    + FullyQualifiedErrorId : UnexpectedToken

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) # Stop any running Python processes
Get-Process python -ErrorAction SilentlyContinue | Stop-Process -Force

# Create the missing VERSION file
"1.0.0" | Out-File -FilePath "VERSION" -Encoding utf8

# Verify VERSION file was created
Get-Content VERSION
1.0.0
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) # Check if the database file exists and its details
Get-ChildItem "data\citations.db" -ErrorAction SilentlyContinue

# Check file permissions
Get-Acl "data\citations.db" | Format-List


    Directory: D:\dev\casestrainer\data


Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
-a----         7/14/2025   1:06 PM         118784 citations.db




Path   : Microsoft.PowerShell.Core\FileSystem::D:\dev\casestrainer\dat
         a\citations.db
Owner  : NETID\jafrank
Group  : NETID\Domain Users
Access : Everyone Allow  FullControl
         NT AUTHORITY\Authenticated Users Allow  FullControl
         BUILTIN\Users Allow  ReadAndExecute, Synchronize
         BUILTIN\Administrators Allow  FullControl
         NT AUTHORITY\SYSTEM Allow  FullControl
Audit  :
Sddl   : O:S-1-5-21-1478355014-127360780-1969717230-171561G:S-1-5-21-1
         478355014-127360780-1969717230-513D:AI(A;ID;FA;;;WD)(A;ID;FA;
         ;;AU)(A;ID;0x1200a9;;;BU)(A;ID;FA;;;BA)(A;ID;FA;;;SY)



]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
]633;D]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) try {
    python -c "import sqlite3; import os; db_path = 'data/citations.db'; print(f'Database file exists: {os.path.exists(db_path)}'); print(f'Database file size: {os.path.getsize(db_path) if os.path.exists(db_path) else 0} bytes'); conn = sqlite3.connect(db_path); result = conn.execute('PRAGMA integrity_check;').fetchone(); print(f'Database integrity: {result[0]}'); tables = conn.execute('SELECT name FROM sqlite_master WHERE type=`\"table`\";').fetchall(); print(f'Tables found: {[t[0] for t in tables]}'); conn.close(); print('Database connection test: SUCCESS')"
} catch {
    Write-Host "Command failed"
}

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) Get-Process -Name "python*" | Select-Object Id, ProcessName, Path

   Id ProcessName Path
   -- ----------- ----
19128 python      D:\Python\python.exe


]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) Stop-Process -Id 19128 -Force
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) Get-Process -Name "python*" -ErrorAction SilentlyContinue
]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) # Quick test to make sure the database is now free
@"
import sqlite3
try:
    conn = sqlite3.connect('data/citations.db')
    print('Database connection: SUCCESS')
    conn.close()
except Exception as e:
    print(f'Database error: {e}')
"@ | Out-File -FilePath "test_db.py" -Encoding utf8

python test_db.py
Remove-Item "test_db.py"

]633;D;0]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
(.venv) ./cslaunch
Transcript started, output file is D:\dev\casestrainer\logs\script_20250731_143459.log

=== Checking Docker Availability ===
[OK] Docker CLI is available: Docker version 28.3.2, build 578ccf6
[INFO] Docker is running in Linux containers mode
[OK] Docker Compose is available: Docker Compose version v2.38.2-desktop.1
[cslaunch] Starting interactive menu...

========================================
 Enhanced CaseStrainer Docker Launcher
                v1.3 (ENHANCED)
========================================

 1.  Quick Production Start (FASTEST)
    - Minimal checks, maximum speed

 2.  Smart Production Start (RECOMMENDED)
    - Intelligent build detection, balanced speed

 3.  Force Full Rebuild
    - Complete rebuild, use when needed

 4.   Advanced Diagnostics
 5.   Cache Management
 6.   Stop All Services
 7.  Quick Status Check
 8.  Run Production Server Test
 0.  Exit

TIP: Use option 1 for fastest startup!

Deleting all .pyc files and __pycache__ directories to prevent stale bytecode...

=== Starting Docker Production Mode ===
Checking if Vue build is needed...
Force flag specified - Vue build required
OK Docker is running
OK Sufficient disk space (90.82 GB free)
Processing Vue frontend build...
Vue build needed: True, ForceRebuild: True
Building Vue frontend (ForceRebuild: True)...
Force rebuild mode: Clearing Vue caches...
Removing existing dist directory...
Removing node_modules for clean install...
Removing package-lock.json for clean dependency resolution...
Clearing npm cache...
npm cache cleared
Vue directory: D:\dev\casestrainer\casestrainer-vue-new
Checking Node.js and npm...
OK Node.js v22.15.0, npm 8.19.2
Using npm at: npm
Installing npm dependencies...
Force rebuild: Running clean npm install...
Running: npm install
OK npm dependencies installed
Building Vue frontend...
Force rebuild: Building from clean state...
Running: npm run build
OK Vue frontend built successfully (0.61 MB)
Copying Vue build assets to static/assets...
Assets copied to D:\dev\casestrainer\static\assets
Stopping existing Docker containers...
Force rebuild: Removing volumes and orphaned containers...
Running: docker-compose -f D:\dev\casestrainer\docker-compose.prod.yml down --timeout 30 --volumes --remove-orphans
WARNING: Error stopping containers (exit code: 1)
Attempting force stop...
Checking for any remaining 'casestrainer' containers...
WARNING: Found remaining containers after down. Forcibly removing...
  Removing container: casestrainer-nginx-prod (99142e4c986d)
  Removing container: casestrainer-rqworker2-prod (9d21ea45be48)
