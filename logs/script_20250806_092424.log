**********************
Windows PowerShell transcript start
Start time: 20250806092424
Username: NETID\jafrank
RunAs User: NETID\jafrank
Configuration Name: 
Machine: HAUMEA (Microsoft Windows NT 10.0.20348.0)
Host Application: C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -noexit -command try { . "c:\Users\jafrank\AppData\Local\Programs\cursor\resources\app\out\vs\workbench\contrib\terminal\common\scripts\shellIntegration.ps1" } catch {}
Process ID: 11916
PSVersion: 5.1.20348.3932
PSEdition: Desktop
PSCompatibleVersions: 1.0, 2.0, 3.0, 4.0, 5.0, 5.1.20348.3932
BuildVersion: 10.0.20348.3932
CLRVersion: 4.0.30319.42000
WSManStackVersion: 3.0
PSRemotingProtocolVersion: 2.3
SerializationVersion: 1.1.0.1
**********************
Transcript started, output file is D:\dev\casestrainer\logs\script_20250806_092424.log

=== Checking Docker Availability ===
[OK] Docker CLI is available: Docker version 28.3.2, build 578ccf6
[INFO] Docker is running in Linux containers mode
[OK] Docker Compose is available: Docker Compose version v2.38.2-desktop.1
[cslaunch] Starting interactive menu...

========================================
 Enhanced CaseStrainer Docker Launcher
                v1.3 (ENHANCED)
========================================

 1.  Quick Production Start (FASTEST)
    - Minimal checks, maximum speed

 2.  Fast Production Start (RECOMMENDED) - Restart with latest code
    - Fast restart with volume mounts, no rebuild needed

 3.  Force Full Rebuild
    - Complete rebuild, use when needed

 4.   Advanced Diagnostics
 5.   Cache Management
 6.   Stop All Services
 7.  Quick Status Check
 8.  Run Production Server Test
 0.  Exit

TIP: Use option 1 for fastest startup!

ðŸš€ FAST START: Restarting containers with latest code and front-end...
Cleaning Python cache...
Checking if front-end rebuild is needed...
Source files newer than dist - build required
Front-end changes detected. Building Vue frontend...
Vue directory: D:\dev\casestrainer\casestrainer-vue-new
Using npm at: npm
npm dependencies are up to date
OK node_modules up to date (skipping npm install)
Source files newer than dist - build required
Building Vue frontend...
Running: npm run build
OK Vue frontend built successfully (0.55 MB)
Copying Vue build assets to static/assets...
Assets copied to D:\dev\casestrainer\static\assets
Front-end build complete!
Deploying front-end to production...
Front-end files deployed to static directory
Building containers with latest front-end...

[INFO] Fast production start complete!
[INFO] Latest code and UI are now deployed.
[INFO] If you are testing the frontend, please hard-refresh your browser (Ctrl+F5).

Press any key to return to menu...

========================================
 Enhanced CaseStrainer Docker Launcher
                v1.3 (ENHANCED)
========================================

 1.  Quick Production Start (FASTEST)
    - Minimal checks, maximum speed

 2.  Fast Production Start (RECOMMENDED) - Restart with latest code
    - Fast restart with volume mounts, no rebuild needed

 3.  Force Full Rebuild
    - Complete rebuild, use when needed

 4.   Advanced Diagnostics
 5.   Cache Management
 6.   Stop All Services
 7.  Quick Status Check
 8.  Run Production Server Test
 0.  Exit

TIP: Use option 1 for fastest startup!

ðŸš€ FAST START: Restarting containers with latest code and front-end...
Cleaning Python cache...
Checking if front-end rebuild is needed...
Source files newer than dist - build required
Front-end changes detected. Building Vue frontend...
Vue directory: D:\dev\casestrainer\casestrainer-vue-new
Using npm at: npm
npm dependencies are up to date
OK node_modules up to date (skipping npm install)
Source files newer than dist - build required
Building Vue frontend...
Running: npm run build
OK Vue frontend built successfully (0.55 MB)
Copying Vue build assets to static/assets...
Assets copied to D:\dev\casestrainer\static\assets
Front-end build complete!
Deploying front-end to production...
Front-end files deployed to static directory
Building containers with latest front-end...

[INFO] Fast production start complete!
[INFO] Latest code and UI are now deployed.
[INFO] If you are testing the frontend, please hard-refresh your browser (Ctrl+F5).

Press any key to return to menu...

========================================
 Enhanced CaseStrainer Docker Launcher
                v1.3 (ENHANCED)
========================================

 1.  Quick Production Start (FASTEST)
    - Minimal checks, maximum speed

 2.  Fast Production Start (RECOMMENDED) - Restart with latest code
    - Fast restart with volume mounts, no rebuild needed

 3.  Force Full Rebuild
    - Complete rebuild, use when needed

 4.   Advanced Diagnostics
 5.   Cache Management
 6.   Stop All Services
 7.  Quick Status Check
 8.  Run Production Server Test
 0.  Exit

TIP: Use option 1 for fastest startup!


Starting Quick Production Start...

=== Starting Docker Production Mode ===
Checking if Vue build is needed...
Vue build is up to date
OK Docker is running
OK Sufficient disk space (60.51 GB free)
Processing Vue frontend build...
Using cached Vue build check result: False
Vue build needed: False, ForceRebuild: False
OK Vue build up to date (skipping build)
Stopping existing Docker containers...
Running: docker-compose -f D:\dev\casestrainer\docker-compose.prod.yml down --timeout 10
Containers stopped successfully
Checking for any remaining 'casestrainer' containers...
No remaining 'casestrainer' containers found.

Starting Docker containers...
Using existing images with volume mounts (latest code will be available)...
Docker compose command: docker-compose -f D:\dev\casestrainer\docker-compose.prod.yml up -d
OK Docker containers started successfully
Waiting for containers to initialize...

Waiting for services to become healthy (timeout: 3 minutes, requires 2 consecutive healthy checks)...
âœ… All services report healthy (1/2)...
No status change detected, waiting...
âœ… All services are ready and stable
  Backend: HEALTHY, Redis: HEALTHY, Worker: HEALTHY
âœ… API endpoint is responding: {"components":{"citation_processor":"healthy","database":"healthy","upload_directory":"healthy"},"database_stats":{"path":"/app/data/citations.db","size_mb":0.11,"tables":4},"endpoints":{"alias":"/health","base_url":"http://localhost:5000/casestrainer/api/health","current":"/casestrainer/api/health"},"environment":{"platform":"linux","python_version":"3.10.18"},"status":"healthy","timestamp":"2025-08-06T20:28:38.491750","version":"\ufeff0.6.4"}

=== Docker Production Mode Ready ===
INFO Production Site:  https://wolf.law.uw.edu/casestrainer

Local Development URLs:
Backend API:    http://localhost:5001/casestrainer/api/
Frontend Prod:  http://localhost:8080/
Nginx (HTTP):   http://localhost:80/
Nginx (HTTPS):  https://localhost:443/
Local Frontend: https://localhost/casestrainer/
API Health:     https://localhost/casestrainer/api/health

Docker Commands:
  View logs:    docker-compose -f docker-compose.prod.yml logs [service]
  Stop all:     docker-compose -f docker-compose.prod.yml down
  Restart:      docker-compose -f docker-compose.prod.yml restart [service]

Running adaptive learning pipeline...
Starting adaptive learning pipeline...
Using enhanced adaptive learning pipeline...
Running adaptive learning pipeline...
âœ… Adaptive learning pipeline completed successfully
âœ… Adaptive learning completed successfully

Running post-startup validation...
  Testing API endpoints...
  âœ… API health check passed
PS>TerminatingError(Invoke-WebRequest): "The request was aborted: The operation has timed out."
  Processing test attempt 1 failed: The request was aborted: The operation has timed out.
PS>TerminatingError(Invoke-WebRequest): "The request was aborted: The operation has timed out."
  Processing test attempt 2 failed: The request was aborted: The operation has timed out.
PS>TerminatingError(Invoke-WebRequest): "The request was aborted: The operation has timed out."
  Processing test attempt 3 failed: The request was aborted: The operation has timed out.
  âŒ Text processing test failed after 3 attempts
WARNING: Post-startup validation failed - system may have issues
Running production test suite...
[2025-08-06 13:30:20] âŒ Some production tests failed (exit code: 4)!

Last 30 lines of test output:
+ ...             & pytest test_production_server.py -v --maxfail=1
--disab ...
+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (D:\Python\Lib\s...cope" is u
   nset.:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError

The event loop scope for asynchronous fixtures will default to the
fixture caching scope. Future versions of pytest-asyncio will default the
loop scope for asynchronous fixtures to function scope. Set the default
fixture loop scope explicitly in order to avoid unexpected behavior in
the future. Valid fixture loop scopes are: "function", "class", "module",
"package", "session"


warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))
============================= test session starts =============================
platform win32 -- Python 3.13.3, pytest-8.3.5, pluggy-1.6.0 -- D:\Python\python.exe
cachedir: .pytest_cache
metadata: {'Python': '3.13.3', 'Platform': 'Windows-2022Server-10.0.20348-SP0', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'asyncio': '1.0.0', 'cov': '6.1.1', 'html': '4.1.1', 'httpx': '0.35.0', 'metadata': '3.1.1', 'mock': '3.14.1', 'timeout': '2.4.0', 'xdist': '3.7.0'}}
rootdir: D:\dev\casestrainer
configfile: pytest.ini
plugins: anyio-4.9.0, asyncio-1.0.0, cov-6.1.1, html-4.1.1, httpx-0.35.0, metadata-3.1.1, mock-3.14.1, timeout-2.4.0, xdist-3.7.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
ERROR: file or directory not found: test_production_server.py

collecting ... collected 0 items

============================ no tests ran in 0.03s ============================

Full test log available at: D:\dev\casestrainer\logs\production_test.log
PS>TerminatingError(): "System error."
True
pytest.exe : D:\Python\Lib\site-packages\pytest_asyncio\plugin.py:208:
PytestDeprecationWarning: The configuration option
"asyncio_default_fixture_loop_scope" is unset.
At D:\dev\casestrainer\cslaunch.ps1:2329 char:21
+ ...             & pytest test_production_server.py -v --maxfail=1
--disab ...
+
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (D:\Python\Lib\s...cope" is u
   nset.:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError

The event loop scope for asynchronous fixtures will default to the
fixture caching scope. Future versions of pytest-asyncio will default the
loop scope for asynchronous fixtures to function scope. Set the default
fixture loop scope explicitly in order to avoid unexpected behavior in
the future. Valid fixture loop scopes are: "function", "class", "module",
"package", "session"


warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))
============================= test session starts =============================
platform win32 -- Python 3.13.3, pytest-8.3.5, pluggy-1.6.0 -- D:\Python\python.exe
cachedir: .pytest_cache
metadata: {'Python': '3.13.3', 'Platform': 'Windows-2022Server-10.0.20348-SP0', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'anyio': '4.9.0', 'asyncio': '1.0.0', 'cov': '6.1.1', 'html': '4.1.1', 'httpx': '0.35.0', 'metadata': '3.1.1', 'mock': '3.14.1', 'timeout': '2.4.0', 'xdist': '3.7.0'}}
rootdir: D:\dev\casestrainer
configfile: pytest.ini
plugins: anyio-4.9.0, asyncio-1.0.0, cov-6.1.1, html-4.1.1, httpx-0.35.0, metadata-3.1.1, mock-3.14.1, timeout-2.4.0, xdist-3.7.0
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
ERROR: file or directory not found: test_production_server.py

collecting ... collected 0 items

============================ no tests ran in 0.03s ============================
]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>./cslaunch
At D:\dev\casestrainer\cslaunch.ps1:3034 char:30
+                 Write-Host "[INFO] If you are testing the frontend, p ...
+                              ~
Array index expression is missing or not valid.

At D:\dev\casestrainer\cslaunch.ps1:3356 char:57
+ $transcriptPath = Join-Path $logsDir "console_output.log"
+                                                         ~
The string is missing the terminator: ".

At D:\dev\casestrainer\cslaunch.ps1:2808 char:32
+                         } else {
+                                ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2804 char:25
+                     try {
+                         ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:3364 char:16
+ Stop-Transcript
+                ~
The Try statement is missing its Catch or Finally block.

At D:\dev\casestrainer\cslaunch.ps1:2802 char:21
+                 "2" {
+                     ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2788 char:36
+             switch ($healthChoice) {
+                                    ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2778 char:13
+         "9" {
+             ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2607 char:25
+     switch ($selection) {
+                         ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2566 char:20
+ function Show-Menu {
+                    ~
Missing closing '}' in statement block or type definition.
    + CategoryInfo          : ParserError: (:) [], ParseException
    + FullyQualifiedErrorId : MissingArrayIndexExpression
At D:\dev\casestrainer\cslaunch.ps1:3034 char:30
+                 Write-Host "[INFO] If you are testing the frontend, p
...
+                              ~
Array index expression is missing or not valid.

At D:\dev\casestrainer\cslaunch.ps1:3356 char:57
+ $transcriptPath = Join-Path $logsDir "console_output.log"
+                                                         ~
The string is missing the terminator: ".

At D:\dev\casestrainer\cslaunch.ps1:2808 char:32
+                         } else {
+                                ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2804 char:25
+                     try {
+                         ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:3364 char:16
+ Stop-Transcript
+                ~
The Try statement is missing its Catch or Finally block.

At D:\dev\casestrainer\cslaunch.ps1:2802 char:21
+                 "2" {
+                     ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2788 char:36
+             switch ($healthChoice) {
+                                    ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2778 char:13
+         "9" {
+             ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2607 char:25
+     switch ($selection) {
+                         ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2566 char:20
+ function Show-Menu {
+                    ~
Missing closing '}' in statement block or type definition.
    + CategoryInfo          : ParserError: (:) [], ParseException
    + FullyQualifiedErrorId : MissingArrayIndexExpression

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
PS>./cslaunch
At D:\dev\casestrainer\cslaunch.ps1:3034 char:30
+                 Write-Host "[INFO] If you are testing the frontend, p ...
+                              ~
Array index expression is missing or not valid.

At D:\dev\casestrainer\cslaunch.ps1:3356 char:57
+ $transcriptPath = Join-Path $logsDir "console_output.log"
+                                                         ~
The string is missing the terminator: ".

At D:\dev\casestrainer\cslaunch.ps1:2808 char:32
+                         } else {
+                                ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2804 char:25
+                     try {
+                         ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:3364 char:16
+ Stop-Transcript
+                ~
The Try statement is missing its Catch or Finally block.

At D:\dev\casestrainer\cslaunch.ps1:2802 char:21
+                 "2" {
+                     ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2788 char:36
+             switch ($healthChoice) {
+                                    ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2778 char:13
+         "9" {
+             ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2607 char:25
+     switch ($selection) {
+                         ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2566 char:20
+ function Show-Menu {
+                    ~
Missing closing '}' in statement block or type definition.
    + CategoryInfo          : ParserError: (:) [], ParseException
    + FullyQualifiedErrorId : MissingArrayIndexExpression
At D:\dev\casestrainer\cslaunch.ps1:3034 char:30
+                 Write-Host "[INFO] If you are testing the frontend, p
...
+                              ~
Array index expression is missing or not valid.

At D:\dev\casestrainer\cslaunch.ps1:3356 char:57
+ $transcriptPath = Join-Path $logsDir "console_output.log"
+                                                         ~
The string is missing the terminator: ".

At D:\dev\casestrainer\cslaunch.ps1:2808 char:32
+                         } else {
+                                ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2804 char:25
+                     try {
+                         ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:3364 char:16
+ Stop-Transcript
+                ~
The Try statement is missing its Catch or Finally block.

At D:\dev\casestrainer\cslaunch.ps1:2802 char:21
+                 "2" {
+                     ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2788 char:36
+             switch ($healthChoice) {
+                                    ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2778 char:13
+         "9" {
+             ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2607 char:25
+     switch ($selection) {
+                         ~
Missing closing '}' in statement block or type definition.

At D:\dev\casestrainer\cslaunch.ps1:2566 char:20
+ function Show-Menu {
+                    ~
Missing closing '}' in statement block or type definition.
    + CategoryInfo          : ParserError: (:) [], ParseException
    + FullyQualifiedErrorId : MissingArrayIndexExpression

]633;D;1]633;A]633;P;Cwd=D:\x5cdev\x5ccasestrainerPS D:\dev\casestrainer> ]633;B
