import{_ as e,g as t,a as s}from"./index-DAXIdB0Z-1755064549552-injsfl.js";import{c as a,o as i,a as n,t as l,r,s as o,b as c,n as u,u as d,v as p,F as v,p as m,f,x as g,l as y,g as b,y as h,z as w,A as k,d as _}from"./vendor-D22LT_nf-1755064549553-8xwa4.js";const C={class:"test-component"},S={class:"test-content"};const x=e({name:"TestComponent",setup(){const e=r((new Date).toLocaleTimeString());return o(()=>{}),{currentTime:e}}},[["render",function(e,t,s,r,o,c){return i(),a("div",C,[t[1]||(t[1]=n("h3",null,"Test Component Loaded Successfully",-1)),t[2]||(t[2]=n("p",null,"This is a test component to verify component loading.",-1)),n("div",S,[t[0]||(t[0]=n("p",null,"If you can see this, components are loading correctly.",-1)),n("p",null,"Current time: "+l(r.currentTime),1)])])}],["__scopeId","data-v-74fd2625"]]),A={class:"unified-input"},N={class:"debug-info"},T=e({__name:"UnifiedInput",setup(e){alert("🔄 Simplified UnifiedInput.vue setup() called");const t=r((new Date).toLocaleTimeString());return o(()=>{alert("✅ Simplified UnifiedInput.vue mounted"),setInterval(()=>{t.value=(new Date).toLocaleTimeString()},1e3)}),(e,s)=>(i(),a("div",A,[s[1]||(s[1]=n("h3",null,"Debugging Component",-1)),s[2]||(s[2]=n("p",null,"Testing component rendering with TestComponent",-1)),c(x),n("div",N,[s[0]||(s[0]=n("p",null,"If you can see this, the component is rendering correctly.",-1)),n("p",null,"Current time: "+l(t.value),1)])]))}},[["__scopeId","data-v-10a9116c"]]),R={name:"ProcessingProgress",props:{elapsedTime:{type:Number,required:!0},remainingTime:{type:Number,required:!0},totalProgress:{type:Number,required:!0},currentStep:{type:String,default:""},currentStepProgress:{type:Number,default:0},processingSteps:{type:Array,default:()=>[]},actualTimes:{type:Object,default:()=>({})},citationInfo:{type:Object,default:null},rateLimitInfo:{type:Object,default:null},error:{type:String,default:""},canRetry:{type:Boolean,default:!1},timeout:{type:Number,default:null}},mounted(){},watch:{totalProgress(e){},remainingTime(e){}},computed:{currentStepElapsed(){const e=this.processingSteps.find(e=>e.step===this.currentStep);return e?Date.now()/1e3-e.start_time:0},currentStepRemaining(){const e=this.processingSteps.find(e=>e.step===this.currentStep);return e&&e.estimated_time?Math.max(0,e.estimated_time-this.currentStepElapsed):0},isTimeoutWarning(){if(!this.timeout)return!1;return this.timeout-this.elapsedTime<60}},methods:{formatTime(e){if(e<0)return"0s";const t=Math.floor(e/60),s=Math.round(e%60);return t>0?`${t}m ${s}s`:`${s}s`},getStepClass(e){return 100===e.progress?"completed":e.step===this.currentStep?"current":e.progress>0?"in-progress":"pending"},getStepStatus(e){return 100===e.progress?"Completed":e.step===this.currentStep?"In Progress":e.progress>0?`${e.progress}%`:"Pending"},formatProcessingRate(e){if(!e.processed||!this.elapsedTime)return"0/min";const t=e.processed/this.elapsedTime*60;return`${Math.round(t)}/min`}}},I={class:"processing-progress"},L={class:"progress-section"},E={class:"progress-bar"},P={class:"time-info"},D={key:0,class:"citation-section"},U={class:"citation-stats"},$={class:"stat"},V={class:"value"},j={class:"stat"},O={class:"value"},z={class:"stat"},F={class:"value"},M={key:0,class:"stat"},q={class:"value"},B={key:0,class:"rate-limit-info"},G={class:"stat"},W={class:"value"},H={key:0,class:"stat"},J={class:"value"},K={key:1,class:"current-step"},Q={class:"step-info"},X={class:"step-name"},Y={class:"progress-bar"},Z={class:"time-info"},ee={class:"steps-section"},te={class:"steps-list"},se={class:"step-header"},ae={class:"step-name"},ie={class:"step-status"},ne={key:0,class:"progress-bar"},le={key:1,class:"time-info"},re={key:0},oe={key:2,class:"error-section"},ce={class:"error-message"};const ue=e(R,[["render",function(e,t,s,r,o,c){return i(),a("div",I,[n("div",L,[t[1]||(t[1]=n("h3",null,"Overall Progress",-1)),n("div",E,[n("div",{class:"progress-fill",style:d({width:`${s.totalProgress}%`})},null,4)]),n("div",P,[n("span",null,"Elapsed: "+l(c.formatTime(s.elapsedTime)),1),n("span",null,"Remaining: "+l(c.formatTime(s.remainingTime)),1),s.timeout?(i(),a("span",{key:0,class:p(["timeout-info",{warning:c.isTimeoutWarning}])}," Timeout: "+l(c.formatTime(s.timeout-s.elapsedTime)),3)):u("",!0)])]),s.citationInfo?(i(),a("div",D,[t[8]||(t[8]=n("h3",null,"Citation Processing",-1)),n("div",U,[n("div",$,[t[2]||(t[2]=n("span",{class:"label"},"Total Citations:",-1)),n("span",V,l(s.citationInfo.total),1)]),n("div",j,[t[3]||(t[3]=n("span",{class:"label"},"Unique Citations:",-1)),n("span",O,l(s.citationInfo.unique),1)]),n("div",z,[t[4]||(t[4]=n("span",{class:"label"},"Processed:",-1)),n("span",F,l(s.citationInfo.processed),1)]),s.citationInfo.unique?(i(),a("div",M,[t[5]||(t[5]=n("span",{class:"label"},"Processing Rate:",-1)),n("span",q,l(c.formatProcessingRate(s.citationInfo)),1)])):u("",!0)]),s.rateLimitInfo?(i(),a("div",B,[n("div",G,[t[6]||(t[6]=n("span",{class:"label"},"API Rate Limit:",-1)),n("span",W,l(s.rateLimitInfo.remaining)+"/"+l(s.rateLimitInfo.limit),1)]),s.rateLimitInfo.resetTime?(i(),a("div",H,[t[7]||(t[7]=n("span",{class:"label"},"Reset in:",-1)),n("span",J,l(c.formatTime(s.rateLimitInfo.resetTime-Date.now()/1e3)),1)])):u("",!0)])):u("",!0)])):u("",!0),s.currentStep?(i(),a("div",K,[t[9]||(t[9]=n("h3",null,"Current Step",-1)),n("div",Q,[n("span",X,l(s.currentStep),1),n("div",Y,[n("div",{class:"progress-fill",style:d({width:`${s.currentStepProgress}%`})},null,4)]),n("div",Z,[n("span",null,"Elapsed: "+l(c.formatTime(c.currentStepElapsed)),1),n("span",null,"Remaining: "+l(c.formatTime(c.currentStepRemaining)),1)])])])):u("",!0),n("div",ee,[t[10]||(t[10]=n("h3",null,"Processing Steps",-1)),n("div",te,[(i(!0),a(v,null,m(s.processingSteps,e=>(i(),a("div",{key:e.step,class:p(["step",c.getStepClass(e)])},[n("div",se,[n("span",ae,l(e.step),1),n("span",ie,l(c.getStepStatus(e)),1)]),void 0!==e.progress?(i(),a("div",ne,[n("div",{class:"progress-fill",style:d({width:`${e.progress}%`})},null,4)])):u("",!0),e.estimated_time?(i(),a("div",le,[n("span",null,"Estimated: "+l(c.formatTime(e.estimated_time)),1),e.actual_time?(i(),a("span",re,"Actual: "+l(c.formatTime(e.actual_time)),1)):u("",!0)])):u("",!0)],2))),128))])]),s.error?(i(),a("div",oe,[n("div",ce,[t[11]||(t[11]=n("i",{class:"fas fa-exclamation-circle"},null,-1)),f(" "+l(s.error),1)]),s.canRetry?(i(),a("button",{key:0,onClick:t[0]||(t[0]=t=>e.$emit("retry")),class:"retry-button"}," Retry Processing ")):u("",!0)])):u("",!0)])}],["__scopeId","data-v-c1475ded"]]),de={key:0,class:"loading-state"},pe={key:1,class:"error-state"},ve={key:2,class:"no-citations-found text-center my-5"},me={class:"lead"},fe=["href"],ge={key:3,class:"citation-results"},ye={key:0,class:"prominent-citations-section"},be={class:"citations-summary"},he={key:0},we={class:"attention-filter-btns"},ke={class:"citations-grid"},_e={class:"citation-row",style:{color:"#dc3545","font-weight":"bold","font-size":"1.15rem"}},Ce={class:"citation-row flex-names-row"},Se={key:0},xe={key:1},Ae={class:"citation-row flex-names-row"},Ne={key:0},Te={key:1},Re={class:"citations-list-vertical"},Ie={class:"citation-text"},Le={key:1,class:"perfect-score-celebration"},Ee={key:1,class:"results-content"},Pe={class:"results-header"},De={class:"header-content"},Ue={class:"summary-stats"},$e={class:"stat-item verified"},Ve={class:"stat-number"},je={class:"stat-item invalid"},Oe={class:"stat-number"},ze={class:"stat-item total"},Fe={class:"stat-number"},Me={class:"filter-section"},qe={class:"filter-controls"},Be=["onClick"],Ge={class:"search-box"},We={class:"citations-list"},He={class:"canonical-only-clusters"},Je={class:"cluster-main-content"},Ke={class:"canonical-line"},Qe={key:1,class:"canonical-date missing"},Xe={key:1,class:"canonical-name missing"},Ye={class:"extracted-line"},Ze={key:1,class:"extracted-date missing"},et={key:1,class:"extracted-name missing"},tt={class:"citations-section"},st={class:"citations-list-vertical"},at=["href"],it={key:1,class:"citation-text"},nt={class:"expand-section"},lt=["onClick"],rt={class:"expand-text"},ot={key:0,class:"cluster-details"},ct={class:"details-content"},ut={class:"detail-section"},dt={class:"detail-grid"},pt={class:"detail-item"},vt={class:"detail-value"},mt={class:"detail-item"},ft={class:"detail-value"},gt={key:0,class:"detail-item"},yt=["href"],bt={class:"detail-section"},ht={class:"citation-detail-header"},wt={class:"citation-detail-title"},kt={class:"citation-detail-content"},_t={class:"detail-grid"},Ct={class:"detail-item"},St={class:"detail-value"},xt={class:"detail-item"},At={class:"detail-value"},Nt={class:"detail-item"},Tt={class:"detail-value"},Rt={key:0,class:"detail-item"},It={class:"detail-value error-text"},Lt={key:1,class:"detail-item"},Et=["href"],Pt={key:2,class:"results-content"},Dt={class:"results-header"},Ut={class:"header-content"},$t={class:"summary-stats"},Vt={class:"stat-item verified"},jt={class:"stat-number"},Ot={class:"stat-item invalid"},zt={class:"stat-number"},Ft={class:"stat-item total"},Mt={class:"stat-number"},qt={class:"filter-section"},Bt={class:"filter-controls"},Gt=["onClick"],Wt={class:"search-box"},Ht={class:"citations-list"},Jt={class:"citation-row citation-row-canonical flex-names-row"},Kt={key:0},Qt={key:1,class:"canonical-date missing"},Xt={key:1,class:"canonical-name missing"},Yt={class:"citation-row citation-row-extracted flex-names-row"},Zt={key:0},es={key:1,class:"extracted-date missing"},ts={key:1,class:"extracted-name missing"},ss={class:"citation-row citation-row-citations"},as={class:"citation-text"},is={class:"detail-row"},ns={key:3,class:"no-results-state"},ls={__name:"CitationResults",props:{results:{type:Object,default:null},showLoading:{type:Boolean,default:!1},error:{type:String,default:""},elapsedTime:{type:Number,default:0},remainingTime:{type:Number,default:0},totalProgress:{type:Number,default:0},currentStep:{type:String,default:""},currentStepProgress:{type:Number,default:0},processingSteps:{type:Array,default:()=>[]},citationInfo:{type:Object,default:null},rateLimitInfo:{type:Object,default:null},processingError:{type:String,default:""},canRetry:{type:Boolean,default:!1},timeout:{type:Number,default:null}},emits:["copy-results","download-results","toast","new-analysis"],setup(e,{emit:t}){const s=e,o=t,c=r("all"),d=r(""),_=r(1);r(new Set);const C=r(new Set),S=r(0),x=r(null);r(!1),r("canonical-only");const A=r("all"),N=r(!1);function T(e){return e.citations.every(e=>"unverified"===X(e))}function R(e){return e.citations.some(e=>!Y(M(e),q(e)))}function I(e){return e.citations.some(e=>!Z(B(e),G(e)))}g(()=>s.results,e=>{},{immediate:!0,deep:!0});const L=y(()=>{var e,t;return N.value?(null==(e=s.results)?void 0:e.clusters)&&s.results.clusters.length>0?s.results.clusters:(null==(t=s.results)?void 0:t.citations)?[{citations:s.results.citations}]:[]:"unverified"===A.value?V.value.filter(T):"name"===A.value?V.value.filter(R):"date"===A.value?V.value.filter(I):V.value});g(()=>s.results,(e,t)=>{e&&"number"==typeof e.progress&&(S.value=e.progress,x.value=e.eta_seconds)},{immediate:!0,deep:!0});const E=y(()=>s.showLoading||s.results&&"processing"===s.results.status),P=y(()=>{var e,t;return(null==(e=s.results)?void 0:e.clusters)&&s.results.clusters.length>0?s.results.clusters.reduce((e,t)=>e+t.citations.filter(e=>"true"===e.verified||!0===e.verified).length,0):(null==(t=s.results)?void 0:t.citations)?s.results.citations.filter(e=>"true"===e.verified||!0===e.verified).length:0}),D=y(()=>{var e,t;return(null==(e=s.results)?void 0:e.clusters)&&s.results.clusters.length>0?s.results.clusters.reduce((e,t)=>e+t.citations.filter(e=>"false"===e.verified||!1===e.verified).length,0):(null==(t=s.results)?void 0:t.citations)?s.results.citations.filter(e=>"false"===e.verified||!1===e.verified).length:0}),U=y(()=>{var e;return(null==(e=s.results)?void 0:e.clusters)&&0!==s.results.clusters.length?s.results.clusters.map(e=>{let t=e.citations.filter(e=>!O(e));if("verified"===c.value?t=t.filter(e=>"true"===e.verified||!0===e.verified):"invalid"===c.value&&(t=t.filter(e=>"false"===e.verified||!1===e.verified)),d.value.trim()){const e=d.value.toLowerCase();t=t.filter(t=>t.citation&&t.citation.toLowerCase().includes(e)||t.canonical_citation&&t.canonical_citation.toLowerCase().includes(e)||t.primary_citation&&t.primary_citation.toLowerCase().includes(e)||F(t)&&F(t).toLowerCase().includes(e))}return t.length>0?{...e,citations:t,size:t.length}:null}).filter(e=>null!==e):[]});y(()=>{var e,t;return(null==(e=s.results)?void 0:e.clusters)&&s.results.clusters.length>0?s.results.clusters.flatMap(e=>e.citations):(null==(t=s.results)?void 0:t.citations)?s.results.citations.filter(e=>!O(e)):[]});const $=e=>{let t=0;e.canonical_name&&"N/A"!==e.canonical_name&&(t+=2);const s=e.canonical_name,a=e.extracted_case_name;return s&&"N/A"!==s&&a&&"N/A"!==a&&Y(s,a)&&(t+=1),e.canonical_date&&"N/A"!==e.canonical_date&&(t+=1),e.url&&""!==e.url&&(t+=1),t},V=y(()=>{var e,t;if((null==(e=s.results)?void 0:e.clusters)&&s.results.clusters.length>0){return s.results.clusters.filter(e=>e.citations.some(e=>$(e)<4))}if(null==(t=s.results)?void 0:t.citations){const e=s.results.citations.filter(e=>$(e)<4),t={};e.forEach(e=>{const s=`${e.extracted_case_name||"N/A"}||${e.extracted_date||"N/A"}`;t[s]||(t[s]=[]),t[s].push(e)});return Object.values(t).map(e=>({citations:e}))}return[]}),j=y(()=>{var e,t;if((null==(e=s.results)?void 0:e.clusters)&&s.results.clusters.length>0)return U.value.flatMap(e=>e.citations);if(!(null==(t=s.results)?void 0:t.citations))return[];let a=s.results.citations;if(a=a.filter(e=>!O(e)),"verified"===c.value?a=a.filter(e=>"true"===e.verified||!0===e.verified):"invalid"===c.value&&(a=a.filter(e=>"false"===e.verified||!1===e.verified)),d.value.trim()){const e=d.value.toLowerCase();a=a.filter(t=>t.citation&&t.citation.toLowerCase().includes(e)||t.canonical_citation&&t.canonical_citation.toLowerCase().includes(e)||t.primary_citation&&t.primary_citation.toLowerCase().includes(e)||F(t)&&F(t).toLowerCase().includes(e))}return a}),O=e=>{const t=(e.citation||e.canonical_citation||e.primary_citation||"").toUpperCase();return!!(t.includes("U.S.C.")||t.includes("USC")||t.includes("C.F.R.")||t.includes("CFR")||t.includes("UNITED STATES CODE")||t.includes("CODE OF FEDERAL REGULATIONS"))||(/\d+\s+U\.?\s*S\.?\s*C\.?\s*[§]?\s*\d+/i.test(t)||/\d+\s+C\.?\s*F\.?\s*R\.?\s*[§]?\s*\d+/i.test(t))},z=y(()=>[{value:"all",label:"All",count:j.value.length},{value:"verified",label:"Verified",count:P.value},{value:"invalid",label:"Invalid",count:D.value}]),F=e=>e.canonical_name||e.extracted_case_name||null,M=e=>e.canonical_name||null,q=e=>{const t=e.extracted_case_name;return t&&"N/A"!==t?t:null},B=e=>e.canonical_date||null,G=e=>{const t=e.extracted_date;return t&&"N/A"!==t?t:null},W=e=>e.citation||e.canonical_citation||e.primary_citation||"N/A",H=e=>e.url||null,J=e=>e.source||"Unknown",K=e=>e.confidence||e.likelihood_score||"N/A",Q=e=>e.error||e.explanation||null,X=e=>"true"===e.verified||!0===e.verified?"verified":"true_by_parallel"===e.verified||!0===e.true_by_parallel||e.metadata&&!0===e.metadata.true_by_parallel?"true_by_parallel":"unverified",Y=(e,t)=>{if(!e||!t)return!1;if("N/A"===e||"N/A"===t)return!1;const s=e=>e.toLowerCase().replace(/[^\w\s]/g," ").replace(/\s+/g," ").trim(),a=e=>e.toLowerCase().replace(/\bcnty\.?\b/g,"county").replace(/\bco\.?\b/g,"company").replace(/\bcorp\.?\b/g,"corporation").replace(/\binc\.?\b/g,"incorporated").replace(/\bllc\.?\b/g,"limited liability company").replace(/\bltd\.?\b/g,"limited").replace(/\bdept?\.?\b/g,"department").replace(/\bex\s+rel\.?\b/g,"ex rel").replace(/\bv\.?\s+/g,"v ").replace(/\bvs\.?\s+/g,"v ").replace(/[^\w\s]/g," ").replace(/\s+/g," ").trim();if(s(e)===s(t))return!0;const i=a(e),n=a(t);if(i===n)return!0;const l=i.split(" ").filter(e=>e.length>1),r=n.split(" ").filter(e=>e.length>1);return l.filter(e=>r.includes(e)&&e.length>1).length/Math.min(l.length,r.length)>=.5},Z=(e,t)=>{if(!e||!t)return!1;const s=e=>{const t=e.match(/\d{4}/);return t?t[0]:null},a=s(e),i=s(t);return a&&i&&a===i},ee=e=>{const t=M(e),s=q(e);return Y(t,s)?"name-similar":"name-different"},te=e=>{const t=B(e),s=G(e);return Z(t,s)?"date-similar":"date-different"},se=y(()=>{if(!s.results)return!0;if(s.results.clusters&&s.results.clusters.length>0){if(s.results.clusters.reduce((e,t)=>e+(t.citations?t.citations.length:0),0)>0)return!1}return!(s.results.citations&&s.results.citations.length>0)&&!(s.results.total_citations&&s.results.total_citations>0)}),ae=y(()=>"text"),ie=y(()=>""),ne=e=>{if(!e)return null;const t=e.match(/\d{4}/);return t?t[0]:e},le=()=>{_.value=1};function re(e,t,s){const a=new Set,i=[];for(const n of e){const e=t(n),l=s(n);if(!e&&!l)continue;const r=`${e||""}||${l||""}`;a.has(r)||(a.add(r),i.push({name:e,year:l,citation:n}))}return i}function oe(e){const t=M(e),s=q(e),a=B(e),i=G(e);return(e=>{const t=X(e);return"verified"===t||"true_by_parallel"===t})(e)?t&&s&&!Y(t,s)?"Name mismatch":a&&i&&!Z(a,i)?"Date mismatch":"":"Unverified"}function ce(){var e,t;let a=[];return(null==(e=s.results)?void 0:e.clusters)&&s.results.clusters.length>0?s.results.clusters.forEach(e=>{a.push(...e.citations)}):(null==(t=s.results)?void 0:t.citations)&&(a=s.results.citations),a}function ls(){const e=ce().map(e=>`${W(e)}\nExtracted Name: ${q(e)||"N/A"}\nCanonical Name: ${M(e)||"N/A"}\nExtracted Date: ${G(e)||"N/A"}\nCanonical Date: ${B(e)||"N/A"}\nStatus: ${X(e)}\nMismatch Reason: ${oe(e)}\nSource: ${J(e)}\nConfidence: ${K(e)}\nError: ${Q(e)||""}\n---`).join("\n");navigator.clipboard.writeText(e),o("toast",{type:"success",message:"All citation data copied!"})}function rs(){const e=ce().map(e=>({citation:W(e),extracted_name:q(e),canonical_name:M(e),extracted_date:G(e),canonical_date:B(e),status:X(e),mismatch_reason:oe(e),source:J(e),confidence:K(e),error:Q(e)})),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="all_citations.json",a.click(),URL.revokeObjectURL(s),o("toast",{type:"success",message:"All citation data downloaded!"})}function os(e){const t=new Set,s=[];for(const a of e){const e=W(a);t.has(e)||(t.add(e),s.push(a))}return s}function cs(){o("new-analysis")}return g(c,le),g(d,le),(t,r)=>{var o,g,y,_;return e.showLoading?(i(),a("div",de,[r[6]||(r[6]=n("div",{class:"loading-spinner"},null,-1)),r[7]||(r[7]=n("p",null,"Processing citations...",-1)),E.value?(i(),b(ue,{key:0,"elapsed-time":(null==(o=s.results)?void 0:o.elapsedTime)||s.elapsedTime||0,"remaining-time":(null==(g=s.results)?void 0:g.remainingTime)||s.remainingTime||0,"total-progress":(null==(y=s.results)?void 0:y.progress)||s.totalProgress||0,"current-step":(null==(_=s.results)?void 0:_.message)||s.currentStep||"Processing...","current-step-progress":s.currentStepProgress,"processing-steps":s.processingSteps,"citation-info":s.citationInfo,"rate-limit-info":s.rateLimitInfo,error:s.processingError,"can-retry":s.canRetry,timeout:s.timeout},null,8,["elapsed-time","remaining-time","total-progress","current-step","current-step-progress","processing-steps","citation-info","rate-limit-info","error","can-retry","timeout"])):u("",!0)])):e.error?(i(),a("div",pe,[r[8]||(r[8]=n("div",{class:"error-icon"},"⚠️",-1)),r[9]||(r[9]=n("h3",null,"Error Processing Citations",-1)),n("p",null,l(e.error),1)])):se.value?(i(),a("div",ve,[r[10]||(r[10]=n("img",{src:"/casestrainer/no-results.svg",alt:"No citations found",style:{width:"120px",margin:"20px 0"}},null,-1)),n("p",me,"No case citations found in your "+l(ae.value)+".",1),n("a",{href:`mailto:jafrank@uw.edu?subject=CaseStrainer%20feedback&body=I%20submitted%20the%20following%20${ae.value}:%0A${encodeURIComponent(ie.value)}%0Aand%20no%20citations%20were%20found.`,class:"btn btn-outline-primary mt-2"}," Report a possible extraction error ",8,fe)])):(i(),a("div",ge,[e.results&&(e.results.clusters||e.results.citations)?(i(),a("div",ye,[n("div",be,[V.value.length>0?(i(),a("div",he,[r[14]||(r[14]=n("h3",null,"Citations That Need Attention",-1)),n("div",we,[n("button",{class:p(["attention-filter-btn",{active:"all"===A.value}]),onClick:r[0]||(r[0]=e=>A.value="all")},"All",2),n("button",{class:p(["attention-filter-btn",{active:"unverified"===A.value}]),onClick:r[1]||(r[1]=e=>A.value="unverified")},"Unverified",2),n("button",{class:p(["attention-filter-btn",{active:"name"===A.value}]),onClick:r[2]||(r[2]=e=>A.value="name")},"Name Mismatch",2),n("button",{class:p(["attention-filter-btn",{active:"date"===A.value}]),onClick:r[3]||(r[3]=e=>A.value="date")},"Date Mismatch",2)]),n("div",ke,[(i(!0),a(v,null,m(L.value,e=>(i(),a("div",{key:e.cluster_id||W(e.citations[0]),class:"citation-comparison-card"},[e.citations.every(e=>"unverified"===X(e))&&0===re(e.citations,M,e=>ne(B(e))).length&&0===re(e.citations,q,e=>ne(G(e))).length?(i(),a(v,{key:0},[n("div",_e,l(W(e.citations[0])),1),r[11]||(r[11]=h('<div class="citation-row flex-names-row" data-v-94b4b6a2><span class="row-label" data-v-94b4b6a2>Canonical:</span><span style="color:#dc3545;font-weight:bold;" data-v-94b4b6a2>N/A (N/A)</span></div><div class="citation-row flex-names-row" data-v-94b4b6a2><span class="row-label" data-v-94b4b6a2>Extracted:</span><span style="color:#dc3545;font-weight:bold;" data-v-94b4b6a2>N/A (N/A)</span></div>',2))],64)):(i(),a(v,{key:1},[n("div",Ce,[r[12]||(r[12]=n("span",{class:"row-label"},"Verifying Source:",-1)),n("span",null,[M(e.citations[0])&&"N/A"!==M(e.citations[0])?(i(),a(v,{key:0},[f(l(M(e.citations[0]))+" ",1),B(e.citations[0])?(i(),a("span",Se," ("+l(ne(B(e.citations[0])))+")",1)):(i(),a("span",xe," (N/A)"))],64)):(i(),a(v,{key:1},[f(" N/A (N/A) ")],64))])]),n("div",Ae,[r[13]||(r[13]=n("span",{class:"row-label"},"From Document:",-1)),n("span",null,[q(e.citations[0])&&"N/A"!==q(e.citations[0])?(i(),a(v,{key:0},[f(l(q(e.citations[0]))+" ",1),G(e.citations[0])?(i(),a("span",Ne," ("+l(ne(G(e.citations[0])))+")",1)):(i(),a("span",Te," (N/A)"))],64)):(i(),a(v,{key:1},[f(" N/A (N/A) ")],64))])]),n("div",Re,[(i(!0),a(v,null,m(os(e.citations),(e,t)=>(i(),a("div",{key:t,class:"citation-row-item"},[n("span",Ie,l(W(e)),1),n("span",{class:p(["verification-badge",X(e)])},["verified"===X(e)?(i(),a(v,{key:0},[f("VERIFIED")],64)):"true_by_parallel"===X(e)?(i(),a(v,{key:1},[f("verified by parallel citation")],64)):(i(),a(v,{key:2},[f("UNVERIFIED")],64))],2)]))),128))])],64))]))),128))])])):(i(),a("div",Le,r[15]||(r[15]=[h('<div class="celebration-content" data-v-94b4b6a2><div class="celebration-icon" data-v-94b4b6a2>🎉</div><h3 class="celebration-title" data-v-94b4b6a2>Perfect Score! 🏆</h3><p class="celebration-message" data-v-94b4b6a2>All citations are verified and complete! Great job on your legal research.</p><div class="celebration-stats" data-v-94b4b6a2><span class="stat-badge" data-v-94b4b6a2>✅ All Verified</span><span class="stat-badge" data-v-94b4b6a2>📋 Complete Data</span><span class="stat-badge" data-v-94b4b6a2>🔗 Links Available</span></div></div>',1)])))])])):u("",!0),e.results&&e.results.clusters&&e.results.clusters.length>0?(i(),a("div",Ee,[n("div",Pe,[n("div",De,[r[19]||(r[19]=n("h2",null,"Citation Verification Results (Clustered)",-1)),n("div",Ue,[n("div",$e,[n("span",Ve,l(P.value),1),r[16]||(r[16]=n("span",{class:"stat-label"},"Verified",-1))]),n("div",je,[n("span",Oe,l(D.value),1),r[17]||(r[17]=n("span",{class:"stat-label"},"Invalid",-1))]),n("div",ze,[n("span",Fe,l(U.value.length),1),r[18]||(r[18]=n("span",{class:"stat-label"},"Clusters",-1))])])]),n("div",{class:"action-buttons"},[n("button",{class:"action-btn new-analysis-btn",onClick:cs}," 🔄 New Analysis "),n("button",{class:"action-btn copy-btn",onClick:ls}," Copy Results "),n("button",{class:"action-btn download-btn",onClick:rs}," Download ")])]),n("div",Me,[n("div",qe,[(i(!0),a(v,null,m(z.value,e=>(i(),a("button",{key:e.value,class:p(["filter-btn",{active:c.value===e.value}]),onClick:t=>c.value=e.value},l(e.label)+" ("+l(e.count)+") ",11,Be))),128))]),n("div",Ge,[w(n("input",{"onUpdate:modelValue":r[4]||(r[4]=e=>d.value=e),type:"text",placeholder:"Search citations...",class:"search-input"},null,512),[[k,d.value]])])]),n("div",We,[n("div",He,[(i(!0),a(v,null,m(U.value,e=>(i(),a("div",{key:e.cluster_id,class:"canonical-only-card"},[n("div",Je,[n("div",Ke,[r[20]||(r[20]=n("span",{class:"canonical-label"},"Verifying Source:",-1)),M(e.citations[0])&&"N/A"!==M(e.citations[0])?(i(),a("span",{key:0,class:p(["canonical-name",ee(e.citations[0])])},[f(l(M(e.citations[0]))+" ",1),B(e.citations[0])?(i(),a("span",{key:0,class:p(["canonical-date",te(e.citations[0])])}," ("+l(ne(B(e.citations[0])))+") ",3)):(i(),a("span",Qe,"(no date)"))],2)):(i(),a("span",Xe,"No canonical name"))]),n("div",Ye,[r[21]||(r[21]=n("span",{class:"extracted-label"},"From Document:",-1)),q(e.citations[0])&&"N/A"!==q(e.citations[0])?(i(),a("span",{key:0,class:p(["extracted-name",ee(e.citations[0])])},[f(l(q(e.citations[0]))+" ",1),G(e.citations[0])?(i(),a("span",{key:0,class:p(["extracted-date",te(e.citations[0])])}," ("+l(ne(G(e.citations[0])))+") ",3)):(i(),a("span",Ze,"(no date)"))],2)):(i(),a("span",et,"No extracted name or year"))]),n("div",tt,[r[22]||(r[22]=n("span",{class:"citations-label"},null,-1)),n("div",st,[(i(!0),a(v,null,m(e.citations,(e,t)=>(i(),a("div",{key:t,class:"citation-row-item"},["verified"===X(e)&&H(e)?(i(),a("a",{key:0,href:H(e),target:"_blank",class:"citation-link-verified"},l(W(e)),9,at)):(i(),a("span",it,l(W(e)),1)),n("span",{class:p(["verification-badge",X(e)])},l(X(e).replace("_"," ")),3)]))),128))])]),n("div",nt,[n("button",{onClick:t=>{return s=e.cluster_id,void(C.value.has(s)?C.value.delete(s):C.value.add(s));var s},class:p(["expand-btn",{expanded:C.value.has(e.cluster_id)}])},[n("span",rt,l(C.value.has(e.cluster_id)?"Hide Details":"Show Details"),1),r[23]||(r[23]=n("span",{class:"expand-icon"},"▼",-1))],10,lt)])]),C.value.has(e.cluster_id)?(i(),a("div",ot,[n("div",ct,[n("div",ut,[r[27]||(r[27]=n("h4",{class:"detail-section-title"},"Cluster Information",-1)),n("div",dt,[n("div",pt,[r[24]||(r[24]=n("span",{class:"detail-label"},"Cluster ID:",-1)),n("span",vt,l(e.cluster_id),1)]),n("div",mt,[r[25]||(r[25]=n("span",{class:"detail-label"},"Size:",-1)),n("span",ft,l(e.size)+" citation"+l(e.size>1?"s":""),1)]),e.url?(i(),a("div",gt,[r[26]||(r[26]=n("span",{class:"detail-label"},"CourtListener URL:",-1)),n("a",{href:e.url,target:"_blank",class:"detail-link"},"View on CourtListener",8,yt)])):u("",!0)])]),n("div",bt,[r[33]||(r[33]=n("h4",{class:"detail-section-title"},"Citation Details",-1)),(i(!0),a(v,null,m(e.citations,(e,t)=>(i(),a("div",{key:t,class:"citation-detail-item"},[n("div",ht,[n("h5",wt,l(W(e)),1),n("span",{class:p(["verification-badge",X(e)])},l(X(e).replace("_"," ")),3)]),n("div",kt,[n("div",_t,[n("div",Ct,[r[28]||(r[28]=n("span",{class:"detail-label"},"Source:",-1)),n("span",St,l(J(e)),1)]),n("div",xt,[r[29]||(r[29]=n("span",{class:"detail-label"},"Confidence:",-1)),n("span",At,l(K(e)),1)]),n("div",Nt,[r[30]||(r[30]=n("span",{class:"detail-label"},"Mismatch Reason:",-1)),n("span",Tt,l(oe(e)||"None"),1)]),Q(e)?(i(),a("div",Rt,[r[31]||(r[31]=n("span",{class:"detail-label"},"Error:",-1)),n("span",It,l(Q(e)),1)])):u("",!0),H(e)?(i(),a("div",Lt,[r[32]||(r[32]=n("span",{class:"detail-label"},"URL:",-1)),n("a",{href:H(e),target:"_blank",class:"detail-link"},"View Citation",8,Et)])):u("",!0)])])]))),128))])])])):u("",!0)]))),128))])])])):e.results&&e.results.citations&&e.results.citations.length>0?(i(),a("div",Pt,[n("div",Dt,[n("div",Ut,[r[37]||(r[37]=n("h2",null,"Citation Verification Results (Individual)",-1)),n("div",$t,[n("div",Vt,[n("span",jt,l(P.value),1),r[34]||(r[34]=n("span",{class:"stat-label"},"Verified",-1))]),n("div",Ot,[n("span",zt,l(D.value),1),r[35]||(r[35]=n("span",{class:"stat-label"},"Invalid",-1))]),n("div",Ft,[n("span",Mt,l(j.value.length),1),r[36]||(r[36]=n("span",{class:"stat-label"},"Total",-1))])])]),n("div",{class:"action-buttons"},[n("button",{class:"action-btn copy-btn",onClick:ls}," Copy Results "),n("button",{class:"action-btn download-btn",onClick:rs}," Download ")])]),n("div",qt,[n("div",Bt,[(i(!0),a(v,null,m(z.value,e=>(i(),a("button",{key:e.value,class:p(["filter-btn",{active:c.value===e.value}]),onClick:t=>c.value=e.value},l(e.label)+" ("+l(e.count)+") ",11,Gt))),128))]),n("div",Wt,[w(n("input",{"onUpdate:modelValue":r[5]||(r[5]=e=>d.value=e),type:"text",placeholder:"Search citations...",class:"search-input"},null,512),[[k,d.value]])])]),n("div",Ht,[(i(!0),a(v,null,m(j.value,e=>(i(),a("div",{key:W(e),class:"citation-item individual"},[n("div",Jt,[r[38]||(r[38]=n("span",{class:"row-label"},"Verifying Source:",-1)),n("span",null,[M(e)&&"N/A"!==M(e)?(i(),a("span",Kt,[f(l(M(e))+" ",1),B(e)?(i(),a("span",{key:0,class:p(["canonical-date",te(e)])}," ("+l(ne(B(e)))+") ",3)):(i(),a("span",Qt,"(no date)"))])):(i(),a("span",Xt,"No canonical name"))])]),n("div",Yt,[r[39]||(r[39]=n("span",{class:"row-label"},"From Document:",-1)),n("span",null,[q(e)&&"N/A"!==q(e)?(i(),a("span",Zt,[f(l(q(e))+" ",1),G(e)?(i(),a("span",{key:0,class:p(["extracted-date",te(e)])}," ("+l(ne(G(e)))+") ",3)):(i(),a("span",es,"(no date)"))])):(i(),a("span",ts,"No extracted name or year"))])]),n("div",ss,[n("span",as,l(W(e)),1),n("span",{class:p(["verification-badge",X(e)])},l(X(e)),3)]),n("div",is,[r[40]||(r[40]=n("span",{class:"detail-label"},"Mismatch Reason:",-1)),r[41]||(r[41]=f()),n("span",null,l(oe(e)),1)])]))),128))])])):(i(),a("div",ns,r[42]||(r[42]=[n("p",null,"No citation results to display.",-1)])))]))}}},rs={class:"enhanced-validator"},os={class:"header text-center mb-4"},cs={class:"results-title"},us={key:0,class:"loading-container"},ds={class:"loading-content"},ps={class:"spinner-container"},vs={class:"custom-spinner",role:"status",ref:"spinnerElement"},ms={class:"spinner-circle",ref:"spinnerCircle"},fs={class:"loading-info"},gs={class:"progress-indicator"},ys={class:"progress-bar"},bs={class:"progress-text"},hs={key:1,class:"error-container"},ws={class:"error-content"},ks={key:2,class:"main-content-wrapper"},_s={key:0,class:"input-section"},Cs={key:1,class:"results-section"};const Ss=e({name:"EnhancedValidator",components:{UnifiedInput:T,CitationResults:e(ls,[["__scopeId","data-v-94b4b6a2"]])},setup(){alert("🔄 EnhancedValidator.vue setup() called");const e=r(null),a=r(null),i=r(!1),n=r(!1);g(e,e=>{}),o(()=>{alert("✅ EnhancedValidator.vue mounted")});const l=y(()=>i.value||n.value||t.progressState.isActive),c=y(()=>!e.value&&!a.value&&!l.value),u=y(()=>e.value?"Citation Verification Results":"Citation Verification");return{results:e,error:a,simpleLoading:i,hasActiveRequest:n,showLoading:l,shouldShowInput:c,headerTitle:u,handleUnifiedAnalyze:async l=>{try{let o;i.value=!0,n.value=!0,a.value=null,t.startProgress("document",{});let c=new FormData,u="";u="/analyze",l instanceof FormData?c=l:"text"===l.type?(c.append("text",l.text),c.append("type","text")):"url"===l.type&&(c.append("url",l.url),c.append("type","url"));try{o=await s.post(u,c,{timeout:3e5,headers:{}})}catch(r){if("ECONNABORTED"===r.code)throw new Error("Request timed out. The server is taking too long to respond.");throw r}if(o.status>=400){const e=o.data||{};throw new Error(e.message||`Server returned ${o.status}: ${o.statusText}`)}const d=o.data;d.result?e.value=d.result:e.value=d}catch(o){a.value=o.message||"An error occurred while processing your request",t.setError(o.message||"An error occurred while processing your request")}finally{i.value=!1,n.value=!1}},copyResults:()=>{},downloadResults:()=>{},showToast:e=>{},startNewAnalysis:()=>{e.value=null,a.value=null}}}},[["render",function(e,t,s,r,o,p){const v=_("UnifiedInput"),m=_("CitationResults");return i(),a("div",rs,[n("div",os,[n("h1",cs,l(r.headerTitle),1)]),r.showLoading&&!r.results?(i(),a("div",us,[n("div",ds,[n("div",ps,[n("div",vs,[n("div",ms,null,512),t[0]||(t[0]=n("span",{class:"visually-hidden"},"Processing...",-1))],512)]),t[2]||(t[2]=n("h3",null,"Processing Citations",-1)),t[3]||(t[3]=n("p",{class:"text-muted"},"Extracting and analyzing citations from your document...",-1)),n("div",fs,[t[1]||(t[1]=n("p",{class:"timeout-info"},"This may take up to 30 seconds. Please don't close this page.",-1)),n("div",gs,[n("div",ys,[n("div",{class:"progress-fill",style:d({width:e.globalProgress.progressState.percentage+"%"})},null,4)]),n("span",bs,l(e.globalProgress.progressState.statusText),1)])])])])):r.error&&!r.showLoading?(i(),a("div",hs,[n("div",ws,[t[4]||(t[4]=n("div",{class:"error-icon"},[n("i",{class:"bi bi-exclamation-triangle"})],-1)),t[5]||(t[5]=n("h3",null,"Analysis Failed",-1)),n("p",null,l(r.error),1)])])):(i(),a("div",ks,[r.shouldShowInput?(i(),a("div",_s,[c(v,{isAnalyzing:r.showLoading,onAnalyze:r.handleUnifiedAnalyze},null,8,["isAnalyzing","onAnalyze"])])):u("",!0),r.results?(i(),a("div",Cs,[c(m,{results:r.results,"show-loading":r.showLoading,error:r.error,onCopyResults:r.copyResults,onDownloadResults:r.downloadResults,onToast:r.showToast,onNewAnalysis:r.startNewAnalysis},null,8,["results","show-loading","error","onCopyResults","onDownloadResults","onToast","onNewAnalysis"])])):u("",!0)]))])}],["__scopeId","data-v-db1614e0"]]);export{Ss as default};
