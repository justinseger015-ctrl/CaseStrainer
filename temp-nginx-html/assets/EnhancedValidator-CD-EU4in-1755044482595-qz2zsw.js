import{_ as e,g as a,a as t}from"./index-BrKLmWzv-1755044482595-dm54gn.js";import{r as i,c as s,o as l,a as n,s as r,n as o,u as c,v as d,t as u,f as p,l as v,x as m,y as f,z as g,A as b,F as y,p as h,B as x,C as w,D as k,E as C,g as A,h as z,G as S,b as T,d as _}from"./vendor-kG-bgO3R-1755044482595-qz2zsw.js";const U={name:"ModernFileUpload",emits:["analyze"],props:{isAnalyzing:{type:Boolean,default:!1}},setup(e,{emit:a}){const t=i(null),s=i(null),l=i(!1),n=i(""),r=e=>{n.value="";const i=e.name.toLowerCase().substring(e.name.lastIndexOf("."));return["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","application/rtf","text/html","text/htm"].includes(e.type)||[".pdf",".doc",".docx",".txt",".rtf",".html",".htm"].includes(i)?e.size>104857600?(n.value="File size must be less than 100MB",void a("file-selected",null)):(t.value=e,void a("file-selected",e)):(n.value="Please select a valid file type (PDF, DOCX, TXT, RTF, MD, HTML, or XML)",void a("file-selected",null))};return{file:t,fileInput:s,isDragOver:l,fileError:n,handleFileChange:e=>{const a=e.target.files[0];a&&r(a)},onFileDrop:e=>{e.preventDefault(),l.value=!1;const a=e.dataTransfer.files[0];a&&r(a)},onDragOver:e=>{e.preventDefault(),l.value=!0},onDragLeave:e=>{e.preventDefault(),l.value=!1},triggerFileInput:()=>{!e.isAnalyzing&&s.value&&s.value.click()},clearFile:()=>{t.value=null,n.value="",s.value&&(s.value.value=""),a("file-selected",null)},formatFileSize:e=>{if(!e)return"0 Bytes";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB"][a]},formatDate:e=>e?new Date(e).toLocaleDateString():"Unknown",getFileIcon:e=>({".pdf":"bi bi-file-earmark-pdf text-danger",".doc":"bi bi-file-earmark-word text-primary",".docx":"bi bi-file-earmark-word text-primary",".txt":"bi bi-file-earmark-text text-secondary",".rtf":"bi bi-file-earmark-richtext text-info",".html":"bi bi-file-earmark-code text-warning",".htm":"bi bi-file-earmark-code text-warning"}[e.toLowerCase().substring(e.lastIndexOf("."))]||"bi bi-file-earmark text-muted"),getFileType:e=>({".pdf":"PDF Document",".doc":"Word Document",".docx":"Word Document",".txt":"Text File",".rtf":"Rich Text Format",".html":"HTML Document",".htm":"HTML Document"}[e.toLowerCase().substring(e.lastIndexOf("."))]||"Document"),emitAnalyze:async()=>{if(t.value&&!n.value)try{let i="";if("text/plain"===t.value.type||t.value.name.endsWith(".txt"))i=await t.value.text();else{if("application/pdf"===t.value.type||t.value.name.endsWith(".pdf")){const e=new FormData;return e.append("file",t.value),e.append("type","file"),e.append("fileName",t.value.name),e.append("fileSize",t.value.size.toString()),e.append("extractText","true"),void a("analyze",e)}try{i=await t.value.text()}catch(e){const i=new FormData;return i.append("file",t.value),i.append("type","file"),i.append("fileName",t.value.name),i.append("fileSize",t.value.size.toString()),void a("analyze",i)}}const s={text:i,type:"text",source:"file",fileName:t.value.name,fileSize:t.value.size};a("analyze",s)}catch(e){const i=new FormData;i.append("file",t.value),i.append("type","file"),i.append("fileName",t.value.name),i.append("fileSize",t.value.size.toString()),a("analyze",i)}}}}},R={class:"modern-file-upload"},D={class:"upload-card"},L={class:"upload-body"},I=["disabled"],N={key:0,class:"drop-zone-empty"},E={class:"upload-title"},P={key:1,class:"file-preview"},F={class:"file-icon"},M={class:"file-details"},V={class:"file-name"},O={class:"file-size"},$={class:"file-type"},B={key:0,class:"error-message"},q={key:1,class:"file-analysis-info"},j={class:"analysis-stats"},H={class:"stat-item"},W={class:"stat-item"},X={class:"stat-item"},Y={class:"upload-actions"},G=["disabled"],Z={key:0,class:"spinner-border spinner-border-sm me-2"},K={key:1,class:"bi bi-search me-2"},Q={key:0,class:"secondary-actions"},J={key:2,class:"analysis-progress"};const ee=e(U,[["render",function(e,a,t,i,v,m){return l(),s("div",R,[n("div",D,[a[18]||(a[18]=r('<div class="upload-header" data-v-8324379d><div class="header-icon" data-v-8324379d><i class="bi bi-cloud-upload" data-v-8324379d></i></div><h3 class="header-title" data-v-8324379d>Upload Document</h3><p class="header-subtitle" data-v-8324379d>Drag &amp; drop or click to select your legal document</p></div>',1)),n("div",L,[n("input",{ref:"fileInput",type:"file",id:"fileUpload",class:"file-input",onChange:a[0]||(a[0]=(...e)=>i.handleFileChange&&i.handleFileChange(...e)),accept:".pdf,.docx,.txt,.rtf,.md,.html,.htm,.xml,.xhtml",disabled:t.isAnalyzing},null,40,I),n("div",{class:d(["drop-zone",{"has-file":i.file,dragover:i.isDragOver,analyzing:t.isAnalyzing,error:i.fileError}]),onDrop:a[2]||(a[2]=(...e)=>i.onFileDrop&&i.onFileDrop(...e)),onDragover:a[3]||(a[3]=c((...e)=>i.onDragOver&&i.onDragOver(...e),["prevent"])),onDragleave:a[4]||(a[4]=c((...e)=>i.onDragLeave&&i.onDragLeave(...e),["prevent"])),onClick:a[5]||(a[5]=(...e)=>i.triggerFileInput&&i.triggerFileInput(...e))},[i.file?(l(),s("div",P,[n("div",F,[n("i",{class:d(i.getFileIcon(i.file.name))},null,2)]),n("div",M,[n("h5",V,u(i.file.name),1),n("p",O,u(i.formatFileSize(i.file.size)),1),n("div",$,u(i.getFileType(i.file.name)),1)]),t.isAnalyzing?o("",!0):(l(),s("button",{key:0,onClick:a[1]||(a[1]=c((...e)=>i.clearFile&&i.clearFile(...e),["stop"])),class:"remove-btn remove-btn-purple",title:"Remove file","aria-label":"Remove file"},a[11]||(a[11]=[n("i",{class:"bi bi-x-lg"},null,-1),p(" Remove ",-1)])))])):(l(),s("div",N,[a[8]||(a[8]=n("div",{class:"upload-icon"},[n("i",{class:"bi bi-cloud-upload"})],-1)),n("h4",E,u(i.isDragOver?"Drop your file here":"Click to browse or drag & drop"),1),a[9]||(a[9]=n("p",{class:"upload-subtitle"}," Supports: PDF, DOCX, TXT, RTF, MD, HTML, XML ",-1)),a[10]||(a[10]=n("div",{class:"upload-limit"},[n("i",{class:"bi bi-info-circle me-1"}),p(" Maximum file size: 50MB ")],-1))]))],34),i.fileError?(l(),s("div",B,[a[12]||(a[12]=n("i",{class:"bi bi-exclamation-triangle me-2"},null,-1)),p(" "+u(i.fileError),1)])):o("",!0),i.file&&!i.fileError?(l(),s("div",q,[n("div",j,[n("div",H,[a[13]||(a[13]=n("i",{class:"bi bi-file-earmark-text"},null,-1)),n("span",null,u(i.getFileType(i.file.name)),1)]),n("div",W,[a[14]||(a[14]=n("i",{class:"bi bi-hdd"},null,-1)),n("span",null,u(i.formatFileSize(i.file.size)),1)]),n("div",X,[a[15]||(a[15]=n("i",{class:"bi bi-calendar3"},null,-1)),n("span",null,u(i.formatDate(i.file.lastModified)),1)])])])):o("",!0),n("div",Y,[n("button",{class:d(["analyze-btn",{disabled:!i.file||t.isAnalyzing||i.fileError}]),onClick:a[6]||(a[6]=(...e)=>i.emitAnalyze&&i.emitAnalyze(...e)),disabled:!i.file||t.isAnalyzing||i.fileError},[t.isAnalyzing?(l(),s("span",Z)):(l(),s("i",K)),p(" "+u(t.isAnalyzing?"Analyzing Document...":"Analyze Document"),1)],10,G),i.file&&!t.isAnalyzing?(l(),s("div",Q,[n("button",{onClick:a[7]||(a[7]=(...e)=>i.clearFile&&i.clearFile(...e)),class:"btn btn-outline-secondary btn-sm"},a[16]||(a[16]=[n("i",{class:"bi bi-arrow-clockwise me-1"},null,-1),p(" Choose Different File ",-1)]))])):o("",!0)]),t.isAnalyzing?(l(),s("div",J,a[17]||(a[17]=[r('<div class="progress-info" data-v-8324379d><div class="progress-text" data-v-8324379d><i class="bi bi-gear-fill spinning me-2" data-v-8324379d></i> Processing your document... </div><div class="progress-steps" data-v-8324379d><span class="step active" data-v-8324379d>Reading file</span><span class="step active" data-v-8324379d>Extracting text</span><span class="step" data-v-8324379d>Finding citations</span><span class="step" data-v-8324379d>Validating results</span></div></div>',1)]))):o("",!0)])])])}],["__scopeId","data-v-8324379d"]]),ae={name:"ModernUrlUpload",emits:["analyze"],props:{isAnalyzing:{type:Boolean,default:!1}},setup(e,{emit:a}){const t=i(""),s=i(""),l=i(""),n=i(1),r=i({includeSubpages:!1,followRedirects:!0,deepScan:!1}),o=i([{label:"Court Opinion",url:"https://www.courts.wa.gov/opinions/",icon:"bi bi-bank"},{label:"Legal Database",url:"https://scholar.google.com/scholar",icon:"bi bi-journal-text"},{label:"PDF Document",url:"https://example.com/document.pdf",icon:"bi bi-file-pdf"}]),c=v(()=>{if(!t.value)return!1;try{const e=new URL(t.value);return"http:"===e.protocol||"https:"===e.protocol}catch{return!1}}),d=v(()=>{if(!c.value)return null;try{return new URL(t.value)}catch{return null}}),u=v(()=>({success:"bi bi-check-circle-fill",error:"bi bi-x-circle-fill",warning:"bi bi-exclamation-triangle-fill",info:"bi bi-info-circle-fill"}[l.value]||"bi bi-info-circle")),p=()=>{if(t.value){if(t.value.length<8)return s.value="URL is too short",void(l.value="error");try{const e=new URL(t.value);if("http:"!==e.protocol&&"https:"!==e.protocol)return s.value="Only HTTP and HTTPS URLs are supported",void(l.value="error");if("localhost"===e.hostname||"127.0.0.1"===e.hostname)return s.value="Local URLs cannot be analyzed",void(l.value="warning");"http:"===e.protocol?(s.value="HTTP URLs are less secure than HTTPS",l.value="warning"):(s.value="Valid HTTPS URL ready for analysis",l.value="success")}catch{s.value="Please enter a valid URL",l.value="error"}}else s.value=""};return m(()=>e.isAnalyzing,a=>{if(a){n.value=1;const a=setInterval(()=>{n.value<4&&e.isAnalyzing?n.value++:clearInterval(a)},1500)}}),m(t,p),{url:t,options:r,urlExamples:o,isValidUrl:c,urlPreview:d,validationMessage:s,validationMessageType:l,validationMessageIcon:u,progressStep:n,validateUrl:p,getUrlIcon:e=>({"https:":"bi bi-shield-fill-check text-success","http:":"bi bi-shield-fill-exclamation text-warning"}[e]||"bi bi-globe text-muted"),setExampleUrl:e=>{t.value=e,p()},getDisplayUrl:e=>{try{const a=new URL(e);return a.hostname+("/"!==a.pathname?a.pathname:"")}catch{return e}},getAnalyzeButtonText:()=>isAnalyzing.value?"Analyzing URL...":t.value?c.value?"Analyze URL Content":"Invalid URL":"Enter URL to Analyze",emitAnalyze:async()=>{if(c.value&&!isAnalyzing.value)try{const e=await fetch(t.value);if(!e.ok)throw new Error(`Failed to download: ${e.status} ${e.statusText}`);const i=e.headers.get("content-type")||"application/octet-stream",s=e.headers.get("content-disposition");let l="downloaded_file";if(s){const e=s.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/);e&&(l=e[1].replace(/['"]/g,""))}const n=await e.blob(),r=new File([n],l,{type:i}),o=new FormData;o.append("file",r),o.append("type","file"),o.append("source","url"),o.append("originalUrl",t.value),a("analyze",o)}catch(e){const i={url:t.value,options:r.value,type:"url"};a("analyze",i)}}}}},te={class:"modern-url-upload"},ie={class:"upload-card"},se={class:"upload-body"},le={class:"url-input-section"},ne={class:"url-input-container"},re={class:"input-wrapper"},oe=["disabled"],ce={key:0,class:"input-status valid"},de={key:1,class:"input-status invalid"},ue={class:"validation-messages"},pe={key:1,class:"form-help"},ve={key:0,class:"url-preview-section"},me={class:"url-preview"},fe={class:"preview-icon"},ge={class:"preview-details"},be={class:"preview-domain"},ye={class:"preview-path"},he={class:"preview-protocol"},xe={class:"preview-security"},we={class:"url-examples-section"},ke={class:"url-examples"},Ce=["onClick","disabled"],Ae={key:1,class:"analysis-options-section"},ze={class:"options-grid"},Se={class:"option-item"},Te=["disabled"],_e={class:"option-item"},Ue=["disabled"],Re={class:"option-item"},De=["disabled"],Le={class:"analyze-section"},Ie=["disabled"],Ne={key:0,class:"spinner-border spinner-border-sm me-2"},Ee={key:1,class:"bi bi-search me-2"},Pe={key:0,class:"analyze-info"},Fe={key:2,class:"analysis-progress"},Me={class:"progress-header"},Ve={class:"progress-url"},Oe={class:"progress-steps"};const $e=e(ae,[["render",function(e,a,t,i,c,v){return l(),s("div",te,[n("div",ie,[a[24]||(a[24]=r('<div class="upload-header" data-v-9a6e8adf><div class="header-icon" data-v-9a6e8adf><i class="bi bi-link-45deg" data-v-9a6e8adf></i></div><h3 class="header-title" data-v-9a6e8adf>Analyze Web Content</h3><p class="header-subtitle" data-v-9a6e8adf>Enter a URL to fetch and analyze legal documents from the web</p></div>',1)),n("div",se,[n("div",le,[a[11]||(a[11]=n("label",{for:"urlInput",class:"form-label"},[n("i",{class:"bi bi-globe me-2"}),p(" Website URL ")],-1)),n("div",ne,[n("div",re,[a[9]||(a[9]=n("div",{class:"input-icon"},[n("i",{class:"bi bi-link-45deg"})],-1)),f(n("input",{type:"url",id:"urlInput",class:d(["url-input",{valid:i.isValidUrl&&i.url.length>0,invalid:!i.isValidUrl&&i.url.length>0,analyzing:t.isAnalyzing}]),"onUpdate:modelValue":a[0]||(a[0]=e=>i.url=e),placeholder:"https://example.com/legal-document",disabled:t.isAnalyzing,onKeyup:a[1]||(a[1]=b((...e)=>i.emitAnalyze&&i.emitAnalyze(...e),["enter"])),onInput:a[2]||(a[2]=(...e)=>i.validateUrl&&i.validateUrl(...e))},null,42,oe),[[g,i.url]]),i.isValidUrl&&i.url.length>0?(l(),s("div",ce,a[7]||(a[7]=[n("i",{class:"bi bi-check-circle-fill"},null,-1)]))):!i.isValidUrl&&i.url.length>0?(l(),s("div",de,a[8]||(a[8]=[n("i",{class:"bi bi-x-circle-fill"},null,-1)]))):o("",!0)])]),n("div",ue,[i.validationMessage?(l(),s("div",{key:0,class:d(["validation-message",i.validationMessageType])},[n("i",{class:d(i.validationMessageIcon)},null,2),p(" "+u(i.validationMessage),1)],2)):(l(),s("div",pe,a[10]||(a[10]=[n("i",{class:"bi bi-info-circle me-1"},null,-1),p(" Supported: PDF, HTML pages, legal databases, court websites ",-1)])))])]),i.urlPreview?(l(),s("div",ve,[a[12]||(a[12]=n("h6",{class:"preview-title"},[n("i",{class:"bi bi-eye me-2"}),p(" URL Preview ")],-1)),n("div",me,[n("div",fe,[n("i",{class:d(i.getUrlIcon(i.urlPreview.protocol))},null,2)]),n("div",ge,[n("div",be,u(i.urlPreview.hostname),1),n("div",ye,u(i.urlPreview.pathname),1),n("div",he,u(i.urlPreview.protocol.replace(":","")),1)]),n("div",xe,[n("span",{class:d(["security-badge","https:"===i.urlPreview.protocol?"secure":"insecure"])},[n("i",{class:d("https:"===i.urlPreview.protocol?"bi bi-shield-fill-check":"bi bi-shield-fill-exclamation")},null,2),p(" "+u("https:"===i.urlPreview.protocol?"Secure":"Not Secure"),1)],2)])])])):o("",!0),n("div",we,[a[13]||(a[13]=n("h6",{class:"examples-title"},[n("i",{class:"bi bi-lightbulb me-2"}),p(" Quick Examples ")],-1)),n("div",ke,[(l(!0),s(y,null,h(i.urlExamples,e=>(l(),s("button",{key:e.url,onClick:a=>i.setExampleUrl(e.url),class:"example-btn",disabled:t.isAnalyzing},[n("i",{class:d(e.icon)},null,2),n("span",null,u(e.label),1)],8,Ce))),128))])]),i.isValidUrl&&i.url.length>0?(l(),s("div",Ae,[a[17]||(a[17]=n("h6",{class:"options-title"},[n("i",{class:"bi bi-gear me-2"}),p(" Analysis Options ")],-1)),n("div",ze,[n("label",Se,[f(n("input",{type:"checkbox","onUpdate:modelValue":a[3]||(a[3]=e=>i.options.includeSubpages=e),disabled:t.isAnalyzing},null,8,Te),[[x,i.options.includeSubpages]]),a[14]||(a[14]=r('<div class="option-content" data-v-9a6e8adf><div class="option-icon" data-v-9a6e8adf><i class="bi bi-collection" data-v-9a6e8adf></i></div><div class="option-text" data-v-9a6e8adf><div class="option-title" data-v-9a6e8adf>Include Subpages</div><div class="option-description" data-v-9a6e8adf>Analyze linked documents</div></div></div>',1))]),n("label",_e,[f(n("input",{type:"checkbox","onUpdate:modelValue":a[4]||(a[4]=e=>i.options.followRedirects=e),disabled:t.isAnalyzing},null,8,Ue),[[x,i.options.followRedirects]]),a[15]||(a[15]=r('<div class="option-content" data-v-9a6e8adf><div class="option-icon" data-v-9a6e8adf><i class="bi bi-arrow-repeat" data-v-9a6e8adf></i></div><div class="option-text" data-v-9a6e8adf><div class="option-title" data-v-9a6e8adf>Follow Redirects</div><div class="option-description" data-v-9a6e8adf>Handle URL redirections</div></div></div>',1))]),n("label",Re,[f(n("input",{type:"checkbox","onUpdate:modelValue":a[5]||(a[5]=e=>i.options.deepScan=e),disabled:t.isAnalyzing},null,8,De),[[x,i.options.deepScan]]),a[16]||(a[16]=r('<div class="option-content" data-v-9a6e8adf><div class="option-icon" data-v-9a6e8adf><i class="bi bi-search" data-v-9a6e8adf></i></div><div class="option-text" data-v-9a6e8adf><div class="option-title" data-v-9a6e8adf>Deep Scan</div><div class="option-description" data-v-9a6e8adf>Comprehensive citation search</div></div></div>',1))])])])):o("",!0),n("div",Le,[n("button",{class:d(["analyze-btn",{disabled:!i.isValidUrl||t.isAnalyzing||0===i.url.length}]),onClick:a[6]||(a[6]=(...e)=>i.emitAnalyze&&i.emitAnalyze(...e)),disabled:!i.isValidUrl||t.isAnalyzing||0===i.url.length},[t.isAnalyzing?(l(),s("span",Ne)):(l(),s("i",Ee)),p(" "+u(i.getAnalyzeButtonText()),1)],10,Ie),i.isValidUrl&&i.url.length>0&&!t.isAnalyzing?(l(),s("div",Pe,a[18]||(a[18]=[r('<div class="info-grid" data-v-9a6e8adf><div class="info-item" data-v-9a6e8adf><i class="bi bi-clock" data-v-9a6e8adf></i><span data-v-9a6e8adf>~30-60 seconds</span></div><div class="info-item" data-v-9a6e8adf><i class="bi bi-download" data-v-9a6e8adf></i><span data-v-9a6e8adf>Fetches content</span></div><div class="info-item" data-v-9a6e8adf><i class="bi bi-shield-check" data-v-9a6e8adf></i><span data-v-9a6e8adf>Secure analysis</span></div></div>',1)]))):o("",!0)]),t.isAnalyzing?(l(),s("div",Fe,[n("div",Me,[a[19]||(a[19]=n("h6",{class:"progress-title"},[n("i",{class:"bi bi-gear-fill spinning me-2"}),p(" Analyzing URL Content ")],-1)),n("div",Ve,u(i.getDisplayUrl(i.url)),1)]),n("div",Oe,[n("div",{class:d(["step",{active:i.progressStep>=1}])},a[20]||(a[20]=[n("i",{class:"bi bi-download"},null,-1),n("span",null,"Fetching",-1)]),2),n("div",{class:d(["step",{active:i.progressStep>=2}])},a[21]||(a[21]=[n("i",{class:"bi bi-file-text"},null,-1),n("span",null,"Parsing",-1)]),2),n("div",{class:d(["step",{active:i.progressStep>=3}])},a[22]||(a[22]=[n("i",{class:"bi bi-search"},null,-1),n("span",null,"Analyzing",-1)]),2),n("div",{class:d(["step",{active:i.progressStep>=4}])},a[23]||(a[23]=[n("i",{class:"bi bi-check-circle"},null,-1),n("span",null,"Complete",-1)]),2)])])):o("",!0)])])])}],["__scopeId","data-v-9a6e8adf"]]),Be={name:"ModernTextPaste",emits:["analyze","mode-change"],props:{isAnalyzing:{type:Boolean,default:!1},initialText:{type:String,default:""},mode:{type:String,default:"multi",validator:e=>["single","multi"].includes(e)}},setup(e,{emit:a}){const t=i(e.initialText),s=i(e.initialText),l=i(!1),n=i(!1),r=i(!0),o=i(1),c=i(e.mode),d=i({wordCount:0,estimatedCitations:0,uniqueYears:0,characterCount:0}),u=i(null),p=i([{citation:"181 Wash.2d 391, 333 P.3d 440 (2014)",type:"Washington Supreme Court"},{citation:"123 Wn. App. 456, 789 P.2d 123 (2020)",type:"Washington Court of Appeals"},{citation:"555 U.S. 123 (2019)",type:"U.S. Supreme Court"},{citation:"891 F.3d 234 (9th Cir. 2018)",type:"Federal Circuit Court"}]),f=v(()=>"single"===c.value),g=v(()=>f.value?"header-single":"header-multi"),b=v(()=>f.value?"bi bi-search":"bi bi-file-text"),y=v(()=>f.value?"Single Citation Validator":"Text Citation Analysis"),h=v(()=>f.value?"Validate and verify individual legal citations":"Analyze documents for comprehensive citation validation"),x=v(()=>{if(!s.value)return!1;return[/\d+\s+[A-Z][a-z]*\.?\s*(?:2d|3d)?\s+\d+/,/\d+\s+[A-Z]\.?\s*\d*\s+\d+/,/\d+\s+U\.?S\.?\s+\d+/].some(e=>e.test(s.value))}),w=v(()=>f.value?s.value.trim().length>0:t.value.trim().length>10),k=v(()=>f.value?"bi bi-shield-check":"bi bi-search"),C=v(()=>isAnalyzing.value?f.value?"Validating Citation...":"Analyzing Text...":w.value?f.value?"Validate Citation":"Analyze Text":f.value?"Enter Citation":"Enter Text"),A=()=>{if(!s.value)return void(u.value=null);const e=s.value.match(/(\d+)\s+([A-Z][a-z]*\.?\s*(?:2d|3d)?)\s+(\d+)(?:.*?\((\d{4})\))?/);u.value=e?{volume:e[1],reporter:e[2],page:e[3],year:e[4]||null}:null},z=()=>{const e=t.value.trim();if(!e)return void(d.value={wordCount:0,estimatedCitations:0,uniqueYears:0,characterCount:0});const a=e.split(/\s+/).filter(e=>e.length>0).length;let i=0;[/\d+\s+[A-Z][a-z]*\.?\s*(?:2d|3d)?\s+\d+/g,/\d+\s+U\.?S\.?\s+\d+/g,/\d+\s+F\.?\s*(?:2d|3d)?\s+\d+/g].forEach(a=>{const t=e.match(a);t&&(i+=t.length)});const s=e.match(/\b(19|20)\d{2}\b/g),l=s?new Set(s).size:0;d.value={wordCount:a,estimatedCitations:i,uniqueYears:l,characterCount:e.length}};return m(()=>e.initialText,e=>{t.value=e,s.value=e,e&&(z(),A())}),m(()=>e.mode,e=>{c.value=e}),m(()=>e.isAnalyzing,a=>{if(a){o.value=1;const a=setInterval(()=>{o.value<4&&e.isAnalyzing?o.value++:clearInterval(a)},1e3)}}),e.initialText&&(z(),A()),{text:t,citationText:s,includeContext:l,deepAnalysis:n,highlightErrors:r,progressStep:o,currentMode:c,textStats:d,citationAnalysis:u,citationExamples:p,isSingleCitation:f,headerClass:g,headerIcon:b,headerTitle:y,headerSubtitle:h,isValidCitation:x,canAnalyze:w,analyzeButtonIcon:k,analyzeButtonText:C,switchMode:e=>{c.value=e,a("mode-change",e)},validateCitation:A,setCitationExample:e=>{s.value=e,A()},analyzeTextContent:z,getLengthScore:()=>Math.min(30,Math.floor(d.value.wordCount/200*30)),getCitationScore:()=>{const e=d.value.estimatedCitations/Math.max(1,d.value.wordCount/100);return Math.min(40,Math.floor(10*e))},getDiversityScore:()=>Math.min(30,5*d.value.uniqueYears),getAnalyzeInfoText:()=>{if(f.value)return"Citation will be validated against legal databases";const e=d.value.wordCount,a=d.value.estimatedCitations;return`${e.toLocaleString()} words • ${a} potential citations detected`},emitAnalyze:()=>{if(!w.value||isAnalyzing.value)return;const e={text:f.value?s.value:t.value,options:{includeContext:l.value,deepAnalysis:n.value,highlightErrors:r.value,mode:f.value?"single":"multi",...f.value&&{originalCitation:s.value}},type:"text"};a("analyze",e)}}}},qe={class:"modern-text-paste"},je={class:"paste-card"},He={class:"header-icon"},We={class:"header-title"},Xe={class:"header-subtitle"},Ye={class:"paste-body"},Ge={class:"mode-toggle-section"},Ze={class:"mode-toggle"},Ke=["disabled"],Qe=["disabled"],Je={key:0,class:"input-section single-citation-mode"},ea={class:"input-container"},aa={class:"citation-input-wrapper"},ta=["disabled"],ia={key:0,class:"input-status valid"},sa={class:"citation-examples"},la={class:"examples-list"},na=["onClick","disabled"],ra={class:"example-text"},oa={class:"example-type"},ca={key:0,class:"citation-preview"},da={class:"preview-content"},ua={class:"preview-item"},pa={class:"preview-value"},va={class:"preview-item"},ma={class:"preview-value"},fa={class:"preview-item"},ga={class:"preview-value"},ba={key:0,class:"preview-item"},ya={class:"preview-value"},ha={key:1,class:"input-section multi-text-mode"},xa={class:"input-container"},wa={class:"textarea-wrapper"},ka=["disabled"],Ca={key:0,class:"text-stats"},Aa={class:"stat-item"},za={class:"stat-item"},Sa={class:"stat-item"},Ta={key:0,class:"quality-indicator"},_a={class:"options-section"},Ua={class:"options-grid"},Ra={class:"option-item"},Da=["disabled"],La={class:"option-item"},Ia=["disabled"],Na={class:"option-item"},Ea=["disabled"],Pa={class:"analyze-section"},Fa=["disabled"],Ma={key:0,class:"spinner-border spinner-border-sm me-2"},Va={key:0,class:"analyze-info"},Oa={class:"info-text"},$a={key:2,class:"analysis-progress"},Ba={class:"progress-header"},qa={class:"progress-title"},ja={class:"progress-description"},Ha={class:"progress-steps"};const Wa=e(Be,[["render",function(e,a,t,i,c,v){return l(),s("div",qe,[n("div",je,[n("div",{class:d(["paste-header",i.headerClass])},[n("div",He,[n("i",{class:d(i.headerIcon)},null,2)]),n("h3",We,u(i.headerTitle),1),n("p",Xe,u(i.headerSubtitle),1)],2),n("div",Ye,[n("div",Ge,[n("div",Ze,[n("button",{class:d(["mode-btn",{active:!i.isSingleCitation}]),onClick:a[0]||(a[0]=e=>i.switchMode("multi")),disabled:t.isAnalyzing},a[11]||(a[11]=[n("i",{class:"bi bi-file-text me-2"},null,-1),n("span",null,"Multi-Text Analysis",-1)]),10,Ke),n("button",{class:d(["mode-btn",{active:i.isSingleCitation}]),onClick:a[1]||(a[1]=e=>i.switchMode("single")),disabled:t.isAnalyzing},a[12]||(a[12]=[n("i",{class:"bi bi-search me-2"},null,-1),n("span",null,"Single Citation",-1)]),10,Qe)])]),i.isSingleCitation?(l(),s("div",Je,[n("div",ea,[a[20]||(a[20]=n("label",{for:"citationInput",class:"form-label"},[n("i",{class:"bi bi-bookmark me-2"}),p(" Legal Citation ")],-1)),n("div",aa,[f(n("input",{id:"citationInput",type:"text",class:d(["citation-input",{valid:i.isValidCitation&&i.citationText.length>0,analyzing:t.isAnalyzing}]),"onUpdate:modelValue":a[2]||(a[2]=e=>i.citationText=e),placeholder:"e.g., 181 Wash.2d 391, 333 P.3d 440 (2014)",disabled:t.isAnalyzing,onKeyup:a[3]||(a[3]=b((...e)=>i.emitAnalyze&&i.emitAnalyze(...e),["enter"])),onInput:a[4]||(a[4]=(...e)=>i.validateCitation&&i.validateCitation(...e))},null,42,ta),[[g,i.citationText]]),i.isValidCitation&&i.citationText.length>0?(l(),s("div",ia,a[13]||(a[13]=[n("i",{class:"bi bi-check-circle-fill"},null,-1)]))):o("",!0)]),n("div",sa,[a[14]||(a[14]=n("div",{class:"examples-header"},[n("i",{class:"bi bi-lightbulb me-2"}),n("span",null,"Format Examples")],-1)),n("div",la,[(l(!0),s(y,null,h(i.citationExamples,e=>(l(),s("button",{key:e.citation,onClick:a=>i.setCitationExample(e.citation),class:"example-citation",disabled:t.isAnalyzing},[n("div",ra,u(e.citation),1),n("div",oa,u(e.type),1)],8,na))),128))])]),i.citationAnalysis?(l(),s("div",ca,[a[19]||(a[19]=n("h6",{class:"preview-title"},[n("i",{class:"bi bi-eye me-2"}),p(" Citation Preview ")],-1)),n("div",da,[n("div",ua,[a[15]||(a[15]=n("span",{class:"preview-label"},"Volume:",-1)),n("span",pa,u(i.citationAnalysis.volume),1)]),n("div",va,[a[16]||(a[16]=n("span",{class:"preview-label"},"Reporter:",-1)),n("span",ma,u(i.citationAnalysis.reporter),1)]),n("div",fa,[a[17]||(a[17]=n("span",{class:"preview-label"},"Page:",-1)),n("span",ga,u(i.citationAnalysis.page),1)]),i.citationAnalysis.year?(l(),s("div",ba,[a[18]||(a[18]=n("span",{class:"preview-label"},"Year:",-1)),n("span",ya,u(i.citationAnalysis.year),1)])):o("",!0)])])):o("",!0)])])):(l(),s("div",ha,[n("div",xa,[a[25]||(a[25]=n("label",{for:"textInput",class:"form-label"},[n("i",{class:"bi bi-file-text me-2"}),p(" Legal Document Text ")],-1)),n("div",wa,[f(n("textarea",{id:"textInput",class:d(["text-input",{analyzing:t.isAnalyzing}]),"onUpdate:modelValue":a[5]||(a[5]=e=>i.text=e),placeholder:"Paste your legal document text here for comprehensive citation analysis...",disabled:t.isAnalyzing,onInput:a[6]||(a[6]=(...e)=>i.analyzeTextContent&&i.analyzeTextContent(...e))},null,42,ka),[[g,i.text]]),i.textStats.wordCount>0?(l(),s("div",Ca,[n("div",Aa,[a[21]||(a[21]=n("i",{class:"bi bi-fonts"},null,-1)),n("span",null,u(i.textStats.wordCount.toLocaleString())+" words",1)]),n("div",za,[a[22]||(a[22]=n("i",{class:"bi bi-bookmark"},null,-1)),n("span",null,u(i.textStats.estimatedCitations)+" citations",1)]),n("div",Sa,[a[23]||(a[23]=n("i",{class:"bi bi-calendar3"},null,-1)),n("span",null,u(i.textStats.uniqueYears)+" years",1)])])):o("",!0)]),i.textStats.wordCount>0?(l(),s("div",Ta,a[24]||(a[24]=[n("div",{class:"quality-header"},[n("span",{class:"quality-label"},"Content Quality")],-1)]))):o("",!0)])])),n("div",_a,[a[29]||(a[29]=n("h6",{class:"options-title"},[n("i",{class:"bi bi-sliders me-2"}),p(" Analysis Options ")],-1)),n("div",Ua,[n("label",Ra,[f(n("input",{type:"checkbox","onUpdate:modelValue":a[7]||(a[7]=e=>i.includeContext=e),disabled:t.isAnalyzing},null,8,Da),[[x,i.includeContext]]),a[26]||(a[26]=r('<div class="option-content" data-v-9af4382e><div class="option-icon" data-v-9af4382e><i class="bi bi-text-paragraph" data-v-9af4382e></i></div><div class="option-text" data-v-9af4382e><div class="option-title" data-v-9af4382e>Include Context</div><div class="option-description" data-v-9af4382e>Show surrounding text around citations</div></div></div>',1))]),n("label",La,[f(n("input",{type:"checkbox","onUpdate:modelValue":a[8]||(a[8]=e=>i.deepAnalysis=e),disabled:t.isAnalyzing},null,8,Ia),[[x,i.deepAnalysis]]),a[27]||(a[27]=r('<div class="option-content" data-v-9af4382e><div class="option-icon" data-v-9af4382e><i class="bi bi-search" data-v-9af4382e></i></div><div class="option-text" data-v-9af4382e><div class="option-title" data-v-9af4382e>Deep Analysis</div><div class="option-description" data-v-9af4382e>Comprehensive citation validation</div></div></div>',1))]),n("label",Na,[f(n("input",{type:"checkbox","onUpdate:modelValue":a[9]||(a[9]=e=>i.highlightErrors=e),disabled:t.isAnalyzing},null,8,Ea),[[x,i.highlightErrors]]),a[28]||(a[28]=r('<div class="option-content" data-v-9af4382e><div class="option-icon" data-v-9af4382e><i class="bi bi-exclamation-triangle" data-v-9af4382e></i></div><div class="option-text" data-v-9af4382e><div class="option-title" data-v-9af4382e>Highlight Errors</div><div class="option-description" data-v-9af4382e>Mark potential citation issues</div></div></div>',1))])])]),n("div",Pa,[n("button",{class:d(["analyze-btn",{disabled:!i.canAnalyze||t.isAnalyzing}]),onClick:a[10]||(a[10]=(...e)=>i.emitAnalyze&&i.emitAnalyze(...e)),disabled:!i.canAnalyze||t.isAnalyzing},[t.isAnalyzing?(l(),s("span",Ma)):(l(),s("i",{key:1,class:d(i.analyzeButtonIcon+" me-2")},null,2)),p(" "+u(i.analyzeButtonText),1)],10,Fa),i.canAnalyze&&!t.isAnalyzing?(l(),s("div",Va,[n("div",Oa,[a[30]||(a[30]=n("i",{class:"bi bi-info-circle me-1"},null,-1)),p(" "+u(i.getAnalyzeInfoText()),1)])])):o("",!0)]),t.isAnalyzing?(l(),s("div",$a,[n("div",Ba,[n("h6",qa,[a[31]||(a[31]=n("i",{class:"bi bi-gear-fill spinning me-2"},null,-1)),p(" "+u(i.isSingleCitation?"Validating Citation":"Analyzing Text"),1)]),n("div",ja,u(i.isSingleCitation?"Checking citation format and validity...":"Processing text and extracting citations..."),1)]),n("div",Ha,[n("div",{class:d(["step",{active:i.progressStep>=1}])},[a[32]||(a[32]=n("i",{class:"bi bi-file-text"},null,-1)),n("span",null,u(i.isSingleCitation?"Parsing":"Reading"),1)],2),n("div",{class:d(["step",{active:i.progressStep>=2}])},[a[33]||(a[33]=n("i",{class:"bi bi-search"},null,-1)),n("span",null,u(i.isSingleCitation?"Validating":"Extracting"),1)],2),n("div",{class:d(["step",{active:i.progressStep>=3}])},[a[34]||(a[34]=n("i",{class:"bi bi-shield-check"},null,-1)),n("span",null,u(i.isSingleCitation?"Verifying":"Validating"),1)],2),n("div",{class:d(["step",{active:i.progressStep>=4}])},a[35]||(a[35]=[n("i",{class:"bi bi-check-circle"},null,-1),n("span",null,"Complete",-1)]),2)])])):o("",!0)])])])}],["__scopeId","data-v-9af4382e"]]),Xa={class:"unified-input"},Ya={class:"input-methods"},Ga=["onClick"],Za={class:"method-icon"},Ka={class:"method-content"},Qa={key:0,class:"active-indicator"},Ja={class:"input-content-area"},et={key:0,class:"error-message"},at={key:1,class:"loading-overlay"},tt=e(w({__name:"UnifiedInput",props:{isAnalyzing:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},defaultTab:{default:"file"}},emits:["success","error","upload-success","upload-error","tab-changed"],setup(e,{expose:a,emit:t}){const r=e,c=t,f=i(r.defaultTab),g=i(""),b=v(()=>r.isAnalyzing||r.disabled),x=v(()=>{switch(f.value){case"file":return ee;case"url":return $e;case"text":return Wa;default:return null}}),w=[{id:"file",title:"Upload File",description:"Upload a document from your computer",icon:"bi bi-upload"},{id:"url",title:"Enter URL",description:"Analyze content from a web URL",icon:"bi bi-link-45deg"},{id:"text",title:"Paste Text",description:"Paste your text directly",icon:"bi bi-clipboard"}],S=e=>{_(),c("success",e),c("upload-success",e)},T=e=>{g.value=e,c("error",e),c("upload-error",e)},_=()=>{g.value=""},U=e=>{b.value||(f.value=e,_(),c("tab-changed",e))};return m(f,e=>{_(),c("tab-changed",e)}),m(()=>r.isAnalyzing,e=>{e||_()}),k(()=>{}),a({switchTab:U,clearError:_,activeTab:C(f)}),(e,a)=>(l(),s("div",Xa,[n("div",Ya,[(l(),s(y,null,h(w,e=>n("div",{key:e.id,class:d(["input-method-card",{active:f.value===e.id,disabled:b.value}]),onClick:a=>U(e.id)},[n("div",Za,[n("i",{class:d(e.icon)},null,2)]),n("div",Ka,[n("h4",null,u(e.title),1),n("p",null,u(e.description),1)]),f.value===e.id?(l(),s("div",Qa,a[0]||(a[0]=[n("i",{class:"bi bi-check"},null,-1)]))):o("",!0)],10,Ga)),64))]),n("div",Ja,[x.value?(l(),A(z(x.value),{key:0,onUploadSuccess:S,onUploadError:T,disabled:b.value,class:"fade-in"},null,40,["disabled"])):o("",!0)]),g.value?(l(),s("div",et,[a[1]||(a[1]=n("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),p(" "+u(g.value),1)])):o("",!0),b.value?(l(),s("div",at,a[2]||(a[2]=[n("div",{class:"spinner"},null,-1),n("p",null,"Processing...",-1)]))):o("",!0)]))}}),[["__scopeId","data-v-001d45d9"]]),it={name:"ProcessingProgress",props:{elapsedTime:{type:Number,required:!0},remainingTime:{type:Number,required:!0},totalProgress:{type:Number,required:!0},currentStep:{type:String,default:""},currentStepProgress:{type:Number,default:0},processingSteps:{type:Array,default:()=>[]},actualTimes:{type:Object,default:()=>({})},citationInfo:{type:Object,default:null},rateLimitInfo:{type:Object,default:null},error:{type:String,default:""},canRetry:{type:Boolean,default:!1},timeout:{type:Number,default:null}},mounted(){},watch:{totalProgress(e){},remainingTime(e){}},computed:{currentStepElapsed(){const e=this.processingSteps.find(e=>e.step===this.currentStep);return e?Date.now()/1e3-e.start_time:0},currentStepRemaining(){const e=this.processingSteps.find(e=>e.step===this.currentStep);return e&&e.estimated_time?Math.max(0,e.estimated_time-this.currentStepElapsed):0},isTimeoutWarning(){if(!this.timeout)return!1;return this.timeout-this.elapsedTime<60}},methods:{formatTime(e){if(e<0)return"0s";const a=Math.floor(e/60),t=Math.round(e%60);return a>0?`${a}m ${t}s`:`${t}s`},getStepClass(e){return 100===e.progress?"completed":e.step===this.currentStep?"current":e.progress>0?"in-progress":"pending"},getStepStatus(e){return 100===e.progress?"Completed":e.step===this.currentStep?"In Progress":e.progress>0?`${e.progress}%`:"Pending"},formatProcessingRate(e){if(!e.processed||!this.elapsedTime)return"0/min";const a=e.processed/this.elapsedTime*60;return`${Math.round(a)}/min`}}},st={class:"processing-progress"},lt={class:"progress-section"},nt={class:"progress-bar"},rt={class:"time-info"},ot={key:0,class:"citation-section"},ct={class:"citation-stats"},dt={class:"stat"},ut={class:"value"},pt={class:"stat"},vt={class:"value"},mt={class:"stat"},ft={class:"value"},gt={key:0,class:"stat"},bt={class:"value"},yt={key:0,class:"rate-limit-info"},ht={class:"stat"},xt={class:"value"},wt={key:0,class:"stat"},kt={class:"value"},Ct={key:1,class:"current-step"},At={class:"step-info"},zt={class:"step-name"},St={class:"progress-bar"},Tt={class:"time-info"},_t={class:"steps-section"},Ut={class:"steps-list"},Rt={class:"step-header"},Dt={class:"step-name"},Lt={class:"step-status"},It={key:0,class:"progress-bar"},Nt={key:1,class:"time-info"},Et={key:0},Pt={key:2,class:"error-section"},Ft={class:"error-message"};const Mt=e(it,[["render",function(e,a,t,i,r,c){return l(),s("div",st,[n("div",lt,[a[1]||(a[1]=n("h3",null,"Overall Progress",-1)),n("div",nt,[n("div",{class:"progress-fill",style:S({width:`${t.totalProgress}%`})},null,4)]),n("div",rt,[n("span",null,"Elapsed: "+u(c.formatTime(t.elapsedTime)),1),n("span",null,"Remaining: "+u(c.formatTime(t.remainingTime)),1),t.timeout?(l(),s("span",{key:0,class:d(["timeout-info",{warning:c.isTimeoutWarning}])}," Timeout: "+u(c.formatTime(t.timeout-t.elapsedTime)),3)):o("",!0)])]),t.citationInfo?(l(),s("div",ot,[a[8]||(a[8]=n("h3",null,"Citation Processing",-1)),n("div",ct,[n("div",dt,[a[2]||(a[2]=n("span",{class:"label"},"Total Citations:",-1)),n("span",ut,u(t.citationInfo.total),1)]),n("div",pt,[a[3]||(a[3]=n("span",{class:"label"},"Unique Citations:",-1)),n("span",vt,u(t.citationInfo.unique),1)]),n("div",mt,[a[4]||(a[4]=n("span",{class:"label"},"Processed:",-1)),n("span",ft,u(t.citationInfo.processed),1)]),t.citationInfo.unique?(l(),s("div",gt,[a[5]||(a[5]=n("span",{class:"label"},"Processing Rate:",-1)),n("span",bt,u(c.formatProcessingRate(t.citationInfo)),1)])):o("",!0)]),t.rateLimitInfo?(l(),s("div",yt,[n("div",ht,[a[6]||(a[6]=n("span",{class:"label"},"API Rate Limit:",-1)),n("span",xt,u(t.rateLimitInfo.remaining)+"/"+u(t.rateLimitInfo.limit),1)]),t.rateLimitInfo.resetTime?(l(),s("div",wt,[a[7]||(a[7]=n("span",{class:"label"},"Reset in:",-1)),n("span",kt,u(c.formatTime(t.rateLimitInfo.resetTime-Date.now()/1e3)),1)])):o("",!0)])):o("",!0)])):o("",!0),t.currentStep?(l(),s("div",Ct,[a[9]||(a[9]=n("h3",null,"Current Step",-1)),n("div",At,[n("span",zt,u(t.currentStep),1),n("div",St,[n("div",{class:"progress-fill",style:S({width:`${t.currentStepProgress}%`})},null,4)]),n("div",Tt,[n("span",null,"Elapsed: "+u(c.formatTime(c.currentStepElapsed)),1),n("span",null,"Remaining: "+u(c.formatTime(c.currentStepRemaining)),1)])])])):o("",!0),n("div",_t,[a[10]||(a[10]=n("h3",null,"Processing Steps",-1)),n("div",Ut,[(l(!0),s(y,null,h(t.processingSteps,e=>(l(),s("div",{key:e.step,class:d(["step",c.getStepClass(e)])},[n("div",Rt,[n("span",Dt,u(e.step),1),n("span",Lt,u(c.getStepStatus(e)),1)]),void 0!==e.progress?(l(),s("div",It,[n("div",{class:"progress-fill",style:S({width:`${e.progress}%`})},null,4)])):o("",!0),e.estimated_time?(l(),s("div",Nt,[n("span",null,"Estimated: "+u(c.formatTime(e.estimated_time)),1),e.actual_time?(l(),s("span",Et,"Actual: "+u(c.formatTime(e.actual_time)),1)):o("",!0)])):o("",!0)],2))),128))])]),t.error?(l(),s("div",Pt,[n("div",Ft,[a[11]||(a[11]=n("i",{class:"fas fa-exclamation-circle"},null,-1)),p(" "+u(t.error),1)]),t.canRetry?(l(),s("button",{key:0,onClick:a[0]||(a[0]=a=>e.$emit("retry")),class:"retry-button"}," Retry Processing ")):o("",!0)])):o("",!0)])}],["__scopeId","data-v-c1475ded"]]),Vt={key:0,class:"loading-state"},Ot={key:1,class:"error-state"},$t={key:2,class:"no-citations-found text-center my-5"},Bt={class:"lead"},qt=["href"],jt={key:3,class:"citation-results"},Ht={key:0,class:"prominent-citations-section"},Wt={class:"citations-summary"},Xt={key:0},Yt={class:"attention-filter-btns"},Gt={class:"citations-grid"},Zt={class:"citation-row",style:{color:"#dc3545","font-weight":"bold","font-size":"1.15rem"}},Kt={class:"citation-row flex-names-row"},Qt={key:0},Jt={key:1},ei={class:"citation-row flex-names-row"},ai={key:0},ti={key:1},ii={class:"citations-list-vertical"},si={class:"citation-text"},li={key:1,class:"perfect-score-celebration"},ni={key:1,class:"results-content"},ri={class:"results-header"},oi={class:"header-content"},ci={class:"summary-stats"},di={class:"stat-item verified"},ui={class:"stat-number"},pi={class:"stat-item invalid"},vi={class:"stat-number"},mi={class:"stat-item total"},fi={class:"stat-number"},gi={class:"filter-section"},bi={class:"filter-controls"},yi=["onClick"],hi={class:"search-box"},xi={class:"citations-list"},wi={class:"canonical-only-clusters"},ki={class:"cluster-main-content"},Ci={class:"canonical-line"},Ai={key:1,class:"canonical-date missing"},zi={key:1,class:"canonical-name missing"},Si={class:"extracted-line"},Ti={key:1,class:"extracted-date missing"},_i={key:1,class:"extracted-name missing"},Ui={class:"citations-section"},Ri={class:"citations-list-vertical"},Di=["href"],Li={key:1,class:"citation-text"},Ii={class:"expand-section"},Ni=["onClick"],Ei={class:"expand-text"},Pi={key:0,class:"cluster-details"},Fi={class:"details-content"},Mi={class:"detail-section"},Vi={class:"detail-grid"},Oi={class:"detail-item"},$i={class:"detail-value"},Bi={class:"detail-item"},qi={class:"detail-value"},ji={key:0,class:"detail-item"},Hi=["href"],Wi={class:"detail-section"},Xi={class:"citation-detail-header"},Yi={class:"citation-detail-title"},Gi={class:"citation-detail-content"},Zi={class:"detail-grid"},Ki={class:"detail-item"},Qi={class:"detail-value"},Ji={class:"detail-item"},es={class:"detail-value"},as={class:"detail-item"},ts={class:"detail-value"},is={key:0,class:"detail-item"},ss={class:"detail-value error-text"},ls={key:1,class:"detail-item"},ns=["href"],rs={key:2,class:"results-content"},os={class:"results-header"},cs={class:"header-content"},ds={class:"summary-stats"},us={class:"stat-item verified"},ps={class:"stat-number"},vs={class:"stat-item invalid"},ms={class:"stat-number"},fs={class:"stat-item total"},gs={class:"stat-number"},bs={class:"filter-section"},ys={class:"filter-controls"},hs=["onClick"],xs={class:"search-box"},ws={class:"citations-list"},ks={class:"citation-row citation-row-canonical flex-names-row"},Cs={key:0},As={key:1,class:"canonical-date missing"},zs={key:1,class:"canonical-name missing"},Ss={class:"citation-row citation-row-extracted flex-names-row"},Ts={key:0},_s={key:1,class:"extracted-date missing"},Us={key:1,class:"extracted-name missing"},Rs={class:"citation-row citation-row-citations"},Ds={class:"citation-text"},Ls={class:"detail-row"},Is={key:3,class:"no-results-state"},Ns={__name:"CitationResults",props:{results:{type:Object,default:null},showLoading:{type:Boolean,default:!1},error:{type:String,default:""},elapsedTime:{type:Number,default:0},remainingTime:{type:Number,default:0},totalProgress:{type:Number,default:0},currentStep:{type:String,default:""},currentStepProgress:{type:Number,default:0},processingSteps:{type:Array,default:()=>[]},citationInfo:{type:Object,default:null},rateLimitInfo:{type:Object,default:null},processingError:{type:String,default:""},canRetry:{type:Boolean,default:!1},timeout:{type:Number,default:null}},emits:["copy-results","download-results","toast","new-analysis"],setup(e,{emit:a}){const t=e,c=a,b=i("all"),x=i(""),w=i(1);i(new Set);const k=i(new Set),C=i(0),z=i(null);i(!1),i("canonical-only");const S=i("all"),T=i(!1);function _(e){return e.citations.every(e=>"unverified"===K(e))}function U(e){return e.citations.some(e=>!Q(B(e),q(e)))}function R(e){return e.citations.some(e=>!J(j(e),H(e)))}m(()=>t.results,e=>{},{immediate:!0,deep:!0});const D=v(()=>{var e,a;return T.value?(null==(e=t.results)?void 0:e.clusters)&&t.results.clusters.length>0?t.results.clusters:(null==(a=t.results)?void 0:a.citations)?[{citations:t.results.citations}]:[]:"unverified"===S.value?F.value.filter(_):"name"===S.value?F.value.filter(U):"date"===S.value?F.value.filter(R):F.value});m(()=>t.results,(e,a)=>{e&&"number"==typeof e.progress&&(C.value=e.progress,z.value=e.eta_seconds)},{immediate:!0,deep:!0});const L=v(()=>t.showLoading||t.results&&"processing"===t.results.status),I=v(()=>{var e,a;return(null==(e=t.results)?void 0:e.clusters)&&t.results.clusters.length>0?t.results.clusters.reduce((e,a)=>e+a.citations.filter(e=>"true"===e.verified||!0===e.verified).length,0):(null==(a=t.results)?void 0:a.citations)?t.results.citations.filter(e=>"true"===e.verified||!0===e.verified).length:0}),N=v(()=>{var e,a;return(null==(e=t.results)?void 0:e.clusters)&&t.results.clusters.length>0?t.results.clusters.reduce((e,a)=>e+a.citations.filter(e=>"false"===e.verified||!1===e.verified).length,0):(null==(a=t.results)?void 0:a.citations)?t.results.citations.filter(e=>"false"===e.verified||!1===e.verified).length:0}),E=v(()=>{var e;return(null==(e=t.results)?void 0:e.clusters)&&0!==t.results.clusters.length?t.results.clusters.map(e=>{let a=e.citations.filter(e=>!V(e));if("verified"===b.value?a=a.filter(e=>"true"===e.verified||!0===e.verified):"invalid"===b.value&&(a=a.filter(e=>"false"===e.verified||!1===e.verified)),x.value.trim()){const e=x.value.toLowerCase();a=a.filter(a=>a.citation&&a.citation.toLowerCase().includes(e)||a.canonical_citation&&a.canonical_citation.toLowerCase().includes(e)||a.primary_citation&&a.primary_citation.toLowerCase().includes(e)||$(a)&&$(a).toLowerCase().includes(e))}return a.length>0?{...e,citations:a,size:a.length}:null}).filter(e=>null!==e):[]});v(()=>{var e,a;return(null==(e=t.results)?void 0:e.clusters)&&t.results.clusters.length>0?t.results.clusters.flatMap(e=>e.citations):(null==(a=t.results)?void 0:a.citations)?t.results.citations.filter(e=>!V(e)):[]});const P=e=>{let a=0;e.canonical_name&&"N/A"!==e.canonical_name&&(a+=2);const t=e.canonical_name,i=e.extracted_case_name;return t&&"N/A"!==t&&i&&"N/A"!==i&&Q(t,i)&&(a+=1),e.canonical_date&&"N/A"!==e.canonical_date&&(a+=1),e.url&&""!==e.url&&(a+=1),a},F=v(()=>{var e,a;if((null==(e=t.results)?void 0:e.clusters)&&t.results.clusters.length>0){return t.results.clusters.filter(e=>e.citations.some(e=>P(e)<4))}if(null==(a=t.results)?void 0:a.citations){const e=t.results.citations.filter(e=>P(e)<4),a={};e.forEach(e=>{const t=`${e.extracted_case_name||"N/A"}||${e.extracted_date||"N/A"}`;a[t]||(a[t]=[]),a[t].push(e)});return Object.values(a).map(e=>({citations:e}))}return[]}),M=v(()=>{var e,a;if((null==(e=t.results)?void 0:e.clusters)&&t.results.clusters.length>0)return E.value.flatMap(e=>e.citations);if(!(null==(a=t.results)?void 0:a.citations))return[];let i=t.results.citations;if(i=i.filter(e=>!V(e)),"verified"===b.value?i=i.filter(e=>"true"===e.verified||!0===e.verified):"invalid"===b.value&&(i=i.filter(e=>"false"===e.verified||!1===e.verified)),x.value.trim()){const e=x.value.toLowerCase();i=i.filter(a=>a.citation&&a.citation.toLowerCase().includes(e)||a.canonical_citation&&a.canonical_citation.toLowerCase().includes(e)||a.primary_citation&&a.primary_citation.toLowerCase().includes(e)||$(a)&&$(a).toLowerCase().includes(e))}return i}),V=e=>{const a=(e.citation||e.canonical_citation||e.primary_citation||"").toUpperCase();return!!(a.includes("U.S.C.")||a.includes("USC")||a.includes("C.F.R.")||a.includes("CFR")||a.includes("UNITED STATES CODE")||a.includes("CODE OF FEDERAL REGULATIONS"))||(/\d+\s+U\.?\s*S\.?\s*C\.?\s*[§]?\s*\d+/i.test(a)||/\d+\s+C\.?\s*F\.?\s*R\.?\s*[§]?\s*\d+/i.test(a))},O=v(()=>[{value:"all",label:"All",count:M.value.length},{value:"verified",label:"Verified",count:I.value},{value:"invalid",label:"Invalid",count:N.value}]),$=e=>e.canonical_name||e.extracted_case_name||null,B=e=>e.canonical_name||null,q=e=>{const a=e.extracted_case_name;return a&&"N/A"!==a?a:null},j=e=>e.canonical_date||null,H=e=>{const a=e.extracted_date;return a&&"N/A"!==a?a:null},W=e=>e.citation||e.canonical_citation||e.primary_citation||"N/A",X=e=>e.url||null,Y=e=>e.source||"Unknown",G=e=>e.confidence||e.likelihood_score||"N/A",Z=e=>e.error||e.explanation||null,K=e=>"true"===e.verified||!0===e.verified?"verified":"true_by_parallel"===e.verified||!0===e.true_by_parallel||e.metadata&&!0===e.metadata.true_by_parallel?"true_by_parallel":"unverified",Q=(e,a)=>{if(!e||!a)return!1;if("N/A"===e||"N/A"===a)return!1;const t=e=>e.toLowerCase().replace(/[^\w\s]/g," ").replace(/\s+/g," ").trim(),i=e=>e.toLowerCase().replace(/\bcnty\.?\b/g,"county").replace(/\bco\.?\b/g,"company").replace(/\bcorp\.?\b/g,"corporation").replace(/\binc\.?\b/g,"incorporated").replace(/\bllc\.?\b/g,"limited liability company").replace(/\bltd\.?\b/g,"limited").replace(/\bdept?\.?\b/g,"department").replace(/\bex\s+rel\.?\b/g,"ex rel").replace(/\bv\.?\s+/g,"v ").replace(/\bvs\.?\s+/g,"v ").replace(/[^\w\s]/g," ").replace(/\s+/g," ").trim();if(t(e)===t(a))return!0;const s=i(e),l=i(a);if(s===l)return!0;const n=s.split(" ").filter(e=>e.length>1),r=l.split(" ").filter(e=>e.length>1);return n.filter(e=>r.includes(e)&&e.length>1).length/Math.min(n.length,r.length)>=.5},J=(e,a)=>{if(!e||!a)return!1;const t=e=>{const a=e.match(/\d{4}/);return a?a[0]:null},i=t(e),s=t(a);return i&&s&&i===s},ee=e=>{const a=B(e),t=q(e);return Q(a,t)?"name-similar":"name-different"},ae=e=>{const a=j(e),t=H(e);return J(a,t)?"date-similar":"date-different"},te=v(()=>{if(!t.results)return!0;if(t.results.clusters&&t.results.clusters.length>0){if(t.results.clusters.reduce((e,a)=>e+(a.citations?a.citations.length:0),0)>0)return!1}return!(t.results.citations&&t.results.citations.length>0)&&!(t.results.total_citations&&t.results.total_citations>0)}),ie=v(()=>"text"),se=v(()=>""),le=e=>{if(!e)return null;const a=e.match(/\d{4}/);return a?a[0]:e},ne=()=>{w.value=1};function re(e,a,t){const i=new Set,s=[];for(const l of e){const e=a(l),n=t(l);if(!e&&!n)continue;const r=`${e||""}||${n||""}`;i.has(r)||(i.add(r),s.push({name:e,year:n,citation:l}))}return s}function oe(e){const a=B(e),t=q(e),i=j(e),s=H(e);return(e=>{const a=K(e);return"verified"===a||"true_by_parallel"===a})(e)?a&&t&&!Q(a,t)?"Name mismatch":i&&s&&!J(i,s)?"Date mismatch":"":"Unverified"}function ce(){var e,a;let i=[];return(null==(e=t.results)?void 0:e.clusters)&&t.results.clusters.length>0?t.results.clusters.forEach(e=>{i.push(...e.citations)}):(null==(a=t.results)?void 0:a.citations)&&(i=t.results.citations),i}function de(){const e=ce().map(e=>`${W(e)}\nExtracted Name: ${q(e)||"N/A"}\nCanonical Name: ${B(e)||"N/A"}\nExtracted Date: ${H(e)||"N/A"}\nCanonical Date: ${j(e)||"N/A"}\nStatus: ${K(e)}\nMismatch Reason: ${oe(e)}\nSource: ${Y(e)}\nConfidence: ${G(e)}\nError: ${Z(e)||""}\n---`).join("\n");navigator.clipboard.writeText(e),c("toast",{type:"success",message:"All citation data copied!"})}function ue(){const e=ce().map(e=>({citation:W(e),extracted_name:q(e),canonical_name:B(e),extracted_date:H(e),canonical_date:j(e),status:K(e),mismatch_reason:oe(e),source:Y(e),confidence:G(e),error:Z(e)})),a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),t=URL.createObjectURL(a),i=document.createElement("a");i.href=t,i.download="all_citations.json",i.click(),URL.revokeObjectURL(t),c("toast",{type:"success",message:"All citation data downloaded!"})}function pe(e){const a=new Set,t=[];for(const i of e){const e=W(i);a.has(e)||(a.add(e),t.push(i))}return t}function ve(){c("new-analysis")}return m(b,ne),m(x,ne),(a,i)=>{var c,v,m,w;return e.showLoading?(l(),s("div",Vt,[i[6]||(i[6]=n("div",{class:"loading-spinner"},null,-1)),i[7]||(i[7]=n("p",null,"Processing citations...",-1)),L.value?(l(),A(Mt,{key:0,"elapsed-time":(null==(c=t.results)?void 0:c.elapsedTime)||t.elapsedTime||0,"remaining-time":(null==(v=t.results)?void 0:v.remainingTime)||t.remainingTime||0,"total-progress":(null==(m=t.results)?void 0:m.progress)||t.totalProgress||0,"current-step":(null==(w=t.results)?void 0:w.message)||t.currentStep||"Processing...","current-step-progress":t.currentStepProgress,"processing-steps":t.processingSteps,"citation-info":t.citationInfo,"rate-limit-info":t.rateLimitInfo,error:t.processingError,"can-retry":t.canRetry,timeout:t.timeout},null,8,["elapsed-time","remaining-time","total-progress","current-step","current-step-progress","processing-steps","citation-info","rate-limit-info","error","can-retry","timeout"])):o("",!0)])):e.error?(l(),s("div",Ot,[i[8]||(i[8]=n("div",{class:"error-icon"},"⚠️",-1)),i[9]||(i[9]=n("h3",null,"Error Processing Citations",-1)),n("p",null,u(e.error),1)])):te.value?(l(),s("div",$t,[i[10]||(i[10]=n("img",{src:"/casestrainer/no-results.svg",alt:"No citations found",style:{width:"120px",margin:"20px 0"}},null,-1)),n("p",Bt,"No case citations found in your "+u(ie.value)+".",1),n("a",{href:`mailto:jafrank@uw.edu?subject=CaseStrainer%20feedback&body=I%20submitted%20the%20following%20${ie.value}:%0A${encodeURIComponent(se.value)}%0Aand%20no%20citations%20were%20found.`,class:"btn btn-outline-primary mt-2"}," Report a possible extraction error ",8,qt)])):(l(),s("div",jt,[e.results&&(e.results.clusters||e.results.citations)?(l(),s("div",Ht,[n("div",Wt,[F.value.length>0?(l(),s("div",Xt,[i[14]||(i[14]=n("h3",null,"Citations That Need Attention",-1)),n("div",Yt,[n("button",{class:d(["attention-filter-btn",{active:"all"===S.value}]),onClick:i[0]||(i[0]=e=>S.value="all")},"All",2),n("button",{class:d(["attention-filter-btn",{active:"unverified"===S.value}]),onClick:i[1]||(i[1]=e=>S.value="unverified")},"Unverified",2),n("button",{class:d(["attention-filter-btn",{active:"name"===S.value}]),onClick:i[2]||(i[2]=e=>S.value="name")},"Name Mismatch",2),n("button",{class:d(["attention-filter-btn",{active:"date"===S.value}]),onClick:i[3]||(i[3]=e=>S.value="date")},"Date Mismatch",2)]),n("div",Gt,[(l(!0),s(y,null,h(D.value,e=>(l(),s("div",{key:e.cluster_id||W(e.citations[0]),class:"citation-comparison-card"},[e.citations.every(e=>"unverified"===K(e))&&0===re(e.citations,B,e=>le(j(e))).length&&0===re(e.citations,q,e=>le(H(e))).length?(l(),s(y,{key:0},[n("div",Zt,u(W(e.citations[0])),1),i[11]||(i[11]=r('<div class="citation-row flex-names-row" data-v-94b4b6a2><span class="row-label" data-v-94b4b6a2>Canonical:</span><span style="color:#dc3545;font-weight:bold;" data-v-94b4b6a2>N/A (N/A)</span></div><div class="citation-row flex-names-row" data-v-94b4b6a2><span class="row-label" data-v-94b4b6a2>Extracted:</span><span style="color:#dc3545;font-weight:bold;" data-v-94b4b6a2>N/A (N/A)</span></div>',2))],64)):(l(),s(y,{key:1},[n("div",Kt,[i[12]||(i[12]=n("span",{class:"row-label"},"Verifying Source:",-1)),n("span",null,[B(e.citations[0])&&"N/A"!==B(e.citations[0])?(l(),s(y,{key:0},[p(u(B(e.citations[0]))+" ",1),j(e.citations[0])?(l(),s("span",Qt," ("+u(le(j(e.citations[0])))+")",1)):(l(),s("span",Jt," (N/A)"))],64)):(l(),s(y,{key:1},[p(" N/A (N/A) ")],64))])]),n("div",ei,[i[13]||(i[13]=n("span",{class:"row-label"},"From Document:",-1)),n("span",null,[q(e.citations[0])&&"N/A"!==q(e.citations[0])?(l(),s(y,{key:0},[p(u(q(e.citations[0]))+" ",1),H(e.citations[0])?(l(),s("span",ai," ("+u(le(H(e.citations[0])))+")",1)):(l(),s("span",ti," (N/A)"))],64)):(l(),s(y,{key:1},[p(" N/A (N/A) ")],64))])]),n("div",ii,[(l(!0),s(y,null,h(pe(e.citations),(e,a)=>(l(),s("div",{key:a,class:"citation-row-item"},[n("span",si,u(W(e)),1),n("span",{class:d(["verification-badge",K(e)])},["verified"===K(e)?(l(),s(y,{key:0},[p("VERIFIED")],64)):"true_by_parallel"===K(e)?(l(),s(y,{key:1},[p("verified by parallel citation")],64)):(l(),s(y,{key:2},[p("UNVERIFIED")],64))],2)]))),128))])],64))]))),128))])])):(l(),s("div",li,i[15]||(i[15]=[r('<div class="celebration-content" data-v-94b4b6a2><div class="celebration-icon" data-v-94b4b6a2>🎉</div><h3 class="celebration-title" data-v-94b4b6a2>Perfect Score! 🏆</h3><p class="celebration-message" data-v-94b4b6a2>All citations are verified and complete! Great job on your legal research.</p><div class="celebration-stats" data-v-94b4b6a2><span class="stat-badge" data-v-94b4b6a2>✅ All Verified</span><span class="stat-badge" data-v-94b4b6a2>📋 Complete Data</span><span class="stat-badge" data-v-94b4b6a2>🔗 Links Available</span></div></div>',1)])))])])):o("",!0),e.results&&e.results.clusters&&e.results.clusters.length>0?(l(),s("div",ni,[n("div",ri,[n("div",oi,[i[19]||(i[19]=n("h2",null,"Citation Verification Results (Clustered)",-1)),n("div",ci,[n("div",di,[n("span",ui,u(I.value),1),i[16]||(i[16]=n("span",{class:"stat-label"},"Verified",-1))]),n("div",pi,[n("span",vi,u(N.value),1),i[17]||(i[17]=n("span",{class:"stat-label"},"Invalid",-1))]),n("div",mi,[n("span",fi,u(E.value.length),1),i[18]||(i[18]=n("span",{class:"stat-label"},"Clusters",-1))])])]),n("div",{class:"action-buttons"},[n("button",{class:"action-btn new-analysis-btn",onClick:ve}," 🔄 New Analysis "),n("button",{class:"action-btn copy-btn",onClick:de}," Copy Results "),n("button",{class:"action-btn download-btn",onClick:ue}," Download ")])]),n("div",gi,[n("div",bi,[(l(!0),s(y,null,h(O.value,e=>(l(),s("button",{key:e.value,class:d(["filter-btn",{active:b.value===e.value}]),onClick:a=>b.value=e.value},u(e.label)+" ("+u(e.count)+") ",11,yi))),128))]),n("div",hi,[f(n("input",{"onUpdate:modelValue":i[4]||(i[4]=e=>x.value=e),type:"text",placeholder:"Search citations...",class:"search-input"},null,512),[[g,x.value]])])]),n("div",xi,[n("div",wi,[(l(!0),s(y,null,h(E.value,e=>(l(),s("div",{key:e.cluster_id,class:"canonical-only-card"},[n("div",ki,[n("div",Ci,[i[20]||(i[20]=n("span",{class:"canonical-label"},"Verifying Source:",-1)),B(e.citations[0])&&"N/A"!==B(e.citations[0])?(l(),s("span",{key:0,class:d(["canonical-name",ee(e.citations[0])])},[p(u(B(e.citations[0]))+" ",1),j(e.citations[0])?(l(),s("span",{key:0,class:d(["canonical-date",ae(e.citations[0])])}," ("+u(le(j(e.citations[0])))+") ",3)):(l(),s("span",Ai,"(no date)"))],2)):(l(),s("span",zi,"No canonical name"))]),n("div",Si,[i[21]||(i[21]=n("span",{class:"extracted-label"},"From Document:",-1)),q(e.citations[0])&&"N/A"!==q(e.citations[0])?(l(),s("span",{key:0,class:d(["extracted-name",ee(e.citations[0])])},[p(u(q(e.citations[0]))+" ",1),H(e.citations[0])?(l(),s("span",{key:0,class:d(["extracted-date",ae(e.citations[0])])}," ("+u(le(H(e.citations[0])))+") ",3)):(l(),s("span",Ti,"(no date)"))],2)):(l(),s("span",_i,"No extracted name or year"))]),n("div",Ui,[i[22]||(i[22]=n("span",{class:"citations-label"},null,-1)),n("div",Ri,[(l(!0),s(y,null,h(e.citations,(e,a)=>(l(),s("div",{key:a,class:"citation-row-item"},["verified"===K(e)&&X(e)?(l(),s("a",{key:0,href:X(e),target:"_blank",class:"citation-link-verified"},u(W(e)),9,Di)):(l(),s("span",Li,u(W(e)),1)),n("span",{class:d(["verification-badge",K(e)])},u(K(e).replace("_"," ")),3)]))),128))])]),n("div",Ii,[n("button",{onClick:a=>{return t=e.cluster_id,void(k.value.has(t)?k.value.delete(t):k.value.add(t));var t},class:d(["expand-btn",{expanded:k.value.has(e.cluster_id)}])},[n("span",Ei,u(k.value.has(e.cluster_id)?"Hide Details":"Show Details"),1),i[23]||(i[23]=n("span",{class:"expand-icon"},"▼",-1))],10,Ni)])]),k.value.has(e.cluster_id)?(l(),s("div",Pi,[n("div",Fi,[n("div",Mi,[i[27]||(i[27]=n("h4",{class:"detail-section-title"},"Cluster Information",-1)),n("div",Vi,[n("div",Oi,[i[24]||(i[24]=n("span",{class:"detail-label"},"Cluster ID:",-1)),n("span",$i,u(e.cluster_id),1)]),n("div",Bi,[i[25]||(i[25]=n("span",{class:"detail-label"},"Size:",-1)),n("span",qi,u(e.size)+" citation"+u(e.size>1?"s":""),1)]),e.url?(l(),s("div",ji,[i[26]||(i[26]=n("span",{class:"detail-label"},"CourtListener URL:",-1)),n("a",{href:e.url,target:"_blank",class:"detail-link"},"View on CourtListener",8,Hi)])):o("",!0)])]),n("div",Wi,[i[33]||(i[33]=n("h4",{class:"detail-section-title"},"Citation Details",-1)),(l(!0),s(y,null,h(e.citations,(e,a)=>(l(),s("div",{key:a,class:"citation-detail-item"},[n("div",Xi,[n("h5",Yi,u(W(e)),1),n("span",{class:d(["verification-badge",K(e)])},u(K(e).replace("_"," ")),3)]),n("div",Gi,[n("div",Zi,[n("div",Ki,[i[28]||(i[28]=n("span",{class:"detail-label"},"Source:",-1)),n("span",Qi,u(Y(e)),1)]),n("div",Ji,[i[29]||(i[29]=n("span",{class:"detail-label"},"Confidence:",-1)),n("span",es,u(G(e)),1)]),n("div",as,[i[30]||(i[30]=n("span",{class:"detail-label"},"Mismatch Reason:",-1)),n("span",ts,u(oe(e)||"None"),1)]),Z(e)?(l(),s("div",is,[i[31]||(i[31]=n("span",{class:"detail-label"},"Error:",-1)),n("span",ss,u(Z(e)),1)])):o("",!0),X(e)?(l(),s("div",ls,[i[32]||(i[32]=n("span",{class:"detail-label"},"URL:",-1)),n("a",{href:X(e),target:"_blank",class:"detail-link"},"View Citation",8,ns)])):o("",!0)])])]))),128))])])])):o("",!0)]))),128))])])])):e.results&&e.results.citations&&e.results.citations.length>0?(l(),s("div",rs,[n("div",os,[n("div",cs,[i[37]||(i[37]=n("h2",null,"Citation Verification Results (Individual)",-1)),n("div",ds,[n("div",us,[n("span",ps,u(I.value),1),i[34]||(i[34]=n("span",{class:"stat-label"},"Verified",-1))]),n("div",vs,[n("span",ms,u(N.value),1),i[35]||(i[35]=n("span",{class:"stat-label"},"Invalid",-1))]),n("div",fs,[n("span",gs,u(M.value.length),1),i[36]||(i[36]=n("span",{class:"stat-label"},"Total",-1))])])]),n("div",{class:"action-buttons"},[n("button",{class:"action-btn copy-btn",onClick:de}," Copy Results "),n("button",{class:"action-btn download-btn",onClick:ue}," Download ")])]),n("div",bs,[n("div",ys,[(l(!0),s(y,null,h(O.value,e=>(l(),s("button",{key:e.value,class:d(["filter-btn",{active:b.value===e.value}]),onClick:a=>b.value=e.value},u(e.label)+" ("+u(e.count)+") ",11,hs))),128))]),n("div",xs,[f(n("input",{"onUpdate:modelValue":i[5]||(i[5]=e=>x.value=e),type:"text",placeholder:"Search citations...",class:"search-input"},null,512),[[g,x.value]])])]),n("div",ws,[(l(!0),s(y,null,h(M.value,e=>(l(),s("div",{key:W(e),class:"citation-item individual"},[n("div",ks,[i[38]||(i[38]=n("span",{class:"row-label"},"Verifying Source:",-1)),n("span",null,[B(e)&&"N/A"!==B(e)?(l(),s("span",Cs,[p(u(B(e))+" ",1),j(e)?(l(),s("span",{key:0,class:d(["canonical-date",ae(e)])}," ("+u(le(j(e)))+") ",3)):(l(),s("span",As,"(no date)"))])):(l(),s("span",zs,"No canonical name"))])]),n("div",Ss,[i[39]||(i[39]=n("span",{class:"row-label"},"From Document:",-1)),n("span",null,[q(e)&&"N/A"!==q(e)?(l(),s("span",Ts,[p(u(q(e))+" ",1),H(e)?(l(),s("span",{key:0,class:d(["extracted-date",ae(e)])}," ("+u(le(H(e)))+") ",3)):(l(),s("span",_s,"(no date)"))])):(l(),s("span",Us,"No extracted name or year"))])]),n("div",Rs,[n("span",Ds,u(W(e)),1),n("span",{class:d(["verification-badge",K(e)])},u(K(e)),3)]),n("div",Ls,[i[40]||(i[40]=n("span",{class:"detail-label"},"Mismatch Reason:",-1)),i[41]||(i[41]=p()),n("span",null,u(oe(e)),1)])]))),128))])])):(l(),s("div",Is,i[42]||(i[42]=[n("p",null,"No citation results to display.",-1)])))]))}}},Es={class:"enhanced-validator"},Ps={class:"header text-center mb-4"},Fs={class:"results-title"},Ms={key:0,class:"loading-container"},Vs={class:"loading-content"},Os={class:"spinner-container"},$s={class:"custom-spinner",role:"status",ref:"spinnerElement"},Bs={class:"spinner-circle",ref:"spinnerCircle"},qs={class:"loading-info"},js={class:"progress-indicator"},Hs={class:"progress-bar"},Ws={class:"progress-text"},Xs={key:1,class:"error-container"},Ys={class:"error-content"},Gs={key:2,class:"main-content-wrapper"},Zs={key:0,class:"input-section"},Ks={key:1,class:"results-section"};const Qs=e({name:"EnhancedValidator",components:{UnifiedInput:tt,CitationResults:e(Ns,[["__scopeId","data-v-94b4b6a2"]])},setup(){const e=i(null),s=i(null),l=i(!1),n=i(!1);m(e,e=>{});const r=v(()=>l.value||n.value||a.progressState.isActive),o=v(()=>!e.value&&!s.value&&!r.value),c=v(()=>e.value?"Citation Verification Results":"Citation Verification");return{results:e,error:s,simpleLoading:l,hasActiveRequest:n,showLoading:r,shouldShowInput:o,headerTitle:c,handleUnifiedAnalyze:async i=>{try{let o;l.value=!0,n.value=!0,s.value=null,a.startProgress("document",{});let c=new FormData,d="";d="/analyze",i instanceof FormData?c=i:"text"===i.type?(c.append("text",i.text),c.append("type","text")):"url"===i.type&&(c.append("url",i.url),c.append("type","url"));try{o=await t.post(d,c,{timeout:3e5,headers:{}})}catch(r){if("ECONNABORTED"===r.code)throw new Error("Request timed out. The server is taking too long to respond.");throw r}if(o.status>=400){const e=o.data||{};throw new Error(e.message||`Server returned ${o.status}: ${o.statusText}`)}const u=o.data;u.result?e.value=u.result:e.value=u}catch(o){s.value=o.message||"An error occurred while processing your request",a.setError(o.message||"An error occurred while processing your request")}finally{l.value=!1,n.value=!1}},copyResults:()=>{},downloadResults:()=>{},showToast:e=>{},startNewAnalysis:()=>{e.value=null,s.value=null}}}},[["render",function(e,a,t,i,r,c){const d=_("UnifiedInput"),p=_("CitationResults");return l(),s("div",Es,[n("div",Ps,[n("h1",Fs,u(i.headerTitle),1)]),i.showLoading&&!i.results?(l(),s("div",Ms,[n("div",Vs,[n("div",Os,[n("div",$s,[n("div",Bs,null,512),a[0]||(a[0]=n("span",{class:"visually-hidden"},"Processing...",-1))],512)]),a[2]||(a[2]=n("h3",null,"Processing Citations",-1)),a[3]||(a[3]=n("p",{class:"text-muted"},"Extracting and analyzing citations from your document...",-1)),n("div",qs,[a[1]||(a[1]=n("p",{class:"timeout-info"},"This may take up to 30 seconds. Please don't close this page.",-1)),n("div",js,[n("div",Hs,[n("div",{class:"progress-fill",style:S({width:e.globalProgress.progressState.percentage+"%"})},null,4)]),n("span",Ws,u(e.globalProgress.progressState.statusText),1)])])])])):i.error&&!i.showLoading?(l(),s("div",Xs,[n("div",Ys,[a[4]||(a[4]=n("div",{class:"error-icon"},[n("i",{class:"bi bi-exclamation-triangle"})],-1)),a[5]||(a[5]=n("h3",null,"Analysis Failed",-1)),n("p",null,u(i.error),1)])])):(l(),s("div",Gs,[i.shouldShowInput?(l(),s("div",Zs,[T(d,{isAnalyzing:i.showLoading,onAnalyze:i.handleUnifiedAnalyze},null,8,["isAnalyzing","onAnalyze"])])):o("",!0),i.results?(l(),s("div",Ks,[T(p,{results:i.results,"show-loading":i.showLoading,error:i.error,onCopyResults:i.copyResults,onDownloadResults:i.downloadResults,onToast:i.showToast,onNewAnalysis:i.startNewAnalysis},null,8,["results","show-loading","error","onCopyResults","onDownloadResults","onToast","onNewAnalysis"])])):o("",!0)]))])}],["__scopeId","data-v-ca663e11"]]);export{Qs as default};
